CKEDITOR['dialog']['add']('smiley',function(f){for(var e=f['config'],a=f['lang']['smiley'],h=e['smiley_images'],g=e['smiley_columns']||0x8,i,k=function(j){var c=j['data']['getTarget'](),b=c['getName']();if('a'==b)c=c['getChild'](0x0);else{if('img'!=b)return;}var b=c['getAttribute']('cke_src'),a=c['getAttribute']('title'),c=f['document']['createElement']('img',{'attributes':{'src':b,'data-cke-saved-src':b,'title':a,'alt':a,'width':c['$']['width'],'height':c['$']['height']}});f['insertElement'](c),i['hide'](),j['data']['preventDefault']();},n=CKEDITOR['tools']['addFunction'](function(a,c){var a=new CKEDITOR['dom']['event'](a),c=new CKEDITOR['dom']['element'](c),b;b=a['getKeystroke']();var d='rtl'==f['lang']['dir'];switch(b){case 0x26:if(b=c['getParent']()['getParent']()['getPrevious']())b=b['getChild']([c['getParent']()['getIndex'](),0x0]),b['focus']();a['preventDefault']();break;case 0x28:if(b=c['getParent']()['getParent']()['getNext']())(b=b['getChild']([c['getParent']()['getIndex'](),0x0]))&&b['focus']();a['preventDefault']();break;case 0x20:k({'data':a}),a['preventDefault']();break;case d?0x25:0x27:if(b=c['getParent']()['getNext']())b=b['getChild'](0x0),b['focus'](),a['preventDefault'](!0x0);else{if(b=c['getParent']()['getParent']()['getNext']())(b=b['getChild']([0x0,0x0]))&&b['focus'](),a['preventDefault'](!0x0);}break;case d?0x27:0x25:if(b=c['getParent']()['getPrevious']())b=b['getChild'](0x0),b['focus'](),a['preventDefault'](!0x0);else{if(b=c['getParent']()['getParent']()['getPrevious']())b=b['getLast']()['getChild'](0x0),b['focus'](),a['preventDefault'](!0x0);}}}),d=CKEDITOR['tools']['getNextId']()+'_smiley_emtions_label',d=['<div><span\x20id=\x22'+d+'\x22\x20class=\x22cke_voice_label\x22>'+a['options']+'</span>','<table\x20role=\x22listbox\x22\x20aria-labelledby=\x22'+d+'\x22\x20style=\x22width:100%;height:100%;border-collapse:separate;\x22\x20cellspacing=\x222\x22\x20cellpadding=\x222\x22',CKEDITOR['env']['ie']&&CKEDITOR['env']['quirks']?'\x20style=\x22position:absolute;\x22':'','><tbody>'],l=h['length'],a=0x0;a<l;a++){0x0===a%g&&d['push']('<tr\x20role=\x22presentation\x22>');var m='cke_smile_label_'+a+'_'+CKEDITOR['tools']['getNextNumber']();d['push']('<td\x20class=\x22cke_dark_background\x20cke_centered\x22\x20style=\x22vertical-align:\x20middle;\x22\x20role=\x22presentation\x22><a\x20href=\x22javascript:void(0)\x22\x20role=\x22option\x22','\x20aria-posinset=\x22'+(a+0x1)+'\x22','\x20aria-setsize=\x22'+l+'\x22','\x20aria-labelledby=\x22'+m+'\x22','\x20class=\x22cke_smile\x20cke_hand\x22\x20tabindex=\x22-1\x22\x20onkeydown=\x22CKEDITOR.tools.callFunction(\x20',n,',\x20event,\x20this\x20);\x22>','<img\x20class=\x22cke_hand\x22\x20title=\x22',e['smiley_descriptions'][a],'\x22\x20cke_src=\x22',CKEDITOR['tools']['htmlEncode'](e['smiley_path']+h[a]),'\x22\x20alt=\x22',e['smiley_descriptions'][a],'\x22','\x20src=\x22',CKEDITOR['tools']['htmlEncode'](e['smiley_path']+h[a]),'\x22',CKEDITOR['env']['ie']?'\x20onload=\x22this.setAttribute(\x27width\x27,\x202);\x20this.removeAttribute(\x27width\x27);\x22\x20':'','><span\x20id=\x22'+m+'\x22\x20class=\x22cke_voice_label\x22>'+e['smiley_descriptions'][a]+'</span></a>','</td>'),a%g==g-0x1&&d['push']('</tr>');}if(a<g-0x1){for(;a<g-0x1;a++)d['push']('<td></td>');d['push']('</tr>');}return d['push']('</tbody></table></div>'),e={'type':'html','id':'smileySelector','html':d['join'](''),'onLoad':function(a){i=a['sender'];},'focus':function(){var a=this;setTimeout(function(){a['getElement']()['getElementsByTag']('a')['getItem'](0x0)['focus']();},0x0);},'onClick':k,'style':'width:\x20100%;\x20border-collapse:\x20separate;'},{'title':f['lang']['smiley']['title'],'minWidth':0x10e,'minHeight':0x78,'contents':[{'id':'tab1','label':'','title':'','expand':!0x0,'padding':0x0,'elements':[e]}],'buttons':[CKEDITOR['dialog']['cancelButton']]};});