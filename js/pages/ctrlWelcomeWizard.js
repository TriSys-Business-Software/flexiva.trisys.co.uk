var ctrlWelcomeWizard={'Load':function(){ctrlWelcomeWizard['Title']=$('#trisys-modal-title')['html'](),ctrlWelcomeWizard['ShowStage'](ctrlWelcomeWizard['CurrentStage']),ctrlWelcomeWizard['LoadPlugIns'](),setTimeout(TriSysProUI['kendoUI_Overrides'],0xfa),ctrlWelcomeWizard['LoadDefaultUserSettings'](),TriSysApex['FormsManager']['CloseAllForms'](!![]),TriSysApex['Cache']['UserSettingManager']['SetValue']('RetainFormInMemory',![]);},'LoadPlugIns':function(){var sDivID='welcome-wizard-plugins',sPath='forms/PlugIns.html';TriSysApex['FormsManager']['loadPageIntoDiv'](sDivID,sPath,function(response,status,xhr){$('#trisys-plugsins-form-content-header')['hide']();});},'LoadDefaultUserSettings':function(){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials&&userCredentials['LoggedInUser']){var user=userCredentials['LoggedInUser'],contact=user['Contact'],sEMail=user['FullName'],sInitials=contact['Forenames']['substring'](0x0,0x1)+contact['SurnameInitial'];$('#welcome-wizard-requirement-prefix')['val'](sInitials+'/Req'),$('#welcome-wizard-placement-prefix')['val'](sInitials+'/Pla');var sSMTPServerAddress=TriSysApex['Cache']['UserSettingManager']['GetValue']('SMTPServerAddress',null);if(!sSMTPServerAddress)sSMTPServerAddress='smtp.gmail.com';$('#welcome-wizard-smtp-server-address')['val'](sSMTPServerAddress),$('#welcome-wizard-smtp-server-login')['val'](TriSysApex['Cache']['UserSettingManager']['GetValue']('SMTPServerLogin',null)),$('#welcome-wizard-smtp-server-password')['val'](TriSysApex['Cache']['UserSettingManager']['GetValue']('SMTPServerPassword',null)),TriSysApex['Cache']['UserSettingManager']['GetValue']('RequirementReferencePrefix',null)&&(TriSysApex['Cache']['UserSettingManager']['GetValue']('RequirementReferencePrefix')['indexOf']('GL/')!=0x0&&($('#welcome-wizard-requirement-prefix')['val'](TriSysApex['Cache']['UserSettingManager']['GetValue']('RequirementReferencePrefix')),$('#welcome-wizard-placement-prefix')['val'](TriSysApex['Cache']['UserSettingManager']['GetValue']('PlacementReferencePrefix')))),$('#welcome-wizard-buffer')['val'](TriSysApex['Cache']['UserSettingManager']['GetValue']('BufferEMail')),$('#welcome-wizard-twitter')['val'](TriSysApex['Cache']['UserSettingManager']['GetValue']('TwitterURL')),$('#welcome-wizard-facebook')['val'](TriSysApex['Cache']['UserSettingManager']['GetValue']('FacebookURL')),$('#welcome-wizard-linkedin')['val'](TriSysApex['Cache']['UserSettingManager']['GetValue']('LinkedInURL')),TriSysWebJobs['CandidateRegistration']['LoadContactPhotoWidgets']('EditContactPhoto','imgEditContactEditor'),TriSysWebJobs['CandidateRegistration']['LoadContactPhotoWidgets']('EditCompanyLogo','imgEditCompanyEditor'),ctrlWelcomeWizard['DisplayContactProfile'](contact),ctrlWelcomeWizard['GetContactProfileViaWebAPI']();}},'GetContactProfileViaWebAPI':function(){var payloadObject={};payloadObject['URL']='Contact/ReadLoggedInUserContactProfile',payloadObject['InboundDataFunction']=function(CCUserContactProfile){if(CCUserContactProfile){if(CCUserContactProfile['Success'])ctrlWelcomeWizard['DisplayContactProfile'](CCUserContactProfile['Contact'],CCUserContactProfile);else TriSysApex['UI']['errorAlert']('ctrlWelcomeWizard.GetContactProfileViaWebAPI\x20Error:\x20'+CCUserContactProfile['ErrorMessage']);return;}TriSysApex['UI']['ShowError']('ctrlWelcomeWizard.GetContactProfileViaWebAPI\x20Error:\x20null\x20response');},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('ctrlWelcomeWizard.GetContactProfileViaWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'DisplayContactProfile':function(contact,CCUserContactProfile){$('#welcome-wizard-job-title')['val'](contact['JobTitle']),$('#welcome-wizard-work-telno')['val'](contact['WorkTelNo']),$('#welcome-wizard-work-mobile-telno')['val'](contact['WorkMobileTelNo']),$('#welcome-wizard-skype')['val'](contact['SkypeNumber']);if(contact['ContactPhoto']){TriSysSDK['Controls']['FileReference']['SetFile']('EditContactPhoto',contact['ContactPhoto']);var photoWidget=$('#imgEditContactEditor');photoWidget['attr']('src',contact['ContactPhotoURL']),photoWidget['show']();}if(CCUserContactProfile){$('#welcome-wizard-switchboard-telno')['val'](CCUserContactProfile['CompanySwitchboardTelNo']),$('#welcome-wizard-homepage')['val'](CCUserContactProfile['CompanyWebSite']),$('#welcome-wizard-company-email')['val'](CCUserContactProfile['CompanyEMail']);if(CCUserContactProfile['CompanyLogoURL']){TriSysSDK['Controls']['FileReference']['SetFile']('EditCompanyLogo',CCUserContactProfile['CompanyLogo']);var logoWidget=$('#imgEditCompanyEditor');logoWidget['attr']('src',CCUserContactProfile['CompanyLogoURL']),logoWidget['show']();}}},'Title':null,'ShowHideWizardButtons':function(iStage){var bPrevious=!![],bNext=!![],bFinish=![];if(iStage==0x1)bPrevious=![];else iStage==ctrlWelcomeWizard['StageCount']&&(bNext=![],bFinish=!![]);ctrlWelcomeWizard['PreviousButtonVisible'](bPrevious),ctrlWelcomeWizard['NextButtonVisible'](bNext),ctrlWelcomeWizard['FinishButtonVisible'](bFinish);var sTitle=ctrlWelcomeWizard['Title']+':\x20Step\x20'+iStage+'\x20of\x20'+ctrlWelcomeWizard['StageCount'];$('#trisys-modal-title')['html'](sTitle);},'PreviousButtonVisible':function(bVisible){ctrlWelcomeWizard['ButtonVisible']('trisys-modal-success',bVisible);},'NextButtonVisible':function(bVisible){ctrlWelcomeWizard['ButtonVisible']('trisys-modal-warning',bVisible);},'FinishButtonVisible':function(bVisible){ctrlWelcomeWizard['ButtonVisible']('trisys-modal-primary',bVisible);},'ButtonVisible':function(sID,bVisible){var elem=$('#'+sID);if(bVisible)elem['attr']('disabled',![]);else elem['attr']('disabled',!![]);},'StageCount':0x8,'ShowStage':function(iStage){var wizardStagePrefix='#welcome-wizard-stage-';for(var i=0x1;i<=ctrlWelcomeWizard['StageCount'];i++){var elemHide=$(wizardStagePrefix+i);elemHide['hide']();}var elem=$(wizardStagePrefix+iStage);elem['show'](),ctrlWelcomeWizard['ShowHideWizardButtons'](iStage),elem['find']('i')['css']('color',TriSysProUI['BackColour']());},'CurrentStage':0x1,'Previous':function(){if(ctrlWelcomeWizard['CurrentStage']==0x1)return;ctrlWelcomeWizard['CurrentStage']-=0x1,ctrlWelcomeWizard['ShowStage'](ctrlWelcomeWizard['CurrentStage']);},'Next':function(){if(ctrlWelcomeWizard['CurrentStage']==ctrlWelcomeWizard['StageCount'])return;if(!ctrlWelcomeWizard['ValidateCurrentStage']())return;ctrlWelcomeWizard['CurrentStage']+=0x1,ctrlWelcomeWizard['ShowStage'](ctrlWelcomeWizard['CurrentStage']);},'ValidateCurrentStage':function(){var sError='';switch(ctrlWelcomeWizard['CurrentStage']){case 0x2:var sContactPhoto=TriSysSDK['Controls']['FileReference']['GetFile']('EditContactPhoto'),sJobTitle=$('#welcome-wizard-job-title')['val'](),sWorkTelNo=$('#welcome-wizard-work-telno')['val'](),sWorkMobileTelNo=$('#welcome-wizard-work-mobile-telno')['val'](),sSkypeNumber=$('#welcome-wizard-skype')['val']();if(!sSkypeNumber)sSkypeNumber='?';if(!sContactPhoto)sError+='Please\x20choose\x20a\x20photo\x20or\x20avatar\x20of\x20yourself\x20for\x20e-mail\x20signatures\x20and\x20your\x20online\x20client/candidate\x20portals.<br\x20/>';if(!sJobTitle)sError+='Please\x20assign\x20yourself\x20a\x20job\x20title.<br\x20/>';if(!sWorkTelNo)sError+='Please\x20specify\x20a\x20work\x20phone\x20number.<br\x20/>';if(!sWorkMobileTelNo)sError+='Please\x20specify\x20a\x20work\x20mobile\x20so\x20that\x20candidates,\x20clients\x20and\x20our\x20technical\x20support\x20can\x20contact\x20you.<br\x20/>';if(!sSkypeNumber)sError+='Please\x20enter\x20your\x20skype\x20handle\x20so\x20that\x20you\x20can\x20send\x20SMS\x20text\x20messages.<br\x20/>';break;case 0x3:var sCompanyLogo=TriSysSDK['Controls']['FileReference']['GetFile']('EditCompanyLogo'),sCompanySwitchboardTelNo=$('#welcome-wizard-switchboard-telno')['val'](),sCompanyWebSite=$('#welcome-wizard-homepage')['val'](),sCompanyEMail=$('#welcome-wizard-company-email')['val']();if(!sCompanyLogo)sError+='Please\x20choose\x20a\x20logo\x20or\x20avatar\x20of\x20your\x20company\x20for\x20e-mail\x20signatures\x20and\x20web\x20jobs\x20vacancies.<br\x20/>';if(!sCompanySwitchboardTelNo)sError+='Please\x20specify\x20your\x20company\x20main\x20switchboard\x20phone\x20number.<br\x20/>';if(!sCompanyWebSite)sError+='Please\x20specify\x20your\x20company\x20website\x20URL.<br\x20/>';if(!sCompanyEMail)sError+='Please\x20specify\x20your\x20company\x20e-mail\x20address.<br\x20/>';break;case 0x4:var sReqPrefix=$('#welcome-wizard-requirement-prefix')['val'](),sPlacPrefix=$('#welcome-wizard-placement-prefix')['val']();if(!sReqPrefix)sError+='Please\x20specify\x20a\x20requirement\x20prefix\x20to\x20easily\x20identify\x20your\x20vacancies\x20on\x20social\x20media.<br\x20/>';if(!sPlacPrefix)sError+='Please\x20specify\x20a\x20placement\x20prefix\x20to\x20easily\x20identify\x20your\x20own\x20placements\x20for\x20candidates\x20using\x20WebJobs.<br\x20/>';break;case 0x5:var sSMTPServer=$('#welcome-wizard-smtp-server-address')['val'](),sSMTPLogin=$('#welcome-wizard-smtp-server-login')['val'](),sSMTPPassword=$('#welcome-wizard-smtp-server-password')['val']();if(!sSMTPServer)sError+='Please\x20specify\x20an\x20SMTP\x20server\x20address\x20to\x20send\x20your\x20own\x20automated\x20e-mails.<br\x20/>';if(!sSMTPLogin)sError+='Please\x20specify\x20an\x20SMTP\x20login\x20name\x20to\x20authenticate\x20you\x20to\x20send\x20automated\x20e-mail.<br\x20/>';if(!sSMTPPassword)sError+='Please\x20specify\x20an\x20SMTP\x20password\x20to\x20authenticate\x20you\x20to\x20send\x20automated\x20e-mail.<br\x20/>';break;case 0x6:var sBuffer=$('#welcome-wizard-buffer')['val'](),sTwitter=$('#welcome-wizard-twitter')['val'](),sFacebook=$('#welcome-wizard-facebook')['val'](),sLinkedIn=$('#welcome-wizard-linkedin')['val']();if(!sBuffer)sBuffer='?';if(!sTwitter)sTwitter='?';if(!sFacebook)sFacebook='?';if(!sLinkedIn)sLinkedIn='?';if(!sBuffer)sError+='Please\x20specify\x20your\x20buffer\x20assigned\x20e-mail\x20address\x20so\x20that\x20you\x20can\x20post\x20to\x20social\x20networks.<br\x20/>';if(!sTwitter)sError+='Please\x20specify\x20your\x20twitter\x20feed\x20URL\x20where\x20you\x20will\x20be\x20redirected\x20after\x20posting\x20jobs.<br\x20/>';if(!sFacebook)sError+='Please\x20specify\x20your\x20facebook\x20page\x20URL\x20where\x20you\x20will\x20be\x20redirected\x20after\x20posting\x20jobs.<br\x20/>';if(!sLinkedIn)sError+='Please\x20specify\x20your\x20linkedin\x20company\x20page\x20where\x20you\x20will\x20be\x20redirected\x20after\x20posting\x20jobs.<br\x20/>';break;};if(sError['length']>0x0)return TriSysApex['UI']['ShowMessage'](sError),![];return!![];},'Submit':function(){var sContactPhoto=TriSysSDK['Controls']['FileReference']['GetFile']('EditContactPhoto'),sCompanyLogo=TriSysSDK['Controls']['FileReference']['GetFile']('EditCompanyLogo'),sJobTitle=$('#welcome-wizard-job-title')['val'](),sWorkTelNo=$('#welcome-wizard-work-telno')['val'](),sWorkMobileTelNo=$('#welcome-wizard-work-mobile-telno')['val'](),sSkypeNumber=$('#welcome-wizard-skype')['val'](),sCompanySwitchboardTelNo=$('#welcome-wizard-switchboard-telno')['val'](),sCompanyWebSite=$('#welcome-wizard-homepage')['val'](),sCompanyEMail=$('#welcome-wizard-company-email')['val'](),sSMTPServer=$('#welcome-wizard-smtp-server-address')['val'](),sSMTPLogin=$('#welcome-wizard-smtp-server-login')['val'](),sSMTPPassword=$('#welcome-wizard-smtp-server-password')['val']();if(sContactPhoto){var sFilePath=$('#imgEditContactEditor')['attr']('src');TriSysApex['Pages']['Index']['ShowLoggedInAvatar'](sFilePath);}var CWriteUserContactProfileRequest={'ContactPhoto':sContactPhoto,'CompanyLogo':sCompanyLogo,'JobTitle':sJobTitle,'WorkTelNo':sWorkTelNo,'WorkMobileTelNo':sWorkMobileTelNo,'SkypeNumber':sSkypeNumber,'CompanySwitchboardTelNo':sCompanySwitchboardTelNo,'CompanyWebSite':sCompanyWebSite,'CompanyEMail':sCompanyEMail,'SMTPServer':sSMTPServer,'SMTPLogin':sSMTPLogin,'SMTPPassword':sSMTPPassword};ctrlWelcomeWizard['UpdateContactProfileViaWebAPI'](CWriteUserContactProfileRequest);var userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials&&userCredentials['LoggedInUser']){var user=userCredentials['LoggedInUser'],contact=user['Contact'],sSetting=null;sSetting=$('#welcome-wizard-requirement-prefix')['val']();if(sSetting!=TriSysApex['Cache']['UserSettingManager']['GetValue']('RequirementReferencePrefix'))TriSysApex['Cache']['UserSettingManager']['SetValue']('RequirementReferencePrefix',sSetting);sSetting=$('#welcome-wizard-placement-prefix')['val'](),sSetting!=TriSysApex['Cache']['UserSettingManager']['GetValue']('PlacementReferencePrefix')&&TriSysApex['Cache']['UserSettingManager']['SetValue']('PlacementReferencePrefix',sSetting),sSetting=$('#welcome-wizard-smtp-server-address')['val'](),sSetting!=TriSysApex['Cache']['UserSettingManager']['GetValue']('SMTPServerAddress')&&TriSysApex['Cache']['UserSettingManager']['SetValue']('SMTPServerAddress',sSetting),sSetting=$('#welcome-wizard-smtp-server-login')['val'](),sSetting!=TriSysApex['Cache']['UserSettingManager']['GetValue']('SMTPServerLogin')&&TriSysApex['Cache']['UserSettingManager']['SetValue']('SMTPServerLogin',sSetting),sSetting=$('#welcome-wizard-smtp-server-password')['val'](),sSetting!=TriSysApex['Cache']['UserSettingManager']['GetValue']('SMTPServerPassword')&&TriSysApex['Cache']['UserSettingManager']['SetValue']('SMTPServerPassword',sSetting),sSetting=$('#welcome-wizard-buffer')['val'](),sSetting!=TriSysApex['Cache']['UserSettingManager']['GetValue']('BufferEMail')&&TriSysApex['Cache']['UserSettingManager']['SetValue']('BufferEMail',sSetting),sSetting=$('#welcome-wizard-twitter')['val'](),sSetting!=TriSysApex['Cache']['UserSettingManager']['GetValue']('TwitterURL')&&TriSysApex['Cache']['UserSettingManager']['SetValue']('TwitterURL',sSetting),sSetting=$('#welcome-wizard-facebook')['val'](),sSetting!=TriSysApex['Cache']['UserSettingManager']['GetValue']('FacebookURL')&&TriSysApex['Cache']['UserSettingManager']['SetValue']('FacebookURL',sSetting),sSetting=$('#welcome-wizard-linkedin')['val'](),sSetting!=TriSysApex['Cache']['UserSettingManager']['GetValue']('LinkedInURL')&&TriSysApex['Cache']['UserSettingManager']['SetValue']('LinkedInURL',sSetting);}return!![];},'UpdateContactProfileViaWebAPI':function(CWriteUserContactProfileRequest){var payloadObject={};payloadObject['URL']='Contact/WriteLoggedInUserContactProfile',payloadObject['OutboundDataPacket']=CWriteUserContactProfileRequest,payloadObject['InboundDataFunction']=function(CWriteUserContactProfileResponse){if(CWriteUserContactProfileResponse){if(CWriteUserContactProfileResponse['Success']){if(CWriteUserContactProfileResponse['PhotoURL']){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials'](),user=TriSysApex['Cache']['UsersManager']['UserFromId'](userCredentials['LoggedInUser']['UserId']);user['Photo']=CWriteUserContactProfileResponse['PhotoURL'];}}else TriSysApex['UI']['errorAlert']('ctrlWelcomeWizard.UpdateContactProfileViaWebAPI\x20Error:\x20'+CCUserContactProfile['ErrorMessage']);return;}TriSysApex['UI']['ShowError']('ctrlWelcomeWizard.UpdateContactProfileViaWebAPI\x20Error:\x20null\x20response');},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('ctrlWelcomeWizard.UpdateContactProfileViaWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'PostCodelookup':function(){var sPrefix='welcome-wizard-';TriSysSDK['PostCode']['Lookup'](sPrefix+'PostCode',sPrefix+'Street',sPrefix+'City',sPrefix+'County',sPrefix+'Country');}};$(document)['ready'](function(){ctrlWelcomeWizard['Load']();});