var ContactUs={'Load':function(){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials&&userCredentials['LoggedInUser']){var sForenameAndSurname='',sCompanyName='',sFullName='',sWorkTelNo='',contact=userCredentials['LoggedInUser']['Contact'];if(contact)sForenameAndSurname=userCredentials['LoggedInUser']['ForenameAndSurname'],sCompanyName=contact['CompanyName'],sFullName=userCredentials['LoggedInUser']['FullName'],sWorkTelNo=contact['WorkTelNo'];else{var contactCRM=userCredentials['LoggedInUser']['CRMContact'];contactCRM&&(sForenameAndSurname=contactCRM['FullName'],sCompanyName=contactCRM['CompanyName'],sFullName=contactCRM['WorkEMail'],sWorkTelNo=contactCRM['WorkTelNo']);}}$('#txtContactUsName')['val'](sForenameAndSurname),$('#txtContactUsCompany')['val'](sCompanyName),$('#txtContactUsEMail')['val'](sFullName),$('#txtContactUsPhone')['val'](sWorkTelNo);},'SubmitButtonClick':function(){var sName=$('#txtContactUsName')['val'](),sCompany=$('#txtContactUsCompany')['val'](),sEMail=$('#txtContactUsEMail')['val'](),sPhone=$('#txtContactUsPhone')['val'](),sMessage=$('#txtContactUsMessage')['val'](),lstErrors=[];if(!sName)lstErrors['push']({'Message':'Please\x20supply\x20your\x20name.','ID':'#txtContactUsName'});if(!TriSysApex['LoginCredentials']['validateEmail'](sEMail))lstErrors['push']({'Message':'Please\x20supply\x20a\x20valid\x20e-mail\x20address.','ID':'#txtContactUsEMail'});if(!sPhone)lstErrors['push']({'Message':'Please\x20supply\x20a\x20phone\x20number.','ID':'#txtContactUsPhone'});if(!sMessage)lstErrors['push']({'Message':'Please\x20supply\x20a\x20message.','ID':'#txtContactUsMessage'});if(lstErrors['length']>0x0){TriSysApex['TourGuide']['ShowFormErrorsAsATourGuide'](TriSysApex['Copyright']['ShortProductName']+'\x20Contact\x20Us',lstErrors);return;}if(!TriSysPhoneGap['isConnectedToComms'](!![],'contact\x20us'))return![];var fnRedirect=function(){return $('#txtContactUsMessage')['val'](''),!![];};ContactUs['SendToWebAPI'](sName,sCompany,sEMail,sPhone,sMessage,fnRedirect);},'SendToWebAPI':function(sName,sCompany,sEMail,sPhone,sMessage,fnCallback){var parts=sName['split']('\x20'),sForenames=parts[0x0],sSurname=parts['length']>0x1?parts[0x1]:'?';if(parts['length']>0x2)for(var i=0x2;i<parts['length'];i++){var sPart=parts[i];sSurname+='\x20'+sPart;}var CEnquiryRequest={'Fields':[{'Name':'Forename','Value':sForenames},{'Name':'Surname','Value':sSurname},{'Name':'Company','Value':sCompany},{'Name':'EMail','Value':sEMail},{'Name':'WorkTelNo','Value':sPhone},{'Name':'Message','Value':sMessage},{'Name':'EnquiryType','Value':'Apex\x20Contact\x20Us'}],'TemplateName':'trisys-apex-contactus-response.html','TableName':'CallbackWebRequest','TriSysCRM':!![],'WhiteLabelled':TriSysApex['Constants']['WhiteLabelled']},userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials&&userCredentials['LoggedInUser']){var contactCRM=userCredentials['LoggedInUser']['CRMContact'];contactCRM&&contactCRM['ContactId']>0x0&&CEnquiryRequest['Fields']['push']({'Name':'ContactId','Value':contactCRM['ContactId'],'Type':'integer'});}TriSysApex['UI']['ShowWait'](null,'Sending\x20Message...');var payloadObject={};payloadObject['URL']='Enquiry/EnquiryRequest',payloadObject['OutboundDataPacket']=CEnquiryRequest,payloadObject['InboundDataFunction']=function(CEnquiryResponse){return CEnquiryResponse&&(TriSysApex['UI']['HideWait'](),CEnquiryResponse['Success']?TriSysApex['UI']['ShowMessage']('Thank\x20you\x20for\x20contacting\x20us.\x20Your\x20message\x20has\x20been\x20sent\x20to\x20our\x20account\x20management\x20team.',TriSysApex['Copyright']['ShortProductName'],fnCallback):TriSysApex['UI']['ShowMessage'](CEnquiryResponse['ErrorMessage'],TriSysApex['Copyright']['ShortProductName'])),!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('ContactUs.SendToWebAPI:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};$(document)['ready'](function(){ContactUs['Load']();});