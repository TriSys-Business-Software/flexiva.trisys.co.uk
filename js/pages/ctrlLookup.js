var ctrlLookup={'Load':function(){var details=AdminConsole['GetCategoryDisplayAndEditDetails'](AdminConsole['SelectedSkillCategory']);$('#lookup-name-label')['html'](details['NameLabel']),$('#lookup-category')['val'](AdminConsole['SelectedSkillCategory']),ctrlLookup['PopulateFields'](details);},'ChangeBackColour':function(e){var colour=e['value'];$('#lookup-backcolour-td')['css']('background-color',colour);},'ChangeColour':function(e){var colour=e['value'];$('#lookup-colour-td')['css']('color',colour);},'PopulateFields':function(details){var lRecordId=AdminConsole['EditingSkillId'],record=null;if(lRecordId>0x0)var record=details['GetRecord'](lRecordId);!record&&(record={'Name':'','Description':'','Colour':'#FF0000','Male':![],'Married':![]});if(record){var sNameField=record['Name'],sDescription=record['Description'];$('#lookup-name')['val'](sNameField),$('#lookup-description')['val'](sDescription);var iNameWidth=$('#lookup-name')['width']();switch(AdminConsole['SelectedSkillCategory']){case'Contact\x20Priorities':$('#lookup-backcolour-tr')['show'](),$('#lookup-backcolour-td')['css']('background-color',record['Colour']),$('#lookup-backcolour')['kendoColorPicker']({'value':record['Colour'],'buttons':![],'select':ctrlLookup['ChangeBackColour']}),$('.k-selected-color')['css']('width',iNameWidth);break;case'Contact\x20Titles':$('#lookup-contact-title-flags-tr')['show'](),TriSysSDK['CShowForm']['SetCheckBoxValue']('lookup-male',record['Male']==0x1),TriSysSDK['CShowForm']['SetCheckBoxValue']('lookup-female',record['Male']==0x0),TriSysSDK['CShowForm']['SetCheckBoxValue']('lookup-married',record['Married']==0x1),TriSysSDK['CShowForm']['SetCheckBoxValue']('lookup-unmarried',record['Married']==0x0);break;case'Task\x20Types':$('#lookup-colour-tr')['show'](),$('#lookup-colour-td')['css']('color',record['Colour']),$('#lookup-colour')['kendoColorPicker']({'value':record['Colour'],'buttons':![],'select':ctrlLookup['ChangeColour']}),$('.k-selected-color')['css']('width',iNameWidth);var sTaskType=record['Name'];if(sTaskType){var sImage=TriSysSDK['CShowForm']['TaskTypeImageFile'](sTaskType);$('#lookup-image-tr')['show'](),$('#lookup-image')['attr']('src',sImage);}break;}}},'SaveButtonClick':function(){var lRecordId=AdminConsole['EditingSkillId'],details=AdminConsole['GetCategoryDisplayAndEditDetails'](AdminConsole['SelectedSkillCategory']),sNameField=$('#lookup-name')['val'](),sDescription=$('#lookup-description')['val']();if(!sNameField||!sDescription)return TriSysApex['UI']['ShowMessage']('You\x20must\x20enter\x20a\x20'+details['NameLabel']['toLowerCase']()+'\x20value\x20and\x20a\x20description.'),![];var record={};if(lRecordId>0x0)record=details['GetRecord'](lRecordId);if(!record)return;record['Name']=sNameField,record['Description']=sDescription;switch(AdminConsole['SelectedSkillCategory']){case'Contact\x20Priorities':var lBackColour=$('#lookup-backcolour-td')['css']('background-color');record['Colour']=lBackColour;break;case'Contact\x20Titles':var bMale=TriSysSDK['CShowForm']['CheckBoxValue']('lookup-male'),bFemale=TriSysSDK['CShowForm']['CheckBoxValue']('lookup-female'),eGender=0x1;if(bMale==bFemale)eGender=0x2;else{if(bFemale)eGender=0x0;}record['Male']=eGender;var bMarried=TriSysSDK['CShowForm']['CheckBoxValue']('lookup-married'),bUnmarried=TriSysSDK['CShowForm']['CheckBoxValue']('lookup-unmarried'),eMarried=0x1;if(bMarried==bUnmarried)eMarried=0x2;else{if(bUnmarried)eMarried=0x0;}record['Married']=eMarried;break;case'Task\x20Types':var lForeColour=$('#lookup-colour-td')['css']('color');record['Colour']=lForeColour;break;}ctrlLookup['SubmitToWebAPI'](lRecordId,record,AdminConsole['SelectedSkillCategory']);},'SubmitToWebAPI':function(lRecordId,record,sCategory){var CUpdateLookupRequest={'ContactPriority':{},'ContactTitle':{},'Currency':{},'Industry':{},'JobTitle':{},'TaskType':{},'CompanyRelationshipType':{},'ContactRelationshipType':{},'AddressType':{}},sAPIUrl='Lookup/Update';switch(sCategory){case'Contact\x20Priorities':var contactPriority={'ContactPriorityId':lRecordId,'ContactPriority':record['Name']['substring'](0x0,0x1f),'Description':record['Description'],'HTMLColour':record['Colour']};CUpdateLookupRequest['ContactPriority']=contactPriority;break;case'Contact\x20Titles':var contactTitle={'ContactTitleId':lRecordId,'Name':record['Name']['substring'](0x0,0xf),'Description':record['Description'],'Male':record['Male'],'Married':record['Married']};CUpdateLookupRequest['ContactTitle']=contactTitle;break;case'Currencies':var currency={'CurrencyId':lRecordId,'Symbol':record['Name']['substring'](0x0,0x4),'Description':record['Description']};CUpdateLookupRequest['Currency']=currency;break;case'Industries':var industry={'IndustryId':lRecordId,'Name':record['Name']['substring'](0x0,0x31),'Description':record['Description']};CUpdateLookupRequest['Industry']=industry;break;case'Job\x20Titles':var jobTitle={'JobTitleId':lRecordId,'JobTitle':record['Name']['substring'](0x0,0xfe),'Description':record['Description']};CUpdateLookupRequest['JobTitle']=jobTitle;break;case'Task\x20Types':var taskType={'TaskTypeId':lRecordId,'Name':record['Name']['substring'](0x0,0x3f),'Description':record['Description'],'HTMLColour':record['Colour']};CUpdateLookupRequest['TaskType']=taskType;break;case'Company\x20Relationship\x20Types':var companyRelationship={'CompanyRelationshipTypeId':lRecordId,'Name':record['Name']['substring'](0x0,0x64),'Description':record['Description']};CUpdateLookupRequest['CompanyRelationshipType']=companyRelationship;break;case'Contact\x20Relationship\x20Types':var contactRelationship={'ContactRelationshipTypeId':lRecordId,'Name':record['Name']['substring'](0x0,0x10),'Description':record['Description']};CUpdateLookupRequest['ContactRelationshipType']=contactRelationship;break;case'Address\x20Types':var addressType={'AddressTypeId':lRecordId,'Name':record['Name']['substring'](0x0,0x10),'Description':record['Description']};CUpdateLookupRequest['AddressType']=addressType;break;}var payloadObject={};payloadObject['URL']=sAPIUrl,payloadObject['OutboundDataPacket']=CUpdateLookupRequest,payloadObject['InboundDataFunction']=function(CUpdateLookupResponse){TriSysApex['UI']['HideWait']();if(CUpdateLookupResponse){if(CUpdateLookupResponse['Success']){var standingData=CUpdateLookupResponse['StandingData'];if(standingData)TriSysApex['Cache']['SetStandingData'](standingData);AdminConsole['PopulateSkillGrid'](sCategory),TriSysApex['UI']['CloseModalPopup']();return;}else TriSysApex['UI']['ShowMessage'](CUpdateLookupResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlLookup.SubmitToWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Saving\x20'+sCategory+'...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};$(document)['ready'](function(){ctrlLookup['Load']();});