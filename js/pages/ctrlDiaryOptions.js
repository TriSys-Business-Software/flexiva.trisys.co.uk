var ctrlDiaryOptions={'UserGridID':'ctrlDiaryOptions-UserGrid','Load':function(){TriSysSDK['FormMenus']['DrawGridMenu']('ctrlDiaryOptions-User-GridMenu',ctrlDiaryOptions['UserGridID']),ctrlDiaryOptions['PopulateUserGrid'](),setTimeout(TriSysProUI['kendoUI_Overrides'],0x1f4),TriSysSDK['CShowForm']['HTMLFieldsCodeInjection'](),TriSysApex['UserOptions']['ReadLoggedInUserSetting']('TaskList.ShowClearedTasks',ctrlDiaryOptions['ReadShowClearedTasksSettingCallback']),TriSysApex['UserOptions']['ReadLoggedInUserSetting']('DiaryManager_AgendaMaximumDays',ctrlDiaryOptions['ReadAgendaMaximumDaysSettingCallback']);},'PopulateUserGrid':function(){var fnPopulationByFunction={'API':'Users/List','Parameters':function(request){request['DiaryManagerUsers']=!![];},'DataTableFunction':function(response){return setTimeout(ctrlDiaryOptions['SelectUsersInGrid'],0x64),response['List'];}};ctrlDiaryOptions['PopulateUserGridFromFunction'](fnPopulationByFunction);},'PopulateUserGridFromFunction':function(fnPopulationByFunction){var sGridName=ctrlDiaryOptions['UserGridID']+'-GridInstance';TriSysSDK['Grid']['VirtualMode']({'Div':ctrlDiaryOptions['UserGridID'],'ID':sGridName,'Title':'Users','RecordsPerPage':0x10,'PopulationByFunction':fnPopulationByFunction,'Columns':[{'field':'UserId','title':'Id','type':'number','width':0x46,'hidden':!![]},{'field':'Name','title':'Name','type':'string'},{'field':'EMail','title':'E-Mail','type':'string'},{'field':'TelNo','title':'Tel.\x20No.','type':'string','hidden':!![]},{'field':'LoggedIn','title':'Logged\x20In','type':'string','hidden':!![]},{'field':'Locked','title':'Locked','type':'string','hidden':!![]}],'KeyColumnName':'UserId','MultiRowSelect':!![],'Grouping':![],'ColumnFilters':!![]});},'SelectUsersInGrid':function(){var bAddCurrentUser=![];if(!TriSysSDK['Scheduler']['Options']['SelectedUserList'])bAddCurrentUser=!![];else bAddCurrentUser=TriSysSDK['Scheduler']['Options']['SelectedUserList']['length']==0x0;if(bAddCurrentUser){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials){var lUserId=userCredentials['LoggedInUser']['UserId'];TriSysSDK['Scheduler']['Options']['SelectedUserList']=[lUserId];}}var sJQueryGridDiv='#'+ctrlDiaryOptions['UserGridID'],grid=$(sJQueryGridDiv)['data']('kendoGrid');if(grid&&grid['dataSource']){var view=grid['dataSource']['view']();for(var i=0x0;i<view['length'];i++){var selectedRow=view[i],lUserId=selectedRow['UserId'],bCheckRow=TriSysSDK['Scheduler']['Options']['SelectedUserList']['indexOf'](lUserId)>=0x0;if(bCheckRow){var row=grid['table']['find']('[data-uid='+view[i]['uid']+']');if(row)grid['select'](row);}}}},'Apply':function(){var bShowClearedTasks=TriSysSDK['CShowForm']['CheckBoxValue']('ctrlDiaryOptions-show-cleared-tasks',![]),iAgendaMaxDays=parseInt(TriSysSDK['CShowForm']['GetValueFromCombo']('ctrlDiaryOptions-agenda-days'));TriSysApex['UserOptions']['WriteSetting'](0x0,{'Name':'TaskList.ShowClearedTasks','FType':'B'},bShowClearedTasks?'True':'False'),TriSysApex['UserOptions']['WriteSetting'](0x0,{'Name':'DiaryManager_AgendaMaximumDays'},iAgendaMaxDays),TriSysSDK['Scheduler']['AgendaViewDayCount']=iAgendaMaxDays,TriSysSDK['Scheduler']['Options']['SelectedUserList']=null;var lstUserId=TriSysSDK['Grid']['GetSelectedMultipleRowsFromGrid'](ctrlDiaryOptions['UserGridID'],'UserId');if(lstUserId)TriSysSDK['Scheduler']['Options']['SelectedUserList']=lstUserId;TriSysApex['UserOptions']['WriteSetting'](0x0,{'Name':'Selected\x20Diary\x20Manager\x20User\x20List'},JSON['stringify'](TriSysSDK['Scheduler']['Options']['SelectedUserList']));var bDiaryOpen=TriSysApex['FormsManager']['isFormOpen']('DiaryManager');if(bDiaryOpen)TriSysSDK['Scheduler']['RefreshFromServer']();return!![];},'PopulateAgendaMaxDayRangeCombo':function(){var array=[{'text':'7\x20Days','value':0x7},{'text':'10\x20Days','value':0xa},{'text':'14\x20Days','value':0xe},{'text':'21\x20Days','value':0x15},{'text':'28\x20Days','value':0x1c},{'text':'31\x20Days','value':0x1f},{'text':'90\x20Days','value':0x5a}];return array;},'ReadShowClearedTasksSettingCallback':function(setting){setting&&setting['Value']&&TriSysSDK['CShowForm']['SetCheckBoxValue']('ctrlDiaryOptions-show-cleared-tasks',setting['Value']=='True'?!![]:![]);},'ReadAgendaMaximumDaysSettingCallback':function(setting){if(setting&&setting['Value']){var iDays=parseInt(setting['Value']);TriSysSDK['CShowForm']['SetValueInCombo']('ctrlDiaryOptions-agenda-days',iDays),TriSysSDK['Scheduler']['AgendaViewDayCount']=iDays;}}};