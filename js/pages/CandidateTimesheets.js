var CandidateTimesheets={'Load':function(){$('#webjobs-customer-name')['html'](TriSysWebJobs['Agency']['CustomerName']),CandidateTimesheets['LoadTimesheets']();},'LoadTimesheets':function(){var fnPopulationByFunction={'API':'Timesheets/CandidateTimesheets','DataTableFunction':function(response){var timesheets=response['Timesheets'];if(timesheets)for(var i=0x0;i<timesheets['length'];i++){var timesheet=timesheets[i],placement=timesheet['Placement'];timesheet['Reference']=placement['Reference'],timesheet['Company']=placement['CompanyName'],timesheet['JobTitle']=placement['JobTitle'],timesheet['TotalTimeWorked']=timesheet['Timesheet']['TotalTimeWorked'],timesheet['NetPay']=timesheet['Timesheet']['NetPay'],timesheet['Payrolled']=timesheet['Timesheet']['Payrolled'],timesheet['InputDate']=timesheet['Timesheet']['InputDate'],timesheet['Authorised']=timesheet['AuthorisedBy']?'Yes':'No',timesheet['Paid']=timesheet['Timesheet']['Payrolled']?'Yes':'No';var iYear=moment(timesheet['AuthorisationRequested'])['year']();if(iYear<0x76c)timesheet['AuthorisationRequested']=null;timesheet['AuthorisationRequested']=timesheet['AuthorisationRequested'];}return timesheets;}};CandidateTimesheets['PopulateTimesheetGrid'](fnPopulationByFunction);},'PopulateTimesheetGrid':function(fnPopulationByFunction){var sGridDiv='divTimesheetsGrid',columns=[{'field':'TimesheetId','title':'ID','type':'number','width':0x50},{'field':'Reference','title':'Placement','type':'string'},{'field':'Company','title':'Company','type':'string'},{'field':'JobTitle','title':'JobTitle','type':'string'},{'field':'Period','title':'Period','type':'string'},{'field':'InputDate','title':'Input\x20Date','type':'date','format':'{0:dd\x20MMM\x20yyyy}'},{'field':'TotalTimeWorked','title':'Total\x20Time\x20Worked','type':'number','format':'{0:n}'},{'field':'AuthorisationRequested','title':'Auth.\x20Requested','type':'date','format':'{0:dd\x20MMM\x20yyyy}'},{'field':'Authorised','title':'Authorised','type':'string'},{'field':'Paid','title':'Paid','type':'string'}],mobileVisibleColumns=[{'field':'Reference','title':'Timesheet'}],mobileRowTemplate='<td\x20colspan=\x221\x22><strong>#:\x20Reference\x20#\x20</strong>:\x20#:\x20Company\x20#<br\x20/>#:\x20Period\x20#<br\x20/><i>#:\x20kendo.format(\x22{0:dd\x20MMM\x20yyyy}\x22,\x20InputDate)\x20#</i><br\x20/>'+'Time:\x20#:\x20TotalTimeWorked\x20#<br\x20/>Authorised:\x20#:\x20Authorised\x20#<br\x20/>Paid:\x20#:\x20Paid\x20#<hr></td>',gridLayout={'Div':sGridDiv,'ID':sGridDiv+'grd','Title':'Timesheets','RecordsPerPage':TriSysApex['UserOptions']['RecordsPerPage'](),'PopulationByFunction':fnPopulationByFunction,'PopulationByObject':null,'Columns':columns,'MobileVisibleColumns':mobileVisibleColumns,'MobileRowTemplate':mobileRowTemplate,'KeyColumnName':'TimesheetId','DrillDownFunction':function(rowData){TriSysWebJobs['Timesheet']['Open'](rowData['TimesheetId']);},'MultiRowSelect':!![],'Grouping':![],'ColumnFilters':!![],'OpenButtonCaption':'View'};TriSysSDK['Grid']['VirtualMode'](gridLayout);},'AddTimesheet':function(){var fnYes=function(){return TriSysApex['FormsManager']['OpenForm']('CandidatePlacements',null,!![]),!![];},sMessage='Timesheets\x20can\x20be\x20added\x20from\x20placement\x20records.<br\x20/>Show\x20all\x20placements?';TriSysApex['UI']['questionYesNo'](sMessage,TriSysWebJobs['Constants']['ApplicationName'],'Yes',fnYes,'No');},'DeleteTimesheets':function(){TriSysApex['UI']['ShowMessage']('You\x20are\x20not\x20authorised\x20to\x20delete\x20timesheets.',TriSysWebJobs['Constants']['ApplicationName']);}};$(document)['ready'](function(){CandidateTimesheets['Load']();});