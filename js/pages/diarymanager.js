var DiaryManager={'DrawScheduler':function(){TriSysSDK['Scheduler']['Instantiate']('diaryManagerScheduler',null),TriSysApex['UserOptions']['ReadLoggedInUserSetting']('Selected\x20Diary\x20Manager\x20User\x20List',DiaryManager['ReadLoggedInUserSettingCallback']),setTimeout(TriSysProUI['kendoUI_Overrides'],0x3e8);},'_PreventMultipleHovers':![],'_NotificationWidgets':[],'_LastTaskId':0x0,'ReadLoggedInUserSettingCallback':function(setting){setting&&setting['Value']&&(TriSysSDK['Scheduler']['Options']['SelectedUserList']=JSON['parse'](setting['Value'])),TriSysSDK['Scheduler']['StartPopulationAfterLoad']();},'PopupTaskHover':function(e){if(DiaryManager['_PreventMultipleHovers'])return;if(!e)return;DiaryManager['_PreventMultipleHovers']=!![];var target=$(e['currentTarget']);if(!target)return;var uid=target['data']('uid'),iTop=e['pageY'],iLeft=e['pageX'];if(e['type']==='mouseenter'&&uid){var sMessage='mouserenter,\x20uid:\x20'+uid+',\x20iTop='+iTop+',\x20iLeft='+iLeft,dataItem=null,scheduler=TriSysSDK['Scheduler']['GetSchedulerInstance']();if(scheduler){dataItem=scheduler['occurrenceByUid'](uid);if(dataItem){var sDate=''+dataItem['start']+'',sDrillDownButton='<button\x20type=\x22submit\x22\x20class=\x22btn\x20btn-sm\x20btn-primary\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onclick=\x22DiaryManager.DrillDown('+dataItem['taskid']+',\x20\x27'+dataItem['TaskType']+'\x27)\x22>\x0a\x09\x09\x09\x09\x09\x09<i\x20class=\x22fa\x20fa-folder-open-o\x22></i>\x20&nbsp;\x20Open</button>';sMessage='<img\x20src=\x22images/trisys/16x16/tasktype/'+dataItem['TaskType']+'.png\x22\x20alt=\x22'+dataItem['TaskType']+'\x22>'+'\x20&nbsp;\x20<b>'+dataItem['TaskType']+'</b>\x20&nbsp;\x20'+sDate['substring'](0x0,0x15)+'<br\x20/>'+'<p\x20style=\x22margin-top:\x2012px;\x22>'+dataItem['title']+'</p>'+'<p\x20style=\x22margin-top:\x2012px;\x22>'+sDrillDownButton+'</p>'+'<br\x20/>';}}if(dataItem){var bShowWidget=DiaryManager['_LastTaskId']!=dataItem['taskid'];if(bShowWidget){DiaryManager['_LastTaskId']=dataItem['taskid'],DiaryManager['HideAllPopups']();var notificationWidget=$('#configurableNotification')['kendoNotification']()['data']('kendoNotification'),iWidth=0x190;iLeft=iLeft-iWidth/0x2,notificationWidget['setOptions']({'templates':[{'type':'taskPopup','template':'<div\x20class=\x22trisys-diary-event-template-css\x22\x20style=\x22margin:\x205px;\x20overflow:\x20hidden;\x22>#=\x20taskMessage\x20#</div>'}],'position':{'top':iTop,'left':iLeft},'width':iWidth,'stacking':'down','hideOnClick':!![],'autoHideAfter':0xbb8}),notificationWidget['show']({'taskMessage':sMessage},'taskPopup'),DiaryManager['_NotificationWidgets']['push'](notificationWidget),console['log']('Created:\x20'+sMessage);}}}DiaryManager['_PreventMultipleHovers']=![];},'HideAllPopups':function(){$['each'](DiaryManager['_NotificationWidgets'],function(index,widget){try{var elements=widget['getNotifications']();elements['each'](function(){$(this)['parent']()['remove']();});}catch(e){}try{widget['hide']();}catch(e){}}),DiaryManager['_NotificationWidgets']=[];},'DrillDown':function(lTaskId,sTaskType){debugger;if(sTaskType=='Post-It\x20Note')TriSysApex['PostItNotes']['OpenPostItNote'](lTaskId);else TriSysSDK['Scheduler']['EditTask'](lTaskId);},'Options':{'Popup':function(){var fnLoadControlHTML=function(){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']='Diary\x20Manager\x20Options',parametersObject['Image']='gi-cogwheel',parametersObject['Maximize']=!![],parametersObject['FullScreen']=!![],parametersObject['CloseTopRightButton']=!![],parametersObject['ContentURL']=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlDiaryOptions.html'),parametersObject['ButtonLeftText']='Apply',parametersObject['ButtonLeftFunction']=function(){return ctrlDiaryOptions['Apply']();},parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',parametersObject['OnLoadCallback']=ctrlDiaryOptions['Load'],TriSysApex['UI']['PopupMessage'](parametersObject);};TriSysApex['WhiteLabelling']['LoadJavascriptFile']('js/pages/ctrlDiaryOptions.js',null,fnLoadControlHTML);}}};$(document)['ready'](function(){DiaryManager['DrawScheduler']();});