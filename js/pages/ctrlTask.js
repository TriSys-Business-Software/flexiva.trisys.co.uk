var ctrlTask={'Load':function(){ctrlTask['ConsiderSmallFormFactors'](),$('[data-toggle=\x22tabs\x22]\x20a,\x20.enable-tabs\x20a')['click'](function(e){e['preventDefault'](),$(this)['tab']('show');});var sDefaultType=TriSysApex['ModalDialogue']['Parameters']['Scheduled']?'ToDo':'Note';TriSysActions['Forms']['TaskType']['Load']('taskForm-TaskType','taskForm-selected-TaskType-Image',sDefaultType);var fnChangeStartDateTime=function(dtStart){var dtEnd=new Date(TriSysSDK['CShowForm']['getDateTimePickerValue']('taskForm-EndDateTime'));if(dtStart>dtEnd)TriSysSDK['CShowForm']['setDateTimePickerValue']('taskForm-EndDateTime',moment(dtStart)['add'](0.25,'hours'));},fnChangeEndDateTime=function(dtEnd){var dtStart=new Date(TriSysSDK['CShowForm']['getDateTimePickerValue']('taskForm-StartDateTime'));if(dtEnd<dtStart)TriSysSDK['CShowForm']['setDateTimePickerValue']('taskForm-StartDateTime',moment(dtEnd)['add'](-0.25,'hours'));};TriSysSDK['CShowForm']['dateTimePicker']('taskForm-StartDateTime',fnChangeStartDateTime),TriSysSDK['CShowForm']['dateTimePicker']('taskForm-EndDateTime',fnChangeEndDateTime),TriSysSDK['CShowForm']['datePicker']('taskForm-StartDate'),TriSysSDK['CShowForm']['datePicker']('taskForm-EndDate'),$('#taskForm-all-day-task')['change'](function(){TriSysApex['ModalDialogue']['Task']['AllDayTaskCheckBoxChangeEvent'](this);}),$('#taskForm-scheduled')['change'](function(){TriSysApex['ModalDialogue']['Task']['ScheduledTaskCheckBoxChangeEvent'](this);});var durationOptions={'DefaultPeriod':'minutes','DefaultDurationValue':0xf},sLeadTime=TriSysApex['Cache']['UserSettingManager']['GetValue']('Task.AlarmLeadTime');if(sLeadTime){var parts=sLeadTime['split']('\x20'),iAmount=parseInt(parts[0x0]);if(iAmount>0x0&&parts['length']==0x2){var sPeriod=parts[0x1];durationOptions['DefaultPeriod']=sPeriod,durationOptions['DefaultDurationValue']=iAmount;}}TriSysSDK['Controls']['Duration']['Initialise']('taskForm-Duration',durationOptions);var fnAlarmLeadTimeSectionVisible=function(bVisible){var elem=$('#taskForm-alarm-lead-time-tr');bVisible?elem['show']():elem['hide']();};$('#taskForm-set-alarm')['change'](function(){var bSetAlarm=$(this)['is'](':checked');fnAlarmLeadTimeSectionVisible(bSetAlarm);});var bAlarmed=TriSysApex['Cache']['UserSettingManager']['GetValueBoolean']('Task.Alarmed',!![]);TriSysSDK['CShowForm']['SetCheckBoxValue']('taskForm-set-alarm',bAlarmed),fnAlarmLeadTimeSectionVisible(bAlarmed),TriSysSDK['FormMenus']['DrawGridMenu']('taskForm-contactsGrid-GridMenu','taskForm-ContactGrid'),TriSysSDK['FormMenus']['DrawGridMenu']('taskForm-usersGrid-GridMenu','taskForm-UserGrid'),TriSysSDK['FormMenus']['DrawDropDownMenuFromTemplate']('taskForm-linksGrid-Menu','taskForm','ctrlTaskLinksGridMenu.html',ctrlTask['LinksGridMenuCallback'],'taskForm-linksGrid-menu'),TriSysSDK['FormMenus']['DrawGridMenu']('taskForm-linksGrid-GridMenu','taskForm-LinksGrid'),TriSysSDK['Attributes']['Load']('Task',TriSysApex['ModalDialogue']['Parameters']['TaskId'],'task-form-attributes'),ctrlTask['LoadDocumentWidgets'](),TriSysApex['ModalDialogue']['Task']['Load'](),setTimeout(ctrlTask['CustomiseLinksGridMenus'],0x3e8);},'ContactsGridMenuCallback':function(sMenuItemID){var sPrefix='taskForm-contactsGrid-file-menu-',sSuffix='-taskForm';switch(sMenuItemID){case sPrefix+'add-contact'+sSuffix:var fnSelectContact=function(selectedRow){if(!selectedRow)return;var lContactId=selectedRow['Contact_ContactId'],contact={'ContactId':lContactId,'FullName':selectedRow['Contact_Christian']+'\x20'+selectedRow['Contact_Surname'],'CompanyName':selectedRow['Contact_Company'],'JobTitle':selectedRow['Contact_JobTitle'],'ContactType':selectedRow['Contact_ContactType']};return ctrlTask['AddContactToGrid'](contact,!![]),!![];};TriSysApex['ModalDialogue']['Contacts']['Select'](fnSelectContact);break;case sPrefix+'open-contact'+sSuffix:var lContactId=TriSysSDK['Grid']['GetSelectedSingletonRowRecordIdFromGrid']('taskForm-ContactGrid','ContactId','contact');lContactId>0x0&&(TriSysApex['UI']['CloseModalPopup'](),TriSysApex['FormsManager']['OpenForm']('Contact',lContactId));break;case sPrefix+'delete-contact'+sSuffix:var selectedRows=TriSysSDK['Grid']['GetCheckedRows']('taskForm-ContactGrid');if(selectedRows&&selectedRows['length']>=0x1&&ctrlTask['Data']['Contacts']()){for(var i=0x0;i<selectedRows['length'];i++){var lContactId=selectedRows[i]['ContactId'];for(var c=0x0;c<ctrlTask['Data']['Contacts']()['length'];c++){var contact=ctrlTask['Data']['Contacts']()[c];if(contact['ContactId']==lContactId){ctrlTask['Data']['Contacts']()['splice'](c,0x1);break;}}}ctrlTask['LoadContactsGrid']();}break;}},'UsersGridMenuCallback':function(sMenuItemID){var sPrefix='taskForm-usersGrid-file-menu-',sSuffix='-taskForm';switch(sMenuItemID){case sPrefix+'add-user'+sSuffix:var fnSelectUser=function(selectedRow){if(!selectedRow)return;var lUserId=selectedRow['UserId'],user={'UserId':lUserId,'FullName':selectedRow['FullName'],'LoginName':selectedRow['LoginName'],'JobTitle':selectedRow['JobTitle'],'TelNo':selectedRow['TelNo']};if(ctrlTask['Data']['DuplicateUserCheck'](user))return;return ctrlTask['Data']['Users']()['push'](user),ctrlTask['LoadUsersGrid'](),!![];};TriSysApex['ModalDialogue']['Users']['Select'](fnSelectUser,{'NotLocked':!![]});break;case sPrefix+'delete-user'+sSuffix:var selectedRows=TriSysSDK['Grid']['GetCheckedRows']('taskForm-UserGrid');if(selectedRows&&selectedRows['length']>=0x1&&TriSysApex['ModalDialogue']['Parameters']['Users']){for(var i=0x0;i<selectedRows['length'];i++){var lUserId=selectedRows[i]['UserId'];for(var u=0x0;u<TriSysApex['ModalDialogue']['Parameters']['Users']['length'];u++){var user=TriSysApex['ModalDialogue']['Parameters']['Users'][u];if(user['UserId']==lUserId){TriSysApex['ModalDialogue']['Parameters']['Users']['splice'](u,0x1);break;}}}ctrlTask['LoadUsersGrid']();}break;}},'CustomiseLinksGridMenus':function(){var bLoggedIntoTriSysCRM=TriSysApex['LoginCredentials']['isLoggedInToSpecificCompanyAsRecruiter']('TriSys\x20Business\x20Software');if(bLoggedIntoTriSysCRM){var sPrefix='#taskForm-linksGrid-menu-link-',sSuffix='-taskForm';$(sPrefix+'requirement'+sSuffix)['hide'](),$(sPrefix+'placement'+sSuffix)['hide'](),$(sPrefix+'project'+sSuffix)['show'](),$(sPrefix+'project-issue'+sSuffix)['show'](),$(sPrefix+'quote'+sSuffix)['show'](),$(sPrefix+'sales-order'+sSuffix)['show']();}},'LinksGridMenuCallback':function(sMenuItemID){var sPrefix='taskForm-linksGrid-menu-',sSuffix='-taskForm';switch(sMenuItemID){case sPrefix+'link-requirement'+sSuffix:var fnSelectRequirement=function(selectedRow){if(!selectedRow)return;var entity={'Name':'Requirement','RecordId':selectedRow['Requirement_RequirementId'],'Description':selectedRow['Requirement_RequirementReference']+':\x20'+selectedRow['Requirement_JobTitle']+'\x20at\x20'+selectedRow['RequirementCompany_Name']+'\x20with\x20'+selectedRow['RequirementContact_FullName']};return ctrlTask['AddEntityLinkToGrid'](entity),!![];};TriSysApex['ModalDialogue']['Requirements']['Select'](fnSelectRequirement);break;case sPrefix+'link-placement'+sSuffix:var fnSelectPlacement=function(selectedRow){if(!selectedRow)return;var entity={'Name':'Placement','RecordId':selectedRow['Placement_PlacementId'],'Description':selectedRow['Placement_Reference']+':\x20'+selectedRow['CandidateContact_FullName']+',\x20'+selectedRow['Placement_JobTitle']+'\x20at\x20'+selectedRow['PlacementCompany_Name']};return ctrlTask['AddEntityLinkToGrid'](entity),!![];};TriSysApex['ModalDialogue']['Placements']['Select'](fnSelectPlacement);break;case sPrefix+'link-timesheet'+sSuffix:var fnSelectTimesheet=function(selectedRow){if(!selectedRow)return;var entity={'Name':'Timesheet','RecordId':selectedRow['TimesheetId'],'Description':selectedRow['Reference']+':\x20'+selectedRow['Candidate']+',\x20'+selectedRow['JobTitle']+'\x20at\x20'+selectedRow['Company']+',\x20period:\x20'+selectedRow['Period']};return ctrlTask['AddEntityLinkToGrid'](entity),!![];};TriSysApex['ModalDialogue']['Timesheets']['Select'](fnSelectTimesheet);break;case sPrefix+'open-entity'+sSuffix:ctrlTask['LinksOpenEntityFromGrid']();break;case sPrefix+'unlink-entity'+sSuffix:ctrlTask['LinksRemoveEntityFromGrid']();break;default:TriSysApex['UI']['ShowMessage']('ToDo');break;}},'LinksOpenEntityFromGrid':function(){var sGrid='taskForm-LinksGrid',lRecordId=TriSysSDK['Grid']['GetSelectedSingletonRowRecordIdFromGrid'](sGrid,'RecordId','link');if(lRecordId>0x0){var selectedRows=TriSysSDK['Grid']['GetCheckedRows'](sGrid),sEntityName=selectedRows[0x0]['Name'];TriSysApex['UI']['CloseModalPopup'](),TriSysApex['FormsManager']['OpenForm'](sEntityName,lRecordId);}},'LinksRemoveEntityFromGrid':function(){var selectedRows=TriSysSDK['Grid']['GetCheckedRows']('taskForm-LinksGrid');if(selectedRows&&selectedRows['length']>=0x1&&TriSysApex['ModalDialogue']['Parameters']['Links']){for(var i=0x0;i<selectedRows['length'];i++){var lRecordId=selectedRows[i]['RecordId'],sEntityName=selectedRows[i]['Name'];for(var u=0x0;u<TriSysApex['ModalDialogue']['Parameters']['Links']['length'];u++){var entity=TriSysApex['ModalDialogue']['Parameters']['Links'][u];if(entity['Name']==sEntityName&&entity['RecordId']==lRecordId){TriSysApex['ModalDialogue']['Parameters']['Links']['splice'](u,0x1);break;}}}TriSysApex['ModalDialogue']['Task']['LoadLinksGrid'](TriSysApex['ModalDialogue']['Parameters']['Links']);}},'LoadDocumentWidgets':function(){var sAttachmentFileRef='taskForm-Attachment-File-Reference',fnFileAttachmentCallback=function(sOperation,divTag,sFilePath){switch(sOperation){case'find':TriSysApex['Pages']['FileManagerForm']['FileOpenDrillDown'](sFilePath);break;case'delete':break;}},fieldDescription={'TableFieldName':'Task\x20Attachment','TableName':'Task'};TriSysSDK['Controls']['FileReference']['Load'](sAttachmentFileRef,fieldDescription,fnFileAttachmentCallback);},'ConsiderSmallFormFactors':function(){var lWidth=$('#taskForm-top-block')['width'](),iMinimumWidthForFullDateTimeVisibility=0x226;lWidth<iMinimumWidthForFullDateTimeVisibility&&($('#taskForm-TaskTypeContainerForSmallFormFactor-tr')['show'](),$('#taskForm-TaskType')['detach']()['appendTo']('#taskForm-TaskTypeContainerForSmallFormFactor'),$('#taskForm-TaskTypeContainerForSmallFormFactor')['append']('&nbsp;<br\x20/>'),$('#taskForm-Scheduled-group')['detach']()['appendTo']('#taskForm-TaskTypeContainerForSmallFormFactor'),$('#taskForm-StartDateContainerForSmallFormFactor-tr')['show'](),$('#taskForm-StartDateTimeSpan')['detach']()['appendTo']('#taskForm-StartDateContainerForSmallFormFactor'),$('#taskForm-StartDateSpan')['detach']()['appendTo']('#taskForm-StartDateContainerForSmallFormFactor'),$('#taskForm-EndDateContainerForSmallFormFactor-tr')['show'](),$('#taskForm-EndDateTimeSpan')['detach']()['appendTo']('#taskForm-EndDateContainerForSmallFormFactor'),$('#taskForm-EndDateSpan')['detach']()['appendTo']('#taskForm-EndDateContainerForSmallFormFactor'),$('#taskForm-EndDateContainerForSmallFormFactor')['append']('&nbsp;<br\x20/>'),$('#taskForm-AllDayTask-group')['detach']()['appendTo']('#taskForm-EndDateContainerForSmallFormFactor'));},'AddContactToGrid':function(contact,bShowWait){if(ctrlTask['Data']['DuplicateContactCheck'](contact))return;var CContactReadRequest={'ContactId':contact['ContactId']},payloadObject={};payloadObject['URL']='Contact/Read',payloadObject['OutboundDataPacket']=CContactReadRequest,payloadObject['InboundDataFunction']=function(CContactReadResponse){if(bShowWait)TriSysApex['UI']['HideWait']();CContactReadResponse&&(CContactReadResponse['Success']&&(ctrlTask['Data']['Contacts']()['push'](CContactReadResponse['Contact']),ctrlTask['LoadContactsGrid']()));},payloadObject['ErrorHandlerFunction']=function(request,status,error){if(bShowWait)TriSysApex['UI']['HideWait']();TriSysApex['UI']['errorAlert']('ctrlGrid.AddContactToGrid:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);};if(bShowWait)TriSysApex['UI']['ShowWait'](null,'Reading\x20Contact...');TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'OpenContactFromTaskGrid':function(lContactId){if(lContactId>0x0){setTimeout(TriSysApex['UI']['CloseModalPopup'],0xa);var fnOpen=function(){TriSysApex['FormsManager']['OpenForm']('Contact',lContactId);};setTimeout(fnOpen,0xfa);}},'DeleteContactFromTaskGrid':function(lContactId){if(lContactId>0x0){for(var c=0x0;c<ctrlTask['Data']['Contacts']()['length'];c++){var contact=ctrlTask['Data']['Contacts']()[c];if(contact['ContactId']==lContactId){ctrlTask['Data']['Contacts']()['splice'](c,0x1);break;}}ctrlTask['LoadContactsGrid']();}},'LoadContactsGrid':function(bGetFullContactRecord){var contactList=ctrlTask['Data']['Contacts']();if(bGetFullContactRecord){var sJSON=JSON['stringify'](contactList);ctrlTask['Data']['_Task']['Contacts']=[],contactList=JSON['parse'](sJSON);for(var i=0x0;i<contactList['length'];i++){var contact=contactList[i];ctrlTask['AddContactToGrid'](contact,![]);}return;}var lstElem=$('#taskForm-contacts-list-container');lstElem['empty']();var iWindowHeight=$(window)['height']();lstElem['height'](iWindowHeight*0.375);if(contactList){contactList['sort'](function(a,b){return a['Surname']>b['Surname'];});var fnBuildFromTemplate=function(CContact){var bClientContact=CContact['ContactType']['indexOf']('Client')==0x0||CContact['ContactType']['indexOf']('User')==0x0,bCandidateContact=CContact['ContactType']['indexOf']('Candidate')>=0x0,sHTML=$('#taskForm-contacts-template')['html']();if(!sHTML)return;sHTML=sHTML['replace'](/#:ContactId#/g,CContact['ContactId']),sHTML=sHTML['replace']('#:FullName#',CContact['FullName']),sHTML=sHTML['replace']('#:Type#',CContact['ContactType']),sHTML=sHTML['replace']('#:JobTitle#',CContact['JobTitle']?CContact['JobTitle']:''),sHTML=sHTML['replace']('#:CompanyName#',CContact['CompanyName']?CContact['CompanyName']:''),sHTML=sHTML['replace']('#:CompanyId#',CContact['CompanyId']);if(!CContact['ContactPhotoURL'])CContact['ContactPhotoURL']=TriSysApex['Constants']['DefaultContactImage'];sHTML=sHTML['replace']('#:ContactPhotoURL#',CContact['ContactPhotoURL']);var workPhoneId='{{taskForm-contacts-worktelno-tr}}',sStyle='display:\x20none;';bClientContact&&CContact['WorkTelNo']&&(sStyle='',sHTML=sHTML['replace'](/{{taskForm-contacts-worktelno}}/g,CContact['WorkTelNo']));sHTML=sHTML['replace'](workPhoneId,sStyle);var workMobilePhoneId='{{taskForm-contacts-workmobiletelno-tr}}',sStyle='display:\x20none;';bClientContact&&CContact['WorkMobileTelNo']&&(sStyle='',sHTML=sHTML['replace'](/{{taskForm-contacts-workmobiletelno}}/g,CContact['WorkMobileTelNo']));sHTML=sHTML['replace'](workMobilePhoneId,sStyle);var workEMailId='{{taskForm-contacts-workemail-tr}}',sStyle='display:\x20none;';bClientContact&&CContact['WorkEMail']&&(sStyle='',sHTML=sHTML['replace'](/{{taskForm-contacts-workemail}}/g,CContact['WorkEMail']));sHTML=sHTML['replace'](workEMailId,sStyle);var homePhoneId='{{taskForm-contacts-hometelno-tr}}',sStyle='display:\x20none;';bCandidateContact&&CContact['HomeAddressTelNo']&&(sStyle='',sHTML=sHTML['replace'](/{{taskForm-contacts-hometelno}}/g,CContact['HomeAddressTelNo']));sHTML=sHTML['replace'](homePhoneId,sStyle);var personalMobilePhoneId='{{taskForm-contacts-personalmobiletelno-tr}}',sStyle='display:\x20none;';bCandidateContact&&CContact['MobileTelNo']&&(sStyle='',sHTML=sHTML['replace'](/{{taskForm-contacts-personalmobiletelno}}/g,CContact['MobileTelNo']));sHTML=sHTML['replace'](personalMobilePhoneId,sStyle);var personalEMailId='{{taskForm-contacts-personalemail-tr}}',sStyle='display:\x20none;';return bCandidateContact&&CContact['PersonalEMail']&&(sStyle='',sHTML=sHTML['replace'](/{{taskForm-contacts-personalemail}}/g,CContact['PersonalEMail'])),sHTML=sHTML['replace'](personalEMailId,sStyle),sHTML;};for(var i=0x0;i<contactList['length'];i++){var contact=contactList[i],sHTML=fnBuildFromTemplate(contact);lstElem['append'](sHTML);}TriSysProUI['kendoUI_Overrides'](),$('#taskForm-contacts-label')['html'](contactList['length']+'\x20Task\x20Contact'+(contactList['length']==0x1?'':'s'));}},'OpenCompany':function(lCompanyId){setTimeout(TriSysApex['UI']['CloseModalPopup'],0xa);var fnOpen=function(){TriSysApex['FormsManager']['OpenForm']('Company',lCompanyId);};setTimeout(fnOpen,0xfa);},'DeleteUserFromTaskGrid':function(lUserId){if(lUserId>0x0){for(var c=0x0;c<ctrlTask['Data']['Users']()['length'];c++){var user=ctrlTask['Data']['Users']()[c];if(user['UserId']==lUserId){ctrlTask['Data']['Users']()['splice'](c,0x1);break;}}ctrlTask['LoadUsersGrid']();}},'SetOwner':function(lUserId){ctrlTask['Data']['_Task']['OwnerUserId']=lUserId,ctrlTask['LoadUsersGrid']();},'LoadUsersGrid':function(){var userList=ctrlTask['Data']['Users'](),lstElem=$('#taskForm-users-list-container');lstElem['empty']();var iWindowHeight=$(window)['height']();lstElem['height'](iWindowHeight*0.375);if(userList){userList['sort'](function(a,b){return a['FullName']>b['FullName'];});var fnBuildFromTemplate=function(user){var sUserOwnerLabel=user['isOwner']?'(Owner)':'',sHTML=$('#taskForm-users-template')['html']();return sHTML=sHTML['replace'](/#:UserId#/g,user['UserId']),sHTML=sHTML['replace']('#:FullName#',user['FullName']),sHTML=sHTML['replace']('#:OwnerUser#',sUserOwnerLabel),sHTML=sHTML['replace']('#:TelNo#',user['TelNo']?user['TelNo']:'\x20&nbsp;'),sHTML;};for(var i=0x0;i<userList['length'];i++){var user=userList[i];user['isOwner']=![];if(user['UserId']==ctrlTask['Data']['_Task']['OwnerUserId'])user['isOwner']=!![];var sHTML=fnBuildFromTemplate(user);lstElem['append'](sHTML);}TriSysProUI['kendoUI_Overrides'](),$('#taskForm-users-label')['html'](userList['length']+'\x20Task\x20User'+(userList['length']==0x1?'':'s'));}},'DeleteLinkFromTaskGrid':function(sEntity,lRecordId){if(sEntity&&lRecordId>0x0){for(var c=0x0;c<ctrlTask['Data']['Links']()['length'];c++){var link=ctrlTask['Data']['Links']()[c];if(link['Name']==sEntity&&link['RecordId']==lRecordId){ctrlTask['Data']['Links']()['splice'](c,0x1);break;}}ctrlTask['LoadLinksGrid']();}},'AddEntityLinkToGrid':function(entity){ctrlTask['Data']['Links']()['push'](entity),ctrlTask['LoadLinksGrid']();},'OpenLinkFromTaskGrid':function(sEntity,lRecordId){TriSysApex['UI']['CloseModalPopup'](),TriSysApex['FormsManager']['OpenForm'](sEntity,lRecordId);},'LoadLinksGrid':function(){var linkList=ctrlTask['Data']['Links'](),lstElem=$('#taskForm-links-list-container');lstElem['empty']();var iWindowHeight=$(window)['height']();lstElem['height'](iWindowHeight*0.375);if(linkList){var fnBuildFromTemplate=function(link){var sHTML=$('#taskForm-links-template')['html']();return sHTML=sHTML['replace'](/#:Entity#/g,link['Name']),sHTML=sHTML['replace'](/#:RecordId#/g,link['RecordId']),sHTML=sHTML['replace'](/#:Description#/g,link['Description']),sHTML;};for(var i=0x0;i<linkList['length'];i++){var link=linkList[i],sHTML=fnBuildFromTemplate(link);lstElem['append'](sHTML);}TriSysProUI['kendoUI_Overrides'](),$('#taskForm-links-label')['html'](linkList['length']+'\x20Task\x20Link'+(linkList['length']==0x1?'':'s'));}},'Data':{'_EmptyTask':{'TaskId':0x0,'Contacts':[],'Users':[],'Links':[]},'_Task':{'TaskId':0x0,'Contacts':[],'Users':[],'Links':[]},'Clear':function(){ctrlTask['Data']['_Task']=ctrlTask['Data']['_EmptyTask'];},'Contacts':function(){if(!ctrlTask['Data']['_Task']['Contacts'])ctrlTask['Data']['_Task']['Contacts']=[];return ctrlTask['Data']['_Task']['Contacts'];},'Users':function(){if(!ctrlTask['Data']['_Task']['Users'])ctrlTask['Data']['_Task']['Users']=[];return ctrlTask['Data']['_Task']['Users'];},'Links':function(){if(!ctrlTask['Data']['_Task']['Links'])ctrlTask['Data']['_Task']['Links']=[];return ctrlTask['Data']['_Task']['Links'];},'SetTask':function(task){if(!task['Links'])task['Links']=[];ctrlTask['Data']['_Task']=task;},'DuplicateContactCheck':function(contact){if(ctrlTask['Data']['_Task']['Contacts'])for(var i=0x0;i<ctrlTask['Data']['_Task']['Contacts']['length'];i++){var lstContact=ctrlTask['Data']['_Task']['Contacts'][i];if(lstContact['ContactId']==contact['ContactId'])return!![];}},'DuplicateUserCheck':function(user){if(ctrlTask['Data']['_Task']['Users'])for(var i=0x0;i<ctrlTask['Data']['_Task']['Users']['length'];i++){var lstUser=ctrlTask['Data']['_Task']['Users'][i];if(lstUser['UserId']==user['UserId'])return!![];}}}};$(document)['ready'](function(){ctrlTask['Load']();});