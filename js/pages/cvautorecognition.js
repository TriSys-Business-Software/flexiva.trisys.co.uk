var CVAutoRecognitionForm={'FormName':'CVAutoRec','CurrentDocumentURL':null,'GridID':'cvautorecognition-IncomingCVGrid','FieldPrefix':'cvautorecognition-form-','DuplicateSelectedCandidateId':0x0,'MultipleUploadFiles':null,'_GridInitialised':![],'Load':function(){TriSysApex['Forms']['EntityForm']['unPopulateFormGrids'](CVAutoRecognitionForm['FormName']),TriSysSDK['EntityFormTabs']['AddClickEventHandlers']('cvautorecognition-form-tab-nav-horizontal',!![]),TriSysSDK['Controls']['Button']['Click']('cvautorecognition-form-tab-incoming'),TriSysSDK['FormMenus']['DrawGridMenu']('cvautorecognitionGridMenu',CVAutoRecognitionForm['GridID']);var suffixes=['','new-','existing-'];for(var i=0x0;i<suffixes['length'];i++){var suffix=suffixes[i];TriSysSDK['CShowForm']['contactTitleFieldEditableProperties'](CVAutoRecognitionForm['FieldPrefix']+suffix+'Title','Mr'),TriSysSDK['CShowForm']['PopulateGenderCombo'](CVAutoRecognitionForm['FieldPrefix']+suffix+'Gender'),TriSysSDK['CShowForm']['skillCombo'](CVAutoRecognitionForm['FieldPrefix']+suffix+'ContactSource','ContactSource','TBC'),TriSysSDK['CShowForm']['contactTypeOfWorkField'](CVAutoRecognitionForm['FieldPrefix']+suffix+'TypeOfWorkRequired');}CVAutoRecognitionForm['InitialiseZoomSlider']('',CVAutoRecognitionForm['ZoomCVViewer']),CVAutoRecognitionForm['InitialiseZoomSlider']('-duplicate',CVAutoRecognitionForm['ZoomCVViewerDuplicate']),CVAutoRecognitionForm['DataChangeEventHandlers'](),!TriSysSDK['CShowForm']['JobTitlesCached']()&&$('#cvautorecognition-form-JobTitle')['keyup'](function(e){if(e['keyCode']==0xd)CVAutoRecognitionForm['JobTitleLookup']();}),TriSysWebJobs['CandidateRegistration']['LoadCountryLookup']('cvautorecognition-form-Country'),TriSysWebJobs['CandidateRegistration']['LoadCountryLookup']('cvautorecognition-form-new-Country'),TriSysWebJobs['CandidateRegistration']['LoadCountryLookup']('cvautorecognition-form-existing-Country');},'TextFieldList':['Forenames','Surname','Street','City','County','PostCode','Country','HomeTelNo','WorkTelNo','MobileTelNo','PersonalEMail','WorkEMail','DateOfBirth','JobTitle'],'ClearDataEntryFields':function(){var suffixes=['','new-','existing-'];for(var is=0x0;is<suffixes['length'];is++){var prefix=CVAutoRecognitionForm['FieldPrefix']+suffixes[is];for(var i=0x0;i<CVAutoRecognitionForm['TextFieldList']['length'];i++){var sField=CVAutoRecognitionForm['TextFieldList'][i];$('#'+prefix+sField)['val']('');}TriSysSDK['CShowForm']['SetTextInCombo'](prefix+'Title','Mr'),TriSysSDK['CShowForm']['SetTextInCombo'](prefix+'Gender','Unknown'),TriSysSDK['CShowForm']['SetTextInCombo'](prefix+'ContactSource','TBC'),TriSysSDK['CShowForm']['SetSkillsInList'](prefix+'TypeOfWorkRequired',null),$('#'+prefix+'ContactPhoto')['attr']('src',TriSysApex['Constants']['DefaultContactImage']),TriSysSDK['CShowForm']['SetTextInCombo'](prefix+'Country',TriSysSDK['Countries']['DefaultCountryName']);}},'DataChangeEventHandlers':function(){var changeDuplicateCheckFields=['PersonalEMail','WorkEMail','HomeTelNo','WorkTelNo','MobileTelNo','DateOfBirth','JobTitle'],fnChange=function(e){sValue=$(this)['val'](),CVAutoRecognitionForm['FireDuplicateCandidateCheck'](CVAutoRecognitionForm['ShowDuplicateCount']);};for(var i=0x0;i<changeDuplicateCheckFields['length'];i++){var sField=changeDuplicateCheckFields[i];$('#'+CVAutoRecognitionForm['FieldPrefix']+sField)['change'](fnChange);}$('#'+CVAutoRecognitionForm['FieldPrefix']+'PostCode')['change'](function(e){sValue=$(this)['val'](),CVAutoRecognitionForm['PostCodeLookup']();});var fnSynchroniseTextField=function(){var sID=this['id'],sValue=$(this)['val']();sID=sID['replace'](CVAutoRecognitionForm['FieldPrefix'],CVAutoRecognitionForm['FieldPrefix']+'new-'),$('#'+sID)['val'](sValue);};for(var i=0x0;i<CVAutoRecognitionForm['TextFieldList']['length'];i++){var sField=CVAutoRecognitionForm['TextFieldList'][i];$('#'+CVAutoRecognitionForm['FieldPrefix']+sField)['on']('change',fnSynchroniseTextField),$('#'+CVAutoRecognitionForm['FieldPrefix']+sField)['on']('drop',fnSynchroniseTextField);}var synchroniseComboFieldList=['Title','Gender','ContactSource'],fnSynchroniseComboField=function(){var sID=this['id'],sValue=TriSysSDK['CShowForm']['GetTextFromCombo'](sID);sID=sID['replace'](CVAutoRecognitionForm['FieldPrefix'],CVAutoRecognitionForm['FieldPrefix']+'new-'),TriSysSDK['CShowForm']['SetTextInCombo'](sID,sValue);};for(var i=0x0;i<synchroniseComboFieldList['length'];i++){var sField=synchroniseComboFieldList[i];$('#'+CVAutoRecognitionForm['FieldPrefix']+sField)['on']('change',fnSynchroniseComboField);}var fnSynchroniseMultiSelectField=function(){var sID=this['id'],sValue=TriSysSDK['CShowForm']['GetSelectedSkillsFromList'](sID);sID=sID['replace'](CVAutoRecognitionForm['FieldPrefix'],CVAutoRecognitionForm['FieldPrefix']+'new-'),TriSysSDK['CShowForm']['SetSkillsInList'](sID,sValue);};$('#'+CVAutoRecognitionForm['FieldPrefix']+'TypeOfWorkRequired')['on']('change',fnSynchroniseMultiSelectField);},'DropPostCode':function(ev){ev['preventDefault']();var sValue=ev['dataTransfer']['getData']('text')['trim']();$('#'+CVAutoRecognitionForm['FieldPrefix']+'PostCode')['val'](sValue),CVAutoRecognitionForm['PostCodeLookup']();},'DropStreet':function(ev){ev['preventDefault']();var sValue=ev['dataTransfer']['getData']('text')['trim']();if(CVAutoRecognitionForm['AllocateAddressParts'](sValue,'\x0a'))return;if(CVAutoRecognitionForm['AllocateAddressParts'](sValue,','))return;$('#'+CVAutoRecognitionForm['FieldPrefix']+'Street')['val'](sValue);},'AllocateAddressParts':function(sValue,sChars){if(!sValue)return;if(sValue['indexOf'](sChars)<0x0)return;var parts=sValue['split'](sChars);if(parts&&parts['length']>0x0){if(parts['length']>0x0)CVAutoRecognitionForm['AllocateAddressPart']('Street',parts[0x0]);if(parts['length']>0x1)CVAutoRecognitionForm['AllocateAddressPart']('City',parts[0x1]);if(parts['length']>0x2)CVAutoRecognitionForm['AllocateAddressPart']('County',parts[0x2]);if(parts['length']>0x3)CVAutoRecognitionForm['AllocateAddressPart']('PostCode',parts[0x3]);if(parts['length']>0x4)CVAutoRecognitionForm['AllocateAddressPart']('Country',parts[0x4]);return $('#'+CVAutoRecognitionForm['FieldPrefix']+'Street')['trigger']('change'),!![];}},'AllocateAddressPart':function(sField,sValue){sValue=sValue['trim']();if(sValue['indexOf'](',')==sValue['length']-0x1)sValue=sValue['substring'](0x0,sValue['indexOf'](','));if(sValue['indexOf']('.')==sValue['length']-0x1)sValue=sValue['substring'](0x0,sValue['indexOf']('.'));$('#'+CVAutoRecognitionForm['FieldPrefix']+sField)['val'](sValue);},'PostCodeLookup':function(){TriSysSDK['PostCode']['Lookup'](CVAutoRecognitionForm['FieldPrefix']+'PostCode',CVAutoRecognitionForm['FieldPrefix']+'Street',CVAutoRecognitionForm['FieldPrefix']+'City',CVAutoRecognitionForm['FieldPrefix']+'County',CVAutoRecognitionForm['FieldPrefix']+'Country',{'InternalDatabaseOnly':!![]});},'StartDrag':function(ev){ev['dataTransfer']['setData']('Text',ev['target']['id']);},'AllowDragDrop':function(ev){ev['preventDefault']();},'DropDuplicateCheckField':function(ev,sField){ev['preventDefault']();var sValue=ev['dataTransfer']['getData']('text')['trim'](),wordsToRemove=['mailto:','tel:'];for(var i=0x0;i<wordsToRemove['length'];i++){var sWordToRemove=wordsToRemove[i];sValue=sValue['replace'](sWordToRemove,'');}$('#'+CVAutoRecognitionForm['FieldPrefix']+sField)['val'](sValue),CVAutoRecognitionForm['FireDuplicateCandidateCheck'](CVAutoRecognitionForm['ShowDuplicateCount']);},'ShowDuplicateCount':function(candidates){CVAutoRecognitionForm['_DuplicateCount']=0x0;var iCount='';candidates&&(iCount=candidates['length'],CVAutoRecognitionForm['_DuplicateCount']=iCount),$('#cvautorecognition-view-duplicate-candidate-count')['html'](iCount);},'_DuplicateCount':0x0,'ClearDuplicateCount':function(){CVAutoRecognitionForm['ShowDuplicateCount'](null);},'_Calling_CandidateDuplicateWebAPI':![],'CandidateDuplicateWebAPICall':function(duplicateCheck,fnCallback){if(CVAutoRecognitionForm['_Calling_CandidateDuplicateWebAPI'])return;var payloadObject={};payloadObject['URL']='Contact/DuplicateCheck',payloadObject['OutboundDataPacket']=duplicateCheck,payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var CDuplicateCheckResponse=data;if(CDuplicateCheckResponse){if(CDuplicateCheckResponse['Success']||!![]){fnCallback(CDuplicateCheckResponse['Candidates']);return;}}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('CVAutoRecognitionForm.CandidateDuplicateWebAPICall:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Checking\x20Duplicates...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'RefreshIncomingCVGrid':function(){TriSysSDK['Grid']['RefreshData'](CVAutoRecognitionForm['GridID']);},'PopulateIncomingCVGrid':function(fnCallback){var payloadObject={};payloadObject['URL']='CVParser/IncomingCVList',payloadObject['OutboundDataPacket']=null,payloadObject['InboundDataFunction']=function(data){var CIncomingCVListResponse=data;CIncomingCVListResponse&&(CIncomingCVListResponse['Success']?fnCallback(CIncomingCVListResponse['IncomingCVList']):TriSysApex['UI']['ShowMessage'](CIncomingCVListResponse['ErrorMessage']));},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('CVAutoRecognitionForm.PopulateIncomingCVGrid:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'InitialiseIncomingCVsGrid':function(){var columns=[{'field':'FullPath','title':'Full\x20Path','type':'string','hidden':!![]},{'field':'Name','title':'CV\x20Document','type':'string'},{'field':'DateModified','title':'Date\x20Last\x20Modified','type':'date','format':'{0:dd\x20MMM\x20yyyy}','width':0x96},{'field':'Size','title':'Size','type':'string','width':0x82}],fnCallbackOnRefresh=function(fnCallback){CVAutoRecognitionForm['PopulateIncomingCVGrid'](fnCallback);};TriSysSDK['Grid']['VirtualMode']({'Div':CVAutoRecognitionForm['GridID'],'ID':'grdCVAutoRecognition','Title':'CV\x20Auto-Recognition\x20Documents','RecordsPerPage':TriSysApex['UserOptions']['RecordsPerPage'](),'PopulationByObjectRefreshCallback':fnCallbackOnRefresh,'Columns':columns,'MobileVisibleColumns':[{'field':'FullPath'}],'MobileRowTemplate':'<td\x20colspan=\x221\x22><strong>#:\x20FullPath\x20#</strong><br\x20/>'+'<i>#:\x20DateModified\x20#</i></td>','KeyColumnName':'FullPath','DrillDownFunction':function(rowData){TriSysApex['UI']['CloseModalPopup'](),CVAutoRecognitionForm['DisplayAndParseCV'](rowData['FullPath'],rowData['Name']);},'MultiRowSelect':!![],'Grouping':![],'ColumnFilters':!![],'OpenButtonCaption':'Import','HyperlinkedColumns':['Name']}),CVAutoRecognitionForm['DragAndDropFileHandler']();},'DragAndDropFileHandler':function(){var obj=$('#'+CVAutoRecognitionForm['GridID']);obj['on']('dragenter',function(e){e['stopPropagation'](),e['preventDefault']();}),obj['on']('dragover',function(e){e['stopPropagation'](),e['preventDefault']();}),obj['on']('drop',function(e){e['preventDefault']();var fileCollection=e['originalEvent']['dataTransfer']['files'];CVAutoRecognitionForm['MultipleUploadFiles']=[];for(var i=0x0;i<fileCollection['length'];i++){CVAutoRecognitionForm['MultipleUploadFiles']['push'](fileCollection[i]);}CVAutoRecognitionForm['UploadNextCVInSequence']();});},'RemoteCVProcessing':function(file){CVAutoRecognitionForm['MultipleUploadFiles']=[file],CVAutoRecognitionForm['UploadNextCVInSequence']();},'UploadNextCVInSequence':function(){if(!CVAutoRecognitionForm['MultipleUploadFiles'])return![];if(CVAutoRecognitionForm['MultipleUploadFiles']['length']==0x0)return CVAutoRecognitionForm['MultipleUploadFiles']=null,![];var nextFile=CVAutoRecognitionForm['MultipleUploadFiles'][0x0],fnCallback=function(myFile){CVAutoRecognitionForm['UploadCV'](myFile);};return TriSysSDK['Controls']['FileManager']['UploadFile'](nextFile,fnCallback),CVAutoRecognitionForm['MultipleUploadFiles']['splice'](0x0,0x1),!![];},'DisplayAndParseCV':function(sURL,sName){TriSysApex['Logging']['LogMessage']('CVAutoRecognitionForm:\x20DisplayAndParseCV('+sURL+',\x20'+sName+')'),CVAutoRecognitionForm['CurrentDocumentURL']=sURL,CVAutoRecognitionForm['DuplicateSelectedCandidateId']=0x0,CVAutoRecognitionForm['ClearDuplicateCount'](),CVAutoRecognitionForm['CommenceCVParsing'](sURL,sName),CVAutoRecognitionForm['ClearDataEntryFields'](),$('#cvautorecognition-parsing-document-name')['html'](sName),$('#cvautorecognition-parsing-document-name-duplicate')['html'](sName),$('#cvautorecognitionForm-form-tab-panel-parse-hyperlink')['trigger']('click');var sDiv='cvautorecognition-document-viewer-converted-contents';CVAutoRecognitionForm['WaitingProgressSpinner'](!![]);var bUsePDFconverter=![],bConvert=TriSysSDK['Controls']['FileManager']['isWordFile'](sURL)||bUsePDFconverter&&TriSysSDK['Controls']['FileManager']['isPDFFile'](sURL);if(!bConvert)return CVAutoRecognitionForm['DisplayNonWordDocumentInViewer'](sURL),![];var CFileReferenceInternalToExternalPathRequest={'FolderFilePath':sURL},payloadObject={};payloadObject['URL']='Files/ConvertFileReferenceInternalToExternalPath',payloadObject['OutboundDataPacket']=CFileReferenceInternalToExternalPathRequest,payloadObject['InboundDataFunction']=function(data){if(data){if(data['Success']){var sFileURL=data['URL'];CVAutoRecognitionForm['LoadHTMLDocumentURLIntoDiv'](sDiv,sFileURL),CVAutoRecognitionForm['LoadHTMLDocumentURLIntoDiv'](sDiv+'-duplicate',sFileURL);}else TriSysApex['UI']['errorAlert'](data['ErrorMessage'],TriSysWeb['Constants']['ApplicationName']);}else TriSysApex['UI']['ShowMessage']('No\x20response\x20from\x20'+payloadObject['URL'],TriSysWeb['Constants']['ApplicationName']);return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('CVAutoRecognitionForm.DisplayAndParseCV:\x20',request,status,error,![]);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'CommenceCVParsing':function(sCVFileRef,sName){var CParseServerCVRequest={'CVFileRef':sCVFileRef},payloadObject={};payloadObject['URL']='CVParser/ParseServerCV',payloadObject['OutboundDataPacket']=CParseServerCVRequest,payloadObject['InboundDataFunction']=function(CParseServerCVResponse){if(CParseServerCVResponse){if(CParseServerCVResponse['Success']){if(CParseServerCVResponse['Demographics']){CVAutoRecognitionForm['_Calling_CandidateDuplicateWebAPI']=!![];var demographics=CParseServerCVResponse['Demographics'];$('#'+CVAutoRecognitionForm['FieldPrefix']+'Forenames')['val'](demographics['Forenames']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'Surname')['val'](demographics['Surname']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'MobileTelNo')['val'](demographics['MobileTelNo']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'WorkTelNo')['val'](demographics['WorkTelNo']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'PersonalEMail')['val'](demographics['EMail']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'Street')['val'](demographics['AddressStreet']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'City')['val'](demographics['AddressCity']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'County')['val'](demographics['AddressCounty']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'PostCode')['val'](demographics['AddressPostCode']),TriSysSDK['CShowForm']['SetTextInCombo'](CVAutoRecognitionForm['FieldPrefix']+'Country',demographics['AddressCountry']?demographics['AddressCountry']:TriSysSDK['Countries']['DefaultCountryName']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'HomeTelNo')['val'](demographics['HomeTelNo']),$('#'+CVAutoRecognitionForm['FieldPrefix']+'JobTitle')['val'](demographics['JobTitle']);if(demographics['DateOfBirth']){var dtDoB=moment(demographics['DateOfBirth'])['format']('DD\x20MMM\x20YYYY');if(dtDoB){if(dtDoB['indexOf']('0001')<0x0)$('#'+CVAutoRecognitionForm['FieldPrefix']+'DateOfBirth')['val'](dtDoB);}}var bMultiPartAddress=![];if(demographics['AddressStreet'])bMultiPartAddress=demographics['AddressStreet']['indexOf'](',')>0x0;var bPostCodeLookup=demographics['AddressPostCode']&&!bMultiPartAddress;if(bPostCodeLookup)CVAutoRecognitionForm['PostCodeLookup']();else{if(demographics['AddressStreet']){if(demographics['AddressStreet']['indexOf'](',')>0x0&&!demographics['AddressCity'])CVAutoRecognitionForm['AllocateAddressParts'](demographics['AddressStreet'],',');}}if(demographics['Gender'])TriSysSDK['CShowForm']['SetTextInCombo'](CVAutoRecognitionForm['FieldPrefix']+'Gender',demographics['Gender']);if(demographics['Title'])TriSysSDK['CShowForm']['SetTextInCombo'](CVAutoRecognitionForm['FieldPrefix']+'Title',demographics['Title']);if(demographics['TypeOfWork'])TriSysSDK['CShowForm']['SetSkillsInList'](CVAutoRecognitionForm['FieldPrefix']+'TypeOfWorkRequired',demographics['TypeOfWork']);var nationality=CVAutoRecognitionForm['FieldPrefix']+'nationality-tr';$('#'+nationality)['hide']();demographics['Nationality']&&($('#'+nationality)['show'](),nationality=CVAutoRecognitionForm['FieldPrefix']+'Nationality',$('#'+nationality)['val'](demographics['Nationality']));var social=CVAutoRecognitionForm['FieldPrefix']+'linkedin-tr';$('#'+social)['hide']();demographics['LinkedIn']&&($('#'+social)['show'](),social=CVAutoRecognitionForm['FieldPrefix']+'LinkedIn',$('#'+social)['val'](demographics['LinkedIn']));social=CVAutoRecognitionForm['FieldPrefix']+'twitter-tr',$('#'+social)['hide']();demographics['Twitter']&&($('#'+social)['show'](),social=CVAutoRecognitionForm['FieldPrefix']+'Twitter',$('#'+social)['val'](demographics['Twitter']));social=CVAutoRecognitionForm['FieldPrefix']+'facebook-tr',$('#'+social)['hide']();demographics['Facebook']&&($('#'+social)['show'](),social=CVAutoRecognitionForm['FieldPrefix']+'Facebook',$('#'+social)['val'](demographics['Facebook']));social=CVAutoRecognitionForm['FieldPrefix']+'skype-tr',$('#'+social)['hide']();demographics['Skype']&&($('#'+social)['show'](),social=CVAutoRecognitionForm['FieldPrefix']+'Skype',$('#'+social)['val'](demographics['Skype']));social=CVAutoRecognitionForm['FieldPrefix']+'youtube-tr',$('#'+social)['hide']();demographics['YouTube']&&($('#'+social)['show'](),social=CVAutoRecognitionForm['FieldPrefix']+'YouTube',$('#'+social)['val'](demographics['YouTube']));social=CVAutoRecognitionForm['FieldPrefix']+'blog-tr',$('#'+social)['hide']();demographics['Blog']&&($('#'+social)['show'](),social=CVAutoRecognitionForm['FieldPrefix']+'Blog',$('#'+social)['val'](demographics['Blog']));social=CVAutoRecognitionForm['FieldPrefix']+'website-tr',$('#'+social)['hide']();demographics['WebSite']&&($('#'+social)['show'](),social=CVAutoRecognitionForm['FieldPrefix']+'WebSite',$('#'+social)['val'](demographics['WebSite']));var fnFireDuplicateCheck=function(){for(var i=0x0;i<CVAutoRecognitionForm['TextFieldList']['length'];i++){var sField=CVAutoRecognitionForm['TextFieldList'][i];$('#'+CVAutoRecognitionForm['FieldPrefix']+sField)['trigger']('change');}CVAutoRecognitionForm['_Calling_CandidateDuplicateWebAPI']=![],CVAutoRecognitionForm['FireDuplicateCandidateCheck'](CVAutoRecognitionForm['ShowDuplicateCount']);};setTimeout(fnFireDuplicateCheck,0x7d0);}}}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('CVAutoRecognitionForm.CommenceCVParsing:\x20',request,status,error,![]);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'LoadHTMLDocumentURLIntoDiv':function(sDiv,sFileURL){$('#'+sDiv)['load'](sFileURL,function(response,status,xhr){CVAutoRecognitionForm['WaitingProgressSpinner'](![],!![]);if(status=='error'){var msg='Document\x20Conversion\x20Error:\x20';TriSysApex['UI']['ShowError'](null,msg+xhr['status']+'\x20'+xhr['statusText']);return;}});},'ReplaceTagsForDragDrop':function(sDiv){$('#'+sDiv+'\x20span')['each'](function(index,elem){var sText=$(this)['text']();if(sText){$(this)['attr']('draggable','true');var sOnDragStartEvent='event.dataTransfer.setData(\x27text\x27,\x27'+sText+'\x27);';$(this)['attr']('ondragstart',sOnDragStartEvent);}});},'WaitingProgressSpinner':function(bVisible,bConvertedWordDocument,bPDFDocument){var sConvertedDiv='cvautorecognition-document-viewer-converted-contents',pdfViewer='cvautorecognition-document-viewer-pdf-viewer',sWaitingDiv='cvautorecognition-document-viewer-waiting',sSliderDiv='cvautorecognition-document-viewer-zoom',sDuplicateSuffix='-duplicate';if(bVisible)$('#'+sConvertedDiv)['hide'](),$('#'+sConvertedDiv+sDuplicateSuffix)['hide'](),$('#'+pdfViewer)['hide'](),$('#'+pdfViewer+sDuplicateSuffix)['hide'](),$('#'+sWaitingDiv)['show'](),$('#'+sSliderDiv)['hide'](),$('#'+sSliderDiv+sDuplicateSuffix)['hide'](),setTimeout(TriSysProUI['kendoUI_Overrides'],0x32);else{$('#'+sWaitingDiv)['hide'](),$('#'+sSliderDiv)['hide'](),$('#'+sSliderDiv+sDuplicateSuffix)['hide']();if(bConvertedWordDocument)$('#'+sConvertedDiv)['show'](),$('#'+sSliderDiv)['show'](),$('#'+sConvertedDiv+sDuplicateSuffix)['show'](),$('#'+sSliderDiv+sDuplicateSuffix)['show']();else bPDFDocument&&($('#'+pdfViewer)['show'](),$('#'+pdfViewer+sDuplicateSuffix)['show']());}},'DisplayNonWordDocumentInViewer':function(sURL){if(TriSysSDK['Controls']['FileManager']['isPDFFile'](sURL)){var pdfViewer='cvautorecognition-document-viewer-pdf-viewer',fnCallback=function(sFileURL){CVAutoRecognitionForm['WaitingProgressSpinner'](![],![],!![]);var pdfViewerObject=$('#'+pdfViewer);pdfViewerObject['css']('width',CVAutoRecognitionForm['GetViewerAndSliderWidth'](![],''));var sFilePathToSet=sFileURL;sFilePathToSet+=TriSysApex['FormsManager']['pageURLTimestampArgumentsToForceNoCache'](),pdfViewerObject['removeAttr']('data'),pdfViewerObject['attr']('data',sFilePathToSet),pdfViewerObject['clone']()['appendTo']('#cvautorecognition-cv-viewer-block'),pdfViewerObject['remove']();var pdfViewerObject=$('#'+pdfViewer);pdfViewerObject['attr']('data',sFilePathToSet);var pdfViewerObjectDuplicate=$('#'+pdfViewer+'-duplicate');pdfViewerObjectDuplicate['css']('width',CVAutoRecognitionForm['GetViewerAndSliderWidth'](![],'-duplicate')),pdfViewerObjectDuplicate['attr']('data',sFilePathToSet),pdfViewerObjectDuplicate['clone']()['appendTo']('#cvautorecognition-cv-viewer-block'),pdfViewerObjectDuplicate['remove']();var pdfViewerObjectDuplicate=$('#'+pdfViewer+'-duplicate');pdfViewerObjectDuplicate['attr']('data',sFilePathToSet);};TriSysSDK['Controls']['FileManager']['GetFileReferenceServerFilePathToExternalFilePath'](sURL,fnCallback);}},'GetViewerAndSliderWidth':function(bReduceFactorise,sSuffix){var iWidth=$('#cvautorecognition-cv-viewer-block'+sSuffix)['width']();if(bReduceFactorise)iWidth-=0x46;return iWidth;},'TabButtonCallback':function(sTabID){switch(sTabID){case'cvautorecognition-form-panel-incoming':if(!CVAutoRecognitionForm['_GridInitialised']){CVAutoRecognitionForm['InitialiseIncomingCVsGrid'](),CVAutoRecognitionForm['_GridInitialised']=!![];return;}if(TriSysApex['Forms']['EntityForm']['isGridPopulated'](CVAutoRecognitionForm['FormName'],sTabID))return;CVAutoRecognitionForm['RefreshIncomingCVGrid']();break;case'cvautorecognition-form-panel-parse':var slider=$('#cvautorecognition-form-slider')['getKendoSlider']();slider['wrapper']['css']('width',CVAutoRecognitionForm['GetViewerAndSliderWidth'](![],'')),slider['resize']();if(!CVAutoRecognitionForm['CurrentDocumentURL']){setTimeout(function(){$('#cvautorecognitionForm-form-tab-panel-incoming-hyperlink')['trigger']('click');},0x64);return;}break;case'cvautorecognition-form-panel-duplicate':if(!CVAutoRecognitionForm['CurrentDocumentURL']){setTimeout(function(){$('#cvautorecognitionForm-form-tab-panel-incoming-hyperlink')['trigger']('click');},0x64);return;}if(CVAutoRecognitionForm['DuplicateSelectedCandidateId']==0x0){setTimeout(function(){$('#cvautorecognitionForm-form-tab-panel-parse-hyperlink')['trigger']('click');},0x64),TriSysApex['Toasters']['Error']('Please\x20choose\x20a\x20duplicate\x20candidate.');return;}setTimeout(function(){var iViewerAndSliderWidth=CVAutoRecognitionForm['GetViewerAndSliderWidth'](![],'-duplicate');pdfViewerObject=$('#cvautorecognition-document-viewer-pdf-viewer-duplicate'),pdfViewerObject['css']('width',iViewerAndSliderWidth);},0x64);var iViewerAndSliderWidth=CVAutoRecognitionForm['GetViewerAndSliderWidth'](![],'-duplicate'),slider=$('#cvautorecognition-form-slider-duplicate')['getKendoSlider']();slider['wrapper']['css']('width',iViewerAndSliderWidth),slider['resize']();break;}},'AddGridCV':function(){TriSysSDK['Controls']['FileManager']['FindFileUpload']('Upload\x20CV\x20Document',CVAutoRecognitionForm['UploadCV']);},'UploadCV':function(sFilePath){var payloadObject={};payloadObject['URL']='Files/MoveUploadedFileReferenceDocument',payloadObject['OutboundDataPacket']={'UploadedFilePath':sFilePath,'SubFolder':'Incoming\x20CVs'},payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var JSONdataset=data;if(JSONdataset){if(JSONdataset['Success']){var sFilePath=JSONdataset['FolderFilePath'];if(!CVAutoRecognitionForm['UploadNextCVInSequence']()){CVAutoRecognitionForm['RefreshIncomingCVGrid']();var sName=TriSysSDK['Controls']['FileManager']['GetFileNameFromPath'](sFilePath);CVAutoRecognitionForm['DisplayAndParseCV'](sFilePath,sName);}}else TriSysApex['UI']['errorAlert'](JSONdataset['ErrorMessage']);}else{}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('CVAutoRecognitionForm.UploadCV:\x20',request,status,error);};var sName=TriSysSDK['Controls']['FileManager']['GetFileNameFromPath'](sFilePath);TriSysApex['UI']['ShowWait'](null,'Copying\x20'+sName+'...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'ImportGridCV':function(){var sFullPath=TriSysSDK['Grid']['GetSelectedSingletonRowRecordIdFromGrid'](CVAutoRecognitionForm['GridID'],'FullPath','incoming\x20CV');if(sFullPath){var sName=TriSysSDK['Grid']['GetSelectedSingletonRowRecordIdFromGrid'](CVAutoRecognitionForm['GridID'],'Name','incoming\x20CV');CVAutoRecognitionForm['DisplayAndParseCV'](sFullPath,sName);}},'DeleteGridCV':function(){var lstFiles=TriSysSDK['Grid']['GetSelectedMultipleRowsFromGrid'](CVAutoRecognitionForm['GridID'],'FullPath');if(lstFiles)for(var i=0x0;i<lstFiles['length'];i++){var sFilePath=lstFiles[i];CVAutoRecognitionForm['DeleteCV'](sFilePath);}else TriSysApex['UI']['ShowMessage']('Please\x20select\x20one\x20or\x20more\x20CV\x20documents.');},'DeleteCV':function(sFilePath){var payloadObject={};payloadObject['URL']='Files/DeleteFile';var CDeleteFileRequest={'FilePath':sFilePath};payloadObject['OutboundDataPacket']=CDeleteFileRequest,payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var CDeleteFileResponse=data;if(CDeleteFileResponse)CDeleteFileResponse['Success']?CVAutoRecognitionForm['RefreshIncomingCVGrid']():TriSysApex['UI']['errorAlert'](CDeleteFileResponse['ErrorMessage']);else{}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('CVAutoRecognitionForm.DeleteCV:\x20',request,status,error);};var sName=TriSysSDK['Controls']['FileManager']['GetFileNameFromPath'](sFilePath);TriSysApex['UI']['ShowWait'](null,'Deleting\x20'+sName+'...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'OpenViewCV':function(){if(!CVAutoRecognitionForm['CurrentDocumentURL'])return;TriSysApex['Pages']['FileManagerForm']['FileOpenDrillDown'](CVAutoRecognitionForm['CurrentDocumentURL']);return;var fnCallback=function(sTitle,sURL,sName){TriSysApex['ModalDialogue']['DocumentViewer']['DownloadAndOpen'](sTitle,sURL);},sTitle=$('#cvautorecognition-parsing-document-name')['html'](),sName=sTitle;TriSysSDK['Controls']['FileManager']['GetOpenFileURLFromWebServiceWithCallback'](sTitle,CVAutoRecognitionForm['CurrentDocumentURL'],sName,!![],fnCallback);},'DeleteViewCV':function(){if(!CVAutoRecognitionForm['CurrentDocumentURL'])return;CVAutoRecognitionForm['DeleteCV'](CVAutoRecognitionForm['CurrentDocumentURL']),$('#cvautorecognition-parsing-document-name')['html']('&nbsp;'),$('#cvautorecognition-parsing-document-name-duplicate')['html']('&nbsp;'),TriSysApex['Forms']['EntityForm']['unPopulateFormGrids'](CVAutoRecognitionForm['FormName']),$('#cvautorecognitionForm-form-tab-panel-incoming-hyperlink')['trigger']('click');var sDiv='cvautorecognition-document-viewer-converted-contents';$('#'+sDiv)['html']('&nbsp;'),$('#'+sDiv+'-duplicate')['html']('&nbsp;');},'AllowDropPhoto':function(ev){ev['preventDefault']();},'DropPhoto':function(ev,sField){ev['preventDefault']();var sImageURL=ev['dataTransfer']['getData']('text');if(ev['dataTransfer']['files']){if(ev['dataTransfer']['files']['length']>0x0){var myFile=ev['dataTransfer']['files'][0x0],fnCallback=function(myUploadedServerFilePath){var fnDisplayImage=function(sURL){$(ev['target'])['attr']('src',sURL);if(sField=='cvautorecognition-form-ContactPhoto')$('#'+CVAutoRecognitionForm['FieldPrefix']+'new-ContactPhoto')['attr']('src',sURL);};TriSysSDK['FileUpload']['AfterUploadingAFileMoveItAndGetExternalURL'](myUploadedServerFilePath,fnDisplayImage,!![]);};TriSysSDK['Controls']['FileManager']['UploadFile'](myFile,fnCallback);return;}}$(ev['target'])['attr']('src',sImageURL);if(sField=='cvautorecognition-form-ContactPhoto')$('#'+CVAutoRecognitionForm['FieldPrefix']+'new-ContactPhoto')['attr']('src',sImageURL);},'DropJobTitle':function(ev){ev['preventDefault']();var sjobTitle=ev['dataTransfer']['getData']('text');TriSysSDK['CShowForm']['SetTextInCombo'](CVAutoRecognitionForm['FieldPrefix']+'JobTitle',sjobTitle);},'InitialiseZoomSlider':function(sSuffix,fnChange){var slider=$('#cvautorecognition-form-slider'+sSuffix)['kendoSlider']({'increaseButtonTitle':'Right','decreaseButtonTitle':'Left','min':0x19,'max':0x190,'smallStep':0x19,'largeStep':0x32,'change':fnChange})['data']('kendoSlider');},'ZoomCVViewer':function(e){CVAutoRecognitionForm['ZoomCVViewerEventHandler'](e,'');},'ZoomCVViewerDuplicate':function(e){CVAutoRecognitionForm['ZoomCVViewerEventHandler'](e,'-duplicate');},'ZoomCVViewerEventHandler':function(e,sSuffix){var fZoom=e['value']/0x64,lFixedHeight=0x336,viewers=['cvautorecognition-document-viewer-converted-contents'+sSuffix,'cvautorecognition-document-viewer-pdf-viewer'+sSuffix];for(var i=0x0;i<viewers['length'];i++){var viewer=viewers[i],viewerDOMObject=$('#'+viewer);if(viewerDOMObject['css']('display')!='none'){var lHeight=viewerDOMObject['height'](),iTime=0x190;viewerDOMObject['animate']({'zoom':fZoom,'height':lFixedHeight/fZoom},0x190);}}},'SaveCandidateRecord':function(){var candidateRecord=CVAutoRecognitionForm['GetAndValidateCandidateRecord']('');if(candidateRecord){var fnSubmit=function(){return CVAutoRecognitionForm['SubmitCandidateRecord'](candidateRecord,'Saving'),!![];},fnViewDuplicates=function(){return CVAutoRecognitionForm['ViewDuplicateCandidates'](),!![];};if(CVAutoRecognitionForm['_DuplicateCount']==0x0)fnSubmit();else{var sVerb=CVAutoRecognitionForm['_DuplicateCount']==0x1?'is':'are',s=CVAutoRecognitionForm['_DuplicateCount']==0x1?'':'s',sMessage='Are\x20you\x20sure\x20that\x20you\x20wish\x20to\x20save\x20this\x20as\x20a\x20new\x20candidate?'+'<br\x20/><br\x20/>'+'There\x20'+sVerb+'\x20'+CVAutoRecognitionForm['_DuplicateCount']+'\x20potential\x20duplicate\x20candidate'+s+'.'+'<br\x20/><br\x20/>'+'If\x20you\x20save\x20this\x20candidate,\x20you\x20will\x20potentially\x20create\x20a\x20duplicate.';TriSysApex['UI']['questionYesNoCancel'](sMessage,'Save\x20Candidate','Yes/Save',fnSubmit,'View\x20Duplicates',fnViewDuplicates,'No/Cancel');}}},'GetAndValidateCandidateRecord':function(sPrefix){var candidateRecord=CVAutoRecognitionForm['ReadCandidateFields'](sPrefix),sValidationError=null;if(!candidateRecord['Forenames']||!candidateRecord['Surname'])sValidationError='must\x20have\x20a\x20full\x20name';else{if(candidateRecord['Gender']=='')sValidationError='must\x20have\x20an\x20assigned\x20gender';}sValidationError=CVAutoRecognitionForm['CustomValidation'](candidateRecord,sValidationError);if(sValidationError)return TriSysApex['UI']['ShowMessage']('The\x20candidate\x20record\x20'+sValidationError),null;return candidateRecord;},'OpenExistingCandidateRecord':function(){CVAutoRecognitionForm['DuplicateSelectedCandidateId']>0x0&&TriSysApex['FormsManager']['OpenForm']('Contact',CVAutoRecognitionForm['DuplicateSelectedCandidateId']);},'OpenExistingCandidateCV':function(){var sCVFileRef=$('#cvautorecognition-form-existing-cvfileref')['html']();if(!sCVFileRef){TriSysApex['UI']['ShowMessage']('The\x20candidate\x20does\x20not\x20have\x20a\x20CV.');return;}TriSysApex['Pages']['FileManagerForm']['FileOpenDrillDown'](sCVFileRef);return;},'SaveDuplicateCandidateRecord':function(){var candidateRecord=CVAutoRecognitionForm['GetAndValidateCandidateRecord']('new-');candidateRecord&&CVAutoRecognitionForm['SubmitCandidateRecord'](candidateRecord,'Creating');},'UpdateExistingCandidateRecord':function(){var candidateRecord=CVAutoRecognitionForm['GetAndValidateCandidateRecord']('existing-');candidateRecord&&(candidateRecord['ContactId']=CVAutoRecognitionForm['DuplicateSelectedCandidateId'],candidateRecord['UpdateCandidate']=!![],CVAutoRecognitionForm['SubmitCandidateRecord'](candidateRecord,'Updating'));},'SubmitCandidateRecord':function(CCreateFromCVAutoRecognitionRequest,sProcess){var payloadObject={};payloadObject['URL']='Contact/CreateFromCVAutoRecognition',payloadObject['OutboundDataPacket']=CCreateFromCVAutoRecognitionRequest,payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var CCreateFromCVAutoRecognitionResponse=data;if(CCreateFromCVAutoRecognitionResponse){if(CCreateFromCVAutoRecognitionResponse['Success'])CVAutoRecognitionForm['AfterSaveCandidate'](CCreateFromCVAutoRecognitionResponse['ContactId']);else TriSysApex['UI']['errorAlert'](CCreateFromCVAutoRecognitionResponse['ErrorMessage']);}else{}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('CVAutoRecognitionForm.SubmitCandidateRecord:\x20',request,status,error);},TriSysApex['UI']['ShowWait'](null,sProcess+'\x20Candidate...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'AfterSaveCandidate':function(lContactId){CVAutoRecognitionForm['CurrentDocumentURL']=null,CVAutoRecognitionForm['DuplicateSelectedCandidateId']=0x0,CVAutoRecognitionForm['ClearDataEntryFields'](),CVAutoRecognitionForm['ClearDuplicateCount'](),TriSysApex['Forms']['EntityForm']['unPopulateFormGrids'](CVAutoRecognitionForm['FormName']),TriSysApex['FormsManager']['OpenForm']('Contact',lContactId);},'ViewDuplicateCandidates':function(){var fnCallback=function(candidates){CVAutoRecognitionForm['ShowDuplicateCount'](candidates);if(candidates){var iCount=candidates['length'];if(iCount>0x0)CVAutoRecognitionForm['ShowModalGridShowingDuplicateCandidates'](candidates);}};CVAutoRecognitionForm['FireDuplicateCandidateCheck'](fnCallback);},'ShowModalGridShowingDuplicateCandidates':function(candidates){var fnPopulateButtons=function(parametersObject,sGridDivID){parametersObject['ButtonLeftText']='Select',parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftFunction']=function(){var lContactId=TriSysSDK['Grid']['GetSelectedSingletonRowRecordIdFromGrid'](sGridDivID,'ContactId','duplicate\x20candidate');if(lContactId>0x0)return CVAutoRecognitionForm['DuplicateCandidateSelected'](lContactId),!![];},parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightVisible']=!![];},fnPopulateGrid=function(sGridID){var columns=[{'field':'ContactId','title':'ContactId','type':'number','hidden':!![]},{'field':'FullName','title':'Full\x20Name','type':'string','width':0xc8},{'field':'Street','title':'Street','type':'string','width':0x96},{'field':'City','title':'City','type':'string','width':0x96},{'field':'PostCode','title':'Post\x20Code','type':'string','width':0x64},{'field':'HomeTelNo','title':'Home\x20Tel\x20No','type':'string','width':0x82},{'field':'DateOfBirth','title':'Date\x20of\x20Birth','type':'date','format':'{0:dd\x20MMM\x20yyyy}','width':0x82},{'field':'MobileTelNo','title':'Mobile','type':'string','width':0x82},{'field':'WorkTelNo','title':'Work\x20Tel\x20No','type':'string','width':0x82},{'field':'PersonalEMail','title':'Personal\x20E-Mail','type':'string','width':0x96},{'field':'WorkEMail','title':'Work\x20E-Mail','type':'string','width':0x96}];TriSysSDK['Grid']['VirtualMode']({'Div':sGridID,'ID':'grdDuplicateCandidates','RecordsPerPage':0xa,'PopulationByObject':candidates,'Columns':columns,'MobileVisibleColumns':[{'field':'FullName'}],'MobileRowTemplate':'<td\x20colspan=\x221\x22><strong>#:\x20FullName\x20#</strong><br\x20/>'+'<i>#:\x20City\x20#</i><br\x20/>'+'DoB:\x20#:\x20DateOfBirth\x20#<br\x20/>'+'Home:\x20#:\x20HomeTelNo\x20#<br\x20/>'+'Mobile:\x20#:\x20MobileTelNo\x20#<br\x20/>'+'E-Mail:\x20#:\x20PersonalEMail\x20#<br\x20/>'+'</td>','KeyColumnName':'ContactId','DrillDownFunction':function(rowData){TriSysApex['UI']['CloseModalPopup'](),CVAutoRecognitionForm['DuplicateCandidateSelected'](rowData['ContactId']);},'MultiRowSelect':!![],'Grouping':![],'ColumnFilters':![],'OpenButtonCaption':'Select'});};TriSysApex['ModalDialogue']['Grid']['Show']('Potential\x20Duplicate\x20Candidates',null,fnPopulateButtons,fnPopulateGrid,{'CloseTopRightButton':!![]});},'DuplicateCandidateSelected':function(lContactId){CVAutoRecognitionForm['DuplicateSelectedCandidateId']=lContactId,setTimeout(function(){$('#cvautorecognitionForm-form-tab-panel-duplicate-hyperlink')['trigger']('click');var sNewJobTitle=$('#'+CVAutoRecognitionForm['FieldPrefix']+'JobTitle')['val']();$('#'+CVAutoRecognitionForm['FieldPrefix']+'new-JobTitle')['val'](sNewJobTitle);},0x64),CVAutoRecognitionForm['LoadDuplicateContactRecordFromAPI'](lContactId);},'LoadDuplicateContactRecordFromAPI':function(lContactId){var CReadDuplicateCandidateRequest={'ContactId':lContactId},payloadObject={};payloadObject['URL']='Contact/ReadDuplicateCandidate',payloadObject['OutboundDataPacket']=CReadDuplicateCandidateRequest,payloadObject['InboundDataFunction']=function(CReadDuplicateCandidateResponse){TriSysApex['UI']['HideWait']();if(CReadDuplicateCandidateResponse){if(CReadDuplicateCandidateResponse['Success']||!![]){CVAutoRecognitionForm['DisplayDuplicateCandidateRecord'](CReadDuplicateCandidateResponse['Candidate']);return;}}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('CVAutoRecognitionForm.LoadDuplicateContactRecordFromAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Loading\x20Duplicate...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'DisplayDuplicateCandidateRecord':function(candidate){var sExistingPrefix=CVAutoRecognitionForm['FieldPrefix']+'existing-';$('#'+sExistingPrefix+'Forenames')['val'](candidate['Forenames']),$('#'+sExistingPrefix+'Surname')['val'](candidate['Surname']),$('#'+sExistingPrefix+'MobileTelNo')['val'](candidate['MobileTelNo']),$('#'+sExistingPrefix+'WorkTelNo')['val'](candidate['WorkTelNo']),$('#'+sExistingPrefix+'PersonalEMail')['val'](candidate['PersonalEMail']),$('#'+sExistingPrefix+'Street')['val'](candidate['Street']),$('#'+sExistingPrefix+'City')['val'](candidate['City']),$('#'+sExistingPrefix+'County')['val'](candidate['County']),$('#'+sExistingPrefix+'PostCode')['val'](candidate['PostCode']),TriSysSDK['CShowForm']['SetTextInCombo'](sExistingPrefix+'Country',candidate['Country']?candidate['Country']:TriSysSDK['Countries']['DefaultCountryName']),$('#'+sExistingPrefix+'HomeTelNo')['val'](candidate['HomeTelNo']),$('#'+sExistingPrefix+'JobTitle')['val'](candidate['JobTitle']);if(candidate['DateOfBirth']){var dtDoB=moment(candidate['DateOfBirth'])['format']('DD\x20MMM\x20YYYY');if(dtDoB['indexOf']('0001')<0x0)$('#'+sExistingPrefix+'DateOfBirth')['val'](dtDoB);}TriSysSDK['CShowForm']['SetTextInCombo'](sExistingPrefix+'Title',candidate['Title']),TriSysSDK['CShowForm']['SetTextInCombo'](sExistingPrefix+'Gender',candidate['Gender']),TriSysSDK['CShowForm']['SetTextInCombo'](sExistingPrefix+'ContactSource',candidate['ContactSource']),TriSysSDK['CShowForm']['SetSkillsInList'](sExistingPrefix+'TypeOfWorkRequired',candidate['TypeOfWorkRequired']);if(candidate['ContactPhoto']){var fnShowExistingPhoto=function(sFileURL){$('#'+sExistingPrefix+'ContactPhoto')['attr']('src',sFileURL);};TriSysSDK['Controls']['FileManager']['GetFileReferenceServerFilePathToExternalFilePath'](candidate['ContactPhoto'],fnShowExistingPhoto);}$('#cvautorecognition-form-existing-cvfileref')['html'](candidate['CVFileRef']);},'FireDuplicateCandidateCheck':function(fnCallback){var candidateRecord=CVAutoRecognitionForm['ReadCandidateFields'](''),duplicateCheck={'Candidate':candidateRecord};CVAutoRecognitionForm['CandidateDuplicateWebAPICall'](duplicateCheck,fnCallback);},'ReadCandidateFields':function(sPrefix){var sGender=TriSysSDK['CShowForm']['GetTextFromCombo'](CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Gender');if(sGender)sGender=sGender['trim']();var candidateRecord={'Forenames':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Forenames')['val'](),'Surname':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Surname')['val'](),'Street':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Street')['val'](),'City':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'City')['val'](),'County':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'County')['val'](),'PostCode':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'PostCode')['val'](),'Country':TriSysSDK['CShowForm']['GetTextFromCombo'](CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Country'),'HomeTelNo':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'HomeTelNo')['val'](),'WorkTelNo':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'WorkTelNo')['val'](),'MobileTelNo':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'MobileTelNo')['val'](),'PersonalEMail':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'PersonalEMail')['val'](),'WorkEMail':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'WorkEMail')['val'](),'DateOfBirth':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'DateOfBirth')['val'](),'Title':TriSysSDK['CShowForm']['GetTextFromCombo'](CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Title'),'JobTitle':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'JobTitle')['val'](),'Gender':sGender,'ContactSource':TriSysSDK['CShowForm']['GetTextFromCombo'](CVAutoRecognitionForm['FieldPrefix']+sPrefix+'ContactSource'),'TypeOfWorkRequired':TriSysSDK['CShowForm']['GetSelectedSkillsFromList'](CVAutoRecognitionForm['FieldPrefix']+sPrefix+'TypeOfWorkRequired'),'ContactPhoto':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'ContactPhoto')['attr']('src'),'Nationality':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Nationality')['val'](),'LinkedIn':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'LinkedIn')['val'](),'Facebook':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Facebook')['val'](),'Skype':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Skype')['val'](),'Twitter':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Twitter')['val'](),'YouTube':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'YouTube')['val'](),'Blog':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'Blog')['val'](),'WebSite':$('#'+CVAutoRecognitionForm['FieldPrefix']+sPrefix+'WebSite')['val'](),'CVFileRef':CVAutoRecognitionForm['CurrentDocumentURL']};return candidateRecord;},'JobTitleLookup':function(){var sJobTitleField=CVAutoRecognitionForm['FieldPrefix']+'JobTitle',sJobTitle=TriSysSDK['CShowForm']['GetJobTitleFromField'](sJobTitleField);TriSysSDK['JobTitle']['Lookup'](sJobTitle,sJobTitleField);},'FileUpdated':function(sFilePath){var parts=sFilePath['split']('\x5c'),sUpdatedFilePath=parts[parts['length']-0x2]+'\x5c'+parts[parts['length']-0x1];sUpdatedFilePath=sUpdatedFilePath['toLowerCase']();var sCurrentCVPath=CVAutoRecognitionForm['CurrentDocumentURL'];if(!sCurrentCVPath)return;sCurrentCVPath=sCurrentCVPath['replace'](/\\\\/g,'\x5c'),parts=sCurrentCVPath['split']('\x5c');var sCVFilePath=parts[parts['length']-0x2]+'\x5c'+parts[parts['length']-0x1];sCVFilePath=sCVFilePath['toLowerCase']();if(sUpdatedFilePath==sCVFilePath){sFilePath='G:\x5c'+sUpdatedFilePath;var sName=TriSysSDK['Controls']['FileManager']['GetFileNameFromPath'](sFilePath);CVAutoRecognitionForm['DisplayAndParseCV'](sFilePath,sName);}},'CustomValidation':function(candidateRecord,sValidationError){if(typeof ApexCustomerModule!=TriSysApex['Constants']['Undefined']&&typeof ApexCustomerModule['CustomCVARValidation']!=TriSysApex['Constants']['Undefined'])try{sValidationError=ApexCustomerModule['CustomCVARValidation'](candidateRecord,sValidationError);}catch(e){TriSysApex['Logging']['LogMessage'](TriSysApex['Logging']['CatchVariableToText'](e));}return sValidationError;}};$(document)['ready'](function(){setTimeout(function(){CVAutoRecognitionForm['Load']();},0xa);});