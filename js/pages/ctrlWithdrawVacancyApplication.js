var ctrlWithdrawVacancyApplication={'JobReferenceID':'ctrlWithdrawVacancyApplication_JobReference','JobReferenceLabelID':'ctrlWithdrawVacancyApplication_JobReferenceLabel','JobTitleID':'ctrlWithdrawVacancyApplication_JobTitle','JobTitleFormBlockID':'ctrlWithdrawVacancyApplication_JobTitleBlock','ReasonID':'ctrlWithdrawVacancyApplication_Reason','CookieName':'ctrlWithdrawVacancyApplication.Settings','Load':function(){var iCount=TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['RequirementId']['length'],sReference=iCount==0x1?TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['Reference']:iCount,sJobTitle=TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['JobTitle'];iCount>0x1&&($('#'+ctrlWithdrawVacancyApplication['JobReferenceLabelID'])['html']('Vacancy\x20Count'),$('#'+ctrlWithdrawVacancyApplication['JobTitleFormBlockID'])['hide']());$('#'+ctrlWithdrawVacancyApplication['JobReferenceID'])['html'](sReference),$('#'+ctrlWithdrawVacancyApplication['JobTitleID'])['html'](sJobTitle);var settings=TriSysAPI['Persistence']['Read'](ctrlWithdrawVacancyApplication['CookieName']);settings&&$('#'+ctrlWithdrawVacancyApplication['ReasonID'])['val'](settings['Reason']);},'Withdraw':function(){var settings={'Reason':$('#'+ctrlWithdrawVacancyApplication['ReasonID'])['val']()},sError=null;if(!settings['Reason'])sError='Please\x20enter\x20a\x20short\x20reason\x20why\x20you\x20are\x20withdrawing\x20your\x20application';if(sError)return TriSysApex['UI']['ShowMessage'](sError,TriSysWebJobs['Constants']['ApplicationName']),![];var CVacancyWithdrawApplicationRequest={'Reason':settings['Reason'],'RequirementIdList':TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['RequirementId'],'WebJobsRequest':TriSysWebJobs['Agency']['WebJobsRequest']()},iCount=TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['RequirementId']['length'];return ctrlWithdrawVacancyApplication['WithdrawFromMultipleVacanciesViaServer'](CVacancyWithdrawApplicationRequest,iCount),TriSysAPI['Persistence']['Write'](ctrlWithdrawVacancyApplication['CookieName'],settings),!![];},'WithdrawFromMultipleVacanciesViaServer':function(CVacancyWithdrawApplicationRequest,iNumberOfJobs){var sWaitMessage='Withdrawing\x20from\x20'+iNumberOfJobs+'\x20Vacanc'+(iNumberOfJobs>0x1?'ies':'y')+'...';TriSysApex['UI']['ShowWait'](null,sWaitMessage);var payloadObject={};payloadObject['URL']='Vacancy/WithdrawApplication',payloadObject['OutboundDataPacket']=CVacancyWithdrawApplicationRequest,payloadObject['InboundDataFunction']=function(CVacancyWithdrawApplicationResult){TriSysApex['UI']['HideWait']();if(CVacancyWithdrawApplicationResult){if(CVacancyWithdrawApplicationResult['Success']){var sMessage='Withdrawn\x20from\x20'+iNumberOfJobs+'\x20vacanc'+(iNumberOfJobs==0x1?'y':'ies')+'<br\x20/>View\x20all\x20vacancy\x20applications?';TriSysApex['UI']['questionYesNo'](sMessage,TriSysWebJobs['Constants']['ApplicationName'],'Yes',function(){return TriSysApex['FormsManager']['OpenForm'](TriSysWebJobs['Constants']['CandidateVacancyApplications'],0x0,!![]),!![];},'No');}else TriSysApex['UI']['errorAlert'](CVacancyWithdrawApplicationResult['ErrorMessage'],TriSysWebJobs['Constants']['ApplicationName']);}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('ctrlWithdrawVacancyApplication.WithdrawFromMultipleVacanciesViaServer:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};$(document)['ready'](function(){ctrlWithdrawVacancyApplication['Load']();});