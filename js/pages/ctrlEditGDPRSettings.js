var ctrlEditGDPRSettings={'Load':function(lContactId){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']='Edit\x20Privacy\x20Preferences/GDPR',parametersObject['Image']='gi-lock',parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'ctrlEditGDPRSettings.html',parametersObject['OnLoadCallback']=function(){ctrlEditGDPRSettings['LoadExistingSettings'](lContactId);},parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonLeftText']='Save',parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftFunction']=function(){ctrlEditGDPRSettings['SaveSettings'](lContactId);},parametersObject['Width']=$(window)['width']()/0x2,TriSysApex['UI']['PopupMessage'](parametersObject);},'LoadExistingSettings':function(lContactId){var bGDPRAutomatedNotificationEMailSent=TriSysSDK['CShowForm']['GetCheckBoxValue']('contactForm-GDPRAutomatedNotificationEMailSent',![]),bAgreeToPrivacyPolicy=TriSysSDK['CShowForm']['GetCheckBoxValue']('contactForm-AgreeToPrivacyPolicy',![]),bAgreeToMarketingCommunications=TriSysSDK['CShowForm']['GetCheckBoxValue']('contactForm-AgreeToMarketingCommunications',![]),bGDPRRestrictDataProcessing=TriSysSDK['CShowForm']['GetCheckBoxValue']('contactForm-GDPRRestrictDataProcessing',![]),bGDPRDeletionRequestReceived=TriSysSDK['CShowForm']['GetCheckBoxValue']('contactForm-GDPRDeletionRequestReceived',![]),bGDPRDataPortabilityRequestReceived=TriSysSDK['CShowForm']['GetCheckBoxValue']('contactForm-GDPRDataPortabilityRequestReceived',![]);TriSysSDK['CShowForm']['SetCheckBoxValue']('ctrlEditGDPRSettings-GDPRAutomatedNotificationEMailSent',bGDPRAutomatedNotificationEMailSent),TriSysSDK['CShowForm']['SetCheckBoxValue']('ctrlEditGDPRSettings-AgreeToPrivacyPolicy',bAgreeToPrivacyPolicy),TriSysSDK['CShowForm']['SetCheckBoxValue']('ctrlEditGDPRSettings-AgreeToMarketingCommunications',bAgreeToMarketingCommunications),TriSysSDK['CShowForm']['SetCheckBoxValue']('ctrlEditGDPRSettings-GDPRRestrictDataProcessing',bGDPRRestrictDataProcessing),TriSysSDK['CShowForm']['SetCheckBoxValue']('ctrlEditGDPRSettings-GDPRDeletionRequestReceived',bGDPRDeletionRequestReceived),TriSysSDK['CShowForm']['SetCheckBoxValue']('ctrlEditGDPRSettings-GDPRDataPortabilityRequestReceived',bGDPRDataPortabilityRequestReceived);},'SaveSettings':function(lContactId){var bGDPRAutomatedNotificationEMailSent=TriSysSDK['CShowForm']['GetCheckBoxValue']('ctrlEditGDPRSettings-GDPRAutomatedNotificationEMailSent',![]),bAgreeToPrivacyPolicy=TriSysSDK['CShowForm']['GetCheckBoxValue']('ctrlEditGDPRSettings-AgreeToPrivacyPolicy',![]),bAgreeToMarketingCommunications=TriSysSDK['CShowForm']['GetCheckBoxValue']('ctrlEditGDPRSettings-AgreeToMarketingCommunications',![]),bGDPRRestrictDataProcessing=TriSysSDK['CShowForm']['GetCheckBoxValue']('ctrlEditGDPRSettings-GDPRRestrictDataProcessing',![]),bGDPRDeletionRequestReceived=TriSysSDK['CShowForm']['GetCheckBoxValue']('ctrlEditGDPRSettings-GDPRDeletionRequestReceived',![]),bGDPRDataPortabilityRequestReceived=TriSysSDK['CShowForm']['GetCheckBoxValue']('ctrlEditGDPRSettings-GDPRDataPortabilityRequestReceived',![]),CUpdateContactGDPRPreferencesRequest={'ContactId':lContactId,'GDPRAutomatedNotificationEMailSent':bGDPRAutomatedNotificationEMailSent,'AgreeToPrivacyPolicy':bAgreeToPrivacyPolicy,'AgreeToMarketingCommunications':bAgreeToMarketingCommunications,'GDPRRestrictDataProcessing':bGDPRRestrictDataProcessing,'GDPRDeletionRequestReceived':bGDPRDeletionRequestReceived,'GDPRDataPortabilityRequestReceived':bGDPRDataPortabilityRequestReceived},payloadObject={};payloadObject['URL']='Contact/UpdateGDPRPreferences',payloadObject['OutboundDataPacket']=CUpdateContactGDPRPreferencesRequest,payloadObject['InboundDataFunction']=function(CUpdateContactGDPRPreferencesResponse){TriSysApex['UI']['HideWait']();if(CUpdateContactGDPRPreferencesResponse){if(CUpdateContactGDPRPreferencesResponse['Success']){contactForm['LoadPrivacyAndGDPR'](),TriSysApex['UI']['CloseModalPopup'](),TriSysApex['FormsManager']['EntityUpdateController']['AsynchronousEntityUpdate']('Task',0x0);return;}else TriSysApex['UI']['ShowMessage'](CUpdateContactGDPRPreferencesResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlEditGDPRSettings.SaveSettings:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Updating\x20Preferences...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};