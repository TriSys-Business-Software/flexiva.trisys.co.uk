var ctrlNewWithMultipleFields={'SaveFunctionCallback':null,'Options':null,'Load':function(options,fnSubmitCallback){ctrlNewWithMultipleFields['SaveFunctionCallback']=fnSubmitCallback,ctrlNewWithMultipleFields['Options']=options;if(options){options['Instructions']&&($('#ctrlNewWithMultipleFields-Instructions-tr')['show'](),$('#ctrlNewWithMultipleFields-Instructions')['html'](options['Instructions']));if(options['Fields']){var iCount=0x0;options['Fields']['forEach'](function(field){iCount++;const tr=$('#ctrlNewWithMultipleFields-Row-'+iCount+'-tr');tr['show']();const spanLabel=$('#ctrlNewWithMultipleFields-Label'+iCount);spanLabel['text'](field['Label']);const textBox=$('#ctrlNewWithMultipleFields-Value'+iCount);if(field['Value'])textBox['val'](field['Value']);if(field['MaxLength'])textBox['attr']('maxlength',field['MaxLength']);if(field['Required'])textBox['attr']('required',!![]);textBox['keyup'](function(e){if(e['keyCode']==0xd){var bSaved=ctrlNewWithMultipleFields['Save']();e['stopPropagation']();}});if(iCount==0x1)textBox['focus']();});}if(options['ComboFields']){var iCount=0x0;options['ComboFields']['forEach'](function(field){iCount++;const tr=$('#ctrlNewWithMultipleFields-ComboRow-'+iCount+'-tr');tr['show']();const spanLabel=$('#ctrlNewWithMultipleFields-ComboLabel'+iCount);spanLabel['text'](field['Label']);const sID='ctrlNewWithMultipleFields-Combo'+iCount;if(field['ComboList'])TriSysSDK['CShowForm']['populateComboFromListOfString'](sID,field['ComboList']);if(field['ComboSelectedItem'])TriSysSDK['CShowForm']['SetTextInCombo'](sID,options['ComboSelectedItem']);});}}},'Save':function(){const options=ctrlNewWithMultipleFields['Options'];if(options['Fields']){var iCount=0x0,sError='';options['Fields']['forEach'](function(field){iCount++;const textBox=$('#ctrlNewWithMultipleFields-Value'+iCount);field['Value']=textBox['val']();if(field['Required'])field['ValidationFailed']=field['Value']==='';if(field['ValidationFailed'])sError+=field['Label']+'\x20is\x20required<br>';});if(sError['length']>0x0)return TriSysApex['UI']['ShowMessage'](sError),![];}if(options['ComboFields']){var iCount=0x0;options['ComboFields']['forEach'](function(field){iCount++;const sID='ctrlNewWithMultipleFields-Combo'+iCount;field['Value']=TriSysSDK['CShowForm']['GetTextFromCombo'](sID);});}if(ctrlNewWithMultipleFields['SaveFunctionCallback'])return ctrlNewWithMultipleFields['SaveFunctionCallback'](options['Fields'],options['ComboFields']);}};