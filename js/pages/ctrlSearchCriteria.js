var ctrlSearchCriteria={'PostLoad':function(sEntityName,lRecordId,parentDiv,fnSearchCallback){var sIDSuffix='-'+parentDiv,controls=['search-criteria-entity','search-criteria-hide','search-criteria-tree','search-criteria-lookup-button','search-criteria-clear-button','search-criteria-saved-search-menu','ctrlSearchCriteria-tab-buttons','ctrlSearchCriteria-tab-nav-horizontal','ctrlSearchCriteria-form-tab-boolean','ctrlSearchCriteria-form-tab-ai','ctrlSearchCriteria-tab-boolean','ctrlSearchCriteria-tab-ai','ctrlSearchCriteria-tab-panel-boolean','ctrlSearchCriteria-tab-panel-ai','search-criteria-ai'];for(var i in controls){$('#'+controls[i])['attr']('id',controls[i]+sIDSuffix);}$('#search-criteria-entity'+sIDSuffix)['html'](sEntityName),$('#ctrlSearchCriteria-tab-boolean'+sIDSuffix)['off']()['on']('click',function(){TriSysSDK['EntityFormTabs']['TabContainerClickEvent']($(this),'ctrlSearchCriteria-tab-panel-boolean'+sIDSuffix,ctrlSearchCriteria['TabClickEvent']);}),$('#ctrlSearchCriteria-tab-ai'+sIDSuffix)['off']()['on']('click',function(){TriSysSDK['EntityFormTabs']['TabContainerClickEvent']($(this),'ctrlSearchCriteria-tab-panel-ai'+sIDSuffix,function(sTabID){ctrlSearchCriteria['TabClickEvent'](sTabID,sIDSuffix);});}),TriSysSDK['EntityFormTabs']['AddClickEventHandlers']('ctrlSearchCriteria-tab-nav-horizontal'+sIDSuffix,!![]),TriSysSDK['Controls']['Button']['Click']('ctrlSearchCriteria-form-tab-boolean'+sIDSuffix),ctrlSearchCriteria['LoadAISearchCriteria'](sEntityName,lRecordId,'search-criteria-ai'+sIDSuffix,sIDSuffix,'ctrlSearchCriteria-form-tab-ai');var sSearchCriteriaTree='search-criteria-tree'+sIDSuffix;$('#search-criteria-hide'+sIDSuffix)['off']()['on']('click',function(){TriSysSDK['Blocks']['toggleBlockSize']($(this),sSearchCriteriaTree);});var sSearchButton='#search-criteria-lookup-button'+sIDSuffix;$(sSearchButton)['off']()['on']('click',function(){ctrlSearchCriteria['DoSearch'](sEntityName,lRecordId,sSearchCriteriaTree,fnSearchCallback,![],sIDSuffix);});var sResetButton='#search-criteria-clear-button'+sIDSuffix;$(sResetButton)['off']()['on']('click',function(){ctrlSearchCriteria['ResetSearch'](sEntityName,lRecordId,sSearchCriteriaTree,fnSearchCallback);});var fnResetSearch=function(){var bNoPrompt=!![];ctrlSearchCriteria['ResetSearch'](sEntityName,lRecordId,sSearchCriteriaTree,fnSearchCallback,bNoPrompt);},sSavedSearchMenu='search-criteria-saved-search-menu'+sIDSuffix;TriSysSDK['SearchCriteria']['LoadSavedSearchMenu'](sEntityName,ctrlSearchCriteria['Constants']['EntitySearchPrefix'],sSavedSearchMenu,sSearchCriteriaTree,fnSearchCallback),ctrlSearchCriteria['Populate'](sEntityName,lRecordId,sSearchCriteriaTree,sSearchButton),setTimeout(TriSysProUI['kendoUI_Overrides'],0x3e8),ctrlSearchCriteria['Persistence']['Get'](sSearchCriteriaTree,sEntityName,lRecordId,fnSearchCallback,fnResetSearch);},'Populate':function(sEntityName,lRecordId,sSearchCriteriaTree,sSearchButton){var TriSysFields=ctrlSearchCriteria['GetFilters'](sEntityName,sSearchButton),options={'allow_empty':!![],'plugins':['filter-description','unique-filter'],'filters':TriSysFields};ctrlSearchCriteria['DynamicColumns']['Fields']=TriSysFields;try{$('#'+sSearchCriteriaTree)['queryBuilder'](options);}catch(e){var sError=e;}$('#'+sSearchCriteriaTree)['on']('afterAddGroup.queryBuilder',function(e,model){ctrlSearchCriteria['ResetColours']();}),$('#'+sSearchCriteriaTree)['on']('afterCreateRuleInput.queryBuilder',function(e,rule){var ruleData=rule['data'];if(ruleData&&ruleData['FieldWidgetID']){var bSkillRule=ruleData['FieldWidgetID']['indexOf'](ctrlSearchCriteria['FieldTypeFilter']['SkillFieldPrefix'])==0x0;ruleData&&setTimeout(function(){ctrlSearchCriteria['FieldTypeFilter']['ResizeToFitWidth'](rule);},0x32);}}),ctrlSearchCriteria['ResetColours']();},'GetFilters':function(sEntityName,sSearchButton){var fieldFilters=[];ctrlSearchCriteria['AddCrossEntitySearchFields'](sEntityName,fieldFilters,sSearchButton);var fieldDescriptions=ctrlSearchCriteria['GetFieldDescriptionsForEntitySearching'](sEntityName);ctrlSearchCriteria['CustomerSpecificFieldDescriptionModifications'](sEntityName,fieldDescriptions);for(var i=0x0;i<fieldDescriptions['length'];i++){var fieldDescription=fieldDescriptions[i],fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['Filter'](sEntityName,fieldDescription,sSearchButton);if(fieldFilter){var bDuplicateFound=![];for(var f=0x0;f<fieldFilters['length'];f++){var existingFieldFilter=fieldFilters[f];if(existingFieldFilter['id']==fieldFilter['id'])bDuplicateFound=!![];}if(!bDuplicateFound)fieldFilters['push'](fieldFilter);}else console['log']('Unable\x20to\x20create\x20field\x20filter\x20for:\x20'+fieldDescription['TableName']+'.'+fieldDescription['TableFieldName']);}return ctrlSearchCriteria['PruneFieldFiltersOfUnwantedFields'](sEntityName,fieldFilters),fieldFilters['sort'](function(a,b){return a['label']['localeCompare'](b['label']);}),fieldFilters;},'PruneFieldFiltersOfUnwantedFields':function(sEntityName,fieldFilters){var unwantedFields=null;switch(sEntityName){case'Placement':unwantedFields=['PlacementConfigFields_CandidateEMail'];break;case'Timesheet':unwantedFields=['TimesheetConfigFields_DeductionCode','TimesheetConfigFields_DeductionPeriod','TimesheetConfigFields_ExpenseCode','TimesheetConfigFields_ExpensePeriod','Timesheet_TimesheetPeriodId','TaskLink','TimesheetConfigFields_TimesheetType'];break;}unwantedFields&&ctrlSearchCriteria['RemoveSpecifiedFieldsFromFilters'](fieldFilters,unwantedFields);},'GetFieldDescriptionsForEntitySearching':function(sEntityName){var fieldDescriptions=TriSysSDK['CShowForm']['fieldDescriptions'](sEntityName),allowedTableFieldNames=[],ignoredTableFieldNames=[],tableFieldNameData=ctrlSearchCriteria['AllowedTableFieldNamesForEntity'](sEntityName);tableFieldNameData&&(allowedTableFieldNames=tableFieldNameData['AllowedTableFieldNames'],ignoredTableFieldNames=tableFieldNameData['IgnoredTableFieldNames']);var fieldDescriptionsToSearch=[];for(var i=0x0;i<fieldDescriptions['length'];i++){var fieldDescription=fieldDescriptions[i],bAddFilter=![];if(fieldDescription['Lookup']){bAddFilter=!($['inArray'](fieldDescription['TableFieldName'],ignoredTableFieldNames)>=0x0);if(bAddFilter){bAddFilter=![];var categories=TriSysApex['Cache']['SkillCategories']();for(var c=0x0;c<categories['length'];c++){var category=categories[c];if(category['Category']['trim']()==fieldDescription['TableFieldName']['trim']())bAddFilter=!![];}}}else bAddFilter=$['inArray'](fieldDescription['TableFieldName'],allowedTableFieldNames)>=0x0;bAddFilter&&fieldDescriptionsToSearch['push'](fieldDescription);}return fieldDescriptionsToSearch=JSON['parse'](JSON['stringify'](fieldDescriptionsToSearch)),fieldDescriptionsToSearch;},'AllowedTableFieldNamesForEntity':function(sEntityName,allowedTableFieldNames,ignoredTableFieldNames){var bCustomConfiguration=TriSysApex['Constants']['CustomSearchCriteriaEntityFields'],jsonData=TriSysApex['Forms']['Configuration']['JsonFileData']('search-criteria-entity-fields.json',bCustomConfiguration);if(jsonData)for(var i=0x0;i<jsonData['Data']['length'];i++){var entityData=jsonData['Data'][i];if(entityData['EntityName']==sEntityName){var tableFieldNameData={'AllowedTableFieldNames':entityData['AllowedTableFieldNames'],'IgnoredTableFieldNames':entityData['IgnoredLookupTableFieldNames'],'IgnoredCrossEntityFieldNames':entityData['IgnoredCrossEntityFieldNames']};return tableFieldNameData;}}return null;},'AddCrossEntitySearchFields':function(sEntityName,fieldFilters,sSearchButton){var entityIDFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,sEntityName+ctrlSearchCriteria['EntityFields']['EntityIdSuffix'],'ID',null);fieldFilters['push'](entityIDFilter);var bTaskType=sEntityName=='Task';if(bTaskType){var taskTypeFilter=ctrlSearchCriteria['FieldTypeFilter']['TaskTypeField']();if(taskTypeFilter)fieldFilters['push'](taskTypeFilter);}else{var entityTypeFilter=ctrlSearchCriteria['FieldTypeFilter']['EntityTypeField'](sEntityName);if(entityTypeFilter)fieldFilters['push'](entityTypeFilter);var taskFilter=ctrlSearchCriteria['FieldTypeFilter']['TaskField'](sEntityName);fieldFilters['push'](taskFilter);}switch(sEntityName){case'Contact':case'Requirement':case'Placement':var sCompanyFieldGroup='Company',companyNameFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['CompanyName'],'Company\x20Name',sCompanyFieldGroup,null,sSearchButton);fieldFilters['push'](companyNameFilter);var jobTitleFilter=ctrlSearchCriteria['FieldTypeFilter']['JobTitleField'](sEntityName);if(jobTitleFilter)fieldFilters['push'](jobTitleFilter);var entityUserFilter=ctrlSearchCriteria['FieldTypeFilter']['EntityUserField'](sEntityName);if(entityUserFilter)fieldFilters['push'](entityUserFilter);break;}switch(sEntityName){case'Contact':var automatedNotificationEMailSentFilter=ctrlSearchCriteria['FieldTypeFilter']['BooleanField'](ctrlSearchCriteria['EntityFields']['AutomatedNotificationEMailSent'],'Automated\x20Notification\x20EMail\x20Sent',sEntityName);fieldFilters['push'](automatedNotificationEMailSentFilter);var agreedToMarCommsFilter=ctrlSearchCriteria['FieldTypeFilter']['BooleanField'](ctrlSearchCriteria['EntityFields']['AgreeToMarketingCommunications'],'Agreed\x20To\x20Marketing\x20Communications',sEntityName);fieldFilters['push'](agreedToMarCommsFilter);var deletionRequestReceivedFilter=ctrlSearchCriteria['FieldTypeFilter']['BooleanField'](ctrlSearchCriteria['EntityFields']['DeletionRequestReceived'],'Deletion\x20Request\x20Received',sEntityName);fieldFilters['push'](deletionRequestReceivedFilter);var restrictDataProcessingRequestedFilter=ctrlSearchCriteria['FieldTypeFilter']['BooleanField'](ctrlSearchCriteria['EntityFields']['RestrictDataProcessingRequested'],'Restrict\x20Data\x20Processing\x20Requested',sEntityName);fieldFilters['push'](restrictDataProcessingRequestedFilter);var agreedToPrivacyPolicy=ctrlSearchCriteria['FieldTypeFilter']['BooleanField'](ctrlSearchCriteria['EntityFields']['AgreedToPrivacyPolicy'],'Agreed\x20to\x20Privacy\x20Policy',sEntityName);fieldFilters['push'](agreedToPrivacyPolicy);var dataPortabilityRequestReceived=ctrlSearchCriteria['FieldTypeFilter']['BooleanField'](ctrlSearchCriteria['EntityFields']['DataPortabilityRequestReceived'],'Data\x20Portability\x20Request\x20Received',sEntityName);fieldFilters['push'](dataPortabilityRequestReceived);case'Company':var bLoggedIntoTriSysCRM=TriSysApex['LoginCredentials']['isLoggedInToSpecificCompanyAsRecruiter']('TriSys\x20Business\x20Software');if(bLoggedIntoTriSysCRM){var customerAtAnyTimeFilter=ctrlSearchCriteria['FieldTypeFilter']['BooleanField'](ctrlSearchCriteria['EntityFields']['CustomerAtAnyTime'],'Customer\x20at\x20any\x20time',sEntityName);fieldFilters['push'](customerAtAnyTimeFilter);var companyOKtoServiceFilter=ctrlSearchCriteria['FieldTypeFilter']['BooleanField'](ctrlSearchCriteria['EntityFields']['CompanyOKtoService'],'Company\x20OK\x20to\x20Service',sEntityName);fieldFilters['push'](companyOKtoServiceFilter);}else{var numericOperators=['greater','greater_or_equal','less','less_or_equal','between','equal','not_equal'],requirementClientCountFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,ctrlSearchCriteria['EntityFields']['RequirementClientCount'],'Requirement\x20'+(sEntityName=='Contact'?'(Client)\x20':'')+'Count',sEntityName,!![],numericOperators);fieldFilters['push'](requirementClientCountFilter);var placementClientCountFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,ctrlSearchCriteria['EntityFields']['PlacementClientCount'],'Placement\x20'+(sEntityName=='Contact'?'(Client)\x20':'')+'Count',sEntityName,!![],numericOperators);fieldFilters['push'](placementClientCountFilter);if(sEntityName=='Contact'){var requirementCandidateCountFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,ctrlSearchCriteria['EntityFields']['RequirementCandidateCount'],'Requirement\x20(Candidate)\x20Count',sEntityName,!![],numericOperators);fieldFilters['push'](requirementCandidateCountFilter);var placementCandidateCountFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,ctrlSearchCriteria['EntityFields']['PlacementCandidateCount'],'Placement\x20(Candidate)\x20Count',sEntityName,!![],numericOperators);fieldFilters['push'](placementCandidateCountFilter);}}case'Requirement':case'Placement':var sCompanyFieldGroup='Company',companyAddressCityFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['CompanyAddressCity'],'Company\x20Address\x20City',sCompanyFieldGroup,null,sSearchButton);fieldFilters['push'](companyAddressCityFilter);var companyAddressCountyFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['CompanyAddressCounty'],'Company\x20Address\x20County',sCompanyFieldGroup,null,sSearchButton);fieldFilters['push'](companyAddressCountyFilter);var companyAddressCountryFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['CompanyAddressCountry'],'Company\x20Address\x20Country',sCompanyFieldGroup,null,sSearchButton);fieldFilters['push'](companyAddressCountryFilter);break;}switch(sEntityName){case'Requirement':case'Placement':var clientNameFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['ClientContactName'],'Client\x20Contact\x20Full\x20Name','Contact',null,sSearchButton);fieldFilters['push'](clientNameFilter);var siteAddressRadiusFilter=ctrlSearchCriteria['FieldTypeFilter']['AddressRadius'](ctrlSearchCriteria['EntityFields']['SiteAddressRadius'],'Site\x20Address\x20Radius','Address');fieldFilters['push'](siteAddressRadiusFilter);var referenceFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['Reference'],'Reference',sEntityName,null,sSearchButton);fieldFilters['push'](referenceFilter);var operators=['less','less_or_equal','greater','greater_or_equal'],payRateFilter=ctrlSearchCriteria['FieldTypeFilter']['CurrencyAmountPeriodField'](null,ctrlSearchCriteria['EntityFields']['StandardPayRate'],'Standard\x20Pay\x20Rate',sEntityName,operators);fieldFilters['push'](payRateFilter);var chargeRateFilter=ctrlSearchCriteria['FieldTypeFilter']['CurrencyAmountPeriodField'](null,ctrlSearchCriteria['EntityFields']['StandardChargeRate'],'Standard\x20Charge\x20Rate',sEntityName,operators);fieldFilters['push'](chargeRateFilter);break;}switch(sEntityName){case'Placement':var candidateNameFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['CandidateContactName'],'Candidate\x20Contact\x20Full\x20Name','Contact',null,sSearchButton);fieldFilters['push'](candidateNameFilter);break;}sEntityName!='Timesheet'&&sEntityName!='Task'&&ctrlSearchCriteria['AddGeneralPurposeSkillCategories'](sEntityName,fieldFilters);switch(sEntityName){case'Contact':var contactPriorityFilter=ctrlSearchCriteria['FieldTypeFilter']['ContactPriorityField']();if(contactPriorityFilter)fieldFilters['push'](contactPriorityFilter);var contactTitleFilter=ctrlSearchCriteria['FieldTypeFilter']['ContactTitleField']();if(contactTitleFilter)fieldFilters['push'](contactTitleFilter);var contactOwnerFilter=ctrlSearchCriteria['FieldTypeFilter']['ContactOwnerField']();if(contactOwnerFilter)fieldFilters['push'](contactOwnerFilter);var homeAddressCityFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['HomeAddressCity'],'Home\x20Address\x20City',null,null,sSearchButton);fieldFilters['push'](homeAddressCityFilter);var homeAddressCountyFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['HomeAddressCounty'],'Home\x20Address\x20County',null,null,sSearchButton);fieldFilters['push'](homeAddressCountyFilter);var homeAddressCountryFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['HomeAddressCountry'],'Home\x20Address\x20Country',null,null,sSearchButton);fieldFilters['push'](homeAddressCountryFilter);var CVSearchOperators=['contains','not_contains'],cvSearchFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['CandidateCVFreeTextSearch'],'CV\x20Free\x20Text\x20Search','Contact',CVSearchOperators,sSearchButton);fieldFilters['push'](cvSearchFilter);var homeAddressRadiusFilter=ctrlSearchCriteria['FieldTypeFilter']['AddressRadius'](ctrlSearchCriteria['EntityFields']['HomeAddressRadius'],'Home\x20Address\x20Radius','Address');fieldFilters['push'](homeAddressRadiusFilter);var workAddressRadiusFilter=ctrlSearchCriteria['FieldTypeFilter']['AddressRadius'](ctrlSearchCriteria['EntityFields']['WorkAddressRadius'],'Work\x20Address\x20Radius','Address');fieldFilters['push'](workAddressRadiusFilter);var telephoneNumberFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['AnyTelephoneNumber'],'Telephone\x20Number',sEntityName,['begins_with','ends_with','contains','is_null'],sSearchButton);fieldFilters['push'](telephoneNumberFilter);var emailAddressFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['AnyEMailAddress'],'E-Mail\x20Address',sEntityName,['begins_with','ends_with','contains','equal','not_equal','is_null','is_not_null'],sSearchButton);fieldFilters['push'](emailAddressFilter);if(TriSysApex['LoginCredentials']['isLoggedInToSpecificCompanyAsRecruiter']('CoSector')){var qualificationsFilter=ctrlSearchCriteria['FieldTypeFilter']['Qualifications'](ctrlSearchCriteria['EntityFields']['Qualifications'],'Qualifications','Qualifications');fieldFilters['push'](qualificationsFilter);}var socialOperators=['is_not_null','is_null','contains'],socialNetworks=[ctrlSearchCriteria['EntityFields']['LinkedIn'],ctrlSearchCriteria['EntityFields']['Twitter'],ctrlSearchCriteria['EntityFields']['Facebook'],ctrlSearchCriteria['EntityFields']['YouTube'],ctrlSearchCriteria['EntityFields']['Instagram'],ctrlSearchCriteria['EntityFields']['Pinterest']];socialNetworks['forEach'](function(socialNetwork){socialFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,socialNetwork,socialNetwork,sEntityName,socialOperators,sSearchButton),fieldFilters['push'](socialFilter);});if(TriSysApex['LoginCredentials']['isLoggedInToSpecificCompanyAsRecruiter']('Law\x20Absolute')){var candidateSummaryFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['CandidateSummary'],'Candidate\x20Summary',sEntityName,['begins_with','ends_with','contains','equal','not_equal','is_null','is_not_null'],sSearchButton);fieldFilters['push'](candidateSummaryFilter);}break;case'Company':var companyIndustryFilter=ctrlSearchCriteria['FieldTypeFilter']['CompanyIndustryField']();if(companyIndustryFilter)fieldFilters['push'](companyIndustryFilter);var siteAddressRadiusFilter=ctrlSearchCriteria['FieldTypeFilter']['AddressRadius'](ctrlSearchCriteria['EntityFields']['SiteAddressRadius'],'Address\x20Radius','Address');fieldFilters['push'](siteAddressRadiusFilter);var telephoneNumberFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['AnyTelephoneNumber'],'Telephone\x20Number',sEntityName,['begins_with','ends_with','contains','is_null'],sSearchButton);fieldFilters['push'](telephoneNumberFilter);var emailAddressFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['AnyEMailAddress'],'E-Mail\x20Address',sEntityName,['begins_with','ends_with','contains','equal','not_equal','is_null','is_not_null'],sSearchButton);fieldFilters['push'](emailAddressFilter);break;case'Requirement':var totalShortlistedFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,ctrlSearchCriteria['EntityFields']['TotalShortlisted'],'Total\x20Shortlisted',sEntityName,!![],['greater','greater_or_equal','less','less_or_equal','equal','not_equal']);fieldFilters['push'](totalShortlistedFilter);var CVSentFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,ctrlSearchCriteria['EntityFields']['CVSentCount'],'CV\x20Sent\x20Count',sEntityName,!![],['greater','greater_or_equal','less','less_or_equal','equal','not_equal']);fieldFilters['push'](CVSentFilter);var InterviewsFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,ctrlSearchCriteria['EntityFields']['InterviewCount'],'Interview\x20Count',sEntityName,!![],['greater','greater_or_equal','less','less_or_equal','equal','not_equal']);fieldFilters['push'](InterviewsFilter);var placedFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,ctrlSearchCriteria['EntityFields']['Placed'],'Placed',sEntityName,!![],['greater','greater_or_equal','less','less_or_equal','equal','not_equal']);fieldFilters['push'](placedFilter);break;case'Timesheet':var placementFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,'PlacementReference','Placement\x20Reference','Placement',null,sSearchButton);fieldFilters['push'](placementFilter);var placementUserFilter=ctrlSearchCriteria['FieldTypeFilter']['EntityUserField']('Placement','Placement\x20User');if(placementUserFilter)fieldFilters['push'](placementUserFilter);var companyNameFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,'Company','Company\x20Name','Company',null,sSearchButton);fieldFilters['push'](companyNameFilter);var jobTitleFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,'JobTitle','Job\x20Title','Placement',null,sSearchButton);fieldFilters['push'](jobTitleFilter);var candidateNameFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,'Candidate','Candidate\x20Name','Contact',null,sSearchButton);fieldFilters['push'](candidateNameFilter);var candidateNameFilter=ctrlSearchCriteria['FieldTypeFilter']['DateField'](null,'InputDate','Input\x20Date','Timesheet');fieldFilters['push'](candidateNameFilter);var periodFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,'Description','Period','Timesheet',null,sSearchButton);fieldFilters['push'](periodFilter);var periodRangeFilter=ctrlSearchCriteria['FieldTypeFilter']['DateField'](null,'PeriodRange','Period\x20Range','Timesheet');fieldFilters['push'](periodRangeFilter);var timeWorkedFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](null,'TotalTimeWorked','Total\x20Time\x20Worked',null);fieldFilters['push'](timeWorkedFilter);var authorisedFilter=ctrlSearchCriteria['FieldTypeFilter']['BooleanField']('PaymentAuthorised','Authorised','Timesheet');fieldFilters['push'](authorisedFilter);var paidFilter=ctrlSearchCriteria['FieldTypeFilter']['BooleanField']('Payrolled','Paid','Timesheet');fieldFilters['push'](paidFilter);break;case'Task':var entityUserFilter=ctrlSearchCriteria['FieldTypeFilter']['EntityUserField'](sEntityName);if(entityUserFilter)fieldFilters['push'](entityUserFilter);var sCompanyFieldGroup='Company',companyNameFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['CompanyName'],'Company\x20Name',sCompanyFieldGroup,null,sSearchButton);fieldFilters['push'](companyNameFilter);var contactNameFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,ctrlSearchCriteria['EntityFields']['ContactName'],'Contact\x20Full\x20Name','Contact',null,sSearchButton);fieldFilters['push'](contactNameFilter);var descriptionFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](null,'Description','Description','Task',null,sSearchButton);fieldFilters['push'](descriptionFilter);var startDateFilter=ctrlSearchCriteria['FieldTypeFilter']['DateField'](null,'StartDate','Start\x20Date','Task');fieldFilters['push'](startDateFilter);var endDateFilter=ctrlSearchCriteria['FieldTypeFilter']['DateField'](null,'EndDate','End\x20Date','Task');fieldFilters['push'](endDateFilter),ctrlSearchCriteria['AddTaskSkillCategories'](fieldFilters);break;}var tableFieldNameData=ctrlSearchCriteria['AllowedTableFieldNamesForEntity'](sEntityName);if(tableFieldNameData){var ignoredCrossEntityFieldNames=tableFieldNameData['IgnoredCrossEntityFieldNames'];if(ignoredCrossEntityFieldNames)for(var i=fieldFilters['length']-0x1;i>=0x0;i--){var fieldFilter=fieldFilters[i],bIgnored=ignoredCrossEntityFieldNames['indexOf'](fieldFilter['id'])>=0x0;if(bIgnored)fieldFilters['splice'](i,0x1);}}},'AddGeneralPurposeSkillCategories':function(sEntityName,fieldFilters){var categories=TriSysApex['Cache']['SystemSettingManager']['GeneralSkillCategories']();if(!categories)return;for(var i=0x0;i<categories['length'];i++){var category=categories[i],fieldDescription={'TableFieldName':category['Category']},sFieldID=sEntityName+'Skill_'+category['Category']['trim'](),sDisplayName=category['Category']['trim'](),fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['SkillField'](fieldDescription,sFieldID,sDisplayName,'Attributes/Skills');fieldFilters['push'](fieldFilter);}},'AddTaskSkillCategories':function(fieldFilters){var categories=TriSysApex['Cache']['SkillCategories'](),skills=TriSysApex['Cache']['Skills'](),sSetting='Ignore\x20Task\x20Skill\x20Categories',sSystemSetting=TriSysApex['Cache']['SystemSettingManager']['GetValue'](sSetting),trimmedIgnoreCategories=['Gender'];if(sSystemSetting){var sSplitChar=';',arrayIgnoreCategories=sSystemSetting['split'](sSplitChar);$['each'](arrayIgnoreCategories,function(index,sIgnore){sIgnore=sIgnore['trim'](),trimmedIgnoreCategories['push'](sIgnore);});}for(var i=0x0;i<categories['length'];i++){var category=categories[i],bFound=$['inArray'](category['Category'],trimmedIgnoreCategories)>=0x0;if(category['FieldId']==0x0&&!bFound){var fieldDescription={'TableFieldName':category['Category']},sFieldID='TaskSkill_'+category['Category']['trim'](),sDisplayName=category['Category']['trim'](),fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['SkillField'](fieldDescription,sFieldID,sDisplayName,'Attributes/Skills');fieldFilters['push'](fieldFilter);}}},'RemoveSpecifiedFieldsFromFilters':function(fieldFilters,fields){for(var i=fieldFilters['length']-0x1;i>=0x0;i--){var fieldFilter=fieldFilters[i];if(fields['indexOf'](fieldFilter['id'])>=0x0)fieldFilters['splice'](i,0x1);}},'EntityFields':{'CompanyName':'Company_CompanyName','CompanyAddressCity':'Company_AddressCity','CompanyAddressCounty':'Company_AddressCounty','CompanyAddressCountry':'Company_AddressCountry','ClientContactName':'ClientContact_FullName','CandidateContactName':'CandidateContact_FullName','ContactName':'Contact_FullName','HomeAddressCity':'Home_AddressCity','HomeAddressCounty':'Home_AddressCounty','HomeAddressCountry':'Home_AddressCountry','EntityIdSuffix':'_Entity_Id','CandidateCVFreeTextSearch':'Contact_CVSearch','SiteAddressRadius':'SiteAddressRadius','HomeAddressRadius':'HomeAddressRadius','WorkAddressRadius':'WorkAddressRadius','Reference':'Reference','AnyTelephoneNumber':'AnyTelephoneNumber','AnyEMailAddress':'AnyEMailAddress','StandardPayRate':'StandardPayRate','StandardChargeRate':'StandardChargeRate','TotalShortlisted':'TotalShortlisted','CVSentCount':'CVSentCount','InterviewCount':'InterviewCount','Placed':'Placed','TaskLink':'TaskLink','CustomerAtAnyTime':'CustomerAtAnyTime','CompanyOKtoService':'CompanyOKtoService','AutomatedNotificationEMailSent':'AutomatedNotificationEMailSent','AgreeToMarketingCommunications':'AgreeToMarketingCommunications','DeletionRequestReceived':'DeletionRequestReceived','RestrictDataProcessingRequested':'RestrictDataProcessingRequested','AgreedToPrivacyPolicy':'AgreedToPrivacyPolicy','DataPortabilityRequestReceived':'DataPortabilityRequestReceived','RequirementClientCount':'RequirementClientCount','PlacementClientCount':'PlacementClientCount','RequirementCandidateCount':'RequirementCandidateCount','PlacementCandidateCount':'PlacementCandidateCount','PlacementCount':'PlacementCount','TimesheetCount':'TimesheetCount','TaskCount':'TaskCount','Qualifications':'Qualifications','LinkedIn':'LinkedIn','Twitter':'Twitter','Facebook':'Facebook','YouTube':'YouTube','Instagram':'Instagram','Pinterest':'Pinterest','CandidateSummary':'CandidateSummary'},'FieldTypeFilter':{'Filter':function(sEntityName,fieldDescription,sSearchButton){var fieldFilter=null,sTableFieldSeparator='_',sFieldID=fieldDescription['TableName']+sTableFieldSeparator+fieldDescription['TableFieldName'],sDisplayName=ctrlSearchCriteria['FieldTypeFilter']['FieldDisplayName'](sEntityName,fieldDescription),sFieldGroup=sEntityName;sFieldID=ctrlSearchCriteria['FieldTypeFilter']['FieldDescriptionException'](sFieldID,fieldDescription);if(!sFieldID)return null;switch(fieldDescription['FieldTypeId']){case TriSysSDK['Controls']['FieldTypes']['Text']:case TriSysSDK['Controls']['FieldTypes']['EMail']:case TriSysSDK['Controls']['FieldTypes']['Image']:case TriSysSDK['Controls']['FieldTypes']['Internet']:case TriSysSDK['Controls']['FieldTypes']['Telephone']:case TriSysSDK['Controls']['FieldTypes']['WebPage']:case TriSysSDK['Controls']['FieldTypes']['Password']:case TriSysSDK['Controls']['FieldTypes']['FileReference']:if(fieldDescription['Lookup']&&sFieldID!='Contact_Users')fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['SkillField'](fieldDescription,sFieldID,sDisplayName,'Field\x20Lookups');else fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['TextField'](fieldDescription,sFieldID,sDisplayName,sFieldGroup,null,sSearchButton);break;case TriSysSDK['Controls']['FieldTypes']['List']:case TriSysSDK['Controls']['FieldTypes']['MultiSelectList']:fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['SkillField'](fieldDescription,sFieldID,sDisplayName,'Field\x20Lookups');break;case TriSysSDK['Controls']['FieldTypes']['Integer']:case TriSysSDK['Controls']['FieldTypes']['Float']:case TriSysSDK['Controls']['FieldTypes']['Currency']:case TriSysSDK['Controls']['FieldTypes']['Percent']:fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['NumberField'](fieldDescription,sFieldID,sDisplayName,sFieldGroup);break;case TriSysSDK['Controls']['FieldTypes']['Date']:fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['DateField'](fieldDescription,sFieldID,sDisplayName,sFieldGroup);break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmountPeriod']:fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['CurrencyAmountPeriodField'](fieldDescription,sFieldID,sDisplayName,sFieldGroup);break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmount']:fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['CurrencyAmountField'](fieldDescription,sFieldID,sDisplayName,sFieldGroup);break;case TriSysSDK['Controls']['FieldTypes']['YesNo']:fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['BooleanField'](sFieldID,sDisplayName,sFieldGroup);break;case TriSysSDK['Controls']['FieldTypes']['User']:fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['UserField'](sEntityName,sFieldID,sDisplayName,sEntityName,'owner\x20users');break;}return fieldFilter;},'FieldDisplayName':function(sEntityName,fieldDescription){var sDisplayName=fieldDescription['FieldLabel'];if(!sDisplayName)sDisplayName=fieldDescription['TableFieldName'];switch(sDisplayName){case'Last\x20Contact':case'Next\x20Contact':break;default:sDisplayName=sDisplayName['replace'](sEntityName+'\x20',''),sDisplayName=sDisplayName['replace'](sEntityName,'');}return sDisplayName=sDisplayName['replace']('&',''),sDisplayName=sDisplayName['replace']('#',''),sDisplayName=sDisplayName['replace']('%','Percentage'),sDisplayName=sDisplayName['replace']('/',''),sDisplayName=sDisplayName['replace'](':',''),sDisplayName;},'FieldDescriptionException':function(sFieldId,fieldDescription){switch(sFieldId){case'Contact_Forenames':sFieldId='Contact_Christian';break;case'Contact_Age':sFieldId=null;break;default:if(sFieldId['indexOf']('\x0a')>=0x0)sFieldId=null;break;}return sFieldId;},'TextField':function(fieldDescription,sFieldID,sDisplayName,sFieldGroup,operators,sSearchButton){if(TriSysAPI['Operators']['isEmpty'](operators))operators=['begins_with','ends_with','contains','not_contains','equal','not_equal','is_null','is_not_null'];var fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'string','operators':operators,'size':0x23,'default_value':'','input':function(rule){var sFieldWidgetID='textBox-'+sFieldID+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID);var sInputHTML='<input\x20class=\x22form-control\x22\x20type=\x22text\x22\x20id=\x22'+sFieldWidgetID+'\x22\x20size=\x2250\x22\x20style=\x22width:\x20100%;\x22>',iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'];if(ruleData){var sText=ruleData['Skills'];if(sText&&ruleData['FieldWidgetID'])$('#'+ruleData['FieldWidgetID'])['val'](sText);$('#'+ruleData['FieldWidgetID'])['keyup'](function(e){if(e['keyCode']==0xd&&ruleData['FieldWidgetID']){var sText=$('#'+ruleData['FieldWidgetID'])['val']();$(sSearchButton)['trigger']('click');}});}},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'];if(ruleData&&ruleData['FieldWidgetID'])return $('#'+ruleData['FieldWidgetID'])['val']();},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],sText=value;if(ruleData&&ruleData['FieldWidgetID'])rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],sText);}catch(e){}}};return fieldFilter;},'NumberField':function(fieldDescription,sFieldID,sDisplayName,sFieldGroup,bInteger,operators){if(TriSysAPI['Operators']['isEmpty'](operators))operators=['equal','not_equal','between','less','less_or_equal','greater','greater_or_equal'];var sType='double';if(bInteger)sType='integer';var validation={'min':0x0,'step':bInteger?0x1:0.05};if(fieldDescription){if(fieldDescription['MinValue'])validation['min']=parseFloat(fieldDescription['MinValue']);if(fieldDescription['MaxValue'])validation['max']=parseFloat(fieldDescription['MaxValue']);if(fieldDescription['SpinIncrement'])validation['step']=parseFloat(fieldDescription['SpinIncrement']);}var fieldFilter={'id':sFieldID,'label':sDisplayName,'type':sType,'operators':operators,'size':0x5,'validation':validation};return fieldFilter;},'DateField':function(fieldDescription,sFieldID,sDisplayName,sFieldGroup){var operators=['greater','greater_or_equal','less','less_or_equal','equal','not_equal','is_null','is_not_null'],fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'date','operators':operators,'validation':{'callback':function(value,rule){var bError=!![];return!![];}},'input':function(rule){var sFieldWidgetID='date-'+sFieldID+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID);var sInputHTML='<input\x20type=\x22text\x22\x20id=\x22'+sFieldWidgetID+'\x22\x20style=\x22width:\x20250px;\x22\x20/>',iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'];if(ruleData){TriSysSDK['CShowForm']['datePicker'](ruleData['FieldWidgetID']);if(ruleData['DateValue'])TriSysSDK['CShowForm']['setDatePickerValue'](ruleData['FieldWidgetID'],ruleData['DateValue']);}},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'];if(ruleData)return TriSysSDK['CShowForm']['getDatePickerValue'](ruleData['FieldWidgetID']);},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],dt=value;if(ruleData)rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],null,dt);}catch(e){}}};return fieldFilter;},'CurrencyAmountPeriodField':function(fieldDescription,sFieldID,sDisplayName,sFieldGroup,operators){if(TriSysAPI['Operators']['isEmpty'](operators))operators=['equal','not_equal','less','less_or_equal','greater','greater_or_equal'];var fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'string','operators':operators,'validation':{'callback':function(value,rule){var bError=!![];return!![];}},'input':function(rule){var sFieldWidgetID='cap-'+sFieldID+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID);var sInputHTML='<div\x20id=\x22'+sFieldWidgetID+'\x22\x20style=\x22width:320px;\x22></div>',iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'],fnAfterLoad=function(){if(ruleData&&ruleData['CurrencyAmountPeriod'])TriSysSDK['Controls']['CurrencyAmountPeriod']['SetCurrencyAmountPeriod'](ruleData['FieldWidgetID'],ruleData['CurrencyAmountPeriod']);};if(ruleData)TriSysSDK['Controls']['CurrencyAmountPeriod']['Load'](ruleData['FieldWidgetID'],fieldDescription,fnAfterLoad);},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'];if(ruleData)return TriSysSDK['Controls']['CurrencyAmountPeriod']['GetCurrencyAmountPeriod'](ruleData['FieldWidgetID']);},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],sCurrencyAmountPeriodValue=value;rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],null,null,sCurrencyAmountPeriodValue);}catch(e){}}};return fieldFilter;},'CurrencyAmountField':function(fieldDescription,sFieldID,sDisplayName,sFieldGroup){var operators=['equal','not_equal','less','less_or_equal','greater','greater_or_equal'],fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'string','operators':operators,'validation':{'callback':function(value,rule){var bError=!![];return!![];}},'input':function(rule){var sFieldWidgetID='ca-'+sFieldID+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID);var sInputHTML='<div\x20id=\x22'+sFieldWidgetID+'\x22\x20style=\x22width:250px;\x22></div>',iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'],fnAfterLoad=function(){if(ruleData&&ruleData['CurrencyAmountPeriod'])TriSysSDK['Controls']['CurrencyAmount']['SetCurrencyAmount'](ruleData['FieldWidgetID'],ruleData['CurrencyAmountPeriod']);};if(ruleData)TriSysSDK['Controls']['CurrencyAmount']['Load'](ruleData['FieldWidgetID'],fieldDescription,fnAfterLoad);},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'];if(ruleData)return TriSysSDK['Controls']['CurrencyAmount']['GetCurrencyAmount'](ruleData['FieldWidgetID']);},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],sCurrencyAmountValue=value;rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],null,null,sCurrencyAmountValue);}catch(e){}}};return fieldFilter;},'BooleanField':function(sFieldID,sDisplayName,sFieldGroup){var operators=['equal'],fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'integer','operators':operators,'validation':{'callback':function(value,rule){var bError=!![];return!![];}},'input':function(rule){var sFieldWidgetID='boolean-'+sFieldID+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID);var sInputHTML='<label\x20class=\x22switch\x20switch-primary\x22>'+'\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20id=\x22'+sFieldWidgetID+'\x22\x20value=\x220\x22\x20unchecked>'+'\x20\x20\x20\x20<span></span>'+'</label>',iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'];if(ruleData){if(!TriSysAPI['Operators']['isEmpty'](ruleData['Skills'])){var b=parseInt(ruleData['Skills'])==0x1?!![]:![];TriSysSDK['CShowForm']['SetCheckBoxValue'](ruleData['FieldWidgetID'],b);}}},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'];if(ruleData){var iValue=TriSysSDK['CShowForm']['GetCheckBoxValue'](ruleData['FieldWidgetID']);return iValue?0x1:0x0;}},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],b=value;if(ruleData)rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],b);}catch(e){}}};return fieldFilter;},'AddressRadius':function(sFieldID,sDisplayName,sFieldGroup){var operators=['less','less_or_equal','greater','greater_or_equal'],fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'string','operators':operators,'validation':{'callback':function(value,rule){var bError=!![];return!![];}},'input':function(rule){var sFieldWidgetID='radial-'+sFieldID+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID);var sMileageID=sFieldWidgetID+'-mileage',sPostCodeID=sFieldWidgetID+'-postcode',sPreHTML='<div\x20id=\x22'+sFieldWidgetID+'\x22\x20style=\x22width:320px;\x22>',sPostHTML='</div>',sHTML1='<div\x20style=\x22width:\x20350px;\x20height:\x2026px\x22>',sHTML2='<div\x20style=\x22float:\x20left;\x20width:70px\x22><input\x20id=\x22'+sMileageID+'\x22\x20type=\x22number\x22\x20value=\x220\x22\x20min=\x220\x22\x20step=\x221\x22\x20style=\x22width:100%;\x22\x20/></div>',sHTML3='<div\x20style=\x22float:\x20left;\x20width:65px;\x20padding-left:0px;\x20text-align:center;\x20padding-top:\x205px;\x22>miles\x20of</div>',sHTML4='<div\x20style=\x22float:\x20left;\x20width:50px;\x22><input\x20class=\x22k-textbox\x22\x20id=\x22'+sPostCodeID+'\x22\x20style=\x22width:100%;\x20height:100%;\x20margin-top:1px;\x20text-transform:\x20uppercase;\x22\x20maxlength=\x224\x22\x20'+'\x20required\x20pattern=\x22[A-Za-z]{1,2}[0-9Rr][0-9A-Za-z]\x22\x20/></div>',sInputHTML=sPreHTML+sHTML1+sHTML2+sHTML3+sHTML4+sPostHTML,iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'],sMileageID=ruleData['FieldWidgetID']+'-mileage',sPostCodeID=ruleData['FieldWidgetID']+'-postcode',iMaximumMiles=0x32;iMaximumMiles=TriSysApex['Cache']['SystemSettingManager']['GetValue']('Radial\x20Searching\x20Maximum\x20Mileage',iMaximumMiles);var fd={'MinValue':0x1,'MaxValue':iMaximumMiles,'SpinIncrement':0x1};TriSysSDK['Controls']['NumericSpinner']['Initialise'](sMileageID,fd);if(ruleData['PostCodeRadial']){var parts=ruleData['PostCodeRadial']['split'](',');TriSysSDK['Controls']['NumericSpinner']['SetValue'](sMileageID,parseFloat(parts[0x0])),$('#'+sPostCodeID)['val'](parts[0x1]);}},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'],sMileageID=ruleData['FieldWidgetID']+'-mileage',sPostCodeID=ruleData['FieldWidgetID']+'-postcode',sExpression=TriSysSDK['Controls']['NumericSpinner']['GetValue'](sMileageID)+','+$('#'+sPostCodeID)['val']();return sExpression;},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],sExpression=value;rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],null,null,null,sExpression);}catch(e){}}};return fieldFilter;},'Qualifications':function(sFieldID,sDisplayName,sFieldGroup){var operators=['in','not_in'],fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'string','operators':operators,'validation':{'callback':function(value,rule){var bError=!![];return!![];}},'input':function(rule){var sFieldWidgetID='qualificationWidget-'+sFieldID+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID);var sInputHTML='<div\x20id=\x22'+sFieldWidgetID+'\x22\x20></div>',iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'],fnAfterLoad=function(){if(ruleData['QualificationSearchCriteria'])ctrlSearchCriteria['QualificationSearchCriteria']['SetValue'](ruleData['FieldWidgetID'],ruleData['QualificationSearchCriteria']);};ctrlSearchCriteria['QualificationSearchCriteria']['Load'](ruleData['FieldWidgetID'],fnAfterLoad);},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'];return ctrlSearchCriteria['QualificationSearchCriteria']['GetValue'](ruleData['FieldWidgetID']);},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],sQualificationSearchCriteria=value;rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],null,null,null,null,null,sQualificationSearchCriteria);}catch(e){}}};return fieldFilter;},'SkillField':function(fieldDescription,sFieldID,sDisplayName,sCategory){var fnCreateAndPopulateWidget=function(sFieldWidgetID,sTableFieldName,sLookups){var sCategory=sTableFieldName;if(fieldDescription['SkillComboCategory'])sCategory=fieldDescription['SkillComboCategory'];TriSysSDK['CShowForm']['skillList'](sFieldWidgetID,sCategory),TriSysSDK['CShowForm']['SetSkillsInList'](sFieldWidgetID,sLookups);},fnParseValues=function(sFieldWidgetID,sTableFieldName){var sSkills=TriSysSDK['CShowForm']['GetSelectedSkillsFromList'](sFieldWidgetID),SkillIDs=ctrlSearchCriteria['FieldTypeFilter']['ConvertSkillsInCategoryIntoSkillIdArray'](sTableFieldName,sSkills);return SkillIDs;},fnConvertIDsToLookupStrings=function(lstLookupIDs){if(!lstLookupIDs)return;var sSkills='';for(var i=0x0;i<lstLookupIDs['length'];i++){var iSkillId=lstLookupIDs[i],skill=ctrlSearchCriteria['FieldTypeFilter']['GetSkillFromCacheBySkillId'](iSkillId);if(skill){if(sSkills['length']>0x0)sSkills+=',\x20';sSkills+=skill['Skill'];}}return sSkills;},fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['MultiSelectLookupField'](fieldDescription,sFieldID,sDisplayName,sCategory,'skills',fnCreateAndPopulateWidget,fnParseValues,fnConvertIDsToLookupStrings);return fieldFilter;},'SkillFieldPrefix':'skill-','MultiSelectLookupField':function(fieldDescription,sFieldID,sDisplayName,sFieldGroup,sDescriptionPlural,fnCreateAndPopulateWidget,fnParseValues,fnConvertIDsToLookupStrings){var operators=['in','not_in'],fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'integer','operators':operators,'validation':{'callback':function(value,rule){var bError=!![];if(value){if(value['length']>0x0)bError=![];}return!bError?!![]:'Please\x20enter\x20one\x20or\x20more\x20'+sDescriptionPlural+',\x20or\x20choose\x20another\x20field,\x20or\x20remove\x20this\x20row.';}},'input':function(rule){var sFieldIDEscaped=TriSysSDK['Miscellaneous']['EscapeDOMid'](sFieldID),sFieldWidgetID=ctrlSearchCriteria['FieldTypeFilter']['SkillFieldPrefix']+sFieldIDEscaped+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680),sSkillList=null;rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID,sSkillList);var sStyle='style=\x22width:100%;\x22';sStyle='';var sInputHTML='<input\x20type=\x22text\x22\x20id=\x22'+sFieldWidgetID+'\x22'+sStyle+'\x20/>',iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'];fnCreateAndPopulateWidget(ruleData['FieldWidgetID'],fieldDescription['TableFieldName'],ruleData['Skills']);},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'],sSkillCategory=fieldDescription['TableFieldName'];if(fieldDescription['SkillComboCategory'])sSkillCategory=fieldDescription['SkillComboCategory'];return fnParseValues(ruleData['FieldWidgetID'],sSkillCategory);},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],sSkills=fnConvertIDsToLookupStrings(value);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],sSkills);}catch(e){}}};return fieldFilter;},'TaskTypeField':function(){var sFieldID='TaskType',sDisplayName='Task\x20Type',sCategory='Task',fieldDescription={'TableFieldName':sFieldID},fnCreateAndPopulateWidget=function(sFieldWidgetID,sTableFieldName,sLookups){TriSysSDK['CShowForm']['taskTypeMultiSelectCombo'](sFieldWidgetID),TriSysSDK['CShowForm']['SetSkillsInList'](sFieldWidgetID,sLookups);},fnParseValues=function(sFieldWidgetID,sTableFieldName){var valuesArray=TriSysSDK['CShowForm']['GetSelectedSkillsFromListAsArray'](sFieldWidgetID);if(valuesArray){var idValues=[];for(var i=0x0;i<valuesArray['length'];i++){var sTaskType=valuesArray[i],taskType=TriSysApex['Cache']['TaskTypesManager']['TaskTypeFromName'](sTaskType);taskType&&idValues['push'](taskType['TaskTypeId']);}return idValues;}},fnConvertIDsToLookupStrings=function(lstLookupIDs){if(!lstLookupIDs)return;var sTaskTypes='';for(var i=0x0;i<lstLookupIDs['length'];i++){var iTaskTypeID=lstLookupIDs[i],taskType=TriSysApex['Cache']['TaskTypesManager']['TaskTypeFromId'](iTaskTypeID);if(taskType){if(sTaskTypes['length']>0x0)sTaskTypes+=',\x20';sTaskTypes+=taskType['Name'];}}return sTaskTypes;},fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['MultiSelectLookupField'](fieldDescription,sFieldID,sDisplayName,sCategory,'task\x20types',fnCreateAndPopulateWidget,fnParseValues,fnConvertIDsToLookupStrings);return fieldFilter;},'EntityTypeField':function(sEntityName){var sFieldID=sEntityName+'Type',sDisplayName='Type',sCategory=sEntityName,fieldDescription={'TableFieldName':sFieldID},fnCreateAndPopulateWidget=function(sFieldWidgetID,sTableFieldName,sLookups){TriSysSDK['CShowForm']['entityTypeMultiSelectCombo'](sEntityName,sFieldWidgetID),TriSysSDK['CShowForm']['SetSkillsInList'](sFieldWidgetID,sLookups);},fnParseValues=function(sFieldWidgetID,sTableFieldName){var valuesArray=TriSysSDK['CShowForm']['GetSelectedSkillsFromListAsArray'](sFieldWidgetID);if(valuesArray){var idValues=[];for(var i=0x0;i<valuesArray['length'];i++){var sEntityType=valuesArray[i],entityType=TriSysApex['Cache']['EntityTypesManager']['EntityTypeFromName'](sEntityName,sEntityType);entityType&&idValues['push'](entityType['EntityTypeId']);}return idValues;}},fnConvertIDsToLookupStrings=function(lstLookupIDs){if(!lstLookupIDs)return;var sEntityTypes='';for(var i=0x0;i<lstLookupIDs['length'];i++){var iEntityTypeID=lstLookupIDs[i],entityType=TriSysApex['Cache']['EntityTypesManager']['EntityTypeFromId'](iEntityTypeID);if(entityType){if(sEntityTypes['length']>0x0)sEntityTypes+=',\x20';sEntityTypes+=entityType['Name'];}}return sEntityTypes;},fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['MultiSelectLookupField'](fieldDescription,sFieldID,sDisplayName,sCategory,'entity\x20types',fnCreateAndPopulateWidget,fnParseValues,fnConvertIDsToLookupStrings);return fieldFilter;},'EntityUserField':function(sEntityName,sDisplayName){var sFieldID=sEntityName+'User';if(!sDisplayName)sDisplayName='User';var sCategory=sEntityName,fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['UserField'](sEntityName,sFieldID,sDisplayName,sCategory,'users');return fieldFilter;},'UserField':function(sEntityName,sFieldID,sDisplayName,sCategory,sWhatPlural){var fieldDescription={'TableFieldName':sFieldID},fnCreateAndPopulateWidget=function(sFieldWidgetID,sTableFieldName,sLookups){TriSysSDK['CShowForm']['MultiUserCombo'](sFieldWidgetID),TriSysSDK['CShowForm']['SetSkillsInList'](sFieldWidgetID,sLookups);},fnParseValues=function(sFieldWidgetID,sTableFieldName){var valuesArray=TriSysSDK['CShowForm']['GetSelectedSkillsFromListAsArray'](sFieldWidgetID);if(valuesArray){var idValues=[];for(var i=0x0;i<valuesArray['length'];i++){var sUserName=valuesArray[i],user=TriSysApex['Cache']['UsersManager']['UserFromFullName'](sUserName);user&&idValues['push'](user['UserId']);}return idValues;}},fnConvertIDsToLookupStrings=function(lstLookupIDs){if(!lstLookupIDs)return;var sUserNames='';for(var i=0x0;i<lstLookupIDs['length'];i++){var iUserID=lstLookupIDs[i],user=TriSysApex['Cache']['UsersManager']['UserFromId'](iUserID);if(user){if(sUserNames['length']>0x0)sUserNames+=',\x20';sUserNames+=user['FullName'];}}return sUserNames;},fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['MultiSelectLookupField'](fieldDescription,sFieldID,sDisplayName,sCategory,sWhatPlural,fnCreateAndPopulateWidget,fnParseValues,fnConvertIDsToLookupStrings);return fieldFilter;},'ContactOwnerField':function(){var sEntityName='Contact',sFieldID=sEntityName+'Owner',sDisplayName='Owner',sCategory=sEntityName,fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['UserField'](sEntityName,sFieldID,sDisplayName,sCategory,'owners');return fieldFilter;},'ContactPriorityField':function(){var sEntityName='Contact',sFieldID=sEntityName+'Priority',sDisplayName='Priority',sCategory=sEntityName,fieldDescription={'TableFieldName':sFieldID},fnCreateAndPopulateWidget=function(sFieldWidgetID,sTableFieldName,sLookups){var sourcePriorities=[],priorities=TriSysApex['Cache']['ContactPriorities']();for(var i=0x0;i<priorities['length'];i++){var CContactPriorityColour=priorities[i],sourceStruct={'value':CContactPriorityColour['ContactPriorityId'],'text':CContactPriorityColour['ContactPriority']};sourcePriorities['push'](sourceStruct);}TriSysSDK['CShowForm']['populateMultiSelectComboFromDataSource'](sFieldWidgetID,sourcePriorities),TriSysSDK['CShowForm']['SetSkillsInList'](sFieldWidgetID,sLookups);},fnParseValues=function(sFieldWidgetID,sTableFieldName){var valuesArray=TriSysSDK['CShowForm']['GetSelectedSkillsFromListAsArray'](sFieldWidgetID);if(valuesArray){var idValues=[];for(var i=0x0;i<valuesArray['length'];i++){var sPriority=valuesArray[i],priority=TriSysApex['Cache']['ContactPrioritiesManager']['PriorityFromName'](sPriority);priority&&idValues['push'](priority['ContactPriorityId']);}return idValues;}},fnConvertIDsToLookupStrings=function(lstLookupIDs){if(!lstLookupIDs)return;var sPriorities='';for(var i=0x0;i<lstLookupIDs['length'];i++){var iContactPriorityId=lstLookupIDs[i],priority=TriSysApex['Cache']['ContactPrioritiesManager']['PriorityFromId'](iContactPriorityId);if(priority){if(sPriorities['length']>0x0)sPriorities+=',\x20';sPriorities+=priority['ContactPriority'];}}return sPriorities;},fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['MultiSelectLookupField'](fieldDescription,sFieldID,sDisplayName,sCategory,'contact\x20priorities',fnCreateAndPopulateWidget,fnParseValues,fnConvertIDsToLookupStrings);return fieldFilter;},'ContactSexField':function(){var sEntityName='Contact',sFieldID=sEntityName+'Sex',sDisplayName='Gender',sCategory=sEntityName,fieldDescription={'TableFieldName':sFieldID},fnCreateAndPopulateWidget=function(sFieldWidgetID,sTableFieldName,sLookups){var sourceSex=[{'value':0x1,'text':'Male'},{'value':0x0,'text':'Female'}];TriSysSDK['CShowForm']['populateMultiSelectComboFromDataSource'](sFieldWidgetID,sourceSex),TriSysSDK['CShowForm']['SetSkillsInList'](sFieldWidgetID,sLookups);},fnParseValues=function(sFieldWidgetID,sTableFieldName){var valuesArray=TriSysSDK['CShowForm']['GetSelectedSkillsFromListAsArray'](sFieldWidgetID);if(valuesArray){var idValues=[];for(var i=0x0;i<valuesArray['length'];i++){var sSex=valuesArray[i];idValues['push'](sSex=='Male'?0x1:0x0);}return idValues;}},fnConvertIDsToLookupStrings=function(lstLookupIDs){if(!lstLookupIDs)return;var sSexes='';for(var i=0x0;i<lstLookupIDs['length'];i++){var iSex=lstLookupIDs[i];if(sSexes['length']>0x0)sSexes+=',\x20';sSexes+=iSex==0x1?'Male':'Female';}return sSexes;},fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['MultiSelectLookupField'](fieldDescription,sFieldID,sDisplayName,sCategory,'genders',fnCreateAndPopulateWidget,fnParseValues,fnConvertIDsToLookupStrings);return fieldFilter;},'JobTitleField':function(sEntityName){var sFieldID=sEntityName+'JobTitle',sDisplayName='Job\x20Title',sCategory=sEntityName,fieldDescription={'TableFieldName':sFieldID},operators=['begins_with','ends_with','contains','not_contains','equal'],fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'string','operators':operators,'validation':{'callback':function(value,rule){var bError=!![];if(value){if(value['length']>0x0)bError=![];}return!bError?!![]:'Please\x20enter\x20a\x20'+sDisplayName+',\x20or\x20choose\x20another\x20field,\x20or\x20remove\x20this\x20row.';}},'input':function(rule){var sFieldWidgetID='jobTitle-'+sFieldID+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID,null);var sOnClick='ctrlSearchCriteria.JobTitleLookup(\x27'+sFieldWidgetID+'\x27)',sInputHTML='<table\x20style=\x22width:\x20100%;\x22\x20cellpadding=\x220\x22\x20cellspacing=\x220\x22>'+'<tr>'+'\x20\x20\x20\x20\x20\x20\x20<td>'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20id=\x22'+sFieldWidgetID+'\x22\x20type=\x22text\x22\x20class=\x22k-textbox\x22\x20style=\x22width:100%\x22\x20/>'+'\x20\x20\x20\x20\x20\x20\x20</td>'+'\x20\x20\x20\x20\x20\x20\x20<td\x20style=\x22width:\x2040px;\x20padding-left:\x205px;\x22>'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22btn\x20btn-sm\x20btn-default\x22\x20onclick=\x22'+sOnClick+'\x22\x20title=\x22Lookup\x20Job\x20Title\x22\x20style=\x22right:0px;\x22>'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22gi\x20gi-search\x22></i>'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>'+'\x20\x20\x20\x20\x20\x20\x20</td>'+'\x20\x20\x20</tr>'+'</table>',iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'],sJobTitle=ruleData['Skills'];if(sJobTitle)$('#'+ruleData['FieldWidgetID'])['val'](sJobTitle);$('#'+ruleData['FieldWidgetID'])['keyup'](function(e){if(e['keyCode']==0xd)ctrlSearchCriteria['JobTitleLookup'](ruleData['FieldWidgetID']);});},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'];return $('#'+ruleData['FieldWidgetID'])['val']();},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],sJobTitle=value;rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],sJobTitle);}catch(e){}}};return fieldFilter;},'ContactTitleField':function(){},'CompanyIndustryField':function(){var sEntityName='Company',sFieldID=sEntityName+'_Industry',sDisplayName='Industry',sCategory=sEntityName,fieldDescription={'TableFieldName':sFieldID},fnCreateAndPopulateWidget=function(sFieldWidgetID,sTableFieldName,sLookups){var sourceIndustries=[],industries=TriSysApex['Cache']['Industries']();for(var i=0x0;i<industries['length'];i++){var Industry=industries[i],sourceStruct={'value':Industry['IndustryId'],'text':Industry['Name']};sourceIndustries['push'](sourceStruct);}TriSysSDK['CShowForm']['populateMultiSelectComboFromDataSource'](sFieldWidgetID,sourceIndustries),TriSysSDK['CShowForm']['SetSkillsInList'](sFieldWidgetID,sLookups);},fnParseValues=function(sFieldWidgetID,sTableFieldName){var valuesArray=TriSysSDK['CShowForm']['GetSelectedSkillsFromListAsArray'](sFieldWidgetID);if(valuesArray){var idValues=[];for(var i=0x0;i<valuesArray['length'];i++){var sIndustry=valuesArray[i],industry=TriSysApex['Cache']['IndustryManager']['IndustryFromName'](sIndustry);industry&&idValues['push'](industry['IndustryId']);}return idValues;}},fnConvertIDsToLookupStrings=function(lstLookupIDs){if(!lstLookupIDs)return;var sIndustries='';for(var i=0x0;i<lstLookupIDs['length'];i++){var iIndustryId=lstLookupIDs[i],industry=TriSysApex['Cache']['IndustryManager']['IndustryFromId'](iIndustryId);if(industry){if(sIndustries['length']>0x0)sIndustries+=',\x20';sIndustries+=industry['Name'];}}return sIndustries;},fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['MultiSelectLookupField'](fieldDescription,sFieldID,sDisplayName,sCategory,'industries',fnCreateAndPopulateWidget,fnParseValues,fnConvertIDsToLookupStrings);return fieldFilter;},'TaskField':function(sEntityName){var sFieldID=ctrlSearchCriteria['EntityFields']['TaskLink'],sDisplayName='Task',sCategory=sEntityName,operators=['in','not_in'],fieldFilter={'id':sFieldID,'label':sDisplayName,'type':'string','operators':operators,'validation':{'callback':function(value,rule){var bError=!![];return!![];}},'input':function(rule){var sFieldWidgetID='task-'+sFieldID+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x989680);rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](sFieldWidgetID);var sInputHTML='<div\x20id=\x22'+sFieldWidgetID+'\x22\x20></div>',iMilliSeconds=0x32;return setTimeout(function(){var ruleData=rule['data'],fnAfterLoad=function(){if(ruleData['TaskSearchCriteria'])ctrlSearchCriteria['TaskSearchCriteria']['SetValue'](ruleData['FieldWidgetID'],ruleData['TaskSearchCriteria']);};ctrlSearchCriteria['TaskSearchCriteria']['Load'](ruleData['FieldWidgetID'],fnAfterLoad);},iMilliSeconds),sInputHTML;},'valueParser':function(rule,value){var ruleData=rule['data'];return ctrlSearchCriteria['TaskSearchCriteria']['GetValue'](ruleData['FieldWidgetID']);},'valueSetter':function(rule,value){if(rule['operator']['nb_inputs']!==0x0)try{var ruleData=rule['data'],sTaskSearchCriteria=value;rule['data']=ctrlSearchCriteria['FieldTypeFilter']['ParseFilterRuleDataWrite'](ruleData['FieldWidgetID'],null,null,null,null,sTaskSearchCriteria);}catch(e){}}};return fieldFilter;},'YesNoTextField':function(sFieldID,sDisplayName,sCategory){var fieldDescription={'TableFieldName':sFieldID},fnCreateAndPopulateWidget=function(sFieldWidgetID,sTableFieldName,sLookups){var sourceValues=[{'value':0x1,'text':'Yes'},{'value':0x0,'text':'No'}];TriSysSDK['CShowForm']['populateMultiSelectComboFromDataSource'](sFieldWidgetID,sourceValues),TriSysSDK['CShowForm']['SetSkillsInList'](sFieldWidgetID,sLookups);},fnParseValues=function(sFieldWidgetID,sTableFieldName){var valuesArray=TriSysSDK['CShowForm']['GetSelectedSkillsFromListAsArray'](sFieldWidgetID);if(valuesArray){var idValues=[];for(var i=0x0;i<valuesArray['length'];i++){var sYesOrNo=valuesArray[i];idValues['push'](sYesOrNo=='Yes'?0x1:0x0);}return idValues;}},fnConvertIDsToLookupStrings=function(lstLookupIDs){if(!lstLookupIDs)return;var sYesAndNos='';for(var i=0x0;i<lstLookupIDs['length'];i++){var iYesOrNo=lstLookupIDs[i];if(sYesAndNos['length']>0x0)sYesAndNos+=',\x20';sYesAndNos+=iYesOrNo==0x1?'Yes':'No';}return sYesAndNos;},fieldFilter=ctrlSearchCriteria['FieldTypeFilter']['MultiSelectLookupField'](fieldDescription,sFieldID,sDisplayName,sCategory,sCategory,fnCreateAndPopulateWidget,fnParseValues,fnConvertIDsToLookupStrings);return fieldFilter;},'ConvertSkillsInCategoryIntoSkillIdArray':function(sSkillCategory,sSkillList){var skillIdArray=[];if(!sSkillList)return skillIdArray;var arraySkills=sSkillList['split'](','),trimmedSkills=[];$['each'](arraySkills,function(index,sSkill){sSkill=sSkill['trim'](),trimmedSkills['push'](sSkill);});for(var i=0x0;i<trimmedSkills['length'];i++){var sSkill=trimmedSkills[i],skill=ctrlSearchCriteria['FieldTypeFilter']['GetSkillFromCacheBySkill'](sSkillCategory,sSkill);if(skill)skillIdArray['push'](skill['SkillId']);}return skillIdArray;},'GetSkillFromCacheBySkill':function(sSkillCategory,sSkill){var skills=TriSysApex['Cache']['Skills']();for(var s=0x0;s<skills['length'];s++){var skill=skills[s];if(skill['Category']['trim']()==sSkillCategory['trim']()&&skill['Skill']==sSkill)return skill;}},'GetSkillFromCacheBySkillId':function(iSkillId){var skills=TriSysApex['Cache']['Skills']();for(var s=0x0;s<skills['length'];s++){var skill=skills[s];if(skill['SkillId']==iSkillId)return skill;}},'ParseFilterRuleDataWrite':function(sFieldWidgetID,sSkillList,dtDateValue,capValue,sPostCodeRadial,sTaskSearchCriteria,sQualifications){var dataObject={'FieldWidgetID':sFieldWidgetID,'Skills':sSkillList,'DateValue':dtDateValue,'CurrencyAmountPeriod':capValue,'PostCodeRadial':sPostCodeRadial,'TaskSearchCriteria':sTaskSearchCriteria,'QualificationSearchCriteria':sQualifications};return dataObject;},'ResizeToFitWidth':function(rule){var fnSizeQueryRowContainerToWidth=function(myRule,bResize,mainWinObject){try{var ruleValueContainer=myRule['$el']['find']('.rule-value-container'),increment=0x32,iTopOfRow=myRule['$el']['find']('.rule-operator-container')['position']()['top'],iTop=ruleValueContainer['position']()['top'],iWidth=ruleValueContainer['width']();if(iWidth<=0x0)return;for(var i=0x1;i<=0x28;i++){var bBreak=![],iNewTop=ruleValueContainer['position']()['top'];if(iNewTop<=iTopOfRow)iWidth+=increment;else iNewTop>iTopOfRow&&(iWidth-=increment*1.6,bBreak=!![]);var sWidth=''+iWidth+'px';ruleValueContainer['width'](sWidth),ruleValueContainer['css']('min-width',sWidth,'max-width',sWidth);if(bBreak)break;}}catch(e){var sErr=e;}};fnSizeQueryRowContainerToWidth(rule,![]),$('#divFormContentRow')['resize'](function(){fnSizeQueryRowContainerToWidth(rule,!![],$(this));});},'QuoteChar':'<!q!>'},'ResetColours':function(){setTimeout(function(){$('.query-builder\x20.rules-group-container')['css']('border-color',TriSysProUI['ThemedAlternativeBackColor']());},0xfa);},'DoSearch':function(sEntityName,lRecordId,sSearchCriteriaTree,fnSearchCallback,bPreventSaveCriteria,sIDSuffix){var sJSON=null;if(ctrlSearchCriteria['_EnabledSearch']['AI']){ctrlSearchCriteria['DynamicColumns']['Columns']=[];var column1={'field':'Rank','title':'Rank','type':'number'};ctrlSearchCriteria['DynamicColumns']['Columns']['push'](column1);var column2={'field':'Summary','title':'Summary','type':'string'};ctrlSearchCriteria['DynamicColumns']['Columns']['push'](column2);var sQuestion=$('#ctrlAISearch-Question-'+sIDSuffix)['val']();if(!sQuestion){TriSysApex['UI']['ShowMessage']('Please\x20enter\x20a\x20question\x20to\x20search\x20for\x20suitable\x20'+sEntityName+'\x20records.');return;}var CEntitySearchRequest={'EntityName':sEntityName,'RecordId':lRecordId,'AICriteria':{'Question':sQuestion}};sJSON=JSON['stringify'](CEntitySearchRequest);}else{var bValidated=$('#'+sSearchCriteriaTree)['queryBuilder']('validate',{'skip_empty':![]});if(!bValidated){TriSysApex['UI']['ShowMessage']('Please\x20supply\x20search\x20criteria,\x20or\x20correct\x20any\x20errors.');return;}sJSON=ctrlSearchCriteria['GetJSONSearchRules'](sEntityName,sSearchCriteriaTree,lRecordId);}if(fnSearchCallback){if(!bPreventSaveCriteria){var fnSaveChanges=function(){ctrlSearchCriteria['Persistence']['Put'](sSearchCriteriaTree,sEntityName,lRecordId,sJSON);};setTimeout(fnSaveChanges,0x64);}fnSearchCallback(sEntityName,lRecordId,sJSON,ctrlSearchCriteria['DynamicColumns']['Columns']);}},'GetJSONSearchRules':function(sEntityName,sSearchCriteriaTree,lRecordId){var jsonRules=$('#'+sSearchCriteriaTree)['queryBuilder']('getRules'),jsonObject={'EntityName':sEntityName,'RecordId':lRecordId,'Tree':jsonRules};ctrlSearchCriteria['DynamicColumns']['PrepareColumns'](sEntityName,jsonRules);var sJSON=JSON['stringify'](jsonObject);return sJSON;},'ResetSearch':function(sEntityName,lRecordId,sSearchCriteriaTree,fnSearchCallback,bNoPrompt){var fnYes=function(bProgrammatic){ctrlSearchCriteria['ResetSearchTree'](sSearchCriteriaTree);if(fnSearchCallback){setTimeout(function(){fnSearchCallback(sEntityName,lRecordId,null);},0x1);if(!bProgrammatic)ctrlSearchCriteria['Persistence']['Put'](sSearchCriteriaTree,sEntityName,lRecordId,null);}return!![];};if(bNoPrompt)fnYes(!![]);else{var sMessage='Are\x20you\x20sure\x20you\x20wish\x20to\x20remove\x20all\x20search\x20criteria?'+'<br/>'+'This\x20will\x20display\x20every\x20'+sEntityName+'\x20in\x20your\x20database'+'\x20which\x20may\x20take\x20some\x20time.';TriSysApex['UI']['questionYesNo'](sMessage,'Clear\x20Search','Yes',fnYes,'No');}},'ResetSearchTree':function(sSearchCriteriaTree){try{$('#'+sSearchCriteriaTree)['queryBuilder']('reset');}catch(e){}},'Persistence':{'Get':function(sControlID,sEntityName,lRecordId,fnSearchCallback,fnResetSearch){ctrlSearchCriteria['Persistence']['GetFromWebService'](sControlID,sEntityName,lRecordId,fnSearchCallback,fnResetSearch);},'Put':function(sControlID,sEntityName,lRecordId,sSQL){ctrlSearchCriteria['Persistence']['PutToWebService'](sControlID,sEntityName,lRecordId,sSQL);},'GetFromWebService':function(sControlID,sEntityName,lRecordId,fnSearchCallback,fnResetSearch){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(!userCredentials)return;var bCloneMatchingControlOfOtherUser=![];if(sControlID['indexOf'](ctrlSearchCriteria['Constants']['EntitySearchPrefix'])==0x0)bCloneMatchingControlOfOtherUser=!![];var lUserId=userCredentials['LoggedInUser']['UserId'],CSearchTreeReadRequest={'UserId':lUserId,'ControlId':sControlID,'EntityName':sEntityName,'RecordId':lRecordId,'CloneMatchingControl':bCloneMatchingControlOfOtherUser},payloadObject={};payloadObject['URL']='SearchTree/Read',payloadObject['OutboundDataPacket']=CSearchTreeReadRequest,payloadObject['InboundDataFunction']=function(CSearchTreeReadResponse){if(CSearchTreeReadResponse){if(CSearchTreeReadResponse['Success']&&CSearchTreeReadResponse['Criteria'])try{var sJsonCriteria=CSearchTreeReadResponse['Criteria']['JsonCriteria'];ctrlSearchCriteria['WriteToTreeAndInvokeSearch'](sEntityName,lRecordId,sControlID,sJsonCriteria,fnSearchCallback);return;}catch(e){var sError=e;}if(fnResetSearch)fnResetSearch();}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('ctrlSearchCriteria.Persistence.GetFromWebService:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'PutToWebService':function(sControlID,sEntityName,lRecordId,sJSON){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials'](),lUserId=userCredentials['LoggedInUser']['UserId'],CSearchTreeWriteRequest={'Criteria':{'UserId':lUserId,'ControlId':sControlID,'EntityName':sEntityName,'RecordId':lRecordId,'JsonCriteria':sJSON}},payloadObject={};payloadObject['URL']='SearchTree/Write',payloadObject['OutboundDataPacket']=CSearchTreeWriteRequest,payloadObject['InboundDataFunction']=function(data){var CSearchTreeWriteResponse=data;if(CSearchTreeWriteResponse){if(CSearchTreeWriteResponse['Success']){}}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('ctrlSearchCriteria.Persistence.PutToWebService:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'CookiePrefix':'ctrlSearchCriteria-','GetCookie':function(sControlID,sEntityName,lRecordId,fnSearchCallback){var sKey=ctrlSearchCriteria['Persistence']['CookiePrefix']+sControlID+'-'+lRecordId,sSQL=TriSysAPI['Cookies']['getCookie'](sKey);if(sSQL){try{$('#'+sControlID)['queryBuilder']('setRulesFromSQL',sSQL);}catch(e){var sError=e;}ctrlSearchCriteria['DoSearch'](sEntityName,lRecordId,sControlID,fnSearchCallback);}},'PutCookie':function(sControlID,lRecordId,sSQL){var sKey=ctrlSearchCriteria['Persistence']['CookiePrefix']+sControlID+'-'+lRecordId;TriSysAPI['Cookies']['setCookie'](sKey,sSQL);}},'TaskSearchCriteria':{'Load':function(sFieldWidgetID,fnCallback){var sPath=TriSysApex['Constants']['UserControlFolder']+'ctrlTaskSearchCriteria.html';TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldWidgetID,sPath,function(response,status,xhr){ctrlSearchCriteria['TaskSearchCriteria']['AfterLoadEvent'](sFieldWidgetID);if(fnCallback)fnCallback();});},'AfterLoadEvent':function(divTag){var sPrefix=divTag+'-';TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);var sTaskTypeID=sPrefix+'ctrlTaskSearchCriteria-TaskType';TriSysSDK['CShowForm']['TaskTypeCombo'](sTaskTypeID);var sStartDateID=sPrefix+'ctrlTaskSearchCriteria-StartDate';TriSysSDK['CShowForm']['datePicker'](sStartDateID);var sEndDateID=sPrefix+'ctrlTaskSearchCriteria-EndDate';TriSysSDK['CShowForm']['datePicker'](sEndDateID);},'SetValue':function(sFieldWidgetID,arrTaskSearchCriteria){if(arrTaskSearchCriteria){var sTaskSearchCriteria=arrTaskSearchCriteria[0x0],criteria=ctrlSearchCriteria['TaskSearchCriteria']['ParseValueString'](sTaskSearchCriteria);if(criteria){var sPrefix=sFieldWidgetID+'-';TriSysSDK['CShowForm']['SetTaskTypeComboValue'](sPrefix+'ctrlTaskSearchCriteria-TaskType',criteria['TaskType']),TriSysSDK['CShowForm']['setDatePickerValue'](sPrefix+'ctrlTaskSearchCriteria-StartDate',criteria['StartDate']),TriSysSDK['CShowForm']['setDatePickerValue'](sPrefix+'ctrlTaskSearchCriteria-EndDate',criteria['EndDate']);}}},'GetValue':function(sFieldWidgetID){var sPrefix=sFieldWidgetID+'-',sTaskType=TriSysSDK['CShowForm']['GetTaskTypeFromCombo'](sPrefix+'ctrlTaskSearchCriteria-TaskType'),dtStartDate=TriSysSDK['CShowForm']['getDatePickerValue'](sPrefix+'ctrlTaskSearchCriteria-StartDate'),dtEndDate=TriSysSDK['CShowForm']['getDatePickerValue'](sPrefix+'ctrlTaskSearchCriteria-EndDate'),sValue=sTaskType+','+dtStartDate+','+dtEndDate;return sValue;},'ParseValueString':function(sTaskSearchCriteria){if(!sTaskSearchCriteria)return null;var parts=sTaskSearchCriteria['split'](',');if(parts){var criteria={'TaskType':parts[0x0],'StartDate':parts[0x1],'EndDate':parts[0x2]};return criteria;}}},'QualificationSearchCriteria':{'Load':function(sFieldWidgetID,fnCallback){var sPath=TriSysApex['Constants']['UserControlFolder']+'ctrlQualificationSearchCriteria.html';TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldWidgetID,sPath,function(response,status,xhr){ctrlSearchCriteria['QualificationSearchCriteria']['AfterLoadEvent'](sFieldWidgetID);if(fnCallback)fnCallback();});},'AfterLoadEvent':function(divTag){var sPrefix=divTag+'-';TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);var skillComboOptions={'FirstItem':{'Value':0x0,'Text':'Any'}},sInstitutionID=sPrefix+'ctrlQualificationSearchCriteria-Institution';TriSysSDK['CShowForm']['skillCombo'](sInstitutionID,'QualificationInstitution',null,null,skillComboOptions);var sTypeID=sPrefix+'ctrlQualificationSearchCriteria-Type';TriSysSDK['CShowForm']['skillCombo'](sTypeID,'QualificationType',null,null,skillComboOptions);var sSubjectID=sPrefix+'ctrlQualificationSearchCriteria-Subject';TriSysSDK['CShowForm']['skillCombo'](sSubjectID,'QualificationSubject',null,null,skillComboOptions);var sResultID=sPrefix+'ctrlQualificationSearchCriteria-Result';TriSysSDK['CShowForm']['skillCombo'](sResultID,'QualificationResult',null,null,skillComboOptions);var source=[{'value':0x0,'text':'Any'}],dt=new Date(),iStartYear=dt['getFullYear']()-0x4b;for(var i=dt['getFullYear']();i>=iStartYear;i--){var item={'value':i,'text':i};source['push'](item);}var sYearID=sPrefix+'ctrlQualificationSearchCriteria-Year';TriSysSDK['CShowForm']['populateComboFromDataSource'](sYearID,source,0x0);},'SetValue':function(sFieldWidgetID,sQualificationSearchCriteria){if(sQualificationSearchCriteria){var criteria=ctrlSearchCriteria['QualificationSearchCriteria']['ParseValueString'](sQualificationSearchCriteria);if(criteria){var sPrefix=sFieldWidgetID+'-';TriSysSDK['CShowForm']['SetValueInCombo'](sPrefix+'ctrlQualificationSearchCriteria-Institution',criteria['Institution']),TriSysSDK['CShowForm']['SetValueInCombo'](sPrefix+'ctrlQualificationSearchCriteria-Type',criteria['Type']),TriSysSDK['CShowForm']['SetValueInCombo'](sPrefix+'ctrlQualificationSearchCriteria-Subject',criteria['Subject']),TriSysSDK['CShowForm']['SetValueInCombo'](sPrefix+'ctrlQualificationSearchCriteria-Result',criteria['Result']),TriSysSDK['CShowForm']['SetValueInCombo'](sPrefix+'ctrlQualificationSearchCriteria-Year',criteria['Year']);}}},'GetValue':function(sFieldWidgetID){var sPrefix=sFieldWidgetID+'-',iInstitution=TriSysSDK['CShowForm']['GetValueFromCombo'](sPrefix+'ctrlQualificationSearchCriteria-Institution'),iType=TriSysSDK['CShowForm']['GetValueFromCombo'](sPrefix+'ctrlQualificationSearchCriteria-Type'),iSubject=TriSysSDK['CShowForm']['GetValueFromCombo'](sPrefix+'ctrlQualificationSearchCriteria-Subject'),iResult=TriSysSDK['CShowForm']['GetValueFromCombo'](sPrefix+'ctrlQualificationSearchCriteria-Result'),iYear=TriSysSDK['CShowForm']['GetValueFromCombo'](sPrefix+'ctrlQualificationSearchCriteria-Year'),objValue={'Institution':iInstitution,'Type':iType,'Subject':iSubject,'Result':iResult,'Year':iYear},sValue=JSON['stringify'](objValue);return sValue;},'ParseValueString':function(sQualificationSearchCriteria){if(!sQualificationSearchCriteria)return null;var criteria=JSON['parse'](sQualificationSearchCriteria);return criteria;}},'JobTitleLookup':function(sJobTitleField){var sJobTitle=TriSysSDK['CShowForm']['GetJobTitleFromField'](sJobTitleField),fnChange=function(sField,sValue){$('#'+sField)['trigger']('change');};TriSysSDK['JobTitle']['Lookup'](sJobTitle,sJobTitleField,fnChange);},'WriteToTreeAndInvokeSearch':function(sEntityName,lRecordId,sControlID,sSQLorJson,fnSearchCallback,bPreventSaveCriteria){var bJson=!![];if(sSQLorJson){if(sSQLorJson['indexOf']('EntityName')<0x0&&sSQLorJson['indexOf']('Tree')<0x0)bJson=![];}if(bJson){var CEntitySearchRequest=JSON['parse'](sSQLorJson);if(CEntitySearchRequest){if(CEntitySearchRequest['AICriteria']&&CEntitySearchRequest['AICriteria']['Question']){const fnTriggerSearch=function(){var sSuffix=sControlID['replace']('search-criteria-tree','');const sID='ctrlAISearch-Question-'+sSuffix;$('#'+sID)['val'](CEntitySearchRequest['AICriteria']['Question']),ctrlSearchCriteria['_EnabledSearch']['AI']=!![],TriSysSDK['Controls']['Button']['Click']('ctrlSearchCriteria-form-tab-ai'+sSuffix),ctrlSearchCriteria['DoSearch'](sEntityName,lRecordId,sControlID,fnSearchCallback,bPreventSaveCriteria,sSuffix);};setTimeout(fnTriggerSearch,0xa);return;}}if(!TriSysApex['Constants']['AllowEmptySearchCriteria']&&!ctrlSearchCriteria['isValidJsonRules'](sSQLorJson)){var sMessage='Please\x20supply\x20'+sEntityName+'\x20search\x20criteria.';TriSysApex['UI']['ShowMessage'](sMessage);return;}var jsonObject=JSON['parse'](sSQLorJson);$('#'+sControlID)['queryBuilder']('setRules',jsonObject['Tree']);}else $('#'+sControlID)['queryBuilder']('setRulesFromSQL',sSQLorJson);if(TriSysAPI['Operators']['isEmpty'](bPreventSaveCriteria))bPreventSaveCriteria=!![];ctrlSearchCriteria['DoSearch'](sEntityName,lRecordId,sControlID,fnSearchCallback,bPreventSaveCriteria);},'isValidJsonRules':function(sJsonRules){if(sJsonRules)try{var jsonObject=JSON['parse'](sJsonRules);if(jsonObject['Tree']['rules']['length']>0x0)return!![];}catch(ex){}return![];},'DynamicColumns':{'Fields':null,'PrepareColumns':function(sEntityName,jsonRules){ctrlSearchCriteria['DynamicColumns']['Columns']=[];if(!jsonRules)return;if(!jsonRules['rules'])return;var fnAddRuleToColumns=function(rule){if(rule['id']){var bFound=ctrlSearchCriteria['DynamicColumns']['Columns']['find'](function(column){return column['field']==rule['field'];});if(!bFound){var matchingField=ctrlSearchCriteria['DynamicColumns']['Fields']['find'](function(field){if(field['id']==rule['field'])return field;}),sTitle=matchingField?matchingField['label']:rule['field'],sType=matchingField?matchingField['type']:'string';sType=sType=='date'?sType:'string';var column={'field':rule['field'],'title':sTitle,'type':sType};ctrlSearchCriteria['DynamicColumns']['Columns']['push'](column);}}rule['rules']&&rule['rules']['forEach'](function(rule2){fnAddRuleToColumns(rule2);});};jsonRules['rules']['forEach'](function(rule){fnAddRuleToColumns(rule);});},'Columns':[]},'CustomerSpecificFieldDescriptionModifications':function(sEntityName,fieldDescriptions){if(typeof ApexCustomerModule!=TriSysApex['Constants']['Undefined']&&typeof ApexCustomerModule['SearchCriteriaRules']!=TriSysApex['Constants']['Undefined']&&typeof ApexCustomerModule['SearchCriteriaRules']['FieldDescriptionModifications']!=TriSysApex['Constants']['Undefined'])try{ApexCustomerModule['SearchCriteriaRules']['FieldDescriptionModifications'](sEntityName,fieldDescriptions);}catch(e){}},'_EnabledSearch':{'Boolean':![],'AI':![],'Clear':function(){ctrlSearchCriteria['_EnabledSearch']['Boolean']=![],ctrlSearchCriteria['_EnabledSearch']['AI']=![];}},'TabClickEvent':function(sTabID,sSuffix){ctrlSearchCriteria['_EnabledSearch']['Clear']();const sPrefix='ctrlSearchCriteria-tab-panel-';var bBooleanSearch=sTabID['indexOf'](sPrefix+'boolean')==0x0;if(bBooleanSearch){ctrlSearchCriteria['_EnabledSearch']['Boolean']=!![];return;}var bAISearch=sTabID['indexOf'](sPrefix+'ai')==0x0;if(bAISearch){ctrlSearchCriteria['_EnabledSearch']['AI']=!![],$('#ctrlAISearch-Question-'+sSuffix)['focus']();return;}},'LoadAISearchCriteria':function(sEntityName,lRecordId,sDivID,sSuffix,sTabID){TriSysApex['FormsManager']['loadControlIntoDiv'](sDivID,'ctrlAISearch.html',function(response,status,xhr){TriSysSDK['Controls']['General']['RenameElementIdsWithParentIdPrefixOrSuffix'](sDivID,sSuffix,![]);const sInstructions='Please\x20enter\x20or\x20paste\x20your\x20question\x20to\x20the\x20artificial\x20intelligent\x20agent,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20which\x20will\x20search\x20your\x20CV\x27s\x20and\x20return\x20a\x20list\x20of\x20suitable\x20candidates\x20ranked\x20in\x20order.',sInstructionPrefix='ctrlAISearch-Instructions-';$('#'+sInstructionPrefix+'tr-'+sSuffix)['show'](),$('#'+sInstructionPrefix+sSuffix)['html'](sInstructions);}),ctrlSearchCriteria['CheckWebAPIifAIProjectsExist'](sEntityName,function(bSuccess,sStatus){var elem=$('#'+sTabID+sSuffix);bSuccess?elem['show']():elem['hide']();});},'CheckWebAPIifAIProjectsExist':function(sEntityName,fnCallback){var CEntityStatusRequest={'EntityName':sEntityName},payloadObject={};payloadObject['URL']='ChatGPT/EntitySearchEnabledStatus',payloadObject['OutboundDataPacket']=CEntityStatusRequest,payloadObject['InboundDataFunction']=function(CEntityStatusResponse){if(CEntityStatusResponse)fnCallback(CEntityStatusResponse['Success'],CEntityStatusResponse['Status']);},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('ctrlSearchCriteria.CheckWebAPIifAIProjectsExist:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'DoAISearch':function(sEntityName,lRecordId,fnSearchCallback,bPreventSaveCriteria,sIDSuffix){var sQuestion=$('#ctrlAISearch-Question-'+sIDSuffix)['val']();if(!sQuestion){TriSysApex['UI']['ShowMessage']('Please\x20enter\x20a\x20question\x20to\x20search\x20for\x20suitable\x20candidates.');return;}var CEntitySearchRequest={'EntityName':sEntityName,'RecordId':lRecordId,'Question':sQuestion},payloadObject={};payloadObject['URL']='ChatGPT/EntitySearch',payloadObject['OutboundDataPacket']=CEntitySearchRequest,payloadObject['InboundDataFunction']=function(CEntitySearchResponse){if(CEntitySearchResponse){if(CEntitySearchResponse['Success']){var sJSON='This\x20must\x20be\x20set\x20and\x20also\x20dynamic\x20columns\x20sorted\x20too';fnSearchCallback(sEntityName,lRecordId,sJSON,CEntitySearchResponse['DynamicColumns']);}else TriSysApex['UI']['ShowMessage'](CEntitySearchResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('ctrlSearchCriteria.DoAISearch:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'Constants':{'EntitySearchPrefix':'search-criteria-tree-ctrlEntitySearch-lookup-criteria-'}};