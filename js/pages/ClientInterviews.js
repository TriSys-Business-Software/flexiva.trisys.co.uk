var ClientInterviews={'Load':function(){ClientInterviews['PopulatePendingInterviewsGrid']();},'PopulatePendingInterviewsGrid':function(){var payloadObject={};payloadObject['URL']='Vacancies/ClientInterviewFeedback',payloadObject['OutboundDataPacket']=null,payloadObject['InboundDataFunction']=function(CClientInterviewFeedbackResponse){TriSysApex['UI']['HideWait']();var fnFeedback=function(rowData){ClientInterviews['OpenFeedbackForm'](rowData);},columns=ClientInterviews['Columns'];return columns[0xa]['hidden']=!![],columns[0xb]['hidden']=!![],ClientInterviews['PopulateGrid']('divClientInterviewsPendingFeedbackGrid','PendingInterviews','Pending\x20Interviews',CClientInterviewFeedbackResponse['InterviewsWithoutFeedback'],fnFeedback,'Feedback',columns),columns[0xa]['hidden']=![],columns[0xb]['hidden']=![],ClientInterviews['PopulateGrid']('divClientInterviewsWithFeedbackGrid','FeedbackInterviews','Interviews\x20with\x20Feedback',CClientInterviewFeedbackResponse['InterviewsWithFeedback'],null,null,columns),!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ShowMessage']('ClientInterviews.PopulatePendingInterviewsGrid\x20:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Reading\x20Interviews...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'PopulateGrid':function(sGridID,sGridName,sTitle,interviews,fnFeedback,sButtonCaption,columns){var bHorizontalScrolling=![];TriSysSDK['Grid']['VirtualMode']({'Div':sGridID,'ID':sGridName,'Title':sTitle,'RecordsPerPage':TriSysApex['UserOptions']['RecordsPerPage'](),'SQL':null,'PopulationByObject':interviews,'Columns':columns,'MobileVisibleColumns':ClientInterviews['MobileVisibleColumns'],'MobileRowTemplate':ClientInterviews['MobileRowTemplate'],'KeyColumnName':'TaskId','DrillDownFunction':fnFeedback,'OpenButtonCaption':sButtonCaption,'MultiRowSelect':![],'ColumnFilters':![],'Grouping':![],'HorizontalScrolling':bHorizontalScrolling});},'Columns':[{'field':'CandidateId','title':'CandidateId','type':'number','width':0x46,'hidden':!![]},{'field':'TaskId','title':'TaskID','type':'number','width':0x46,'hidden':!![]},{'field':'RequirementId','title':'RequirementID','type':'number','width':0x46,'hidden':!![]},{'field':'Reference','title':'Reference','type':'string','width':0x78},{'field':'RequirementJobTitle','title':'Job\x20Title','type':'string','width':0xaa},{'field':'Company','title':'Company','type':'string','width':0xaa,'hidden':!![]},{'field':'CandidateName','title':'Candidate\x20Name','type':'string','width':0xaa},{'field':'CandidateJobTitle','title':'Candidate\x20Job\x20Title','type':'string','width':0xaa,'hidden':!![]},{'field':'InterviewStage','title':'Interview\x20Stage','type':'string','width':0x8c},{'field':'InterviewDate','title':'Interview\x20Date/Time','type':'date','format':'{0:dd\x20MMM\x20yyyy\x20HH:mm}','width':0xa0},{'field':'Feedback','title':'Feedback','type':'string','hidden':!![]},{'field':'FeedbackDate','title':'Feedback\x20Date/Time','type':'date','format':'{0:dd\x20MMM\x20yyyy\x20HH:mm}','width':0xa0,'hidden':!![]},{'field':'TamperProof','title':'TamperProof','type':'string','width':0xa0,'hidden':!![]}],'MobileVisibleColumns':[{'field':'Reference'}],'MobileRowTemplate':'<td\x20colspan=\x221\x22><strong>#:\x20Reference\x20#\x20</strong><br\x20/>#:\x20RequirementJobTitle\x20#<br\x20/>'+'<i>Candidate:\x20#:\x20CandidateName\x20#</i><br\x20/>'+'Interview:\x20#:\x20kendo.format(\x22{0:dd\x20MMM\x20yyyy}\x22,\x20InterviewDate)\x20#</i><br\x20/>'+'Stage:\x20#:\x20InterviewStage\x20#<br\x20/>'+'<hr></td>','OpenFeedbackForm':function(rowData){var lCandidateId=rowData['CandidateId'],lTaskId=rowData['TaskId'],lRequirementId=rowData['RequirementId'],sInterviewStage=rowData['InterviewStage'],sTamperProof=rowData['TamperProof'],fnSendFeedback=function(){return ClientInterviews['SendSendFeedback'](lCandidateId,lTaskId,lRequirementId,sInterviewStage,sTamperProof);},fnCancelSend=function(){return!![];},parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']='Interview\x20Feedback',parametersObject['Resizable']=![],parametersObject['Maximize']=![],parametersObject['Image']='fa-envelope-o',parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'ctrlClientInterviewFeedback.html',parametersObject['OnLoadCallback']=function(){$('#ctrlClientInterviewFeedback_JobReference')['html'](rowData['Reference']),$('#ctrlClientInterviewFeedback_JobTitle')['html'](rowData['RequirementJobTitle']),$('#ctrlClientInterviewFeedback_InterviewStage')['html'](sInterviewStage),$('#ctrlClientInterviewFeedback_InterviewDate')['html'](moment(rowData['InterviewDate'])['format']('dddd\x20DD\x20MMMM\x20YYYY')+'\x20@\x20'+moment(rowData['InterviewDate'])['format']('HH:mm')),$('#ctrlClientInterviewFeedback_Candidate')['html'](rowData['CandidateName']);},parametersObject['ButtonLeftText']='Submit\x20Feedback',parametersObject['ButtonLeftFunction']=fnSendFeedback,parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftWidth']=0x64,parametersObject['ButtonRightWidth']=0x64,parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightFunction']=fnCancelSend,TriSysApex['UI']['PopupMessage'](parametersObject);},'SendSendFeedback':function(lCandidateId,lTaskId,lRequirementId,sInterviewStage,sTamperProof){var sFeedback=$('#ctrlClientInterviewFeedback_Feedback')['val']();if(!sFeedback)return TriSysApex['UI']['ShowMessage']('Please\x20provide\x20some\x20feedback\x20from\x20the\x20interview.'),![];var fnCallback=ClientInterviews['PopulatePendingInterviewsGrid'];return ClientInterviews['SubmitFeedback'](lCandidateId,lTaskId,lRequirementId,sInterviewStage,sTamperProof,sFeedback,fnCallback),!![];},'SubmitFeedback':function(lCandidateId,lTaskId,lRequirementId,sInterviewStage,sTamperProof,sFeedback,fnCallback){var ClientInterviewSubmitFeedbackRequest={'CandidateId':lCandidateId,'RequirementId':lRequirementId,'TaskId':lTaskId,'Stage':sInterviewStage,'Feedback':sFeedback,'TamperProof':sTamperProof},payloadObject={};payloadObject['URL']='Vacancies/ClientInterviewSubmitFeedback',payloadObject['OutboundDataPacket']=ClientInterviewSubmitFeedbackRequest,payloadObject['InboundDataFunction']=function(CClientInterviewSubmitFeedbackResponse){TriSysApex['UI']['HideWait']();if(CClientInterviewSubmitFeedbackResponse){if(CClientInterviewSubmitFeedbackResponse['Success'])fnCallback();else TriSysApex['UI']['ShowMessage'](CClientInterviewSubmitFeedbackResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ShowMessage']('ClientInterviews.SubmitFeedback\x20:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Submitting\x20Interview\x20Feedback...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};$(document)['ready'](function(){ClientInterviews['Load']();});