var ApexIndexPage={'initialiseSearch':function(){$('#trisys-search')['keyup'](function(event){var my_input=document['getElementById']('trisys-search');if(event['keyCode']==0xd){var sText=my_input['value'];sText&&ApexIndexPage['ShowSearchResultsMenu'](sText);}else{$('#search-drop-down-results-block-waiting-spinner')['hide'](),$('#search-drop-down-results-block-list')['hide']();var elemSearchDropDownResults=$('#search-drop-down-results'),sExpanded=elemSearchDropDownResults['attr']('aria-expanded');if(sExpanded=='true')$('#search-drop-down-results')['trigger']('click');}}),$('#trisys-search')['on']('click',function(e){var xOffset=e['offsetX'],iMagnifyingGlassXStart=0xaa;if(xOffset>=iMagnifyingGlassXStart)ApexIndexPage['MagnifyingGlassPopup']();else{var sText=$('#trisys-search')['val']();ApexIndexPage['ShowSearchResultsMenu'](sText);}e['stopPropagation']();});},'SearchInvocation':function(sSearchText){var payloadObject={},CLookupRequest={'Expression':sSearchText,'MaximumRecordsPerEntity':0x10};payloadObject['URL']='Lookup/Find',payloadObject['OutboundDataPacket']=CLookupRequest,payloadObject['InboundDataFunction']=function(CLookupResponse){if(CLookupResponse){if(CLookupResponse['Success']){ApexIndexPage['DisplaySearchResults'](CLookupResponse['Items'],sSearchText);return;}}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['Logging']['LogMessage']('ApexIndexPage.SearchInvocation:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'DisplaySearchResults':function(items,sSearchText){var elemList=$('#search-drop-down-results-block-list'),iCounter=0x0;if(sSearchText)sSearchText=sSearchText['trim']();if(items){iCounter=items['length'];for(var i=0x0;i<items['length'];i++){var item=items[i],sEntityName=item['EntityName'],sIcon=null;switch(sEntityName){case'Contact':sIcon='gi\x20gi-parents';break;case'Company':sIcon='gi\x20gi-building';break;case'Requirement':sIcon='gi\x20gi-user_add';break;case'Placement':sIcon='gi\x20gi-gbp';break;case'Timesheet':sIcon='gi\x20gi-stopwatch';break;}if(sIcon)sIcon='<i\x20class=\x22'+sIcon+'\x20pull-left\x22\x20style=\x22color:\x20gray;\x20margin-top:\x203px;\x20margin-left:\x201px;\x22></i>\x20&nbsp;\x20&nbsp;\x20';var sFunction='TriSysApex.FormsManager.OpenForm(\x27'+sEntityName+'\x27,'+item['RecordId']+');',fnReplaceCaseInsensitive=function(line,word){if(line)try{var regex=new RegExp('('+word+')','gi');return line['replace'](regex,'<b>$1</b>');}catch(e){return line['replace'](regex,'<b>'+word+'</b>');}else return line;},sText=item['Display'],parts=sSearchText['split']('\x20');for(var j=0x0;j<parts['length'];j++){var sWord=parts[j];sText=fnReplaceCaseInsensitive(sText,sWord);}var sRightPadding='\x20&nbsp;\x20&nbsp;\x20',sItemHyperlink='<a\x20href=\x22javascript:void(0)\x22\x20onclick=\x22'+sFunction+'\x22>'+sIcon+sText+sRightPadding+'</a>';elemList['append'](sItemHyperlink);}}$('#search-drop-down-results-block-waiting-spinner')['hide']();if(iCounter>0x0)elemList['show']();},'afterLoadDynamically':function(){try{TriSysPhoneGap['onLoadEvent']();}catch(ex){}TriSysApex['Pages']['Index']['documentReady'](null,'scrollNavBar');try{$('[data-fancybox]')['fancybox']({'autoSize':!![]});}catch(e){}ApexIndexPage['SetupGoogleTranslateWidget']();var bTurnOffHoverMenus=TriSysApex['Device']['Model']['Android']()||TriSysApex['Device']['Model']['iOS']();bTurnOffHoverMenus&&($('#history-drop-down-menu')['removeClass']()['addClass']('dropdown'),$('#new-record-drop-down-menu')['removeClass']()['addClass']('dropdown'),$('#LoggedInUserDropDownMenu')['removeClass']()['addClass']('dropdown'));var newRecordParentBlock=$('#new-record-drop-down-menu-block');$('#new-record-contact')['on']('click',function(e){return TriSysApex['Pages']['ContactForm']['NewRecord'](),ApexIndexPage['PostMenuItemClick'](e,$(this),newRecordParentBlock);}),$('#new-record-company')['on']('click',function(e){return TriSysApex['Pages']['CompanyForm']['NewRecord'](),ApexIndexPage['PostMenuItemClick'](e,$(this),newRecordParentBlock);}),$('#new-record-cvar')['on']('click',function(e){return TriSysApex['FormsManager']['OpenForm']('CVAutoRecognition'),ApexIndexPage['PostMenuItemClick'](e,$(this),newRecordParentBlock);}),$('#new-record-requirement')['on']('click',function(e){return TriSysApex['Pages']['RequirementForm']['NewRecord'](),ApexIndexPage['PostMenuItemClick'](e,$(this),newRecordParentBlock);}),$('#new-record-placement')['on']('click',function(e){return TriSysApex['Pages']['PlacementForm']['NewRecord'](),ApexIndexPage['PostMenuItemClick'](e,$(this),newRecordParentBlock);}),$('#new-record-timesheet')['on']('click',function(e){return TriSysApex['Pages']['TimesheetForm']['NewRecord'](),ApexIndexPage['PostMenuItemClick'](e,$(this),newRecordParentBlock);}),$('#new-record-notehistory')['on']('click',function(e){return TriSysApex['ModalDialogue']['Task']['ContextualNew'](![]),ApexIndexPage['PostMenuItemClick'](e,$(this),newRecordParentBlock);}),$('#new-record-scheduledtask')['on']('click',function(e){return TriSysApex['ModalDialogue']['Task']['ContextualNew'](!![]),ApexIndexPage['PostMenuItemClick'](e,$(this),newRecordParentBlock);}),$('#new-record-postitnote')['on']('click',function(e){return TriSysApex['PostItNotes']['New'](),ApexIndexPage['PostMenuItemClick'](e,$(this),newRecordParentBlock);});var loggedInUserDropDownMenuParentBlock=$('#LoggedInUserDropDownMenu-block');$('#LoggedInUserDropDownMenu-OpenLoggedInUserContactRecord')['on']('click',function(e){return TriSysApex['UserOptions']['OpenLoggedInUserContactRecord'](),ApexIndexPage['PostMenuItemClick'](e,$(this),loggedInUserDropDownMenuParentBlock);}),$('#LoggedInUserDropDownMenu-OpenLoggedInUserCompanyRecord')['on']('click',function(e){return TriSysApex['UserOptions']['OpenLoggedInUserCompanyRecord'](),ApexIndexPage['PostMenuItemClick'](e,$(this),loggedInUserDropDownMenuParentBlock);}),$('#LoggedInUserDropDownMenu-UserOptions')['on']('click',function(e){return TriSysApex['UserOptions']['ShowForm'](),ApexIndexPage['PostMenuItemClick'](e,$(this),loggedInUserDropDownMenuParentBlock);}),$('#LoggedInUserDropDownMenu-TodaysTasks')['on']('click',function(e){return TriSysApex['Activities']['Launch']('Todays\x20Tasks'),ApexIndexPage['PostMenuItemClick'](e,$(this),loggedInUserDropDownMenuParentBlock);});var $doc=$(document);$doc['mousemove'](function(event){var pageCoords='(\x20'+event['pageX']+',\x20'+event['pageY']+'\x20)',clientCoords='(\x20'+event['clientX']+',\x20'+event['clientY']+'\x20)',sText='Move:\x20'+pageCoords+',\x20'+clientCoords;}),$doc['mouseenter'](function(event){var pageCoords='(\x20'+event['pageX']+',\x20'+event['pageY']+'\x20)',clientCoords='(\x20'+event['clientX']+',\x20'+event['clientY']+'\x20)',sText='Enter:\x20'+pageCoords+',\x20'+clientCoords;}),$doc['mouseover'](function(event){var pageCoords='(\x20'+event['pageX']+',\x20'+event['pageY']+'\x20)',clientCoords='(\x20'+event['clientX']+',\x20'+event['clientY']+'\x20)',sText='Over:\x20'+pageCoords+',\x20'+clientCoords;}),$doc['mousedown'](function(event){var pageCoords='(\x20'+event['pageX']+',\x20'+event['pageY']+'\x20)',clientCoords='(\x20'+event['clientX']+',\x20'+event['clientY']+'\x20)',sText='Down:\x20'+pageCoords+',\x20'+clientCoords;}),$doc['hover'](function(event){var pageCoords='(\x20'+event['pageX']+',\x20'+event['pageY']+'\x20)',clientCoords='(\x20'+event['clientX']+',\x20'+event['clientY']+'\x20)',sText='Hover:\x20'+pageCoords+',\x20'+clientCoords;});},'PostMenuItemClick':function(e,thisElement,parentBlock){return!parentBlock&&(parentBlock=thisElement['closest']('ul')),parentBlock['hide'](),setTimeout(function(){parentBlock['css']('display','');},0x64),e['preventDefault'](),![];},'MenuClick':function(sDiv){var parentBlock=$('#'+sDiv);parentBlock['hide'](),setTimeout(function(){parentBlock['removeAttr']('style');},0x64);},'SetupHelpToolbarButton':function(){var bPhone=TriSysApex['Device']['isPhone'](),helpButton=$('#show-contextual-help');if(bPhone)helpButton['hide']();else helpButton['show'](),helpButton['on']('click',function(e){var bHelpOn=!![];TriSysApex['TourGuide']['StartTourForCurrentForm'](bHelpOn);});},'SetHelpToolbarButtonMode':function(bHelpOn){var helpButton=$('#show-contextual-help');helpButton['removeClass']()['addClass']('btn\x20btn-sm\x20btn-'+(bHelpOn?'danger':'success'));},'SetupFontSizeToolbarButtons':function(){return;var fZoomFactorIncrement=0.95,fMinZoomFactor=0.5,fMaxZoomFactor=0x3,btnFontSmaller=$('#font-smaller'),btnFontLarger=$('#font-larger'),bPhone=TriSysApex['Device']['isPhone']();if(TriSysSDK['Browser']['Firefox']())return;btnFontSmaller['show'](),btnFontLarger['show']();var fnZoom=function(bIncrease){var fZoomFactor=TriSysApex['Device']['CurrentZoomFactor']*fZoomFactorIncrement;if(bIncrease)fZoomFactor=TriSysApex['Device']['CurrentZoomFactor']/fZoomFactorIncrement;TriSysApex['Device']['ApplyZoomFactor'](fZoomFactor);if(fZoomFactor<=fMinZoomFactor)btnFontSmaller['hide']();else btnFontSmaller['show']();if(fZoomFactor>=fMaxZoomFactor)btnFontLarger['hide']();else btnFontLarger['show']();};btnFontSmaller['on']('click',function(e){fnZoom(![]);}),btnFontLarger['on']('click',function(e){fnZoom(!![]);});},'SetupGoogleTranslateWidget':function(){try{var translatorEngine=new google['translate']['TranslateElement']({'pageLanguage':'en'},'google_translate_element'),fnFixStupidGoogleTranslateBug=function(){$('body')['css']('top',0x0);},setLanguage=function(sLanguageCode){TriSysApex['Logging']['LogMessage'](sLanguageCode);};$('.goog-te-combo')['change'](function(e){var sLanguage=this['value'];setLanguage(sLanguage),fnFixStupidGoogleTranslateBug();}),setTimeout(fnFixStupidGoogleTranslateBug,0x7d0);}catch(e){TriSysApex['Logging']['LogMessage']('Failed\x20to\x20instantiate\x20google\x20translate.');}},'SetTranslationLanguageCode':function(sLanguageCode){if(sLanguageCode!='en'){var fnOverrideLanguage=function(){$('.goog-te-combo')['val'](sLanguageCode);};setTimeout(fnOverrideLanguage,0x7d0);}},'MagnifyingGlassPopup':function(){var searches=[{'Form':null,'Caption':'Everything'},{'Form':'ContactSearch','Caption':'Contacts'},{'Form':'CompanySearch','Caption':'Companies'}],bRecruitmentDatabase=TriSysAPI['Operators']['stringToBoolean'](TriSysApex['Cache']['UserSettingManager']['GetValue']('RecruitmentDatabase',![]));bRecruitmentDatabase&&(searches['push']({'Form':'RequirementSearch','Caption':'Requirements/Vacancies'}),searches['push']({'Form':'PlacementSearch','Caption':'Placements'}),searches['push']({'Form':'TimesheetSearch','Caption':'Timesheets'}));var entityParameters=new TriSysApex['ModalDialogue']['Selection']['SelectionParameters']();entityParameters['Title']='Lookup/Search\x20Category',entityParameters['PopulationByObject']=searches,entityParameters['Columns']=[{'field':'Caption','title':'Category','type':'string'}],entityParameters['CallbackFunction']=function(selectedRow){if(!selectedRow)return![];var sForm=selectedRow['Form'];return!sForm?setTimeout(function(){var fnLookup=function(sLookup){if(!sLookup)return;var fnCommenceLookup=function(){$('#trisys-search')['val'](sLookup)['focus'](),ApexIndexPage['ShowSearchResultsMenu'](sLookup);};return setTimeout(fnCommenceLookup,0x64),!![];},sMessage='Lookup',options={'Label':'Lookup','SaveButtonText':'Search'};TriSysApex['ModalDialogue']['New']['Popup'](sMessage,'gi-search',fnLookup,options);},0xa):setTimeout(function(){TriSysApex['FormsManager']['OpenForm'](sForm,0x0);},0xa),!![];},TriSysApex['ModalDialogue']['Selection']['Show'](entityParameters);},'ShowSearchResultsMenu':function(sSearchText){if(sSearchText)$('#search-drop-down-results')['trigger']('click');if(sSearchText){$('#search-drop-down-results-block-waiting-spinner')['show']();var elemList=$('#search-drop-down-results-block-list');elemList['hide'](),elemList['empty']();var iHeight=$(window)['height']()-0x32;elemList['css']('max-height',iHeight),ApexIndexPage['SearchInvocation'](sSearchText);}}},Facebook={'LoadSDK':function(){try{window['fbAsyncInit']=function(){FB['init']({'appId':'990647181004942','xfbml':!![],'version':'v2.6'});function onLogin(response){response['status']=='connected'&&FB['api']('/me?fields=first_name',function(data){var welcomeBlock=document['getElementById']('fb-welcome');welcomeBlock['innerHTML']='Hello,\x20'+data['first_name']+'!';});}FB['getLoginStatus'](function(response){response['status']=='connected'?onLogin(response):FB['login'](function(response){onLogin(response);},{'scope':'user_friends,\x20email'});});};}catch(e){}}};$(document)['ready'](function(){try{App['init']();}catch(err){alert(err);};var fnLoadDynamically=function(){TriSysLoad['ApexFramework']['LoadDynamically'](function(){var fnAfterLoadBalancedWebAPIDetermination=function(){ApexIndexPage['initialiseSearch'](),ApexIndexPage['afterLoadDynamically']();};TriSysApex['LoadBalancer']['IdentifyWebAPI'](fnAfterLoadBalancedWebAPIDetermination);});};setTimeout(fnLoadDynamically,0xa);});