var ctrlSocialNetworkPanel={'Load':function(iSocialNetwork,sDivID){TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](sDivID);var sPrefix=sDivID+'-',sSocialNetwork='',sSocialIcon='';switch(iSocialNetwork){case TriSysSDK['SocialNetworks']['LinkedIn']:sSocialNetwork='LinkedIn',sSocialIcon='fa-linkedin-square';break;case TriSysSDK['SocialNetworks']['Facebook']:sSocialNetwork='Facebook',sSocialIcon='fa-facebook-square';break;case TriSysSDK['SocialNetworks']['Twitter']:sSocialNetwork='Twitter',sSocialIcon='fa-twitter';break;case TriSysSDK['SocialNetworks']['YouTube']:sSocialNetwork='YouTube',sSocialIcon='fa-youtube';break;case TriSysSDK['SocialNetworks']['Instagram']:sSocialNetwork='Instagram',sSocialIcon='fa-instagram';break;case TriSysSDK['SocialNetworks']['Pinterest']:sSocialNetwork='Pinterest',sSocialIcon='fa-pinterest';break;}$('#'+sPrefix+'SocialNetwork')['html'](sSocialNetwork);var sSocialIconClass='fa\x20'+sSocialIcon+'\x20fa-2x\x20pull-left\x20themed-color';$('#'+sPrefix+'SocialClass')['addClass'](sSocialIconClass);var fnViewButtonCallback=function(){ctrlSocialNetworkPanel['ButtonCallback'](iSocialNetwork,sSocialNetwork,'View',sDivID,sSocialIcon);},sButtonID=sPrefix+'view-profile';$('#'+sButtonID)['unbind'](),$('#'+sButtonID)['click'](fnViewButtonCallback);var fnEditButtonCallback=function(){ctrlSocialNetworkPanel['ButtonCallback'](iSocialNetwork,sSocialNetwork,'Edit',sDivID,sSocialIcon);};sButtonID=sPrefix+'edit-profile',$('#'+sButtonID)['unbind'](),$('#'+sButtonID)['click'](fnEditButtonCallback);var fnDeleteButtonCallback=function(){ctrlSocialNetworkPanel['ButtonCallback'](iSocialNetwork,sSocialNetwork,'Delete',sDivID,sSocialIcon);},sButtonID=sPrefix+'delete-profile';$('#'+sButtonID)['unbind'](),$('#'+sButtonID)['click'](fnDeleteButtonCallback);},'ButtonCallback':function(iSocialNetwork,sSocialNetwork,sOperation,sDivID,sSocialIcon){var sPrefix=sDivID+'-';switch(sOperation){case'View':var sURL=$('#'+sPrefix+'URL')['html']();if(sURL)$('#'+sPrefix+'URL')['find']('a')['trigger']('click'),document['getElementById'](sPrefix+'URL')['click']();else{var sForenames=$('#Contact_Forenames')['val'](),sSurname=$('#Contact_Surname')['val']();TriSysSDK['SocialNetworks']['OpenContactInBrowser'](sForenames,sSurname,iSocialNetwork);}break;case'Edit':ctrlSocialNetworkPanel['ModalDialogue']['Show'](iSocialNetwork,sSocialNetwork,sDivID,sSocialIcon);break;case'Delete':var fnConfirmDeletion=function(){return ctrlSocialNetworkPanel['DeleteConfirmed'](iSocialNetwork,sDivID),!![];},sMessage='Are\x20you\x20sure\x20that\x20you\x20wish\x20to\x20delete\x20the\x20'+sSocialNetwork+'\x20profile\x20link?';TriSysApex['UI']['questionYesNo'](sMessage,'Delete\x20Social\x20Network\x20Profile\x20Link','Yes',fnConfirmDeletion,'No');break;}},'DisplayProfile':function(profile,sDivID){var sPrefix=sDivID+'-';$('#'+sPrefix+'ContactName')['html'](profile['ContactName']);if(profile['ContactName'])$('#'+sPrefix+'ContactName')['show']();$('#'+sPrefix+'CompanyName')['html'](profile['CompanyName']);if(profile['CompanyName'])$('#'+sPrefix+'CompanyName')['show']();$('#'+sPrefix+'JobTitle')['html'](profile['JobTitle']);var sSummary='';if(profile['Summary'])sSummary=profile['Summary']['replace'](/\r\n/g,'<br\x20/>');$('#'+sPrefix+'Summary')['html'](sSummary);if(profile['JobTitle']||profile['Summary'])$('#'+sPrefix+'Paragraph')['show']();var sURL=profile['URL'];if(sURL){if(sURL['indexOf']('http')<0x0&&sURL['indexOf']('//')<0x0)sURL='http://'+sURL;}$('#'+sPrefix+'URL')['attr']('href',sURL),sURL=profile['URL'];if(sURL&&sURL['length']>=0x32)sURL=sURL['substring'](0x0,0x31)+'...';$('#'+sPrefix+'URL')['html'](sURL);var sPhotoImage=profile['PhotoImage'];if(sPhotoImage){var fnShowPhoto=function(sTitle,sURL,sName){$('#'+sPrefix+'PhotoImage')['attr']('src',sURL),$('#'+sPrefix+'PhotoImage')['show']();};if(sPhotoImage['indexOf']('http')>=0x0)fnShowPhoto(null,sPhotoImage,null);else TriSysSDK['Controls']['FileManager']['GetOpenFileURLFromWebServiceWithCallback']('Read\x20Social\x20Profile\x20Photo',profile['PhotoImage'],null,![],fnShowPhoto);}else $('#'+sPrefix+'PhotoImage')['hide']();},'ShowTwitterFeed':function(profile,sPrefix){if(profile['ProfileNumber']!=TriSysSDK['SocialNetworks']['Twitter'])return;if(!profile['URL'])return;var sDiv=sPrefix+'trisys-twitter-feed',sHRef=profile['URL'],a=$('#'+sDiv);a['attr']('href',sHRef),a['attr']('data-widget-id','380744941695025153'),a['html']('tweets\x20by\x20@'+'WHO?'),$('#'+sDiv)['show']();},'DeleteConfirmed':function(iSocialNetwork,sDivID){var profile={'ContactId':TriSysApex['Pages']['ContactForm']['ContactId'],'ProfileNumber':iSocialNetwork},CSocialNetworkProfileDeleteRequest={'Profile':profile},payloadObject={};payloadObject['URL']='SocialNetwork/Delete',payloadObject['OutboundDataPacket']=CSocialNetworkProfileDeleteRequest,payloadObject['Asynchronous']=!![],payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();if(data){var CSocialNetworkProfileDeleteResponse=data;if(CSocialNetworkProfileDeleteResponse['Success']){var profile={'ContactName':'','CompanyName':'','JobTitle':'','Summary':'','URL':'','PhotoImage':''};ctrlSocialNetworkPanel['DisplayProfile'](profile,sDivID);}}},TriSysApex['UI']['ShowWait'](null,'Deleting\x20Profile...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'ModalDialogue':{'ContactId':0x0,'SocialNetwork':0x0,'ProfileDivID':null,'Show':function(iSocialNetwork,sSocialNetwork,sDivID,sSocialIcon){ctrlSocialNetworkPanel['ModalDialogue']['ContactId']=TriSysApex['Pages']['ContactForm']['ContactId'],ctrlSocialNetworkPanel['ModalDialogue']['SocialNetwork']=iSocialNetwork,ctrlSocialNetworkPanel['ModalDialogue']['ProfileDivID']=sDivID;var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']='Edit\x20'+sSocialNetwork+'\x20Social\x20Network\x20Profile',parametersObject['Image']=sSocialIcon,parametersObject['Maximize']=!![],parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'ctrlEditSocialNetworkProfile.html',parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftText']='Save',parametersObject['ButtonLeftFunction']=function(){ctrlEditSocialNetworkProfile['SaveButtonClick']();},parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',TriSysApex['UI']['PopupMessage'](parametersObject);}}};