var AgencyUmbrellaLogin={'Load':function(){var sEMail=TriSysWebJobs['Security']['CachedEMail'](),sPassword=TriSysWebJobs['Security']['CachedPassword'](),sLoginAsPrefix='#ReadOnlyRecruiterUser~',fnLoginAsReadOnlyAgencyUserAlias=function(sEMail,sPassword){var TriSysCRMCredentialAccountTypeEnum_ReadOnlyRecruiterUser_AgencyUmbrella=0xb;AgencyUmbrellaLogin['SubmitToWebAPI'](sEMail,sPassword,![],TriSysCRMCredentialAccountTypeEnum_ReadOnlyRecruiterUser_AgencyUmbrella);};if(TriSysApex['Router']['processWebJobsLoginURL'](sLoginAsPrefix,fnLoginAsReadOnlyAgencyUserAlias))return;$('#txtAgencyUmbrellaEMail')['val'](sEMail),$('#txtAgencyUmbrellaPassword')['val'](sPassword);},'LoginButtonClick':function(){var sLoginEMail=$('#txtAgencyUmbrellaEMail')['val'](),sPassword=$('#txtAgencyUmbrellaPassword')['val'](),bRememberMe=TriSysSDK['CShowForm']['CheckBoxValue']('chkRememberMe');AgencyUmbrellaLogin['Submit'](sLoginEMail,sPassword,bRememberMe);},'ForgottenPassword':function(){TriSysApex['FormsManager']['OpenForm']('AgencyForgottenPassword');},'Submit':function(sLoginEMail,sPassword,bRememberMe){var sMessage;if(!TriSysApex['LoginCredentials']['validateEmail'](sLoginEMail)){sMessage=TriSysSDK['Resources']['Message']('LoginButtonClick_EMail'),TriSysApex['UI']['ShowMessage'](sMessage,TriSysWebJobs['Constants']['ApplicationName']);return;}if(!sPassword){sMessage=TriSysSDK['Resources']['Message']('LoginButtonClick_Password'),TriSysApex['UI']['ShowMessage'](sMessage,TriSysWebJobs['Constants']['ApplicationName']);return;}var TriSysCRMCredentialAccountTypeEnum_ThirdPartyAgencyUmbrella=0x8;AgencyUmbrellaLogin['SubmitToWebAPI'](sLoginEMail,sPassword,bRememberMe,TriSysCRMCredentialAccountTypeEnum_ThirdPartyAgencyUmbrella);},'SubmitToWebAPI':function(sLoginEMail,sPassword,bRememberMe,eAccountType){var CSecurityControllerAuthenticateTriSysCRMCredentials={'CRMCredentialKey':TriSysWebJobs['Constants']['AgencyUserLoginCredentialsToCRM'],'AccountType':eAccountType,'AgencyContact_EMail':sLoginEMail,'AgencyContact_Password':sPassword,'CustomFolder':TriSysWebJobs['Agency']['CustomerID']},fnPostLogin=function(){TriSysWebJobs['Security']['CacheLoginCredentialsAsCookies'](sLoginEMail,sPassword,bRememberMe);var sDataServicesKey=TriSysAPI['Session']['DataServicesKey']();TriSysApex['LoginCredentials']['ReadLoggedInUserSettings'](TriSysWebJobs['ClientOrCandidateLogin']['AfterReadingLoggedInUserSettings']);},fnIncorrectLogin=function(){var sLoginFailedMessage=TriSysSDK['Resources']['Message']('LoginButtonClick_Invalid');sLoginFailedMessage=sLoginFailedMessage['replace'](/##EMail##/g,TriSysWebJobs['Agency']['EMail']);var sMessageTitle=TriSysWebJobs['Constants']['ApplicationName']+'\x20Login';TriSysApex['UI']['ShowMessage'](sLoginFailedMessage,sMessageTitle);},bApexLoginCacheing=![],additionalInstructions={'SuppressPopups':!![],'IncorrectCredentialsCallback':fnIncorrectLogin};TriSysApex['LoginCredentials']['ValidateViaWebService'](CSecurityControllerAuthenticateTriSysCRMCredentials,bApexLoginCacheing,fnPostLogin,null,additionalInstructions);}};$(document)['ready'](function(){AgencyUmbrellaLogin['Load']();});