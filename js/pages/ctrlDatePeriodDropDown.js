var ctrlDatePeriodDropDown={'Load':function(sParentID,dtStart,dtEnd,fnCallback){var sRoot='ctrlDatePeriodDropDown-Root';TriSysSDK['Controls']['General']['RenameElementIdsWithParentIdPrefixOrSuffix'](sRoot,sParentID,!![]);var sPrefix=sParentID+'-';$('#'+sRoot)['attr']('id',sPrefix+sRoot),sRoot=sPrefix+sRoot,$('#'+sPrefix+'ctrlDatePeriodDropDown-Today')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'Today',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-Yesterday')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'Yesterday',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-ThisWeek')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'This\x20Week',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-LastWeek')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'Last\x20Week',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-ThisMonth')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'This\x20Month',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-LastMonth')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'Last\x20Month',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-Last6Months')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'Last\x206\x20Months',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-Last12Months')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'Last\x2012\x20Months',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-ThisQuarter')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'This\x20Quarter',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-LastQuarter')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'Last\x20Quarter',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-ThisYear')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'This\x20Year',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-LastYear')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'Last\x20Year',fnCallback);}),$('#'+sPrefix+'ctrlDatePeriodDropDown-Custom')['click'](function(e){e['preventDefault'](),ctrlDatePeriodDropDown['MenuHandler'](sPrefix,'Custom',fnCallback);});var dtNow=new Date(),sPeriod=dtStart&&dtEnd?'Custom':'This\x20Month';ctrlDatePeriodDropDown['MenuHandler'](sPrefix,sPeriod,fnCallback,dtStart,dtEnd);},'ShowDatesInButton':function(sPrefix,sType,dtStart,dtEnd){var iStartYear=moment(dtStart)['year'](),iStartMonth=moment(dtStart)['month'](),iStartDay=moment(dtStart)['date'](),iEndYear=moment(dtEnd)['year'](),iEndMonth=moment(dtEnd)['month'](),iEndDay=moment(dtEnd)['date'](),bPhone=TriSysApex['Device']['isPhone'](),sDateFormat=bPhone?'DD/MM/YYYY':'dddd\x20DD\x20MMMM\x20YYYY',sRange=moment(dtStart)['format'](sDateFormat)+(bPhone?'\x20-\x20':'\x20to\x20')+moment(dtEnd)['format'](sDateFormat);if(iStartYear==iEndYear&&iStartMonth==iEndMonth&&iStartDay==iEndDay)sRange=moment(dtStart)['format'](sDateFormat);var sDateRange=bPhone?'<span\x20style=\x22font-size:\x20x-small;\x22>'+sRange+'</span>':sRange;$('#'+sPrefix+'ctrlDatePeriodDropDown-MenuCaption')['html']('<b>'+sType+'</b>\x20&nbsp;\x20'+sDateRange);},'MenuHandler':function(sPrefix,sItem,fnCallback,dtStart,dtEnd){var fnSet=function(dtCustomStart,dtCustomEnd){ctrlDatePeriodDropDown['ShowDatesInButton'](sPrefix,sItem,dtCustomStart,dtCustomEnd),$('#'+sPrefix+'ctrlDatePeriodDropDown-CustomStartDate')['html'](dtCustomStart),$('#'+sPrefix+'ctrlDatePeriodDropDown-CustomEndDate')['html'](dtCustomEnd),fnCallback(dtCustomStart,dtCustomEnd);};if(!dtStart&&!dtEnd){var dtNow=new Date(),iYear=moment(dtNow)['year'](),iMonth=moment(dtNow)['month'](),iDay=moment(dtNow)['date'](),dtStartOfToday=new Date(iYear,iMonth,iDay,0x0,0x0,0x0,0x0),dtEndOfToday=new Date(iYear,iMonth,iDay,0x17,0x3b,0x3b,0x0);switch(sItem){case'Today':dtStart=dtStartOfToday,dtEnd=dtEndOfToday;break;case'Yesterday':dtStart=new Date(moment(dtStartOfToday)['add'](-0x1,'days')),dtEnd=new Date(moment(dtEndOfToday)['add'](-0x1,'days'));break;case'This\x20Week':dtStart=dtStartOfToday;while(moment(dtStart)['day']()>0x0)dtStart=new Date(moment(dtStart)['add'](-0x1,'days'));dtStart=new Date(moment(dtStart)['add'](0x1,'days')),dtEnd=new Date(moment(dtStart)['add'](0x6,'days')),dtEnd=new Date(moment(dtEnd)['year'](),moment(dtEnd)['month'](),moment(dtEnd)['date'](),0x17,0x3b,0x3b,0x0);break;case'Last\x20Week':dtStart=moment(dtStartOfToday)['add'](-0x7,'days');while(moment(dtStart)['day']()>0x0)dtStart=new Date(moment(dtStart)['add'](-0x1,'days'));dtStart=new Date(moment(dtStart)['add'](0x1,'days')),dtEnd=new Date(moment(dtStart)['add'](0x6,'days')),dtEnd=new Date(moment(dtEnd)['year'](),moment(dtEnd)['month'](),moment(dtEnd)['date'](),0x17,0x3b,0x3b,0x0);break;case'This\x20Month':dtStart=new Date(iYear,iMonth,0x1,0x0,0x0,0x0,0x0),dtEnd=dtEndOfToday;while(moment(dtEnd)['month']()==iMonth)dtEnd=new Date(moment(dtEnd)['add'](0x1,'days'));dtEnd=new Date(moment(dtEnd)['add'](-0x1,'days'));break;case'Last\x20Month':dtStart=new Date(iYear,iMonth,0x1,0x0,0x0,0x0,0x0),dtStart=new Date(moment(dtStart)['add'](-0x1,'months')),iMonth=moment(dtStart)['month'](),dtEnd=new Date(moment(dtEndOfToday)['add'](-0x1,'months'));;while(moment(dtEnd)['month']()==iMonth)dtEnd=new Date(moment(dtEnd)['add'](0x1,'days'));dtEnd=new Date(moment(dtEnd)['add'](-0x1,'days'));break;case'This\x20Quarter':dtStart=new Date(iYear,iMonth,0x1,0x0,0x0,0x0,0x0);while(!![]){iMonth=moment(dtStart)['month']();if(iMonth==0x0||iMonth==0x3||iMonth==0x6||iMonth==0x9)break;dtStart=new Date(moment(dtStart)['add'](-0x1,'months'));}var dtNextQuarter=new Date(moment(dtStart)['add'](0x3,'months')),dtEnd=new Date(moment(dtNextQuarter)['add'](-0x1,'days'));dtEnd=new Date(moment(dtEnd)['year'](),moment(dtEnd)['month'](),moment(dtEnd)['date'](),0x17,0x3b,0x3b,0x0);break;case'Last\x20Quarter':dtStart=new Date(iYear,iMonth,0x1,0x0,0x0,0x0,0x0),dtStart=new Date(moment(dtStart)['add'](-0x3,'months'));while(!![]){iMonth=moment(dtStart)['month']();if(iMonth==0x0||iMonth==0x3||iMonth==0x6||iMonth==0x9)break;dtStart=new Date(moment(dtStart)['add'](-0x1,'months'));}var dtNextQuarter=new Date(moment(dtStart)['add'](0x3,'months')),dtEnd=new Date(moment(dtNextQuarter)['add'](-0x1,'days'));dtEnd=new Date(moment(dtEnd)['year'](),moment(dtEnd)['month'](),moment(dtEnd)['date'](),0x17,0x3b,0x3b,0x0);break;case'Last\x206\x20Months':dtStart=new Date(moment(dtStartOfToday)['add'](-0x6,'months')),dtEnd=new Date(moment(dtEndOfToday)['add'](-0x1,'days'));break;case'Last\x2012\x20Months':dtStart=new Date(moment(dtStartOfToday)['add'](-0x1,'years')),dtEnd=new Date(moment(dtEndOfToday)['add'](-0x1,'days'));break;case'This\x20Year':dtStart=new Date(iYear,0x0,0x1,0x0,0x0,0x0,0x0),dtEnd=new Date(iYear,0xb,0x1f,0x17,0x3b,0x3b,0x0);break;case'Last\x20Year':dtStart=new Date(iYear-0x1,0x0,0x1,0x0,0x0,0x0,0x0),dtEnd=new Date(iYear-0x1,0xb,0x1f,0x17,0x3b,0x3b,0x0);break;case'Custom':ctrlDatePeriodDropDown['PopUpCustomDateModal'](sPrefix,fnSet);return;}}if(dtStart||dtEnd)fnSet(dtStart,dtEnd);},'PopUpCustomDateModal':function(sPrefix,fnCallback){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']='Custom\x20Dates',parametersObject['Image']='gi-calendar',parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'ctrlCustomStartEndDates.html',parametersObject['OnLoadCallback']=function(){var dtCustomStart=$('#'+sPrefix+'ctrlDatePeriodDropDown-CustomStartDate')['html'](),dtCustomEnd=$('#'+sPrefix+'ctrlDatePeriodDropDown-CustomEndDate')['html']();ctrlCustomStartEndDates['Load'](dtCustomStart,dtCustomEnd);},parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonLeftText']='Set',parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftFunction']=function(){var fnOnSet=function(dtCustomStart,dtCustomEnd){TriSysApex['UI']['CloseModalPopup'](),fnCallback(dtCustomStart,dtCustomEnd);};ctrlCustomStartEndDates['SetButtonClick'](fnOnSet);},TriSysApex['UI']['PopupMessage'](parametersObject);}};