var ctrlFieldDescriptionSkillOrder={'SkillCategory':null,'SkillList':null,'SkillGridID':'ctrlFieldDescriptionSkillOrder-Skills','Load':function(sSkillCategory,lstSkill){ctrlFieldDescriptionSkillOrder['SkillCategory']=sSkillCategory,ctrlFieldDescriptionSkillOrder['SkillList']=lstSkill,TriSysSDK['CShowForm']['HTMLFieldsCodeInjection'](),TriSysSDK['FormMenus']['DrawGridMenu']('ctrlFieldDescriptionSkillOrder-GridMenu',ctrlFieldDescriptionSkillOrder['SkillGridID']),ctrlFieldDescriptionSkillOrder['LoadSkillsGrid'](sSkillCategory,lstSkill),setTimeout(TriSysProUI['kendoUI_Overrides'],0xc8);},'RefreshSkillsGrid':function(){ctrlFieldDescriptionSkillOrder['LoadSkillsGrid'](ctrlFieldDescriptionSkillOrder['SkillCategory'],ctrlFieldDescriptionSkillOrder['SkillList']);},'LoadSkillsGrid':function(sSkillCategory,lstSkill){var columns=[{'field':'SkillId','title':'SkillId','type':'number','width':0x46,'hidden':!![]},{'field':'Ordering','title':'Order','type':'number'},{'field':'Skill','title':'Skill/Lookup','type':'string'},{'field':'Description','title':'Description','type':'string'}];TriSysSDK['Grid']['VirtualMode']({'Div':ctrlFieldDescriptionSkillOrder['SkillGridID'],'ID':ctrlFieldDescriptionSkillOrder['SkillGridID'],'Title':'Field\x20Lookups','RecordsPerPage':TriSysApex['UserOptions']['RecordsPerPage'](),'SQL':null,'PopulationByObject':lstSkill,'Columns':columns,'MultiRowSelect':!![],'Grouping':![],'ColumnFilters':!![],'KeyColumnName':'SkillId'});return;},'SelectedRows':function(bShowWarningIfNonSelected){var selectedRows=TriSysSDK['Grid']['GetCheckedRows'](ctrlFieldDescriptionSkillOrder['SkillGridID']);if(!selectedRows||selectedRows['length']==0x0){if(bShowWarningIfNonSelected)TriSysApex['UI']['ShowMessage']('Please\x20select\x20one\x20or\x20more\x20skill\x20lookups.');}return selectedRows;},'MoveFieldUp':function(){ctrlFieldDescriptionSkillOrder['MoveSkill'](!![]);},'MoveFieldDown':function(){ctrlFieldDescriptionSkillOrder['MoveSkill'](![]);},'MoveSkill':function(bUp){var selectedRows=ctrlFieldDescriptionSkillOrder['SelectedRows'](!![]);if(!selectedRows||selectedRows['length']==0x0)return;var fnArrayMove=function(arr,old_index,new_index){while(old_index<0x0){old_index+=arr['length'];}while(new_index<0x0){new_index+=arr['length'];}if(new_index>=arr['length']){k=new_index-arr['length'];while(k--+0x1){arr['push'](undefined);}}return arr['splice'](new_index,0x0,arr['splice'](old_index,0x1)[0x0]),arr;},lstMoveInstructions=[];for(var i=ctrlFieldDescriptionSkillOrder['SkillList']['length']-0x1;i>=0x0;i--){var skill=ctrlFieldDescriptionSkillOrder['SkillList'][i];selectedRows['forEach'](function(row){row['SkillId']==skill['SkillId']&&(bUp?i>0x0&&lstMoveInstructions['push']({'from':i,'to':i-0x1}):i<ctrlFieldDescriptionSkillOrder['SkillList']['length']-0x1&&lstMoveInstructions['push']({'from':i,'to':i+0x1}));});}if(bUp)for(var i=lstMoveInstructions['length']-0x1;i>=0x0;i--){var instruction=lstMoveInstructions[i];ctrlFieldDescriptionSkillOrder['SkillList']=fnArrayMove(ctrlFieldDescriptionSkillOrder['SkillList'],instruction['from'],instruction['to']);}else for(var i=0x0;i<lstMoveInstructions['length'];i++){var instruction=lstMoveInstructions[i];ctrlFieldDescriptionSkillOrder['SkillList']=fnArrayMove(ctrlFieldDescriptionSkillOrder['SkillList'],instruction['from'],instruction['to']);}var iOrder=0x0;ctrlFieldDescriptionSkillOrder['SkillList']['forEach'](function(lookup){iOrder+=0x1,lookup['Ordering']=iOrder;}),ctrlFieldDescriptionSkillOrder['RefreshSkillsGrid']();},'Save':function(sEntityName,fnCallback){return ctrlFieldDescriptionSkillOrder['SendToWebAPI'](fnCallback),![];},'SendToWebAPI':function(fnCallback){var payloadObject={};payloadObject['URL']='SkillCategory/ReOrderFieldLookups',payloadObject['OutboundDataPacket']={'SkillCategory':ctrlFieldDescriptionSkillOrder['SkillCategory'],'Lookups':ctrlFieldDescriptionSkillOrder['SkillList']},payloadObject['InboundDataFunction']=function(CWriteSkillListOrder){TriSysApex['UI']['HideWait']();if(CWriteSkillListOrder){if(CWriteSkillListOrder['Success']){TriSysApex['UI']['CloseModalPopup']();if(fnCallback)fnCallback(ctrlFieldDescriptionSkillOrder['SkillList']);}else TriSysApex['UI']['ShowMessage'](CWriteSkillListOrder['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlFieldDescriptionSkillOrder.SendToWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Saving\x20Field\x20Lookups...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};