var Training={'Load':function(){TriSysSDK['EntityFormTabs']['AddClickEventHandlers']('training-courses-tab-nav-horizontal',!![]),TriSysSDK['EntityFormTabs']['HighlightTabButton']('training-courses-form-tab-recruiter');var bLoggedIn=TriSysApex['LoginCredentials']['areUserCredentialsValid']();if(bLoggedIn){var sFullName=$('#lblLoggedInUserFullName2')['text'](),sCompany=$('#lblLoggedInUserCompanyName')['text'](),sImage=$('#imgLoggedInUserImage2')['attr']('src');$('#training-user-full-name')['text'](sFullName),$('#training-user-company-name')['text'](sCompany),$('#training-user-photo')['attr']('src',sImage);}else $('#training-status-block-user')['hide']();Training['CourseSummaryCalculations'](),Training['UpdateCourseLessonsRead'](bLoggedIn),Training['ProcessStartCourseFromURL']();var sBorderColour=TriSysProUI['GroupBorderColour']();$('.widget')['css']('border','1px\x20solid\x20'+sBorderColour);},'CourseMode':function(){var bCourseMode=TriSysApex['Constants']['TriSysHostedCRM']&&!TriSysApex['Constants']['WhiteLabelled'];return bCourseMode;},'ProcessStartCourseFromURL':function(){var sURL=window['location']['href']['toLowerCase'](),sCourse=TriSysApex['URL']['Parser'](sURL)['getParam']('course'),sLesson=TriSysApex['URL']['Parser'](sURL)['getParam']('lesson');sCourse&&$('#training-courses-form-tab-'+sCourse+'\x20a')['trigger']('click');if(sLesson){var sHyperlinkElem=$('#td-training-'+sLesson+'\x20a'),fnLoadLesson=function(){sHyperlinkElem['trigger']('click');},fnPlayVideo=function(){return setTimeout(fnLoadLesson,0x64),!![];},sLessonText=sHyperlinkElem['text']();TriSysApex['UI']['questionYesNo']('Play\x20training\x20video?',sLessonText,'Yes',fnPlayVideo,'No',function(){return!![];});}},'TabClickEvent':function(sTabID){var parts=sTabID['split']('training-courses-panel-'),sTab=parts[0x1],sDiv='training-courses-'+sTab+'-rightside',elem=$('#'+sDiv);if(sTab=='youtube'){Training['StartYouTubeChannel']();return;}var status=$('#training-status-block')['detach'](),appHelp=$('#training-application-help-block')['detach'](),videoHelp=$('#training-video-help-block')['detach']();elem['append'](status),elem['append'](appHelp),elem['append'](videoHelp);},'StartYouTubeChannel':function(){var iframe=$('#training-iframe-youtube'),src=iframe['attr']('src');!src&&iframe['attr']('src','https://www.youtube.com/embed/videoseries?list=PLP0roTdrJBsQoN-V-9_g0aVldhCSd_FZ7&autoplay=1&rel=0&modestbranding=1');},'StartLesson':function(sVideo,sCaption,sLessonID){if(sVideo&&sCaption)TriSysApex['TourGuide']['WatchVideo'](null,sVideo,sCaption),Training['MarkLessonCompleted'](sLessonID,!![]),Training['Shared']['Video']=sVideo,Training['Shared']['Caption']=sCaption,Training['Shared']['LessonID']=sLessonID;else{var sMessage='This\x20training\x20course\x20lesson\x20is\x20not\x20available\x20at\x20this\x20time.'+'<br\x20/><br\x20/>'+'Please\x20check\x20back\x20in\x20the\x20next\x20few\x20weeks\x20when\x20we\x20expect\x20to\x20have\x20completed\x20the\x20production\x20of\x20the\x20training\x20courses.';TriSysApex['UI']['ShowMessage'](sMessage,TriSysApex['Copyright']['ShortProductName']+'\x20Training\x20Courses');}},'Shared':{'Video':null,'Caption':null,'LessonID':null,'ShareVideoURL':function(sTitle){var sLesson=Training['Shared']['LessonID'];if(!sLesson){TriSysApex['UI']['ShowMessage']('Only\x20videos\x20launched\x20from\x20Help-->Training\x20Courses\x20can\x20be\x20shared.');return;}var lstPart=sLesson['split']('-'),sCourse=lstPart[0x1],sLessonID=sCourse;for(var i=0x2;i<lstPart['length'];i++){if(sLessonID['length']>0x0)sLessonID+='-';sLessonID+=lstPart[i];}var sURL=location['href']+'&course='+sCourse+'&lesson='+sLessonID;navigator['clipboard']['writeText'](sURL);var sMessage='The\x20following\x20URL\x20for\x20the\x20'+sTitle+'\x20has\x20now\x20been\x20copied\x20to\x20the\x20clipboard\x20and\x20can\x20be\x20pasted\x20into\x20an\x20e-mail\x20or\x20message:'+'<br><br>'+sURL,fn=function(){TriSysApex['UI']['ShowMessage'](sMessage,'Share\x20Video');};setTimeout(fn,0x64);}},'MarkLessonCompleted':function(sLessonID,bPersist){if(!Training['CourseMode']())return;var sTD='td-'+sLessonID,sHTML=$('#'+sTD)['html']();if(!sHTML)return;var bCompletedShowVisually=sHTML['indexOf']('</del>')>0x0;if(!bCompletedShowVisually){sHTML='<del>'+sHTML+'</del>',$('#'+sTD)['html'](sHTML);var a=$('#'+sLessonID);a['removeClass']('btn\x20btn-xs\x20btn-primary')['addClass']('btn\x20btn-xs\x20btn-success'),a['html']('<i\x20class=\x22fa\x20fa-check\x22></i>'),Training['CourseSummaryCalculations'](sLessonID);}bPersist&&Training['Persistence']['WriteCourseLessonCompleted'](sLessonID);},'CourseSummaryCalculations':function(sLessonID){var fnShowCourseSummary=function(course){var sSummary=course['Completed']+'\x20of\x20'+course['Count']+'\x20completed';$('#'+course['SummaryTag'])['html'](sSummary);var sClass='progress-bar\x20progress-bar-',sColour='success',iPercentage=Math['round'](course['Completed']/course['Count']*0x64),sPercentageCompleted=iPercentage+'%\x20Completed',progressBar=$('#'+course['ProgressBar']);if(iPercentage==0x0)sColour='danger',sPercentageCompleted='0%\x20Completed.\x20Please\x20start\x20the\x20course.',iPercentage=0x64;else{if(iPercentage>=0x4b)sColour='success';else{if(iPercentage>=0x19)sColour='warning';else sColour='danger';}}progressBar['attr']('aria-valuenow',iPercentage),progressBar['css']('width',iPercentage+'%'),progressBar['html'](sPercentageCompleted),progressBar['removeClass']()['addClass'](sClass+sColour),$('#'+course['LessonCountTag'])['html'](course['Count']),$('#'+course['LessonTimeTag'])['html'](course['Length']);};if(!sLessonID){var courses=Training['Courses']['Summary'];for(var i=0x0;i<courses['length'];i++){var course=courses[i];fnShowCourseSummary(course);}return;}var bRecruiterCourse=sLessonID['indexOf']('training-recruiter')==0x0,bAdministratorCourse=sLessonID['indexOf']('training-administrator')==0x0,bDeveloperCourse=sLessonID['indexOf']('training-developer')==0x0,sTypeOfCourse=bRecruiterCourse?'Recruiter':bAdministratorCourse?'Administrator':'Developer',course=Training['Courses']['CourseFromType'](sTypeOfCourse);course&&(course['Completed']+=0x1,fnShowCourseSummary(course));},'Information':{'Show':function(sTitle,sHTMLFile){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=sTitle,parametersObject['Image']='fa-graduation-cap',parametersObject['Maximize']=!![],parametersObject['CloseTopRightButton']=!![],parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+sHTMLFile,parametersObject['ButtonRightText']='OK',parametersObject['ButtonRightVisible']=!![],TriSysApex['UI']['PopupMessage'](parametersObject);},'Recruiter':function(){Training['Information']['Show']('Recruiter\x20Training\x20Course','training/ctrlRecruiterCourse.html');},'Administrator':function(){Training['Information']['Show']('Administrator\x20Training\x20Course','training/ctrlAdministratorCourse.html');},'Developer':function(){Training['Information']['Show']('Developer\x20Training\x20Course','training/ctrlDeveloperCourse.html');}},'UpdateCourseLessonsRead':function(bLoggedIn){Training['Persistence']['LoggedIn']=bLoggedIn;var fnProcessCourseLessons=function(courseLessonsCompleted){if(courseLessonsCompleted)for(var i=0x0;i<courseLessonsCompleted['length'];i++){var sLessonId=courseLessonsCompleted[i];Training['MarkLessonCompleted'](sLessonId);}};Training['Persistence']['ReadCourseLessonsCompleted'](fnProcessCourseLessons);},'Persistence':{'LoggedIn':![],'WriteCourseLessonCompleted':function(sCourseID){if(!Training['Persistence']['LoggedIn']){var coursesCompleted=Training['Persistence']['GetCookie']();if(!coursesCompleted)coursesCompleted=[];coursesCompleted['push'](sCourseID),Training['Persistence']['PutCookie'](coursesCompleted);}else Training['Persistence']['PushToWebService'](sCourseID);},'ReadCourseLessonsCompleted':function(fnProcessCourseLessons){if(Training['Persistence']['LoggedIn'])Training['Persistence']['PullFromWebService'](fnProcessCourseLessons);else{var courseLessons=Training['Persistence']['GetCookie']();fnProcessCourseLessons(courseLessons);}},'PullFromWebService':function(fnProcessCourses){var payloadObject={};payloadObject['URL']='TrainingCourse/ReadCompletedCourses',payloadObject['OutboundDataPacket']=null,payloadObject['InboundDataFunction']=function(CTrainingCoursesCompletedResponse){CTrainingCoursesCompletedResponse&&(CTrainingCoursesCompletedResponse['Success']&&fnProcessCourses(CTrainingCoursesCompletedResponse['Courses']));},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('Training.Persistence.PullFromWebService:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'PushToWebService':function(sCourseName){var payloadObject={};payloadObject['URL']='TrainingCourse/WriteCompletedCourse',payloadObject['OutboundDataPacket']={'CourseName':sCourseName},payloadObject['InboundDataFunction']=function(CTrainingCourseCompletedResponse){if(CTrainingCourseCompletedResponse){if(CTrainingCourseCompletedResponse['Success']){}}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('Training.Persistence.PushToWebService:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'CookiePrefix':'Training-Courses-Completed','GetCookie':function(){var sCoursesTaken=TriSysAPI['Cookies']['getCookie'](Training['Persistence']['CookiePrefix']);if(sCoursesTaken){var coursesTaken=JSON['parse'](sCoursesTaken);return coursesTaken;}else return null;},'PutCookie':function(coursesTaken){var sCoursesTaken=JSON['stringify'](coursesTaken);TriSysAPI['Cookies']['setCookie'](Training['Persistence']['CookiePrefix'],sCoursesTaken);}},'Courses':{'Summary':[{'Type':'Recruiter','Completed':0x0,'Count':0x22,'Length':'1\x20hour,\x2038\x20minutes','SummaryTag':'training-recruiter-count-summary','ProgressBar':'training-recruiter-progress-bar','LessonCountTag':'training-recruiter-lesson-count','LessonTimeTag':'training-recruiter-lesson-time'},{'Type':'Administrator','Completed':0x0,'Count':0x8,'Length':'18\x20minutes','SummaryTag':'training-administrator-count-summary','ProgressBar':'training-administrator-progress-bar','LessonCountTag':'training-administrator-lesson-count','LessonTimeTag':'training-administrator-lesson-time'},{'Type':'Developer','Completed':0x0,'Count':0x2,'Length':'4\x20minutes','SummaryTag':'training-developer-count-summary','ProgressBar':'training-developer-progress-bar','LessonCountTag':'training-developer-lesson-count','LessonTimeTag':'training-developer-lesson-time'}],'CourseFromType':function(sType){for(var i=0x0;i<Training['Courses']['Summary']['length'];i++){var course=Training['Courses']['Summary'][i];if(course['Type']==sType)return course;}}}};$(document)['ready'](function(){Training['Load']();});