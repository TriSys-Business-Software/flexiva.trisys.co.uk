var ctrlNewCompanyContact={'Load':function(){debugger;if(!TriSysSDK['CShowForm']['JobTitlesCached']())$('#tr-newCompanyContact-JobTitle')['show'](),$('#newCompanyContact-JobTitle')['keyup'](function(e){if(e['keyCode']==0xd)ctrlNewCompanyContact['JobTitleLookup']();});else TriSysSDK['CShowForm']['jobTitleCombo']('newCompanyContact-JobTitle',null);TriSysSDK['CShowForm']['contactTitleFieldEditableProperties']('newCompanyContact-Title','(None)'),TriSysSDK['CShowForm']['PopulateGenderCombo']('newCompanyContact-Gender');if(TriSysApex['ModalDialogue']['NewCompanyContact']['Options']['CompanyId']>0x0){var iWidth=$('#newCompanyContact-WorkEMail')['width']()+0x8;$('#newCompanyContact-Address')['width'](iWidth),TriSysApex['ModalDialogue']['CompanyAddresses']['PopulateCombo'](TriSysApex['ModalDialogue']['NewCompanyContact']['Options']['CompanyId'],'newCompanyContact-Address');}if(TriSysApex['ModalDialogue']['NewCompanyContact']['Options']['BrowserExtension']){const block=$('#newCompanyContact-block');block['css']('padding','0px'),block['css']('border','0px'),block['css']('margin-left','-20px'),block['css']('margin-right','-20px'),$('.td-label')['css']('width','100px'),$('#newCompanyContact-WorkAddress-row')['hide'](),ctrlNewCompanyContact['ContactTypeLookup']();if(TriSysApex['ModalDialogue']['NewCompanyContact']['Options']['Contact']){const contact=TriSysApex['ModalDialogue']['NewCompanyContact']['Options']['Contact'],nameParts=TriSysSDK['Miscellaneous']['ParseFullContactName'](contact['FullName']);$('#newCompanyContact-Forenames')['val'](nameParts['Forenames']),$('#newCompanyContact-Surname')['val'](nameParts['Surname']),$('#newCompanyContact-JobTitle')['val'](contact['JobTitle']);contact['PhotoURL']&&($('#newCompanyContact-Photo-row')['show'](),$('#newCompanyContact-PhotoURL')['attr']('src',contact['PhotoURL']));$('#newCompanyContact-Company')['val'](contact['CompanyName']),ctrlNewCompanyContact['Data']['LinkedIn']=contact['LinkedIn'];if(contact['CompanyName']){var sContactTypeField='newCompanyContact-Type';TriSysSDK['CShowForm']['SetTextInCombo'](sContactTypeField,'Client');const elemCompanyRow=$('#newCompanyContact-Company-row');elemCompanyRow['show']();}}}},'JobTitleLookup':function(){var sJobTitleField='newCompanyContact-JobTitle',sJobTitle=TriSysSDK['CShowForm']['GetJobTitleFromField'](sJobTitleField);TriSysSDK['JobTitle']['Lookup'](sJobTitle,sJobTitleField);},'ContactTypeLookup':function(){$('#newCompanyContact-Type-row')['show']();var sContactTypeField='newCompanyContact-Type',fnChange=function(lEntityTypeId,sContactType,sFieldID){debugger;const elemCompanyRow=$('#newCompanyContact-Company-row'),elemCompanyAddressRow=$('#newCompanyContact-CompanyAddress-row');switch(sContactType){case'Client':case'Customer':case'ClientCandidate':elemCompanyRow['show'](),elemCompanyAddressRow['show']();break;default:elemCompanyRow['hide'](),elemCompanyAddressRow['hide']();}};TriSysSDK['ContactTypes']['PopulateCombo'](sContactTypeField,fnChange);},'CompanyLookup':function(){const elemCompany=$('#newCompanyContact-Company');var fnSelectedCompany=function(lCompanyId,sCompanyName){elemCompany['val'](sCompanyName);var fnSelectAddress=function(selectedRow){if(!selectedRow)return;var lAddressId=selectedRow['AddressId'],lCompanyId=selectedRow['CompanyId'],sAddress=selectedRow['Address'];return $('#newCompanyContact-CompanyAddress')['text'](sAddress),ctrlNewCompanyContact['Data']['CompanyId']=lCompanyId,ctrlNewCompanyContact['Data']['AddressId']=lAddressId,ctrlNewCompanyContact['Data']['ContactType']=TriSysSDK['CShowForm']['GetTextFromCombo']('newCompanyContact-Type'),ctrlNewCompanyContact['Data']['CompanyName']=$('#newCompanyContact-Company')['val'](),!![];};return TriSysApex['ModalDialogue']['CompanyAddresses']['SelectForSmallFormFactorDevices'](lCompanyId,sCompanyName,fnSelectAddress),!![];};debugger;var sCompany=elemCompany['val']();const options={'AllowNoContact':!![],'Callback':fnSelectedCompany};TriSysApex['Pages']['ContactForm']['SelectCompany'](options);},'Data':{'CompanyId':0x0,'AddressId':0x0,'ContactType':'','CompanyName':'','LinkedIn':''}};$(document)['ready'](function(){ctrlNewCompanyContact['Load']();});