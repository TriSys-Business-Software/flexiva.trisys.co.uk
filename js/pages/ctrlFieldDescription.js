var ctrlFieldDescription={'TableNameID':'ctrlFieldDescription-TableName','TableFieldNameID':'ctrlFieldDescription-TableFieldName','DescriptionID':'ctrlFieldDescription-Description','FieldTypeID':'ctrlFieldDescription-FieldType','SkillComboCategoryID':'ctrlFieldDescription-SkillComboCategory','DefaultValueID':'ctrlFieldDescription-DefaultValue','MinValueID':'ctrlFieldDescription-MinValue','MaxValueID':'ctrlFieldDescription-MaxValue','LookupID':'ctrlFieldDescription-Lookup','SortAlphabeticallyID':'ctrlFieldDescription-SortAlphabetically','LengthID':'ctrlFieldDescription-FieldLength','LookupGridID':'ctrlFieldDescription-LookupGrid','FieldLabelID':'ctrlFieldDescription-FieldLabel','MultiLineID':'ctrlFieldDescription-MultiLine','LookupOrderButton':'ctrlFieldDescription-lookupSortOrderButton','LookupBlockID':'ctrlFieldDescription-Lookup-Block','_FieldDescription':null,'_FieldLookups':null,'Load':function(lFieldId,sEntityName){TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']();var bNew=lFieldId==0x0,sTableName=sEntityName+(bNew?'ConfigFields':'');$('#'+ctrlFieldDescription['TableNameID'])['html'](sTableName);var fieldTypeData=[],fieldTypes=TriSysApex['Cache']['FieldTypes']();fieldTypes['sort'](function(a,b){return a['Description']['localeCompare'](b['Description']);});for(var i=0x0;i<fieldTypes['length'];i++){var fieldType=fieldTypes[i],bAddToCombo=!![];if(bNew){var ignoreList=['ActivityTypeCombo','Address','Application','ChartFX','ChartFXASync','Currency','Currency\x20Link','DocumentEditor','DocumentPreview','EntitySearchCriteria','Folder\x20Reference','FormUserControl','Graph','Grid','GridAlpha','GridGamma','Label','List','ListView','Panel','PanelAlpha','ProgressBar','RichTextBox','Schedule','SkillTree','TreeView','Video','WebPage','WordProcessor'];bAddToCombo=ignoreList['indexOf'](fieldType['Description'])<0x0;}if(bAddToCombo)fieldTypeData['push']({'text':fieldType['Description'],'value':fieldType['FieldTypeId']});}var comboSkillCategories=[],addCategories=null,fieldDescription=null,bEntityTypeField=![];lFieldId>0x0&&(fieldDescription=ctrlFieldDescription['FieldDescriptionFromCacheByFieldId'](lFieldId),fieldDescription&&(fieldDescription['TableFieldName']=='Type'&&(addCategories=[sEntityName+'\x20Type'],$('#'+ctrlFieldDescription['SkillComboCategoryID'])['attr']('readonly','readonly'),bEntityTypeField=!![])));if(fieldDescription&&fieldDescription['FieldTypeId']==TriSysSDK['Controls']['FieldTypes']['SkillCombo']){if(!addCategories)addCategories=[];addCategories['push'](fieldDescription['SkillComboCategory']);}var comboCategories=TriSysApex['Cache']['SystemSettingManager']['SkillComboCategories'](addCategories);comboCategories&&$['each'](comboCategories,function(index,skillCategory){var sCategory=skillCategory['Category']['trim']();comboSkillCategories['push']({'text':sCategory,'value':sCategory});});TriSysSDK['CShowForm']['populateComboFromDataSource'](ctrlFieldDescription['FieldTypeID'],fieldTypeData,0x0,ctrlFieldDescription['SelectFieldTypeEvent']),TriSysSDK['CShowForm']['SetTextInCombo'](ctrlFieldDescription['FieldTypeID'],'Text'),TriSysSDK['CShowForm']['populateComboFromDataSource'](ctrlFieldDescription['SkillComboCategoryID'],comboSkillCategories,0x0,ctrlFieldDescription['SelectSkillComboCategoryEvent']),fieldDescription={'MinValue':0x0,'MaxValue':0x400,'SpinIncrement':0x1,'Value':0x32},TriSysSDK['Controls']['NumericSpinner']['Initialise'](ctrlFieldDescription['LengthID'],fieldDescription),TriSysSDK['Controls']['NumericSpinner']['DecimalPlaces'](ctrlFieldDescription['LengthID'],0x0),TriSysSDK['Controls']['NumericSpinner']['SetValue'](ctrlFieldDescription['LengthID'],0x32);if(bNew){ctrlFieldDescription['_FieldDescription']={'FieldId':0x0,'TableName':sTableName},ctrlFieldDescription['DisplayLookupSkills'](null),$('#'+ctrlFieldDescription['LookupID'])['change'](function(){ctrlFieldDescription['LookupCheckBoxEvent'](bNew);});var sJqueryID='#'+ctrlFieldDescription['TableFieldNameID'],elemTableFieldName=$(sJqueryID);elemTableFieldName['focus'](),elemTableFieldName['keypress'](function(e){if(e['which']===0x20)return![];}),$(document)['on']('paste',sJqueryID,function(e){window['setTimeout'](function(){var withoutSpaces=elemTableFieldName['val']();withoutSpaces=withoutSpaces['replace'](/\s+/g,''),elemTableFieldName['val'](withoutSpaces);},0x1);});}else ctrlFieldDescription['LoadFieldDescription'](lFieldId,bEntityTypeField),$('#'+ctrlFieldDescription['DescriptionID'])['focus']();},'SelectFieldTypeEvent':function(lFieldTypeId,sFieldTypeDescription){var bShowLookupFields=lFieldTypeId==TriSysSDK['Controls']['FieldTypes']['Text']||lFieldTypeId==TriSysSDK['Controls']['FieldTypes']['List']||lFieldTypeId==TriSysSDK['Controls']['FieldTypes']['MultiSelectList']||lFieldTypeId==TriSysSDK['Controls']['FieldTypes']['SkillCombo']||lFieldTypeId==TriSysSDK['Controls']['FieldTypes']['JobTitle'],elem=$('#'+ctrlFieldDescription['LookupBlockID']);bShowLookupFields?elem['show']():elem['hide']();var tr=$('#'+ctrlFieldDescription['SkillComboCategoryID']+'-tr'),bShowSkillComboCategory=lFieldTypeId==TriSysSDK['Controls']['FieldTypes']['SkillCombo'];bShowSkillComboCategory?tr['show']():tr['hide'](),bShowSkillComboCategory&&(TriSysSDK['CShowForm']['SetCheckBoxValue'](ctrlFieldDescription['LookupID'],!![]),ctrlFieldDescription['LookupCheckBoxEvent']());},'SelectSkillComboCategoryEvent':function(sSkillCategory){ctrlFieldDescription['ReadLookupsFromWebService'](ctrlFieldDescription['_FieldDescription'],sSkillCategory);return;var skills=[];$['each'](TriSysApex['Cache']['Skills'](),function(index,skill){skill['Category']==sSkillCategory&&skills['push'](skill['Skill']);}),ctrlFieldDescription['DisplayLookupSkills'](skills);},'LookupCheckBoxEvent':function(bNewField){var bLookups=TriSysSDK['CShowForm']['CheckBoxValue'](ctrlFieldDescription['LookupID']),lst=$('#ctrlFieldDescription-lookupList'),srt=$('#ctrlFieldDescription-lookupSort'),ord=$('#ctrlFieldDescription-lookupSortOrder');bLookups?lst['show']():lst['hide'](),bLookups?srt['show']():srt['hide'](),bLookups?ord['show']():ord['hide']();if(bNewField&&bLookups){var sMessage='Create\x20a\x20new\x20skill\x20category\x20(Yes),\x20or\x20choose\x20an\x20existing\x20skill\x20category\x20(No),\x20or\x20Cancel?'+'<br>'+'WARNING:\x20choosing\x20an\x20existing\x20skill\x20category\x20will\x20prevent\x20this\x20being\x20used\x20in\x20general\x20skill\x20lists'+'\x20as\x20it\x20will\x20be\x20bound\x20to\x20this\x20new\x20field.';TriSysApex['UI']['questionYesNoCancel'](sMessage,'New\x20Lookup\x20Field','Yes,\x20create\x20a\x20new\x20skill\x20category',ctrlFieldDescription['CreateNewSkillCategory'],'No,\x20choose\x20an\x20existing\x20skill\x20category',ctrlFieldDescription['ChooseExistingSkillCategory'],'Cancel');}},'LookupSortOrder':function(){if(!ctrlFieldDescription['_FieldDescription'])return;var iFieldId=ctrlFieldDescription['_FieldDescription']['FieldId'];if(iFieldId<=0x0){TriSysApex['UI']['ShowMessage']('Please\x20set\x20the\x20lookup\x20ordering\x20after\x20saving\x20the\x20new\x20field\x20description.');return;}var sField=ctrlFieldDescription['_FieldDescription']['TableFieldName'],sTitle=sField+'\x20Lookups\x20Ordering',sImage='gi\x20gi-sorting',fnOpenModalDialogue=function(){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=sTitle,parametersObject['Image']=sImage,parametersObject['Maximize']=!![],parametersObject['FullScreen']=!![],parametersObject['CloseTopRightButton']=!![],parametersObject['ContentURL']=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlFieldDescriptionSkillOrder.html'),parametersObject['OnLoadCallback']=function(){ctrlFieldDescriptionSkillOrder['Load'](sField,ctrlFieldDescription['_FieldLookups']);};var sSaveText='Save';parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftText']=sSaveText,parametersObject['ButtonLeftFunction']=function(){var fnSaved=function(lstLookup){ctrlFieldDescription['SelectSkillComboCategoryEvent'](ctrlFieldDescription['_FieldDescription']['TableFieldName']);},bSaved=ctrlFieldDescriptionSkillOrder['Save'](sField,fnSaved);return bSaved;},parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',TriSysApex['UI']['PopupMessage'](parametersObject);};TriSysApex['WhiteLabelling']['LoadJavascriptFile']('js/pages/ctrlFieldDescriptionSkillOrder.js',null,fnOpenModalDialogue);},'CreateNewSkillCategory':function(){TriSysApex['Toasters']['Info']('Create\x20a\x20New\x20Skill\x20Category...');var fnPrompt=function(){var options={'RemoveSpaces':!![]};AdminConsole['OpenSkillCategoryDialogue'](0x0,ctrlFieldDescription['ValidatedNewSkillCategory'],options);};return setTimeout(fnPrompt,0xa),!![];},'SelectedAnExistingSkillCategory':function(skillCategory){var bSpaces=skillCategory['Category']['indexOf']('\x20')>=0x0,bSlash=skillCategory['Category']['indexOf']('/')>=0x0;if(bSpaces||bSlash)return TriSysApex['UI']['ShowMessage']('You\x20cannot\x20convert\x20this\x20general\x20skill\x20category\x20into\x20a\x20field.'),![];return setTimeout(function(){ctrlFieldDescription['ValidatedNewSkillCategory'](skillCategory,!![]);},0xa),!![];},'ValidatedNewSkillCategory':function(skillCategory,bExistingSkillCategory){TriSysApex['Toasters']['Info']((!bExistingSkillCategory?'Created\x20a\x20New':'Selected\x20an\x20Existing')+'\x20Skill\x20Category:\x20'+skillCategory['Category']),$('#'+ctrlFieldDescription['TableFieldNameID'])['val'](skillCategory['Category']),$('#'+ctrlFieldDescription['TableFieldNameID'])['attr']('readonly','readonly'),TriSysSDK['CShowForm']['ComboReadonly'](ctrlFieldDescription['FieldTypeID'],!![]),$('#'+ctrlFieldDescription['LookupID'])['attr']('disabled','disabled'),TriSysSDK['Controls']['NumericSpinner']['Readonly'](ctrlFieldDescription['LengthID'],!![]),$('#'+ctrlFieldDescription['MultiLineID'])['attr']('disabled','disabled'),ctrlFieldDescription['_FieldDescription']['Lookup']=!![],ctrlFieldDescription['_FieldDescription']['TableFieldName']=skillCategory['Category'],ctrlFieldDescription['ReadLookupsForFieldDescription'](ctrlFieldDescription['_FieldDescription']);},'ChooseExistingSkillCategory':function(){TriSysApex['Toasters']['Info']('Choose\x20an\x20Existing\x20Skill\x20Category...');var fnPopup=function(){var categories=TriSysApex['Cache']['SystemSettingManager']['GeneralSkillCategories'](),fieldParameters=new TriSysApex['ModalDialogue']['Selection']['SelectionParameters']();fieldParameters['Title']='Select\x20Skill\x20Category',fieldParameters['PopulationByObject']=categories,fieldParameters['Columns']=[{'field':'SkillCategoryId','title':'Skill\x20Category\x20Id','type':'number','width':0x46,'hidden':!![]},{'field':'Category','title':'Skill\x20Category','type':'string'},{'field':'Description','title':'Description','type':'string'}],fieldParameters['CallbackFunction']=ctrlFieldDescription['SelectedAnExistingSkillCategory'],TriSysApex['ModalDialogue']['Selection']['Show'](fieldParameters);};return setTimeout(fnPopup,0xa),!![];},'FieldDescriptionFromCacheByFieldId':function(lFieldId){var cachedFieldDescriptions=TriSysApex['Cache']['FieldDescriptions'](),fieldDescriptions=[];for(var i=0x0;i<cachedFieldDescriptions['length'];i++){var fieldDescription=cachedFieldDescriptions[i];if(fieldDescription['FieldId']==lFieldId)return fieldDescription;}},'LoadFieldDescription':function(lFieldId,bEntityTypeField){ctrlFieldDescription['_FieldDescription']=ctrlFieldDescription['FieldDescriptionFromCacheByFieldId'](lFieldId),$('#'+ctrlFieldDescription['TableFieldNameID'])['val'](ctrlFieldDescription['_FieldDescription']['TableFieldName']),$('#'+ctrlFieldDescription['DescriptionID'])['val'](ctrlFieldDescription['_FieldDescription']['Description']),TriSysSDK['CShowForm']['SetValueInCombo'](ctrlFieldDescription['FieldTypeID'],ctrlFieldDescription['_FieldDescription']['FieldTypeId']),$('#'+ctrlFieldDescription['DefaultValueID'])['val'](ctrlFieldDescription['_FieldDescription']['DefaultValue']),$('#'+ctrlFieldDescription['MaxValueID'])['val'](ctrlFieldDescription['_FieldDescription']['MaxValue']),$('#'+ctrlFieldDescription['MinValueID'])['val'](ctrlFieldDescription['_FieldDescription']['MinValue']),$('#'+ctrlFieldDescription['FieldLabelID'])['val'](ctrlFieldDescription['_FieldDescription']['FieldLabel']),TriSysSDK['CShowForm']['SetCheckBoxValue'](ctrlFieldDescription['MultiLineID'],ctrlFieldDescription['_FieldDescription']['MultiLine']),TriSysSDK['Controls']['NumericSpinner']['SetValue'](ctrlFieldDescription['LengthID'],ctrlFieldDescription['_FieldDescription']['FieldLength']);if(ctrlFieldDescription['_FieldDescription']['FieldTypeId']==TriSysSDK['Controls']['FieldTypes']['SkillCombo']){if(bEntityTypeField)ctrlFieldDescription['_FieldDescription']['SkillComboCategory']=ctrlFieldDescription['_FieldDescription']['TableName']+'\x20Type';TriSysSDK['CShowForm']['SetTextInCombo'](ctrlFieldDescription['SkillComboCategoryID'],ctrlFieldDescription['_FieldDescription']['SkillComboCategory']);}ctrlFieldDescription['ReadLookupsForFieldDescription'](ctrlFieldDescription['_FieldDescription']),$('#'+ctrlFieldDescription['TableFieldNameID'])['attr']('readonly','readonly'),TriSysSDK['CShowForm']['ComboReadonly'](ctrlFieldDescription['FieldTypeID'],!![]),$('#'+ctrlFieldDescription['LookupID'])['attr']('disabled','disabled'),TriSysSDK['Controls']['NumericSpinner']['Readonly'](ctrlFieldDescription['LengthID'],!![]),$('#'+ctrlFieldDescription['MultiLineID'])['attr']('disabled','disabled'),ctrlFieldDescription['SelectFieldTypeEvent'](ctrlFieldDescription['_FieldDescription']['FieldTypeId']);},'ReadLookupsForFieldDescription':function(fieldDescription){if(fieldDescription['Lookup']){TriSysSDK['CShowForm']['SetCheckBoxValue'](ctrlFieldDescription['LookupID'],!![]),ctrlFieldDescription['LookupCheckBoxEvent'](),TriSysSDK['CShowForm']['SetCheckBoxValue'](ctrlFieldDescription['SortAlphabeticallyID'],fieldDescription['SortAlphabetically']);var sSkillCategory=fieldDescription['FieldTypeId']==TriSysSDK['Controls']['FieldTypes']['SkillCombo']?fieldDescription['SkillComboCategory']:fieldDescription['TableFieldName'];fieldDescription['Skills']=[],$['each'](TriSysApex['Cache']['Skills'](),function(index,skill){skill['Category']==sSkillCategory&&fieldDescription['Skills']['push'](skill['Skill']);});var fnCallback=function(){if(fieldDescription['SortAlphabetically'])ctrlFieldDescription['SortAlphabeticallyChecked']({'checked':!![]});};ctrlFieldDescription['ReadLookupsFromWebService'](fieldDescription,sSkillCategory,fnCallback);var bDisabledSortAlphabetically=![],bDisabledLookupOrdering=![];switch(fieldDescription['TableName']+'.'+fieldDescription['TableFieldName']){case'Contact.Priority':case'Contact.CurrencyId':case'Contact.ContactTitle':bDisabledSortAlphabetically=!![];break;case'Company.IndustryId':case'Contact.JobTitle':bDisabledSortAlphabetically=!![],bDisabledLookupOrdering=!![],TriSysSDK['CShowForm']['SetCheckBoxValue'](ctrlFieldDescription['SortAlphabeticallyID'],!![]);break;}ctrlFieldDescription['_FieldDescription']['FieldTypeId']==TriSysSDK['Controls']['FieldTypes']['SkillCombo']&&(bDisabledSortAlphabetically=!![],bDisabledLookupOrdering=!![],TriSysSDK['CShowForm']['SetCheckBoxValue'](ctrlFieldDescription['SortAlphabeticallyID'],!![]));document['getElementById'](ctrlFieldDescription['SortAlphabeticallyID'])['disabled']=bDisabledSortAlphabetically;if(bDisabledLookupOrdering)$('#'+ctrlFieldDescription['LookupOrderButton'])['attr']('disabled','disabled');}},'ReadLookupsFromWebService':function(fieldDescription,sSkillCategory,fnCallback){ctrlFieldDescription['_FieldLookups']=null;var payloadObject={},CFieldLookupsRequest={'SkillCategory':sSkillCategory};payloadObject['URL']='SkillCategory/FieldLookups',payloadObject['OutboundDataPacket']=CFieldLookupsRequest,payloadObject['InboundDataFunction']=function(CFieldLookupsResponse){if(CFieldLookupsResponse){if(CFieldLookupsResponse['Success']){ctrlFieldDescription['_FieldLookups']=CFieldLookupsResponse['Fields'],fieldDescription['Skills']=[],$['each'](ctrlFieldDescription['_FieldLookups'],function(index,field){fieldDescription['Skills']['push'](field['Skill']);}),ctrlFieldDescription['DisplayLookupSkills'](fieldDescription['Skills']);if(fnCallback)fnCallback();return;}else TriSysApex['UI']['ShowMessage'](CFieldLookupsResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('ctrlFieldDescription.ReadLookupsFromWebService:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'DisplayLookupSkills':function(skills,bUp){var sDivTag=ctrlFieldDescription['LookupGridID'],sGridName=sDivTag+'-GridInstance';if(ctrlFieldDescription['_FieldLookups']){var iRecordCount=ctrlFieldDescription['_FieldLookups']['length'],bOrderingHidden=ctrlFieldDescription['_FieldDescription']['FieldTypeId']==TriSysSDK['Controls']['FieldTypes']['SkillCombo'];TriSysSDK['Grid']['VirtualMode']({'Div':sDivTag,'ID':sGridName,'Title':'Lookups','RecordsPerPage':iRecordCount,'PopulationByObject':ctrlFieldDescription['_FieldLookups'],'Columns':[{'field':'SkillId','title':'SkillId','type':'string','hidden':!![]},{'field':'Skill','title':'Lookup','type':'string','menu':![]},{'field':'Description','title':'Description','type':'string','menu':![]},{'field':'Ordering','title':'Order','type':'string','menu':![],'hidden':bOrderingHidden}],'ColumnFilters':![],'Grouping':![]});var grid=$('#'+sDivTag)['data']('kendoGrid');}},'GetSelectedLookupFromGrid':function(){var grid=$('#'+ctrlFieldDescription['LookupGridID'])['data']('kendoGrid'),selectedRows=grid['select']();if(selectedRows){var data=grid['dataItem'](selectedRows[0x0]);if(data)return data['Skill'];}},'SetSelectedLookupInGrid':function(sLookup){var grid=$('#'+ctrlFieldDescription['LookupGridID'])['data']('kendoGrid');$['each'](grid['tbody']['find']('tr'),function(){var model=grid['dataItem'](this);if(model['Skill']==sLookup){grid['select'](this);return;}});},'DuplicateSkillCheck':function(sSkill){var fieldDescription=ctrlFieldDescription['_FieldDescription'];if(fieldDescription['Skills'])for(var i=0x0;i<fieldDescription['Skills']['length'];i++){var skill=fieldDescription['Skills'][i];if(skill==sSkill)return!![];}return![];},'SaveButtonClick':function(fnCallback){var bNew=ctrlFieldDescription['_FieldDescription']['FieldId']==0x0,sTableFieldName=$('#'+ctrlFieldDescription['TableFieldNameID'])['val']();if(bNew){if(sTableFieldName)sTableFieldName=sTableFieldName['replace'](/ /g,'');if(!sTableFieldName){TriSysApex['UI']['ShowMessage']('Enter\x20a\x20field\x20name');return;}var cachedFieldDescriptions=TriSysApex['Cache']['FieldDescriptions'](),fieldDescriptions=[];for(var i=0x0;i<cachedFieldDescriptions['length'];i++){var fieldDescription=cachedFieldDescriptions[i];if(fieldDescription['TableName']==ctrlFieldDescription['_FieldDescription']['TableName']&&fieldDescription['TableFieldName']==sTableFieldName){TriSysApex['UI']['ShowMessage']('Duplicate\x20field:\x20'+fieldDescription['TableName']+'.'+fieldDescription['TableFieldName']);return;}}ctrlFieldDescription['_FieldDescription']['TableFieldName']=sTableFieldName,ctrlFieldDescription['_FieldDescription']['FieldTypeId']=TriSysSDK['CShowForm']['GetValueFromCombo'](ctrlFieldDescription['FieldTypeID']),ctrlFieldDescription['_FieldDescription']['Lookup']=TriSysSDK['CShowForm']['CheckBoxValue'](ctrlFieldDescription['LookupID']),ctrlFieldDescription['_FieldDescription']['FieldLength']=TriSysSDK['Controls']['NumericSpinner']['GetValue'](ctrlFieldDescription['LengthID']),ctrlFieldDescription['_FieldDescription']['MultiLine']=TriSysSDK['CShowForm']['CheckBoxValue'](ctrlFieldDescription['MultiLineID']);}ctrlFieldDescription['_FieldDescription']['Skills']=[];var gridData=TriSysSDK['Grid']['ReadGridContents'](ctrlFieldDescription['LookupGridID']);if(gridData){var gridRows=gridData['rows'];for(var iRow=0x0;iRow<gridRows['length'];iRow++){var row=gridRows[iRow],sSkill=row['Skill'];ctrlFieldDescription['_FieldDescription']['Skills']['push'](sSkill);}}ctrlFieldDescription['_FieldDescription']['Lookup']=TriSysSDK['CShowForm']['CheckBoxValue'](ctrlFieldDescription['LookupID']),ctrlFieldDescription['_FieldDescription']['MultiLine']=TriSysSDK['CShowForm']['CheckBoxValue'](ctrlFieldDescription['MultiLineID']),ctrlFieldDescription['_FieldDescription']['Description']=$('#'+ctrlFieldDescription['DescriptionID'])['val'](),ctrlFieldDescription['_FieldDescription']['DefaultValue']=$('#'+ctrlFieldDescription['DefaultValueID'])['val'](),ctrlFieldDescription['_FieldDescription']['MaxValue']=$('#'+ctrlFieldDescription['MaxValueID'])['val'](),ctrlFieldDescription['_FieldDescription']['MinValue']=$('#'+ctrlFieldDescription['MinValueID'])['val'](),ctrlFieldDescription['_FieldDescription']['FieldLabel']=$('#'+ctrlFieldDescription['FieldLabelID'])['val'](),ctrlFieldDescription['_FieldDescription']['SortAlphabetically']=TriSysSDK['CShowForm']['CheckBoxValue'](ctrlFieldDescription['SortAlphabeticallyID']);if(ctrlFieldDescription['_FieldDescription']['FieldTypeId']==TriSysSDK['Controls']['FieldTypes']['SkillCombo'])ctrlFieldDescription['_FieldDescription']['SkillComboCategory']=TriSysSDK['CShowForm']['GetValueFromCombo'](ctrlFieldDescription['SkillComboCategoryID']);if(!ctrlFieldDescription['_FieldDescription']['Description']){TriSysApex['UI']['ShowMessage']('Enter\x20a\x20description\x20of\x20the\x20field,\x20as\x20someone\x20must\x20maintain\x20this\x20in\x20future!');return;}ctrlFieldDescription['SaveToWebAPI'](ctrlFieldDescription['_FieldDescription'],fnCallback);},'SaveToWebAPI':function(fieldDescription,fnCallback){var CFieldDescriptionWriteRequest={'FieldDescription':fieldDescription},payloadObject={};payloadObject['OutboundDataPacket']=CFieldDescriptionWriteRequest,payloadObject['URL']='FieldDescription/Write',payloadObject['InboundDataFunction']=function(CFieldDescriptionWriteResponse){TriSysApex['UI']['HideWait']();if(CFieldDescriptionWriteResponse){if(CFieldDescriptionWriteResponse['Success']){fnCallback(CFieldDescriptionWriteResponse['FieldDescription']);return;}else TriSysApex['UI']['ShowMessage'](CFieldDescriptionWriteResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlFieldDescription.SaveToWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Saving\x20Field\x20Description...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'SortAlphabeticallyChecked':function(what){var bChecked=what['checked'];ctrlFieldDescription['_FieldDescription']['SortAlphabetically']=bChecked,ctrlFieldDescription['SortedLookupList'](),ctrlFieldDescription['DisplayLookupSkills'](null,!![]);},'SortedLookupList':function(){var lst=ctrlFieldDescription['_FieldLookups'];if(!lst)return;ctrlFieldDescription['_FieldDescription']['SortAlphabetically']?lst['sort'](function(a,b){return a['Skill']['localeCompare'](b['Skill']);}):lst['sort'](function(a,b){return parseInt(a['Ordering'])-parseInt(b['Ordering']);});}};