var PlacementPhone={'_PlacementId':0x0,'LoadPlacement':function(lPlacementId){PlacementPhone['_PlacementId']=lPlacementId,PlacementPhone['HideFieldsBeforeDisplay']();if(lPlacementId<=0x0){var options={'IgnorePhoneGap':!![]};TriSysApex['FormsManager']['OpenForm']('Placement',-0x1,![],options);return;}var spinnerWait={'Div':'placement-phone-summary-top'};TriSysSDK['Grid']['WaitSpinnerMode'](spinnerWait,!![]);var fnCallbackSummary=function(CPlacementResponse,bSuccess){TriSysSDK['Grid']['WaitSpinnerMode'](spinnerWait,![]),bSuccess&&(CPlacementResponse['Success']&&PlacementPhone['DisplayPlacement'](CPlacementResponse));};PlacementPhone['ReadPlacementFromWebAPI'](lPlacementId,![],fnCallbackSummary);},'ReadPlacementFromWebAPI':function(lPlacementId,bTimesheets,fnCallback){var CPlacementRequest={'PlacementId':lPlacementId,'RecruiterAccess':!![],'Timesheets':bTimesheets},payloadObject={};payloadObject['URL']='Placement/Read',payloadObject['OutboundDataPacket']=CPlacementRequest,payloadObject['InboundDataFunction']=function(CPlacementResponse){fnCallback(CPlacementResponse,!![]);},payloadObject['ErrorHandlerFunction']=function(request,status,error){fnCallback(null,![]),TriSysApex['UI']['errorAlert']('PlacementPhone.ReadPlacementFromWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'HideFieldsBeforeDisplay':function(){var sFieldPrefix='#placement-phone-';$(sFieldPrefix+'type-footer')['html'](''),$(sFieldPrefix+'reference')['html'](''),$(sFieldPrefix+'jobtitle')['html'](''),$('[id^='+sFieldPrefix['replace']('#','')+']')['filter']('[id*=-tr]')['each'](function(){$(this)['hide']();}),$('#placement-phone-summary-dates')['hide']();},'DisplayPlacement':function(CPlacementResponse){PlacementPhone['ScrollToTop']();var sFieldPrefix='#placement-phone-',bPermanent=CPlacementResponse['Type']=='Permanent';$(sFieldPrefix+'type-footer')['html'](CPlacementResponse['Type']),$(sFieldPrefix+'reference')['html'](CPlacementResponse['Reference']),$(sFieldPrefix+'jobtitle')['html'](CPlacementResponse['JobTitle']),$(sFieldPrefix+'type')['html'](CPlacementResponse['Type']),$(sFieldPrefix+'startdate')['html'](moment(CPlacementResponse['StartDate'])['format']('dddd\x20DD\x20MMMM\x20YYYY')),$(sFieldPrefix+'enddate')['html'](moment(CPlacementResponse['EndDate'])['format']('dddd\x20DD\x20MMMM\x20YYYY')),bPermanent?$(sFieldPrefix+'enddate-tr')['hide']():$(sFieldPrefix+'enddate-tr')['show'](),$(sFieldPrefix+'consultant')['html'](CPlacementResponse['UserName']),$(sFieldPrefix+'summary-dates')['show']();var sCompanyLogoURL=CPlacementResponse['Company']['CompanyLogoURL'];if(!sCompanyLogoURL)sCompanyLogoURL=TriSysApex['Constants']['DefaultCompanyImage'];$(sFieldPrefix+'companylogourl')['attr']('src',sCompanyLogoURL),TriSysPhoneGap['ShowAndActivateCompany'](sFieldPrefix+'company',CPlacementResponse['Company']['CompanyId']),$(sFieldPrefix+'companyname')['html'](CPlacementResponse['Company']['CompanyName']),$(sFieldPrefix+'industry')['html'](CPlacementResponse['Company']['Industry']);var sContactPhotoURL=CPlacementResponse['ClientContact']['ContactPhotoURL'];if(!sContactPhotoURL)sContactPhotoURL=TriSysApex['Constants']['DefaultContactImage'];$(sFieldPrefix+'contactphotourl')['attr']('src',sContactPhotoURL),TriSysPhoneGap['ShowAndActivateContact'](sFieldPrefix+'contact',CPlacementResponse['ClientContact']['ContactId']),$(sFieldPrefix+'contactname')['html'](CPlacementResponse['ClientContact']['FullName']),$(sFieldPrefix+'contact-jobtitle')['html'](CPlacementResponse['ClientContact']['JobTitle']),sContactPhotoURL=CPlacementResponse['CandidateContact']['ContactPhotoURL'];if(!sContactPhotoURL)sContactPhotoURL=TriSysApex['Constants']['DefaultContactImage'];$(sFieldPrefix+'candidatephotourl')['attr']('src',sContactPhotoURL),TriSysPhoneGap['ShowAndActivateContact'](sFieldPrefix+'candidate',CPlacementResponse['CandidateContact']['ContactId']),$(sFieldPrefix+'candidatename')['html'](CPlacementResponse['CandidateContact']['FullName']),$(sFieldPrefix+'candidate-jobtitle')['html'](CPlacementResponse['CandidateContact']['JobTitle']);if(CPlacementResponse['SiteAddressObject']){var addresss=CPlacementResponse['SiteAddressObject'];TriSysPhoneGap['ShowAndActivateMap'](sFieldPrefix+'siteaddress',addresss['Street'],addresss['City'],addresss['County'],addresss['PostCode'],addresss['Country']);}$(sFieldPrefix+'comments')['html'](CPlacementResponse['Comments']),$(sFieldPrefix+'webtext')['html'](CPlacementResponse['WebText']);var sSalaryRateDescription=bPermanent?'Salary':CPlacementResponse['Type']+'\x20Rates';$(sFieldPrefix+'salary-description')['html'](sSalaryRateDescription);var sSalary=CPlacementResponse['Salary'];!bPermanent&&(sSalary='Pay:\x20'+CPlacementResponse['PayRate']+'<br\x20/>Charge:\x20'+CPlacementResponse['ChargeRate']);$(sFieldPrefix+'salary')['html'](sSalary),$(sFieldPrefix+'salary-tr')['show'](),$(sFieldPrefix+'status')['html'](CPlacementResponse['Status']),$(sFieldPrefix+'status-tr')['show']();CPlacementResponse['Description']&&($(sFieldPrefix+'description')['html'](CPlacementResponse['Description']),$(sFieldPrefix+'description-tr')['show']());if(CPlacementResponse['Requirement']){var requirement=CPlacementResponse['Requirement'],sInitiated=moment(requirement['DateInitiated'])['format']('dddd\x20DD\x20MMMM\x20YYYY'),sRequirement=requirement['Reference']+':\x20'+requirement['JobTitle']+'<br\x20/>Initiated:\x20'+sInitiated+'<br\x20/>Consultant:\x20'+requirement['Consultant'];$(sFieldPrefix+'requirement')['html'](sRequirement),TriSysPhoneGap['ShowAndActivateRequirement'](sFieldPrefix+'requirement',requirement['RequirementId']);}TriSysApex['BrowserHistory']['Menu']['Add']('Placement',CPlacementResponse['PlacementId'],CPlacementResponse['Reference']);},'ScrollToTop':function(){$(document['body'])['scrollTop']($('#placement-form-top')['offset']()['top']-0x78);},'EditPlacement':function(){var options={'IgnorePhoneGap':!![]};TriSysApex['FormsManager']['OpenForm']('Placement',PlacementPhone['_PlacementId'],!![],options);}};