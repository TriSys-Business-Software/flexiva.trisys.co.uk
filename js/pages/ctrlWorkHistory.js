var ctrlWorkHistory={'Load':function(){$('#work-history-form-dates')['focus']();if(TriSysApex['ModalDialogue']['ContactWorkHistory']['ContactWorkHistoryId']==0x0)return;var dataPacket={'ContactWorkHistoryId':TriSysApex['ModalDialogue']['ContactWorkHistory']['ContactWorkHistoryId']},payloadObject={};payloadObject['URL']='Contacts/ReadWorkHistory',payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var CReadWorkHistoryResponse=data;if(CReadWorkHistoryResponse){if(CReadWorkHistoryResponse['Success']){$('#work-history-form-dates')['val'](CReadWorkHistoryResponse['Dates']),$('#work-history-form-employer')['val'](CReadWorkHistoryResponse['Employer']),$('#work-history-form-location')['val'](CReadWorkHistoryResponse['Location']),$('#work-history-form-jobtitle')['val'](CReadWorkHistoryResponse['JobTitle']),$('#work-history-form-department')['val'](CReadWorkHistoryResponse['Department']),$('#work-history-form-description')['val'](CReadWorkHistoryResponse['Description']);return;}else TriSysApex['UI']['ShowMessage'](CReadWorkHistoryResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlWorkHistory.Load:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Reading\x20Work\x20History...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'Save':function(lContactId){var CWriteWorkHistoryRequest={};CWriteWorkHistoryRequest['Dates']=$('#work-history-form-dates')['val'](),CWriteWorkHistoryRequest['Employer']=$('#work-history-form-employer')['val'](),CWriteWorkHistoryRequest['Location']=$('#work-history-form-location')['val'](),CWriteWorkHistoryRequest['JobTitle']=$('#work-history-form-jobtitle')['val'](),CWriteWorkHistoryRequest['Department']=$('#work-history-form-department')['val'](),CWriteWorkHistoryRequest['Description']=$('#work-history-form-description')['val']();if(!CWriteWorkHistoryRequest['Dates']||!CWriteWorkHistoryRequest['Employer']){TriSysApex['UI']['ShowMessage']('Please\x20provide\x20the\x20dates\x20and\x20employer.');return;}CWriteWorkHistoryRequest['ContactWorkHistoryId']=TriSysApex['ModalDialogue']['ContactWorkHistory']['ContactWorkHistoryId'],CWriteWorkHistoryRequest['ContactId']=lContactId;var payloadObject={};payloadObject['URL']='Contacts/WriteWorkHistory',payloadObject['OutboundDataPacket']=CWriteWorkHistoryRequest,payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var CWriteWorkHistoryResponse=data;if(CWriteWorkHistoryResponse){if(CWriteWorkHistoryResponse['Success']){ctrlWorkHistory['PostSaveEvent'](CWriteWorkHistoryResponse['ContactWorkHistoryId']);return;}else TriSysApex['UI']['ShowMessage'](CWriteWorkHistoryResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlWorkHistory.Save:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Saving\x20Work\x20History...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'PostSaveEvent':function(lContactWorkHistoryId){var sGrid='contactForm-WorkHistoryGrid';TriSysSDK['Grid']['ClearCheckedRows'](sGrid),TriSysSDK['Grid']['RefreshData'](sGrid),TriSysApex['UI']['CloseModalPopup']();}};$(document)['ready'](function(){ctrlWorkHistory['Load']();});