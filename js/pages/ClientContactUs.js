var ClientContactUs={'Load':function(){var fnPopulate=function(Client){$('#txtClientContactUsName')['val'](Client['Forenames']+'\x20'+Client['Surname']),$('#txtClientContactUsEMail')['val'](Client['WorkEMail']),$('#txtClientContactUsPhone')['val'](Client['WorkTelNo']);};TriSysWebJobs['ContactUs']['LoadLoggedInUserDetails'](fnPopulate,![]);if(!TriSysWebJobs['Constants']['ClientContactUsPageHeaderVisible'])$('#ClientContactUsPageHeader')['hide']();TriSysWebJobs['Constants']['TransparentBackground']&&setTimeout(function(){$('#ClientContactUsBlockFull')['css']('border','none'),TriSysWebJobs['Frame']['BlockFullTransparent'](),$('#ClientContactUsBlock')['css']('background-color','white');},0x5dc);},'SubmitButtonClick':function(){var sName=$('#txtClientContactUsName')['val'](),sEMail=$('#txtClientContactUsEMail')['val'](),sPhone=$('#txtClientContactUsPhone')['val'](),sMessage=$('#txtClientContactUsMessage')['val'](),sError='';if(!sName)sError+='Please\x20supply\x20your\x20name.'+'<br\x20/>';if(!TriSysApex['LoginCredentials']['validateEmail'](sEMail)&&!sPhone)sError+='Please\x20supply\x20either\x20an\x20e-mail\x20address\x20or\x20phone\x20number.'+'<br\x20/>';if(!sMessage)sError+='Please\x20supply\x20a\x20message.'+'<br\x20/>';if(sError['length']>0x1){TriSysApex['UI']['ShowMessage'](sError,TriSysWebJobs['Constants']['ApplicationName']);return;}var fnRedirect=function(){return $('#txtClientContactUsMessage')['val'](''),TriSysWebJobs['Constants']['LoggedInAsClient']&&TriSysApex['FormsManager']['OpenForm'](TriSysWebJobs['Constants']['ClientVacanciesForm'],0x0,!![]),!![];};ClientContactUs['SendToWebAPI'](sName,sEMail,sPhone,sMessage,fnRedirect);},'SendToWebAPI':function(sName,sEMail,sPhone,sMessage,fnCallback){var parts=sName['split']('\x20'),sForenames=parts[0x0],sSurname=parts['length']>0x1?parts[0x1]:'?';if(parts['length']>0x2)for(var i=0x2;i<parts['length'];i++){var sPart=parts[i];sSurname+='\x20'+sPart;}var sTypeOfEnquiry='Client',CEnquiryContactUsRequest={'Forenames':sForenames,'Surname':sSurname,'WorkTelNo':sPhone,'WorkEMail':sEMail,'TypeOfEnquiry':sTypeOfEnquiry,'Message':sMessage,'WebJobsRequest':TriSysWebJobs['Agency']['WebJobsRequest']()};TriSysApex['UI']['ShowWait'](null,'Sending\x20Message...');var payloadObject={};payloadObject['URL']='Enquiry/ContactUs',payloadObject['OutboundDataPacket']=CEnquiryContactUsRequest,payloadObject['InboundDataFunction']=function(CEnquiryContactUsResponse){if(CEnquiryContactUsResponse){TriSysApex['UI']['HideWait']();if(CEnquiryContactUsResponse['Success'])TriSysApex['UI']['ShowMessage'](TriSysSDK['Resources']['Message']('TriSysWeb.Pages.ContactUs.SendToAPI.Success'),TriSysWebJobs['Constants']['ApplicationName'],fnCallback);else{var sErrorMessage=TriSysSDK['Resources']['Message']('TriSysWeb.Pages.ContactUs.SendToAPI.Failure');sErrorMessage=sErrorMessage['replace']('##EMail##',TriSysWebJobs['Agency']['EMail']),TriSysApex['UI']['ShowMessage'](sErrorMessage,TriSysWebJobs['Constants']['ApplicationName']);}}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('ClientContactUs.SendToWebAPI:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};$(document)['ready'](function(){ClientContactUs['Load']();});