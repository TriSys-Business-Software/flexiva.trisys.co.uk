var ContactPhone={'_ContactId':0x0,'LoadContact':function(lContactId){ContactPhone['_ContactId']=lContactId,ContactPhone['HideFieldsBeforeDisplay']();if(lContactId<=0x0){var options={'IgnorePhoneGap':!![]};TriSysApex['FormsManager']['OpenForm']('Contact',-0x1,![],options);return;}var spinnerWait={'Div':'contact-phone-summary-top'},CReadContactRequest={'ContactRecord':{'ContactId':lContactId}},payloadObject={};payloadObject['URL']='Contacts/ReadContact',payloadObject['OutboundDataPacket']=CReadContactRequest,payloadObject['InboundDataFunction']=function(CReadContactResponse){TriSysSDK['Grid']['WaitSpinnerMode'](spinnerWait,![]);if(CReadContactResponse){if(CReadContactResponse['Success'])ContactPhone['DisplayContact'](CReadContactResponse['ContactRecord']);else{}return;}TriSysApex['UI']['ShowError']('ContactPhone.LoadContact\x20Error:\x20null\x20response');},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysSDK['Grid']['WaitSpinnerMode'](spinnerWait,![]),TriSysApex['UI']['errorAlert']('ContactPhone.LoadContact:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysSDK['Grid']['WaitSpinnerMode'](spinnerWait,!![]),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'HideFieldsBeforeDisplay':function(){var sFieldPrefix='#contact-phone-';$(sFieldPrefix+'type')['html'](''),$(sFieldPrefix+'fullname')['html'](''),$(sFieldPrefix+'companyname')['html'](''),$(sFieldPrefix+'jobtitle')['html'](''),$(sFieldPrefix+'photourl')['unbind']('click'),$('[id^='+sFieldPrefix['replace']('#','')+']')['filter']('[id*=-tr]')['each'](function(){$(this)['hide']();}),$(sFieldPrefix+'skype-table')['hide'](),$(sFieldPrefix+'requirements-table')['hide'](),$(sFieldPrefix+'placements-table')['hide']();},'DisplayContact':function(CContact){ContactPhone['ScrollToTop']();var sFieldPrefix='#contact-phone-';$(sFieldPrefix+'type')['html'](CContact['ContactType']),$(sFieldPrefix+'fullname')['html'](CContact['FullName']);if(CContact['CompanyName']){$(sFieldPrefix+'companyname')['html'](CContact['CompanyName']),$(sFieldPrefix+'companyname')['show'](),$(sFieldPrefix+'companyname')['unbind']('click')['on']('click',function(){TriSysApex['FormsManager']['OpenForm']('Company',CContact['CompanyId']);}),TriSysPhoneGap['ShowAndActivateCompany'](sFieldPrefix+'company',CContact['CompanyId']),$(sFieldPrefix+'company')['html'](CContact['CompanyName']),$(sFieldPrefix+'company-industry')['html'](CContact['CompanyIndustry']);var sCompanyLogoURL=CContact['CompanyLogoURL'];if(!sCompanyLogoURL)sCompanyLogoURL=TriSysApex['Constants']['DefaultCompanyImage'];$(sFieldPrefix+'companylogourl')['attr']('src',sCompanyLogoURL),$(sFieldPrefix+'company-tr')['show']();}$(sFieldPrefix+'jobtitle')['html'](CContact['JobTitle']);var bHyperlinkOpenPhoto=!![],sContactPhotoURL=CContact['ContactPhotoURL'];!sContactPhotoURL&&(sContactPhotoURL=TriSysApex['Constants']['DefaultContactImage'],bHyperlinkOpenPhoto=![]);$(sFieldPrefix+'photourl')['attr']('src',sContactPhotoURL),$(sFieldPrefix+'photourl')['unbind']('click');bHyperlinkOpenPhoto&&$(sFieldPrefix+'photourl')['on']('click',function(){TriSysSDK['Controls']['FileManager']['OpenDocumentViewer'](CContact['FullName'],sContactPhotoURL,CContact['FullName']);});CContact['LinkedIn']&&($(sFieldPrefix+'linkedin')['show'](),$(sFieldPrefix+'linkedin-hyperlink')['attr']('href',CContact['LinkedIn']),$(sFieldPrefix+'linkedin-hyperlink')['attr']('target','_blank'));CContact['Facebook']&&($(sFieldPrefix+'facebook')['show'](),$(sFieldPrefix+'facebook-hyperlink')['attr']('href',CContact['Facebook']),$(sFieldPrefix+'facebook-hyperlink')['attr']('target','_blank'),$(sFieldPrefix+'facebook-separator')['show']());CContact['Twitter']&&($(sFieldPrefix+'twitter')['show'](),$(sFieldPrefix+'twitter-hyperlink')['attr']('href',CContact['Twitter']),$(sFieldPrefix+'twitter-hyperlink')['attr']('target','_blank'),$(sFieldPrefix+'twitter-separator')['show']());if(CContact['WorkTelNo'])TriSysPhoneGap['ShowAndActivateCall'](sFieldPrefix+'worktelno',CContact['WorkTelNo']);CContact['WorkMobileTelNo']&&(TriSysPhoneGap['ShowAndActivateCall'](sFieldPrefix+'workmobiletelno-call',CContact['WorkMobileTelNo']),TriSysPhoneGap['ShowAndActivateSMS'](sFieldPrefix+'workmobiletelno-sms',CContact['WorkMobileTelNo']));if(CContact['WorkEMail'])TriSysPhoneGap['ShowAndActivateEMail'](sFieldPrefix+'workemail',CContact['WorkEMail']);(CContact['CompanyAddressStreet']||CContact['CompanyAddressCity'])&&TriSysPhoneGap['ShowAndActivateMap'](sFieldPrefix+'workaddress',CContact['CompanyAddressStreet'],CContact['CompanyAddressCity'],CContact['CompanyAddressCounty'],CContact['CompanyAddressPostCode'],CContact['CompanyAddressCountry']);if(CContact['HomeAddressTelNo'])TriSysPhoneGap['ShowAndActivateCall'](sFieldPrefix+'hometelno',CContact['HomeAddressTelNo']);CContact['MobileTelNo']&&(TriSysPhoneGap['ShowAndActivateCall'](sFieldPrefix+'personalmobiletelno-call',CContact['MobileTelNo']),TriSysPhoneGap['ShowAndActivateSMS'](sFieldPrefix+'personalmobiletelno-sms',CContact['MobileTelNo']));if(CContact['PersonalEMail'])TriSysPhoneGap['ShowAndActivateEMail'](sFieldPrefix+'personalemail',CContact['PersonalEMail']);(CContact['HomeAddressStreet']||CContact['HomeAddressCity'])&&TriSysPhoneGap['ShowAndActivateMap'](sFieldPrefix+'homeaddress',CContact['HomeAddressStreet'],CContact['HomeAddressCity'],CContact['HomeAddressCounty'],CContact['HomeAddressPostCode'],CContact['HomeAddressCountry']);CContact['SkypeNumber']&&(TriSysPhoneGap['ShowAndActivateSkype'](sFieldPrefix+'skype',CContact['SkypeNumber']),$(sFieldPrefix+'skype-table')['show']());if(CContact['CVFileRef']){var sFunction='ContactPhone.OpenCV(\x27'+CContact['CVFileRef']['replace'](/\\/g,'\x5c\x5c')+'\x27,\x20\x27'+CContact['FullName']+'\x20Original\x20CV\x27)';TriSysPhoneGap['ShowAndActivateFunction'](sFieldPrefix+'cvfileref',null,sFunction),$(sFieldPrefix+'cvfileref-lastupdated')['html'](moment(CContact['CVLastUpdated'])['format']('dddd\x20DD\x20MMMM\x20YYYY'));}CContact['FormattedCVs']&&CContact['FormattedCVs']['forEach'](function(CContactFormattedCV){var sFunction='ContactPhone.OpenCV(\x27'+CContactFormattedCV['FormattedCVFileRef']['replace'](/\\/g,'\x5c\x5c')+'\x27,\x20\x27'+CContact['FullName']+'\x20'+CContactFormattedCV['Label']+'\x20CV\x27)';TriSysPhoneGap['ShowAndActivateFunction'](sFieldPrefix+'formattedcvfileref'+CContactFormattedCV['Number'],null,sFunction),$(sFieldPrefix+'formattedcvfileref'+CContactFormattedCV['Number']+'-lastupdated')['html'](moment(CContactFormattedCV['LastUpdated'])['format']('dddd\x20DD\x20MMMM\x20YYYY')),$(sFieldPrefix+'formattedcvfileref'+CContactFormattedCV['Number']+'-label')['html'](CContactFormattedCV['Label']),$(sFieldPrefix+'formattedcvfileref'+CContactFormattedCV['Number']+'-number')['html'](CContactFormattedCV['Number']);});if(CContact['AvailabilityDate']){var dt=new Date(CContact['AvailabilityDate']);dt['getFullYear']()>=0x7ca&&($(sFieldPrefix+'availabilitydate-tr')['show'](),$(sFieldPrefix+'availabilitydate')['html'](moment(dt)['format']('dddd\x20DD\x20MMMM\x20YYYY')));}if(CContact['RequirementCount']>0x0){var sRequirements=CContact['RequirementCount']+'\x20Requirement'+(CContact['RequirementCount']==0x1?'':'s');$(sFieldPrefix+'requirements-table')['show'](),$(sFieldPrefix+'requirementcount')['html'](sRequirements);var sFunction='ContactPhone.LoadRequirements('+CContact['ContactId']+')';TriSysPhoneGap['ShowAndActivateFunction'](sFieldPrefix+'requirements',null,sFunction);}if(CContact['PlacementCount']>0x0){var sPlacements=CContact['PlacementCount']+'\x20Placement'+(CContact['PlacementCount']==0x1?'':'s');$(sFieldPrefix+'placements-table')['show'](),$(sFieldPrefix+'placementcount')['html'](sPlacements);var sFunction='ContactPhone.LoadPlacements('+CContact['ContactId']+')';TriSysPhoneGap['ShowAndActivateFunction'](sFieldPrefix+'placements',null,sFunction);}TriSysApex['BrowserHistory']['Menu']['Add']('Contact',CContact['ContactId'],CContact['FullName']);},'ScrollToTop':function(){$(document['body'])['scrollTop']($('#contact-form-top')['offset']()['top']-0x78);},'EditContact':function(){var options={'IgnorePhoneGap':!![]};TriSysApex['FormsManager']['OpenForm']('Contact',ContactPhone['_ContactId'],!![],options);},'OpenCV':function(sPath,sName){TriSysSDK['Controls']['FileManager']['GetOpenFileURLFromWebService']('TriSys\x20CV\x20Viewer',sPath,sName);},'LoadRequirements':function(lContactId){var sSearchText='{Contact:'+lContactId+'}';TriSysApex['FormsManager']['OpenForm']('Requirements',sSearchText,!![]);},'LoadPlacements':function(lContactId){var sSearchText='{Contact:'+lContactId+'}';TriSysApex['FormsManager']['OpenForm']('Placements',sSearchText,!![]);}};