var ctrlDeveloperToolCodeGenerator={'_FormFileName':null,'_FormName':null,'_HTML':'','_Javascript':'','_Properties':null,'_CodeEditorJavascript':null,'_CodeEditorHTML':null,'PropertySheetID':'ctrlDeveloperToolCodeGenerator-PropertySheet','CodeEditorJavascriptID':'ctrlDeveloperToolCodeGenerator-Javascript-CodeEditor','CodeEditorHTMLID':'ctrlDeveloperToolCodeGenerator-HTML-CodeEditor','Load':function(sFormFileName,sCaption,sHTML,sJavascript,properties){ctrlDeveloperToolCodeGenerator['_FormFileName']=sFormFileName,ctrlDeveloperToolCodeGenerator['_FormName']=TriSysApex['Pages']['FileManagerForm']['FileNameWithoutSuffix'](sFormFileName),ctrlDeveloperToolCodeGenerator['_HTML']=sHTML,ctrlDeveloperToolCodeGenerator['_Javascript']=sJavascript,ctrlDeveloperToolCodeGenerator['_Properties']=properties,ctrlDeveloperToolCodeGenerator['LoadCodeEditors'](sHTML,sJavascript);if(properties&&properties['Configuration']&&properties['Configuration']['PropertySheet'])ctrlDeveloperToolCodeGenerator['PreProcessFieldPropertySheetItems'](properties['Configuration'],properties['Configuration']['PropertySheet']['Items']),ctrlDeveloperToolCodeGenerator['LoadPropertySheet'](properties['Configuration']['PropertySheet']['Items']);else ctrlDeveloperToolCodeGenerator['SetCodeEditorHeight']();},'LoadPropertySheet':function(items){var sPropertySheetID=ctrlDeveloperToolCodeGenerator['PropertySheetID'],propertySheetData={'title':'Properties','propertyColumnName':'Property','valueColumnName':'Settings','categoryColumnHide':!![],'objectList':items,'fieldValueChange':ctrlDeveloperToolCodeGenerator['FieldValueChange']};TriSysApex['PropertySheet']['Draw'](sPropertySheetID,propertySheetData,function(){setTimeout(function(){ctrlPropertySheet['ApplyDefaults'](sPropertySheetID,propertySheetData),ctrlDeveloperToolCodeGenerator['ReplaceCodeInEditorsFromFields'](),ctrlDeveloperToolCodeGenerator['SetCodeEditorHeight']();},0x14);});},'FieldValueChange':function(sCategory,sName,objValue){ctrlDeveloperToolCodeGenerator['ReplaceCodeInEditorsFromFields']();},'ReplaceCodeInEditorsFromFields':function(){var sMergedHTMLCode=ctrlDeveloperToolCodeGenerator['ReplaceFieldsInCode'](ctrlDeveloperToolCodeGenerator['_HTML']);ctrlDeveloperToolCodeGenerator['_CodeEditorHTML']['setValue'](sMergedHTMLCode?sMergedHTMLCode:'');var sMergedJavascriptCode=ctrlDeveloperToolCodeGenerator['ReplaceFieldsInCode'](ctrlDeveloperToolCodeGenerator['_Javascript']);ctrlDeveloperToolCodeGenerator['_CodeEditorJavascript']['setValue'](sMergedJavascriptCode?sMergedJavascriptCode:'');},'ReplaceFieldsInCode':function(sMergedCode){if(sMergedCode){if(typeof ctrlPropertySheet!=='undefined'){var items=ctrlPropertySheet['GetItems'](ctrlDeveloperToolCodeGenerator['PropertySheetID']);if(items){var bInjectedHTML=ctrlDeveloperToolCodeGenerator['PreProcessFieldPropertyItems'](items);items['forEach'](function(item){var sField='{{'+item['Name']+'}}',sValue=item['Value'];if(sValue){if(ctrlDeveloperToolCodeGenerator['isProcessedFieldProperty'](item['Name'],sValue))sValue=ctrlDeveloperToolCodeGenerator['GeneratedFieldPropertyHTML'](item['Name'],sValue);else!bInjectedHTML&&(sValue=$('<span>')['text'](sValue)['html']());}sMergedCode=sMergedCode['replace'](new RegExp(sField,'g'),sValue);});}}sMergedCode=sMergedCode['replace'](new RegExp('{{'+'FormName'+'}}','g'),ctrlDeveloperToolCodeGenerator['_FormName']);}return sMergedCode;},'LoadCodeEditors':function(sHTML,sJavascript){var mode=DeveloperStudio['GetCodeEditorMode'](!![]);ctrlDeveloperToolCodeGenerator['_CodeEditorHTML']=DeveloperStudio['ConvertDivToCodeEditor'](ctrlDeveloperToolCodeGenerator['CodeEditorHTMLID'],sHTML,mode);var sBorderColour=TriSysProUI['GroupBorderColour']();$('#'+ctrlDeveloperToolCodeGenerator['CodeEditorHTMLID'])['css']('border','1px\x20solid\x20'+sBorderColour),mode=DeveloperStudio['GetCodeEditorMode'](![]),ctrlDeveloperToolCodeGenerator['_CodeEditorJavascript']=DeveloperStudio['ConvertDivToCodeEditor'](ctrlDeveloperToolCodeGenerator['CodeEditorJavascriptID'],sJavascript,mode),$('#'+ctrlDeveloperToolCodeGenerator['CodeEditorJavascriptID'])['css']('border','1px\x20solid\x20'+sBorderColour),$('#'+ctrlDeveloperToolCodeGenerator['CodeEditorJavascriptID'])['css']('border-radius','8px'),$('#'+ctrlDeveloperToolCodeGenerator['CodeEditorHTMLID'])['css']('border-radius','8px');},'SetCodeEditorHeight':function(){var iPropertySheetHeight=0x0,iHeightFactor=0x15e;ctrlDeveloperToolCodeGenerator['_Properties']&&(iPropertySheetHeight=$('#'+ctrlDeveloperToolCodeGenerator['PropertySheetID']+'-ctrlPropertySheet-Root')['height'](),iHeightFactor=0x186);var lHeight=window['innerHeight']-iHeightFactor-iPropertySheetHeight;$('#'+ctrlDeveloperToolCodeGenerator['CodeEditorJavascriptID'])['height'](lHeight),ctrlDeveloperToolCodeGenerator['_CodeEditorJavascript']['setSize']('100%',lHeight),ctrlDeveloperToolCodeGenerator['_CodeEditorJavascript']['refresh'](),$('#'+ctrlDeveloperToolCodeGenerator['CodeEditorJavascriptID'])['children'](':first')['css']('border-radius','8px'),$('#'+ctrlDeveloperToolCodeGenerator['CodeEditorHTMLID'])['height'](lHeight),ctrlDeveloperToolCodeGenerator['_CodeEditorHTML']['setSize']('100%',lHeight),ctrlDeveloperToolCodeGenerator['_CodeEditorHTML']['refresh'](),$('#'+ctrlDeveloperToolCodeGenerator['CodeEditorHTMLID'])['children'](':first')['css']('border-radius','8px');},'GetCode':function(bGetJavascriptCode){if(bGetJavascriptCode)return ctrlDeveloperToolCodeGenerator['_CodeEditorJavascript']['getValue']();else return ctrlDeveloperToolCodeGenerator['_CodeEditorHTML']['getValue']();},'PreProcessFieldPropertySheetItems':function(configuration,items){switch(ctrlDeveloperToolCodeGenerator['_Properties']['FileName']){case'Grid-Web-API.json':configuration['Functions']&&items['forEach'](function(item){if(item['Name']=='Function'){var lstFunctions=[];configuration['Functions']['forEach'](function(objFunction){var bAddFunction=!![],bRecruitmentDatabase=TriSysAPI['Operators']['stringToBoolean'](TriSysApex['Cache']['UserSettingManager']['GetValue']('RecruitmentDatabase',![]));if(objFunction['RecruitmentDatabaseOnly'])bAddFunction=bRecruitmentDatabase;if(objFunction['SpecificDatabasesOnly']){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials'](),sCurrentDatabase=userCredentials['Database'];bAddFunction=objFunction['SpecificDatabasesOnly']['indexOf'](sCurrentDatabase)>=0x0;}if(bAddFunction)lstFunctions['push'](objFunction['Function']);}),item['List']=lstFunctions;}});return!![];}},'PreProcessFieldPropertyItems':function(items){switch(ctrlDeveloperToolCodeGenerator['_Properties']['FileName']){case'RowBlocks.json':ctrlDeveloperToolCodeGenerator['AppendRowBlocksItems'](items);return!![];case'Rows.json':ctrlDeveloperToolCodeGenerator['AppendRowsItems'](items);return!![];case'Grid-Web-API.json':ctrlDeveloperToolCodeGenerator['AppendWebAPIItems'](items);}return![];},'_lstColumnSizeMatrix':[{'num':0x1,'cols':[0xc]},{'num':0x2,'cols':[0x6,0x6]},{'num':0x3,'cols':[0x4,0x4,0x4]},{'num':0x4,'cols':[0x3,0x3,0x3,0x3]},{'num':0x5,'cols':[0x3,0x2,0x3,0x2,0x2]},{'num':0x6,'cols':[0x2,0x2,0x2,0x2,0x2,0x2]},{'num':0x7,'cols':[0x1,0x2,0x2,0x2,0x2,0x2,0x1]},{'num':0x8,'cols':[0x2,0x1,0x2,0x1,0x2,0x1,0x2,0x1]},{'num':0x9,'cols':[0x1,0x1,0x2,0x1,0x2,0x1,0x2,0x1,0x1]},{'num':0xa,'cols':[0x2,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x2]},{'num':0xb,'cols':[0x2,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1]},{'num':0xc,'cols':[0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1,0x1]}],'AppendRowBlocksItems':function(items){var iNumberOfBlocks=0x0,sColumnSize=null;items['forEach'](function(item){if(item['Name']=='Number\x20of\x20Blocks')iNumberOfBlocks=parseInt(item['Value']);if(item['Name']=='Column\x20Size')sColumnSize=item['Value'];});var col=ctrlDeveloperToolCodeGenerator['_lstColumnSizeMatrix'][iNumberOfBlocks-0x1],sHTML='';col['cols']['forEach'](function(column){var sCol='col-'+sColumnSize+'-'+column;sHTML+='\x09\x09<div\x20class=\x22'+sCol+'\x22>\x0a'+'\x09\x09\x09'+'<div\x20class=\x22block\x22><p><code>'+sCol+'</code></p></div>\x0a'+'\x09\x09</div>\x0a';});var newItem={'Name':'RowBlocks','Value':sHTML};items['push'](newItem);},'AppendRowsItems':function(items){var iNumberOfRows=0x0,iNumberOfColumns=0x0,sColumnSize=null;items['forEach'](function(item){if(item['Name']=='Number\x20of\x20Rows')iNumberOfRows=parseInt(item['Value']);if(item['Name']=='Number\x20of\x20Columns')iNumberOfColumns=parseInt(item['Value']);if(item['Name']=='Column\x20Size')sColumnSize=item['Value'];});var col=ctrlDeveloperToolCodeGenerator['_lstColumnSizeMatrix'][iNumberOfColumns-0x1],sHTML='';for(var i=0x0;i<iNumberOfRows;i++){sHTML+='\x09'+'<div\x20class=\x22row\x22>'+'\x0a',col['cols']['forEach'](function(column){var sCol='col-'+sColumnSize+'-'+column;sHTML+='\x09\x09<div\x20class=\x22'+sCol+'\x22>\x0a'+'\x09\x09\x09'+'<p><code>'+sCol+'</code></p>\x0a'+'\x09\x09</div>\x0a';}),sHTML+='\x09</div>\x0a';}var newItem={'Name':'Rows','Value':sHTML};items['push'](newItem);},'AppendWebAPIItems':function(items){var sFunction=null;items['forEach'](function(item){if(item['Name']=='Function')sFunction=item['Value'];});var CWebAPICodeGeneratorRequest={'Function':sFunction},payloadObject={};payloadObject['URL']='DeveloperStudio/WebAPICodeGenerator',payloadObject['OutboundDataPacket']=CWebAPICodeGeneratorRequest,payloadObject['Asynchronous']=![];var CWebAPICodeGeneratorResponse=null;payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait'](),CWebAPICodeGeneratorResponse=data;},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlDeveloperToolCodeGenerator.AppendWebAPIItems:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Reading\x20Web\x20API...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);if(CWebAPICodeGeneratorResponse&&CWebAPICodeGeneratorResponse['Success']){if(!CWebAPICodeGeneratorResponse['ParametersAssignments'])CWebAPICodeGeneratorResponse['ParametersAssignments']='';var parametersItem={'Name':'ParametersRequestAssignments','Value':CWebAPICodeGeneratorResponse['ParametersAssignments']};items['push'](parametersItem);var sColumns='[\x0a',iColumnCount=0x0;CWebAPICodeGeneratorResponse['Columns']['forEach'](function(column){iColumnCount+=0x1;var sHidden=iColumnCount>0xa?'true':'false',sFormat=column['format']?',\x20format:\x20\x22'+column['format']+'\x22':'';sColumns+=iColumnCount>0x1?',\x0a':'',sColumns+='\x09\x09\x09'+'{field:\x20\x22'+column['field']+'\x22,\x20title:\x20\x22'+column['title']+'\x22,\x20type:\x20\x22'+column['type']+'\x22'+sFormat+',\x20width:\x2070,\x20hidden:\x20'+sHidden+'}';}),sColumns+='\x0a\x09\x09]';var columnsItem={'Name':'Columns','Value':sColumns};items['push'](columnsItem);var firstColumnItem={'Name':'FirstGridField','Value':CWebAPICodeGeneratorResponse['Columns'][0x0]['field']};items['push'](firstColumnItem);}},'isProcessedFieldProperty':function(sPropertyName,sValue){var sHTML=ctrlDeveloperToolCodeGenerator['GeneratedFieldPropertyHTML'](sPropertyName,sValue);return sHTML?!![]:![];},'GeneratedFieldPropertyHTML':function(sPropertyName,sValue){switch(ctrlDeveloperToolCodeGenerator['_Properties']['FileName']){case'Row.json':switch(sPropertyName){case'Field':return ctrlDeveloperToolCodeGenerator['FieldHTMLFromType'](sValue);}break;}},'FieldHTMLFromType':function(sType){var sProperties='',sID=ctrlDeveloperToolCodeGenerator['_FormName']+'-field-'+sType+'-'+TriSysSDK['Miscellaneous']['RandomNumber'](0x2710,0xf423f);sType='\x20type=\x22'+sType+'\x22';var sHTML='<trisys-field\x20id=\x22'+sID+'\x22\x20'+sType+'\x20'+sProperties+'></trisys-field>';return sHTML;}};