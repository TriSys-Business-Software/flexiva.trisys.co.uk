var TriSysRedirect={'Load':function(sAPIKey,sAPIurl){var sURL=window['location']['href'];try{TriSysRedirect['Process'](sURL,sAPIKey,sAPIurl);}catch(e){$('#preloader-app-name')['html'](TriSysApex['Logging']['CatchVariableToText'](e));}},'Process':function(sURL,sAPIKey,sAPIurl){var sLoadingMessage=null,parts=sURL['split']('.html?');if(!parts||parts['length']==0x0||parts['length']==0x1)sLoadingMessage='No\x20redirection\x20specified.';else{var sSiteURL=parts[0x0],sParameters=parts[0x1],sSubDomain=null,sSitePartsDots=sSiteURL['split']('.');sSubDomain=sSitePartsDots[0x0]['replace']('http://','')['replace']('https://','');var sCustomerID=TriSysRedirect['GetCustomerIDForSubDomain'](sSubDomain),sRedirect='redirect=',iRedirect=sParameters['toLowerCase']()['indexOf'](sRedirect);if(iRedirect<0x0)sLoadingMessage='No\x20redirection\x20specified.';else{var sRedirectURL=sParameters['substring'](iRedirect+sRedirect['length']);sParameters=sParameters['substring'](0x0,iRedirect-0x1);var sGUID=null,sAction=null,sKeyword=null,sRef='ref=',iRef=sParameters['toLowerCase']()['indexOf'](sRef);if(iRef>=0x0)sGUID=sParameters['substring'](iRef+sRef['length']);else{var sActionArg='action=',iAction=sParameters['toLowerCase']()['indexOf'](sActionArg);if(iAction>=0x0)sAction=sParameters['substring'](iAction+sActionArg['length']);}sLoadingMessage=sRedirectURL,TriSysApex['Constants']['DeveloperSiteKey']=sAPIKey,TriSysAPI['Session']['SetDeveloperSiteKey'](TriSysApex['Constants']['DeveloperSiteKey']);if(sAPIurl)TriSysAPI['Constants']['SecureURL']=sAPIurl;var CRedirectorRequest={'URL':sURL,'GUID':sGUID,'CustomerID':sCustomerID,'Action':sAction,'RedirectURL':sRedirectURL};TriSysRedirect['LogRedirectionRequestInWebAPI'](CRedirectorRequest);}}if(sLoadingMessage)$('#preloader-app-name')['html'](sLoadingMessage);setTimeout(function(){window['location']['href']=sRedirectURL;},0x64);},'GetCustomerIDForSubDomain':function(sSubDomain){switch(sSubDomain){case'www':case TriSysApex['Copyright']['ShortProductName']['toLowerCase']():return null;}var partner=TriSysApex['WhiteLabelling']['Partner'](sSubDomain,'../configuration/');if(!partner)return null;var sCustomerID=partner['CustomFolder'];return sCustomerID;},'LogRedirectionRequestInWebAPI':function(CRedirectorRequest){var payloadObject={};payloadObject['URL']='Redirector/Logging',payloadObject['OutboundDataPacket']=CRedirectorRequest,payloadObject['InboundDataFunction']=function(CRedirectorResponse){if(CRedirectorResponse){if(CRedirectorResponse['Success'])$('#preloader-app-name')['html'](CRedirectorRequest['RedirectURL']);else TriSysApex['Logging']['LogMessage'](CRedirectorResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['Logging']['LogMessage']('TriSysRedirect.LogRedirectionRequestInWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};