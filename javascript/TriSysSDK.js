var TriSysSDK={'Copyright':{'AllRightsReserved':'TriSys\x20Business\x20Software'},'Grid':{'VirtualMode':function(gridLayout){if(!gridLayout)return;TriSysSDK['Grid']['ReCreateInDOM'](gridLayout['Div']);if(!gridLayout['PopulationByObject']&&!gridLayout['PopulationByFunction']&&!gridLayout['PopulationByObjectRefreshCallback']){TriSysApex['UI']['errorAlert']('No\x20.PopulationByObject\x20or\x20.PopulationByFunction\x20or\x20.PopulationByObjectRefreshCallback\x20parameter.');return;}TriSysSDK['Grid']['Persistence']['RememberGridLayout'](gridLayout);var sJQueryGridDiv='#'+gridLayout['Div'];TriSysSDK['Grid']['WaitSpinnerMode'](gridLayout,!![]);if(gridLayout['Columns'])gridLayout['Columns']=JSON['parse'](JSON['stringify'](gridLayout['Columns']));TriSysSDK['Grid']['Custom']['idFieldHandling'](gridLayout),TriSysSDK['Grid']['InjectDynamicColumns'](gridLayout,gridLayout['Columns']),TriSysSDK['Grid']['AddCheckBoxForMultiRowSelect'](gridLayout),TriSysSDK['Grid']['AddRowOpenButtonForTouchDeviceSupport'](gridLayout),TriSysSDK['Grid']['AddRowLinkedInButton'](gridLayout),TriSysSDK['Grid']['AddRowPreviewButton'](gridLayout),TriSysSDK['Grid']['ClearCheckedRows'](gridLayout['Div']);var pagingDataSource=null;try{pagingDataSource=TriSysSDK['Grid']['ServerPagingDataSource'](gridLayout,sJQueryGridDiv);}catch(e){TriSysApex['Logging']['LogMessage']('TriSysSDK.Grid.VirtualMode:\x20'+TriSysApex['Logging']['CatchVariableToText'](e));}var fnPersistedGridColumns=function(){if(pagingDataSource&&sJQueryGridDiv!='#divModalSelectionGrid'){var displayColumns=TriSysSDK['Grid']['Custom']['DisplayColumns'](gridLayout);if(gridLayout['PersistColumnLayout']||TriSysAPI['Operators']['isEmpty'](gridLayout['PersistColumnLayout'])){var fnReadColumns=function(cachedColumns){TriSysSDK['Grid']['VirtualModePostPersistedColumnsDetermination'](pagingDataSource,gridLayout,sJQueryGridDiv,cachedColumns);};TriSysSDK['Grid']['Persistence']['ReadColumns'](sJQueryGridDiv,displayColumns,fnReadColumns);return;}}TriSysSDK['Grid']['VirtualModePostPersistedColumnsDetermination'](pagingDataSource,gridLayout,sJQueryGridDiv);};fnPersistedGridColumns();},'VirtualModePostPersistedColumnsDetermination':function(pagingDataSource,gridLayout,sJQueryGridDiv,cachedColumns){if(pagingDataSource)TriSysSDK['Grid']['InitialisePagingGridFromDataSource'](pagingDataSource,gridLayout,sJQueryGridDiv,cachedColumns);TriSysSDK['Grid']['ResizingEventHandler'](gridLayout,sJQueryGridDiv),TriSysSDK['Grid']['CustomGridColumnTemplates']['SlimeyHacksToOvercomeGridLimitations'](gridLayout,sJQueryGridDiv);},'ReCreateInDOM':function(sDiv){var gridDOMelement=$('#'+sDiv),sNewGrid='<div\x20id=\x22'+sDiv+'\x22\x20style=\x22border-width:\x201px;\x20width:\x20100%;\x20margin-bottom:\x2020px;\x22></div>';gridDOMelement['unbind']()['empty']()['replaceWith'](sNewGrid);},'WaitSpinnerName':function(gridLayout){var sSpinnerID=gridLayout['Div']+'-wait-spinner';return sSpinnerID;},'WaitSpinnerMode':function(gridLayout,bStart){var sJQueryGridDiv='#'+gridLayout['Div'],sSpinnerID=TriSysSDK['Grid']['WaitSpinnerName'](gridLayout);if(bStart){var sSpinnerHTML='<div\x20id=\x22'+sSpinnerID+'\x22></div>';$(sSpinnerHTML)['insertBefore'](sJQueryGridDiv),TriSysSDK['WaitSpinner']['Load'](sSpinnerID,0x12c),$(sJQueryGridDiv)['hide']();}else{var iWaitMilliseconds=0x5;setTimeout(function(){$('#'+sSpinnerID)['remove']();},iWaitMilliseconds),setTimeout(function(){var ctlGrid=$(sJQueryGridDiv);ctlGrid['show']();},iWaitMilliseconds);}},'ServerPagingDataSource':function(gridLayout,sJQueryGridDiv){var bPopulationByObjectOrCallback=gridLayout['PopulationByObject']||gridLayout['PopulationByObjectRefreshCallback'],bServerPaging=bPopulationByObjectOrCallback?![]:!![],bServerFiltering=bServerPaging,bServerSorting=bServerPaging,bServerAggregates=bPopulationByObjectOrCallback?![]:!![],iNumberOfRecordsPerPage=TriSysApex['UserOptions']['RecordsPerPage'](),aggregate=null;if(gridLayout['Aggregate'])aggregate=gridLayout['Aggregate'];var fields=[];gridLayout['Columns']&&$['each'](gridLayout['Columns'],function(index,column){if(column['field']){var field={'field':column['field'],'type':column['type']};if(column['width']>=0x0)field['width']=column['width'];fields['push'](field);}});var sGridModelId=gridLayout['Div']['replace'](/-/g,'_')+(gridLayout['KeyColumnName']?'_'+gridLayout['KeyColumnName']:''),dataSourceConfiguration={'transport':{'read':function(options){var jqueryGrid=$(sJQueryGridDiv);iNumberOfRecordsPerPage=TriSysSDK['Grid']['PageChanged'](null,gridLayout);if(gridLayout['PopulationByObject']||gridLayout['PopulationByObjectRefreshCallback']){var fnNotifyGridOfData=function(data){if(!gridLayout['Data'])gridLayout['Data']={};gridLayout['Data']['totalRecordCount']=data['length'];var inMemorySuccessData={'dataTable':data,'totalRecordCount':data['length']};options['success'](inMemorySuccessData);if(TriSysSDK['Grid']['_ExportingToExcel']){var fnAllowExportToComplete=function(){TriSysSDK['Grid']['_ExportingToExcel']=![],TriSysApex['UI']['HideWait']();var bSelectAllMode=TriSysSDK['Grid']['isGridInSelectAllRowsInGridMode'](gridLayout);bSelectAllMode&&(gridLayout['Data']['SelectAllMode']=![],TriSysSDK['Grid']['SelectAllRowsInGridModeStart'](gridLayout,![]));};setTimeout(fnAllowExportToComplete,0x3e8);}else TriSysSDK['Grid']['WaitSpinnerMode'](gridLayout,![]);},myInMemoryDataTable=gridLayout['PopulationByObject'];if(gridLayout['PopulationByObjectRefreshCallback'])gridLayout['PopulationByObjectRefreshCallback'](function(data){fnNotifyGridOfData(data);});else fnNotifyGridOfData(myInMemoryDataTable);}else{if(gridLayout['PopulationByFunction']){kendo['ui']['progress'](jqueryGrid,!![]);var filtering=TriSysSDK['Grid']['GetFilteringCollection'](gridLayout,options,sJQueryGridDiv),sorting=TriSysSDK['Grid']['GetSortingCollection'](gridLayout,options,sJQueryGridDiv);TriSysSDK['Grid']['_ExportingToExcel']&&(options['data']['page']=0x1,iNumberOfRecordsPerPage=0x400*0xa);var dataPacketForFunction={'Filtering':filtering,'Sorting':sorting,'PageNumber':options['data']['page'],'RecordsPerPage':iNumberOfRecordsPerPage};if(gridLayout['PopulationByFunction']['Parameters'])gridLayout['PopulationByFunction']['Parameters'](dataPacketForFunction);var payloadObject={};payloadObject['URL']=gridLayout['PopulationByFunction']['API'],payloadObject['OutboundDataPacket']=dataPacketForFunction,payloadObject['Asynchronous']=!![],payloadObject['InboundDataFunction']=function(response){kendo['ui']['progress']($('#'+gridLayout['Div']),![]);if(response){if(response['Success']&&gridLayout['PopulationByFunction']['DataTableFunction']){var myDataTable=gridLayout['PopulationByFunction']['DataTableFunction'](response);if(!gridLayout['Data'])gridLayout['Data']={};gridLayout['Data']['totalRecordCount']=response['TotalRecordCount'];var successData={'dataTable':myDataTable,'totalRecordCount':response['TotalRecordCount']};gridLayout['TriSysPopulatingGridSoIgnoreUntilComplete']=response;try{options['success'](successData);}catch(e){var sError=TriSysApex['Logging']['CatchVariableToText'](e);TriSysApex['Logging']['LogMessage'](sError);}gridLayout['TriSysPopulatingGridSoIgnoreUntilComplete']=![],TriSysSDK['Grid']['RestoreCapturedCheckedRowsOnThisPage'](gridLayout);if(gridLayout['PostPopulationCallback'])gridLayout['PostPopulationCallback'](response['TotalRecordCount']);if(TriSysSDK['Grid']['_ExportingToExcel']){TriSysSDK['Grid']['_ExportingToExcel']=![];var fnRefreshGridWithOriginalPageSize=function(){TriSysSDK['Grid']['RefreshData'](gridLayout['Div']),TriSysApex['UI']['HideWait']();var bSelectAllMode=TriSysSDK['Grid']['isGridInSelectAllRowsInGridMode'](gridLayout);bSelectAllMode&&(gridLayout['Data']['SelectAllMode']=![],TriSysSDK['Grid']['SelectAllRowsInGridModeStart'](gridLayout,![]));};setTimeout(fnRefreshGridWithOriginalPageSize,0x3e8);}}else{TriSysSDK['Grid']['WaitSpinnerMode'](gridLayout,![]);if(response['AICriteria']&&response['AICriteria']['ShowErrorMessage']){const sAIError=response['ErrorMessage'];TriSysApex['UI']['ShowError'](sAIError,'AI\x20Error');return;}TriSysApex['Toasters']['Error'](response['ErrorMessage']);}}},payloadObject['ErrorHandlerFunction']=function(request,status,error){var sError='TriSysSDK.Grid.ServerPagingDataSource:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText'],bTimeout=![];if(status)bTimeout=status=='timeout';if(bTimeout){var sPoliteError='Your\x20data\x20failed\x20to\x20arrive\x20from\x20the\x20server\x20in\x20sufficient\x20time.'+'<br>'+'This\x20may\x20be\x20because\x20the\x20server\x20was\x20too\x20busy\x20to\x20process\x20your\x20request.'+'<br>'+'Please\x20try\x20again\x20or\x20simplify\x20your\x20query.';TriSysApex['UI']['errorAlert'](sPoliteError);}TriSysApex['Logging']['LogMessage'](sError),TriSysSDK['Grid']['WaitSpinnerMode'](gridLayout,![]);};if(gridLayout['TriSysPopulatingGridSoIgnoreUntilComplete']&&gridLayout['PopulationByFunction']){var response=gridLayout['TriSysPopulatingGridSoIgnoreUntilComplete'];payloadObject['InboundDataFunction'](response);return;}if(!gridLayout['Data'])gridLayout['Data']={};gridLayout['Data']['WebAPIPayload']=payloadObject,TriSysAPI['Data']['PostToWebAPI'](payloadObject);}else{TriSysApex['UI']['errorAlert']('TriSysSDK.Grid.ServerPagingDataSource:\x20Deprecated\x20.SQL\x20property.');return;}}}},'schema':{'model':{'id':sGridModelId,'fields':fields},'total':'totalRecordCount','data':'dataTable'},'serverPaging':bServerPaging,'serverFiltering':bServerFiltering,'serverSorting':bServerSorting,'pageSize':iNumberOfRecordsPerPage,'aggregate':aggregate,'serverAggregates':bServerAggregates,'error':function(e){console['log'](e['errors']);}};gridLayout['ColumnFilterText']&&(dataSourceConfiguration['filter']=[{'field':gridLayout['KeyColumnName'],'operator':'startswith','value':gridLayout['ColumnFilterText']}]);var dataSource=null;if(bPopulationByObjectOrCallback)dataSource=dataSourceConfiguration;else dataSource=new kendo['data']['DataSource'](dataSourceConfiguration);return dataSource;},'ParseFilteringSQL':function(sSQL,gridLayout,options,sJQueryGridDiv){var sWhere='',ctlGrid=$(sJQueryGridDiv)['data']('kendoGrid');if(typeof options['data']['filter']!='undefined'){if(options['data']['filter']){var myFilters=options['data']['filter']['filters'],sInterFilterLogic='\x20AND\x20';if(typeof options['data']['filter']['logic']!='undefined')sInterFilterLogic='\x20'+options['data']['filter']['logic']+'\x20';if(myFilters['length']>0x0)for(var i=0x0;i<myFilters['length'];i++){var sWhereOperation='',filter=myFilters[i],sLogic=null;if(typeof filter['logic']!='undefined')sLogic=filter['logic'];if(sLogic){var filter1=filter['filters'][0x0],filter2=filter['filters'][0x1];sWhereOperation='('+TriSysSDK['Grid']['Filtering']['FieldOperatorValueToSQL'](ctlGrid,filter1['field'],filter1['operator'],filter1['value'])+'\x20'+sLogic+'\x20'+TriSysSDK['Grid']['Filtering']['FieldOperatorValueToSQL'](ctlGrid,filter2['field'],filter2['operator'],filter2['value'])+')';}else sWhereOperation=TriSysSDK['Grid']['Filtering']['FieldOperatorValueToSQL'](ctlGrid,filter['field'],filter['operator'],filter['value']);if(sWhere!='')sWhere+=sInterFilterLogic;sWhere+=sWhereOperation;}}if(sWhere!=''){var bExistingWhereClause=sSQL['toLowerCase']()['indexOf']('where')>=0x0,sWhereAnd=bExistingWhereClause?'\x20And\x20':'\x20Where\x20',sOrderBy='order\x20by',iOrderByIndex=sSQL['toLowerCase']()['indexOf'](sOrderBy),bOrderByClause=iOrderByIndex>0x0;if(bOrderByClause)sSQL=sSQL['substring'](0x0,iOrderByIndex-0x1)+sWhereAnd+sWhere+sSQL['substring'](iOrderByIndex);else sSQL+=sWhereAnd+sWhere;}}return sSQL;},'GetFilteringCollection':function(gridLayout,options,sJQueryGridDiv){var filterCollection=[],ctlGrid=$(sJQueryGridDiv)['data']('kendoGrid');if(typeof options['data']['filter']!='undefined'){if(options['data']['filter']){var myFilters=options['data']['filter']['filters'],sInterFilterLogic='\x20AND\x20';if(typeof options['data']['filter']['logic']!='undefined')sInterFilterLogic='\x20'+options['data']['filter']['logic']+'\x20';if(myFilters['length']>0x0)for(var i=0x0;i<myFilters['length'];i++){var sWhereOperation='',filter=myFilters[i],sLogic=null;if(typeof filter['logic']!='undefined')sLogic=filter['logic'];if(sLogic){var filter1=filter['filters'][0x0],filter2=filter['filters'][0x1];sWhereOperation='('+TriSysSDK['Grid']['Filtering']['FieldOperatorValueToSQL'](ctlGrid,filter1['field'],filter1['operator'],filter1['value'])+'\x20'+sLogic+'\x20'+TriSysSDK['Grid']['Filtering']['FieldOperatorValueToSQL'](ctlGrid,filter2['field'],filter2['operator'],filter2['value'])+')';}else sWhereOperation=TriSysSDK['Grid']['Filtering']['FieldOperatorValueToSQL'](ctlGrid,filter['field'],filter['operator'],filter['value']);filterCollection['push'](sWhereOperation);}}}return filterCollection;},'GetSortingCollection':function(gridLayout,options){var sortCollection=[];if(options['data']['sort']){var sort=options['data']['sort'];if(sort['length']>0x0)for(var i=0x0;i<sort['length'];i++){var sSort=options['data']['sort'][i]['field']+'\x20'+options['data']['sort'][i]['dir'];sortCollection['push'](sSort);}}return sortCollection;},'InitialisePagingGridFromDataSource':function(pagingDataSource,gridLayout,sJQueryGridDiv,cachedColumns){var iVCRButtonCount=0x14,bRefresh=!![],bNumeric=!![],bGroupable=!![],bResizeable=!![],bColumnMenu=!![],bSettingDataSource=!![],bPersistSelection=![];if(!TriSysAPI['Operators']['isEmpty'](gridLayout['ColumnMenu']))bColumnMenu=gridLayout['ColumnMenu'];var jsonColumnFilters=![],bColumnFilters=!![],bColumnFilterExplicitlySet=![];!TriSysAPI['Operators']['isEmpty'](gridLayout['ColumnFilters'])&&(bColumnFilters=gridLayout['ColumnFilters'],bColumnFilterExplicitlySet=!![]);jsonColumnFilters={'string':{'startswith':'Starts\x20with','contains':'Contains','eq':'Is\x20equal\x20to','endswith':'Ends\x20with','doesnotcontain':'Does\x20not\x20contain','neq':'Is\x20not\x20equal\x20to'}},bGroupable=TriSysSDK['Grid']['Grouping']['Groupable'](gridLayout['Div']);var objSortable={'mode':'multiple','allowUnsort':!![]};if(!TriSysAPI['Operators']['isEmpty'](gridLayout['Sortable'])){if(!gridLayout['Sortable'])objSortable=![];}var objFilterable={'mode':TriSysSDK['Grid']['Filtering']['Mode'](gridLayout['Div']),'extra':![],'operators':jsonColumnFilters};if(gridLayout['ModalGridFiltering'])objColumnMenu={'filterable':![]};if(!bColumnFilters&&bColumnFilterExplicitlySet)objFilterable=![];var gridEditable=![];gridLayout['Editable']&&(gridEditable=gridLayout['Editable']);var objSelectable=null;if(!TriSysAPI['Operators']['isEmpty'](gridLayout['SingleRowSelect']))objSelectable=gridLayout['SingleRowSelect']?'row':null;if(gridLayout['MultiRowSelect'])objSelectable='multiple';if(!objSelectable)objSelectable='row';var rowsName='rows';if(!TriSysAPI['Operators']['isEmpty'](gridLayout['RecordType']))rowsName=gridLayout['RecordType'];if(gridLayout['PopulationByObject'])bRefresh=![];TriSysApex['Device']['isPhone']()&&(bRefresh=![],bNumeric=![],bGroupable=![],objColumnMenu=![]);var bHorizontalScrolling=!![],ctlGrid=$(sJQueryGridDiv);try{var bEmptyGrid=![];if(bEmptyGrid)TriSysSDK['Grid']['Empty'](sJQueryGridDiv);}catch(err){}var fnOnChangeEvent=TriSysSDK['Grid']['DoubleClickHandler']['OnChangeEvent'];if(gridLayout['RowClickHandler'])fnOnChangeEvent=gridLayout['RowClickHandler'];var displayColumns=TriSysSDK['Grid']['Custom']['DisplayColumns'](gridLayout);if(sJQueryGridDiv!='#divModalSelectionGrid'){if(gridLayout['PersistColumnLayout']||TriSysAPI['Operators']['isEmpty'](gridLayout['PersistColumnLayout']))displayColumns=cachedColumns;}var iNumberOfRecordsPerPage=TriSysApex['UserOptions']['RecordsPerPage'](),bPageable_Input=!![];if(!TriSysAPI['Operators']['isEmpty'](gridLayout['PageSelector']))bPageable_Input=TriSysAPI['Operators']['stringToBoolean'](gridLayout['PageSelector'],!![]);var lstPageSizes=[0x5,0xa,0xf,0x14,0x19,0x1e,0x32,0x64];if(!TriSysAPI['Operators']['isEmpty'](gridLayout['PageSizeSelector'])){if(!TriSysAPI['Operators']['stringToBoolean'](gridLayout['PageSizeSelector'],!![]))lstPageSizes=![];}var bPhone=TriSysApex['Device']['isPhone'](),sPageXofYDisplay=bPhone?'':'{0:##,#}\x20\x20to\x20\x20{1:##,#}\x20\x20of\x20\x20{2:##,#}\x20\x20'+rowsName,sPageNDisplay=bPhone?'':'of\x20{0:##,#}',sPageItemsCountDisplay=bPhone?'':rowsName+'\x20per\x20page',sPosition=TriSysApex['UserOptions']['GridPosition']();if(sPosition=='both')sPosition='bottom';var kendoGridOptions={'columns':displayColumns,'editable':gridEditable,'pageable':{'input':bPageable_Input,'info':!![],'buttonCount':0x0,'refresh':bRefresh,'numeric':![],'messages':{'display':sPageXofYDisplay,'of':sPageNDisplay,'itemsPerPage':sPageItemsCountDisplay,'empty':'No\x20'+rowsName},'alwaysVisible':!![],'pageSizes':lstPageSizes,'pageSize':iNumberOfRecordsPerPage,'change':function(e){TriSysSDK['Grid']['PageChanged'](e,gridLayout);},'position':sPosition},'selectable':objSelectable,'change':function(e){if(TriSysSDK['Grid']['_SettingRowByColumnValue'])return;TriSysSDK['Grid']['CaptureCheckedRowsInThisPageOnChangeEvent'](gridLayout);if(fnOnChangeEvent)fnOnChangeEvent(e,this,gridLayout);},'sortable':objSortable,'filterable':objFilterable,'filterMenuInit':function(e){$(e['container'])['css']('width','300px');},'resizable':bResizeable,'reorderable':!![],'groupable':bGroupable,'group':function(e){var gridColumns=e['sender']['columns'],groups=e['groups'];for(var i=0x0;i<gridColumns['length'];i++){var column=gridColumns[i];if(!column['hidden'])e['sender']['showColumn'](column);for(var j=0x0;j<groups['length'];j++){if(groups[j]['field']===column['field']){e['sender']['hideColumn'](column);break;}}}},'scrollable':bHorizontalScrolling,'persistSelection':bPersistSelection,'columnMenu':bColumnMenu,'columnShow':function(e){TriSysSDK['Grid']['Persistence']['ColumnVisibility'](!![],e,sJQueryGridDiv);},'columnHide':function(e){TriSysSDK['Grid']['Persistence']['ColumnVisibility'](![],e,sJQueryGridDiv);},'columnReorder':function(e){TriSysSDK['Grid']['Persistence']['ColumnReOrder'](e,sJQueryGridDiv);},'columnResize':function(e){TriSysSDK['Grid']['Persistence']['ColumnResize'](e,sJQueryGridDiv,gridLayout);},'dataBound':onDataBound,'excelExport':function(e){TriSysSDK['Grid']['ExcelExportFileName'](e,gridLayout);},'sort':function(e){TriSysSDK['Grid']['Persistence']['Sorting']['SortEvent'](e,gridLayout);}},bPopulationByObjectOrCallback=gridLayout['PopulationByObject']||gridLayout['PopulationByObjectRefreshCallback']?!![]:![];!bPopulationByObjectOrCallback?(TriSysSDK['Grid']['InjectDynamicColumns'](gridLayout,displayColumns),TriSysSDK['Grid']['CustomGridColumnTemplates']['Apply'](displayColumns,gridLayout['Div']),kendoGridOptions['columns']=displayColumns):TriSysSDK['Grid']['CustomGridColumnTemplates']['Apply'](displayColumns,gridLayout['Div']);gridLayout['MultiRowSelect']&&gridLayout['KeyColumnName']&&(kendoGridOptions['dataSource']=pagingDataSource);var bDataSourceLoadedOnGridInstantiation=![];gridLayout['Aggregate']&&gridLayout['PopulationByObject']&&(kendoGridOptions['dataSource']=pagingDataSource,bDataSourceLoadedOnGridInstantiation=!![]);TriSysSDK['Grid']['HyperlinkedColumns']['Register'](gridLayout,displayColumns);try{ctlGrid['kendoGrid'](kendoGridOptions);}catch(e){var sErrorMessage=TriSysApex['Logging']['CatchVariableToText'](e);lstIgnoreError=['Cannot\x20read\x20property\x20\x27id\x27\x20of\x20undefined'];if(lstIgnoreError['indexOf'](sErrorMessage)<0x0)TriSysApex['UI']['errorAlert'](sErrorMessage);}var kendoGridInstance=$(sJQueryGridDiv)['data']('kendoGrid');if(!kendoGridInstance){TriSysApex['Logging']['LogMessage']('Programming\x20error:\x20unable\x20to\x20instantiate\x20grid:\x20'+sJQueryGridDiv);return;}var mobileRowTemplate=gridLayout['MobileRowTemplate'],mobileRowTemplateObject,bPhone=TriSysApex['Device']['isPhone']();bPhone&&mobileRowTemplate&&(mobileRowTemplateObject=TriSysSDK['Grid']['GetMobileRowTemplateObjectFromGridLayout'](gridLayout),kendoGridInstance['rowTemplate']=mobileRowTemplateObject,kendoGridInstance['altRowTemplate']=mobileRowTemplateObject,kendoGridInstance['groupable']=![]);!bDataSourceLoadedOnGridInstantiation&&kendoGridInstance['setDataSource'](pagingDataSource);var sPosition=TriSysApex['UserOptions']['GridPosition']();if(sPosition=='both')try{var wrapper=$('<div\x20class=\x22k-pager\x20k-grid-pager\x20pagerTop\x22/>')['insertBefore'](kendoGridInstance['element']['children']('.k-grid-header'));kendoGridInstance['pagerTop']=new kendo['ui']['Pager'](wrapper,$['extend']({},kendoGridInstance['options']['pageable'],{'dataSource':kendoGridInstance['dataSource']})),kendoGridInstance['element']['height']('')['find']('.pagerTop')['css']('border-width','0\x200\x201px\x200');}catch(e){}if(bPopulationByObjectOrCallback){var cachedOptions={'columns':displayColumns};bPhone&&mobileRowTemplate&&(mobileRowTemplateObject=TriSysSDK['Grid']['GetMobileRowTemplateObjectFromGridLayout'](gridLayout),cachedOptions['rowTemplate']=mobileRowTemplateObject,cachedOptions['altRowTemplate']=mobileRowTemplateObject),bPhone&&mobileRowTemplate&&TriSysSDK['Grid']['ShowHiddenOpenButtonForPhonesWithMobileRowTemplates'](ctlGrid);}function onDataBound(e){if(gridLayout['SettingOptionsSoPreventRecursion']||TriSysSDK['Grid']['_ExportingToExcel'])return;TriSysSDK['Grid']['Resize'](gridLayout,sJQueryGridDiv),TriSysSDK['Grid']['DoubleClickHandler']['Callback'](sJQueryGridDiv,gridLayout['RowDoubleClick']),TriSysSDK['Grid']['AddRowHoverEvent'](gridLayout,kendoGridInstance,sJQueryGridDiv);if(bSettingDataSource)bSettingDataSource=![];else{TriSysSDK['Grid']['WaitSpinnerMode'](gridLayout,![]),TriSysSDK['Grid']['ApplyColumnWidths'](sJQueryGridDiv,gridLayout);if(gridLayout&&gridLayout['AfterLoadEvent'])gridLayout['AfterLoadEvent'](gridLayout);}}$('div.k-pager.k-grid-pager.k-pager-md\x20span.k-pager-info.k-label')['css']('display','block'),$('div.k-pager.k-grid-pager.k-pager-md\x20span.k-picker.k-dropdownlist.k-picker-solid.k-picker-md.k-rounded-md')['show'](),$('span.k-pager-sizes\x20>\x20span:last-child')['show'](),$('div.k-pager.k-grid-pager.k-pager-md\x20>\x20span.k-pager-info')['css']('display','block');},'ExcelExportFileName':function(e,gridLayout){var sFileName=gridLayout['Title'];if(sFileName)sFileName=sFileName['replace'](/ /g,'-')['replace'](/:/g,'-');else sFileName='Export';sFileName+='-'+moment(new Date())['format']('YYYY-MM-DD-HHmmss')+'.xlsx',e['workbook']['fileName']=sFileName,e['workbook']['gridLayout']=gridLayout;},'ApplyColumnWidths':function(sJQueryGridDiv,gridLayout){return;if(gridLayout['AutoFitColumns']){var grid=$(sJQueryGridDiv)['data']('kendoGrid'),newOptions=$['extend']({},grid['getOptions']()),bSetOptions=![];for(var c=0x0;c<grid['columns']['length'];c++){var col=gridLayout['Columns'][c];if(col&&col['width']>=0x0){var iSpecifiedColumnWidth=col['width'],newCol=newOptions['columns'][c];newCol['width']=iSpecifiedColumnWidth+'px',newCol['title']=col['title'],newCol['type']=col['type'],newCol['format']=col['format'],newCol['hidden']=col['hidden'],bSetOptions=!![];}}if(bSetOptions){gridLayout['SettingOptionsSoPreventRecursion']=!![];var fnApply=function(){grid['setOptions'](newOptions),gridLayout['SettingOptionsSoPreventRecursion']=![];};fnApply();}}},'ClearCheckedRows':function(sGridName){TriSysSDK['Grid']['SelectAllRows'](sGridName,![]);},'RemoveCheckedRows':function(sGridName){if(sGridName['indexOf']('#')==0x0)sGridName=sGridName['substring'](0x1);var gridElement=$('#'+sGridName),grid=gridElement['data']('kendoGrid');gridElement['find']('input:checked')['each'](function(){grid['removeRow']($(this)['closest']('tr'));}),TriSysSDK['Grid']['SelectAllRows'](sGridName,![]);},'GetFirstGridCheckedItem':function(grid){var selectedItem=null;try{grid['select']()['each'](function(){if(!selectedItem)selectedItem=grid['dataItem'](this);});}catch(e){}return selectedItem;},'GetGridCheckedItems':function(sGridName){if(!sGridName)return;var selected=[],grid=$('#'+sGridName)['data']('kendoGrid');return grid&&grid['select']()['each'](function(){selected['push'](grid['dataItem'](this));}),selected;},'GetCheckedRows':function(sGridName){var rows=[];TriSysSDK['Grid']['SelectedRowsInAllPagesByGrid']['forEach'](function(gridArrayItem){gridArrayItem['Div']==sGridName&&gridArrayItem['Pages']['forEach'](function(page){rows=rows['concat'](page['Rows']);});});if(rows){var lstUniqueRows=[];rows['forEach'](function(row){var bDuplicate=![];lstUniqueRows['forEach'](function(uniqueRow){if(!bDuplicate)bDuplicate=row['uid']==uniqueRow['uid'];});if(!bDuplicate)lstUniqueRows['push'](row);}),rows=lstUniqueRows;}return rows;},'DisplaySelectedRowsCounter':function(gridLayout){if(gridLayout['SelectedRowsCounterId']){var iCounter=0x0;TriSysSDK['Grid']['SelectedRowsInAllPagesByGrid']['forEach'](function(gridArrayItem){gridArrayItem['Div']==gridLayout['Div']&&gridArrayItem['Pages']['forEach'](function(gridPage){iCounter+=gridPage['Rows']['length'];});}),TriSysSDK['Grid']['DisplaySelectedRowsCounterNumber'](gridLayout,iCounter);}},'DisplaySelectedRowsCounterNumber':function(gridLayout,iNumber){var sDisplay='\x20[\x20'+iNumber+'\x20selected\x20row'+(iNumber==0x1?'':'s')+'\x20]';sDisplay=iNumber>0x0?sDisplay:'',$('#'+gridLayout['SelectedRowsCounterId'])['text'](sDisplay);},'CaptureCheckedRowsInThisPageOnChangeEvent':function(gridLayout){var lstThisPageRows=TriSysSDK['Grid']['GetGridCheckedItems'](gridLayout['Div']);if(!lstThisPageRows)lstThisPageRows=[];if(lstThisPageRows){var sJQueryGridDiv='#'+gridLayout['Div'],grid=$(sJQueryGridDiv)['data']('kendoGrid');if(!grid)return;var iCurrentPageNumber=grid['dataSource']['page'](),gridPages=null,bUpdatedPageRows=![];TriSysSDK['Grid']['SelectedRowsInAllPagesByGrid']['forEach'](function(gridArrayItem){gridArrayItem['Div']==gridLayout['Div']&&(gridPages=gridArrayItem,gridArrayItem['Pages']['forEach'](function(gridPage){gridPage['PageNumber']==iCurrentPageNumber&&(gridPage['Rows']=lstThisPageRows,bUpdatedPageRows=!![]);}));});if(!bUpdatedPageRows){var gridPage={'PageNumber':iCurrentPageNumber,'Rows':lstThisPageRows};!gridPages&&(gridPages={'Div':gridLayout['Div'],'Pages':[]},TriSysSDK['Grid']['SelectedRowsInAllPagesByGrid']['push'](gridPages)),gridPages['Pages']['push'](gridPage);}}TriSysSDK['Grid']['DisplaySelectedRowsCounter'](gridLayout);},'RestoreCapturedCheckedRowsOnThisPage':function(gridLayout){var lstThisPageRows=TriSysSDK['Grid']['GetGridCheckedItems'](gridLayout['Div']);if(!lstThisPageRows)return;var sJQueryGridDiv='#'+gridLayout['Div'],grid=$(sJQueryGridDiv)['data']('kendoGrid');if(!grid)return;var gridRows=[];TriSysSDK['Grid']['SelectedRowsInAllPagesByGrid']['forEach'](function(gridArrayItem){gridArrayItem['Div']==gridLayout['Div']&&(gridArrayItem['Pages']&&gridArrayItem['Pages']['forEach'](function(gridPage){if(gridPage['Rows'])gridRows=gridRows['concat'](gridPage['Rows']);}));});var currentPageRows=grid['dataSource']['view']();if(currentPageRows&&gridRows['length']>0x0)for(var i=0x0;i<currentPageRows['length'];i++){var gridRow=currentPageRows[i];gridRows['forEach'](function(selectedGridRow){var objValue=selectedGridRow[gridLayout['KeyColumnName']];TriSysSDK['Grid']['SelectRowByColumnValue'](gridLayout,null,objValue);});}},'SelectRowByColumnValue':function(gridLayout,sKeyColumnName,objValue,fnCallbackWhenRowSelected){if(!sKeyColumnName)sKeyColumnName=gridLayout['KeyColumnName'];var sJQueryGridDiv='#'+gridLayout['Div'],grid=$(sJQueryGridDiv)['data']('kendoGrid');if(!grid)return;var currentPageRows=grid['dataSource']['view']();if(currentPageRows)for(var i=0x0;i<currentPageRows['length'];i++){var gridRow=currentPageRows[i];if(gridRow[sKeyColumnName]==objValue){var row=grid['table']['find']('tr[data-uid=\x22'+gridRow['uid']+'\x22]');TriSysSDK['Grid']['_SettingRowByColumnValue']=!![],grid['select'](row),TriSysSDK['Grid']['_SettingRowByColumnValue']=![];if(fnCallbackWhenRowSelected)fnCallbackWhenRowSelected(row);}}},'SelectPageContainingRowByColumnValue':function(gridLayout,sKeyColumnName,objValue,fnCallbackWhenPageSelected){if(!sKeyColumnName)sKeyColumnName=gridLayout['KeyColumnName'];var sJQueryGridDiv='#'+gridLayout['Div'],grid=$(sJQueryGridDiv)['data']('kendoGrid');if(!grid)return;var dataSource=grid['dataSource'],allData=dataSource['data'](),matchingItem=allData['find'](item=>item[sKeyColumnName]==objValue);if(matchingItem){var pageSize=dataSource['pageSize'](),itemIndex=allData['indexOf'](matchingItem),targetPage=Math['floor'](itemIndex/pageSize)+0x1;dataSource['page'](targetPage);if(fnCallbackWhenPageSelected)fnCallbackWhenPageSelected(targetPage);}},'_SettingRowByColumnValue':![],'PageChanged':function(e,gridLayout){if(e)var iPageNumber=e['index'],iRowsPerPage=e['sender']['options']['pageSize'];var iNumberOfRecordsPerPage=TriSysApex['UserOptions']['RecordsPerPage']();try{var jqueryGrid=$('#'+gridLayout['Div']),iGridRowsPerPage=jqueryGrid['data']('kendoGrid')['dataSource']['pageSize']();iGridRowsPerPage>0x0&&iNumberOfRecordsPerPage!=iGridRowsPerPage&&(iNumberOfRecordsPerPage=iGridRowsPerPage,TriSysApex['Cache']['UserSettingManager']['SetValue']('Apex.RecordsPerPage',iNumberOfRecordsPerPage));}catch(e){TriSysApex['Logging']['LogMessage'](TriSysApex['Logging']['CatchVariableToText'](e));}return iNumberOfRecordsPerPage;},'SelectedRowsInAllPagesByGrid':[],'RefreshData':function(sGridDiv){var sJQueryGridDiv='#'+sGridDiv,grid=$(sJQueryGridDiv)['data']('kendoGrid');if(grid)try{grid['dataSource']['read'](),grid['refresh']();}catch(e){TriSysApex['Logging']['LogMessage'](TriSysApex['Logging']['CatchVariableToText'](e));}},'SelectFirstRow':function(sID){var grid=$('#'+sID)['data']('kendoGrid');if(grid){var firstRow=grid['tbody']['find']('tr:first');grid['select'](firstRow),setTimeout(function(){firstRow['trigger']('click'),grid['trigger']('change');},0x0);}return;grid['select']('tr:eq(0)');},'TriggerSelectedRowClickEvent':function(sID){var grid=$('#'+sID)['data']('kendoGrid');grid&&grid['trigger']('change');},'SelectAllRows':function(sGridDiv,bAllInCurrentPage,bAllInEntireDataSet){var bRemoveAllSelected=!bAllInCurrentPage||bAllInEntireDataSet;bRemoveAllSelected&&TriSysSDK['Grid']['SelectedRowsInAllPagesByGrid']['forEach'](function(gridRows){if(gridRows['Div']==sGridDiv)gridRows['Pages']=[];});var sJQueryGridDiv='#'+sGridDiv,grid=$(sJQueryGridDiv)['data']('kendoGrid');if(!grid)return;var gridLayout=TriSysSDK['Grid']['Persistence']['RememberedGridLayout'](sGridDiv),bSelectAllMode=TriSysSDK['Grid']['isGridInSelectAllRowsInGridMode'](gridLayout);if(bAllInCurrentPage)!bSelectAllMode&&grid['select']('tr');else{if(bAllInEntireDataSet){if(gridLayout)TriSysSDK['Grid']['SelectAllRowsInGridMode'](gridLayout,!![]);}else grid['clearSelection'](),bSelectAllMode&&(gridLayout['Data']['SelectAllMode']=![],TriSysSDK['Grid']['SelectAllRowsInGridModeStart'](gridLayout,![]));}},'SelectAllRowsInGridMode':function(gridLayout,bTurnOn){if(!gridLayout['Data'])return;var iTotalRecordCount=gridLayout['Data']['totalRecordCount'];TriSysSDK['Grid']['SelectAllRowsInGridModeStart'](gridLayout,bTurnOn);},'isGridInSelectAllRowsInGridMode':function(gridLayout){if(gridLayout['Data']){var bSelectAllMode=gridLayout['Data']['SelectAllMode'];return bSelectAllMode;}return![];},'isGridInSelectAllRowsInGridModeFromGridMenuClick':function(sGrid){var gridLayout=TriSysSDK['Grid']['Persistence']['RememberedGridLayout'](sGrid),bSelectAllMode=TriSysSDK['Grid']['isGridInSelectAllRowsInGridMode'](gridLayout);if(bSelectAllMode)return TriSysApex['UI']['ShowMessage']('Grid\x20is\x20in\x20Select-All\x20mode,\x20so\x20you\x20are\x20not\x20permitted\x20to\x20change\x20its\x20filters\x20or\x20grouping.'),!![];return![];},'SelectAllRowsInGridModePanelName':function(gridLayout){var sPanelID=gridLayout['Div']+'-select-all-rows-panel';return sPanelID;},'RemoveSelectAllRowsInGridModePanel':function(gridLayout){var sPanelID=TriSysSDK['Grid']['SelectAllRowsInGridModePanelName'](gridLayout);$('#'+sPanelID)['remove']();},'SelectAllRowsInGridModeStart':function(gridLayout,bStart){var sJQueryGridDiv='#'+gridLayout['Div'],sPanelID=TriSysSDK['Grid']['SelectAllRowsInGridModePanelName'](gridLayout);if(bStart){gridLayout['Data']['SelectAllMode']=!![];var iTotalRecordCount=gridLayout['Data']['totalRecordCount'];TriSysSDK['Grid']['DisplaySelectedRowsCounterNumber'](gridLayout,iTotalRecordCount),$(sJQueryGridDiv)['hide']();var sPanelHTML='<div\x20id=\x22'+sPanelID+'\x22></div>';$(sPanelHTML)['insertBefore'](sJQueryGridDiv),TriSysSDK['SelectAllRowsPanel']['Load'](sPanelID,gridLayout,gridLayout['Data']['totalRecordCount'],function(){gridLayout['Data']['SelectAllMode']=![],TriSysSDK['Grid']['DisplaySelectedRowsCounterNumber'](gridLayout,0x0),TriSysSDK['Grid']['SelectAllRows'](gridLayout['Div'],![]),TriSysSDK['Grid']['SelectAllRowsInGridModeStart'](gridLayout,![]);});}else{var iWaitMilliseconds=0x5;setTimeout(function(){$('#'+sPanelID)['remove']();},iWaitMilliseconds),setTimeout(function(){var ctlGrid=$(sJQueryGridDiv);ctlGrid['show']();},iWaitMilliseconds);}},'AddCheckBoxForMultiRowSelect':function(gridLayout){gridLayout['MultiRowSelect']&&gridLayout['Columns']['splice'](0x0,0x0,{'selectable':!![],'width':'40px','sticky':!![],'lockable':!![],'resizable':![]});},'RemoveCheckBoxRowSelectorAndCommandDrillDownColumns':function(columns){for(var i=columns['length']-0x1;i>=0x0;i--){var column=columns[i];if(column['command'])columns['splice'](i,0x1);}},'HideColumns':function(columns,fieldsToHide){return TriSysSDK['Grid']['ShowColumns'](columns,fieldsToHide,![]);},'ShowColumns':function(columns,fieldsToShowOrHide,bShow){if(columns&&fieldsToShowOrHide)for(var i=0x0;i<columns['length'];i++){var column=columns[i];for(var j=0x0;j<fieldsToShowOrHide['length'];j++){var field=fieldsToShowOrHide[j];if(column['field']==field)column['hidden']=!bShow;}}return columns;},'AddColumnHeaderAttributes':function(columns){try{for(var i in columns){var column=columns[i],bAlwaysSet=![];if(!column['headerAttributes']||bAlwaysSet)column['headerAttributes']={'style':'font-weight:\x20bold'};}}catch(e){}},'AddRowOpenButtonForTouchDeviceSupport':function(gridLayout){if(gridLayout['DrillDownFunction']&&!gridLayout['HideOpenButton']){var sClassName='themed-background',bFieldExists=TriSysSDK['Grid']['doesFieldExistAlreadyAfterLastInvocation'](null,gridLayout['Columns'],sClassName);if(!bFieldExists){var fnOpenButtonClick=function(e){try{e['preventDefault']();var button=$(e['target'])['closest']('.k-button'),cell=button['closest']('td');const sBase64=cell['attr']('data-base64');var dataItem=this['dataItem']($(e['currentTarget'])['closest']('tr'));gridLayout['DrillDownFunction'](dataItem,sBase64);}catch(ex){}},sOpenCaption='Open',bPhone=TriSysApex['Device']['isPhone']();if(!bPhone)sOpenCaption=gridLayout['OpenButtonCaption']?gridLayout['OpenButtonCaption']:sOpenCaption;if(gridLayout['Columns']){var sGridButtonCSS='\x20trisys-grid-open-button',sWidth=parseInt(gridLayout['OpenButtonWidth'])>0x0?gridLayout['OpenButtonWidth']:'80px',buttonColumn={'command':{'className':sClassName+sGridButtonCSS,'text':sOpenCaption,'click':fnOpenButtonClick},'title':'\x20','width':sWidth,'attributes':{'data-base64':gridLayout['OpenButtonData']}},bPositionEndOfRow=!TriSysApex['Constants']['GridRowOpenButtonPositionLeft'];if(bPositionEndOfRow)gridLayout['Columns']['push'](buttonColumn);else gridLayout['Columns']['splice'](0x0,0x0,buttonColumn);}}}},'RemoveGridColumns':function(columns,removeColumnNames){if(!columns||!removeColumnNames)return;removeColumnNames['forEach'](function(sColumnNameToRemove){var iColIndex=0x0;columns['forEach'](function(existingCol){if(existingCol['field']==sColumnNameToRemove)columns['splice'](iColIndex,0x1);else iColIndex+=0x1;});});},'AddRowPreviewButton':function(gridLayout){if(gridLayout['PreviewButtonFunction']){var sFieldName=gridLayout['Div']+'-previewButton',bFieldExists=TriSysSDK['Grid']['doesFieldExistAlreadyAfterLastInvocation'](sFieldName,gridLayout['Columns']);if(!bFieldExists){var colourOfButton=TriSysProUI['GroupBackColour']();colourOfButton='rgb(250,\x20250,\x20250)';var sStyleOverride='\x20style=\x22min-width:\x2016px;\x20border:\x200;\x20margin-left:\x20-7px;'+'\x20\x20background-color:\x20'+colourOfButton+'!important;\x20padding:\x202px;\x20border-radius:\x206px;\x22',sTooltip=gridLayout['PreviewButtonTooltip']?'\x20title=\x22'+gridLayout['PreviewButtonTooltip']+'\x22':'';gridLayout['Columns']['splice'](0x1,0x0,{'command':{'name':sFieldName,'click':previewButtonClick,'template':'<a\x20class=\x22k-grid-'+sFieldName+'\x20k-button\x22'+sStyleOverride+sTooltip+'><i\x20class=\x22fa\x20fa-eye\x20fa-2x\x20themed-color\x22></i></a>'},'title':'\x20','width':'40px','sticky':!![],'lockable':!![]});}}function previewButtonClick(e){e['preventDefault']();try{var dataItem=this['dataItem']($(e['currentTarget'])['closest']('tr'));gridLayout['PreviewButtonFunction'](dataItem);}catch(e){TriSysApex['Logging']['LogMessage'](TriSysApex['Logging']['CatchVariableToText'](e));}}},'AddRowLinkedInButton':function(gridLayout){if(!gridLayout['LinkedInButtonColumn'])return;if(gridLayout['LinkedInButtonColumn']['enabled']&&gridLayout['LinkedInButtonColumn']['contactIdField']){var sFieldName=gridLayout['Div']+'-linkedInButton',bFieldExists=TriSysSDK['Grid']['doesFieldExistAlreadyAfterLastInvocation'](sFieldName,gridLayout['Columns']);if(!bFieldExists){var sStyleOverride='\x20style=\x22min-width:\x2016px;\x20border:\x200;\x20margin-left:\x20-3px;'+'\x20\x20background-color:\x20transparent!important;\x22',sTooltip='\x20title=\x22Open\x20LinkedIn\x20profile\x20for\x20this\x20contact\x20or\x20search\x20for\x20a\x20match\x22\x20';gridLayout['Columns']['splice'](0x1,0x0,{'command':{'name':sFieldName,'click':buttonClick,'template':'<a\x20class=\x27k-grid-'+sFieldName+'\x20k-button\x27'+sStyleOverride+sTooltip+'>'+'<span\x20class=\x27fa\x20fa-linkedin-square\x20fa-2x\x20themed-color\x27></span></a>'},'title':'\x20','width':'40px','sticky':!![],'lockable':!![]});}}function buttonClick(e){e['preventDefault']();try{var dataItem=this['dataItem']($(e['currentTarget'])['closest']('tr')),lContactId=parseInt(dataItem[gridLayout['LinkedInButtonColumn']['contactIdField']]);if(lContactId>0x0)TriSysSDK['SocialNetworks']['OpenSocialNetworkProfile'](TriSysSDK['SocialNetworks']['LinkedIn'],lContactId);}catch(e){TriSysApex['Logging']['LogMessage'](TriSysApex['Logging']['CatchVariableToText'](e));}}},'AddRowHoverEvent':function(gridLayout,grid,sJQueryGridDiv){gridLayout['RowHoverFunction']&&$('tr',sJQueryGridDiv)['off']()['on']('mouseover',function(ev){if(grid&&this)try{var rowData=grid['dataItem'](this);rowData&&gridLayout['RowHoverFunction'](rowData);}catch(e){}});},'doesFieldExistAlreadyAfterLastInvocation':function(sFieldName,columns,sCommandClassName){if(columns)for(var i=0x0;i<columns['length'];i++){var col=columns[i];if(sFieldName){if(col['field']==sFieldName)return!![];}if(sCommandClassName){var command=col['command'];if(command){if(command['className']==sCommandClassName)return!![];}}else{if(col['command']){if(col['command']['name']==sFieldName)return!![];}}}return![];},'Filtering':{'UserSettingGridFilterPrefix':'Grid-Filter-','UserSettingGridGroupablePrefix':'Grid-Groupable-','UserSettingGridFilterRowPrefix':'Grid-Filter-Row-','CheckBoxColumnFieldName':'row-selector-column','FieldOperatorValueToSQL':function(ctlGrid,sFieldName,sGridOperator,objValue){if(!ctlGrid)return null;if(!ctlGrid['dataSource'])return null;if(!ctlGrid['dataSource']['reader']['model']['fields'])return null;var field=ctlGrid['dataSource']['reader']['model']['fields'][sFieldName];if(!field)return null;var sQuoter='',sFieldType=field['type'];switch(sFieldType){case'string':sQuoter='\x27';if(objValue){if(objValue['indexOf']('\x27')>=0x0)objValue=objValue['replace'](/'/g,'\x27\x27');}break;case'date':objValue&&(objValue=moment(objValue)['format']('YYYY-MM-DD'),sQuoter='\x27');break;}switch(sGridOperator){case'eq':return sFieldName+'\x20=\x20'+sQuoter+objValue+sQuoter;case'neq':return sFieldName+'\x20<>\x20'+sQuoter+objValue+sQuoter;case'contains':return sFieldName+'\x20like\x20'+sQuoter+'%'+objValue+'%'+sQuoter;case'doesnotcontain':return sFieldName+'\x20not\x20like\x20'+sQuoter+'%'+objValue+'%'+sQuoter;case'startswith':return sFieldName+'\x20like\x20'+sQuoter+objValue+'%'+sQuoter;case'endswith':return sFieldName+'\x20like\x20'+sQuoter+'%'+objValue+sQuoter;case'gte':return sFieldName+'\x20>=\x20'+sQuoter+objValue+sQuoter;case'gt':return sFieldName+'\x20>\x20'+sQuoter+objValue+sQuoter;case'lte':return sFieldName+'\x20<=\x20'+sQuoter+objValue+sQuoter;case'lt':return sFieldName+'\x20<\x20'+sQuoter+objValue+sQuoter;}},'ApplySavedFilter':function(sGrid){if(TriSysSDK['Grid']['isGridInSelectAllRowsInGridModeFromGridMenuClick'](sGrid))return;var fnReadSetting=function(setting){if(setting){if(setting['Value']){var filter=JSON['parse'](setting['Value']);if(filter){var ctlGrid=$('#'+sGrid)['data']('kendoGrid');ctlGrid['dataSource']['filter'](filter),TriSysApex['Toasters']['Success']('Applying\x20grid\x20filter...');}}}},sFilter=TriSysApex['Cache']['UserSettingManager']['GetValue'](TriSysSDK['Grid']['Filtering']['UserSettingGridFilterPrefix']+sGrid,null);if(sFilter)fnReadSetting({'Value':sFilter});},'SaveFilter':function(sGrid){if(TriSysSDK['Grid']['isGridInSelectAllRowsInGridModeFromGridMenuClick'](sGrid))return;var ctlGrid=$('#'+sGrid)['data']('kendoGrid'),settings=ctlGrid['getOptions'](),filters=settings['dataSource']['filter'];if(filters){var sJSON=JSON['stringify'](filters);TriSysApex['Cache']['UserSettingManager']['SetValue'](TriSysSDK['Grid']['Filtering']['UserSettingGridFilterPrefix']+sGrid,sJSON),TriSysApex['Toasters']['Success']('Saved\x20grid\x20filter.');}},'ClearFilter':function(sGrid){if(TriSysSDK['Grid']['isGridInSelectAllRowsInGridModeFromGridMenuClick'](sGrid))return;var ctlGrid=$('#'+sGrid)['data']('kendoGrid');ctlGrid['dataSource']['filter']({}),TriSysApex['Toasters']['Success']('Clearing\x20grid\x20filter...');},'ToggleFilterRow':function(sGrid){if(TriSysSDK['Grid']['isGridInSelectAllRowsInGridModeFromGridMenuClick'](sGrid))return;var ctlGrid=$('#'+sGrid)['data']('kendoGrid'),settings=ctlGrid['getOptions']();if(settings){var sMode=settings['filterable']['mode'];if(sMode){var sRow=',\x20row',bRowFiltering=![];if(sMode['indexOf'](sRow)>0x0)sMode=sMode['replace'](sRow,'');else sMode+=sRow,bRowFiltering=!![];ctlGrid['setOptions']({'filterable':{'mode':sMode}}),TriSysApex['Cache']['UserSettingManager']['SetValueBoolean'](TriSysSDK['Grid']['Filtering']['UserSettingGridFilterRowPrefix']+sGrid,bRowFiltering);}}},'Mode':function(sGrid){var sMode='menu',bRowFilteringDefault=!![],bFilterRow=TriSysApex['Cache']['UserSettingManager']['GetValueBoolean'](TriSysSDK['Grid']['Filtering']['UserSettingGridFilterRowPrefix']+sGrid,bRowFilteringDefault);if(bFilterRow)sMode+=',\x20row';return sMode;}},'Grouping':{'ToggleGrouping':function(sGrid){if(TriSysSDK['Grid']['isGridInSelectAllRowsInGridModeFromGridMenuClick'](sGrid))return;var ctlGrid=$('#'+sGrid)['data']('kendoGrid'),settings=ctlGrid['getOptions']();if(settings){var bGroupable=!settings['groupable'];ctlGrid['setOptions']({'groupable':bGroupable}),TriSysApex['Cache']['UserSettingManager']['SetValueBoolean'](TriSysSDK['Grid']['Filtering']['UserSettingGridGroupablePrefix']+sGrid,bGroupable);}},'Groupable':function(sGrid){var bGroupable=TriSysApex['Cache']['UserSettingManager']['GetValueBoolean'](TriSysSDK['Grid']['Filtering']['UserSettingGridGroupablePrefix']+sGrid,![]);return bGroupable;}},'Persistence':{'ColumnVisibility':function(bShow,e,sJQueryGridDiv){TriSysApex['Logging']['LogMessage'](sJQueryGridDiv+':\x20Column\x20'+(bShow?'Show':'Hide')+':\x20'+e['column']['field']),TriSysSDK['Grid']['Persistence']['WriteColumns'](sJQueryGridDiv);},'ColumnReOrder':function(e,sJQueryGridDiv){TriSysApex['Logging']['LogMessage'](sJQueryGridDiv+':\x20Column\x20Reorder:\x20'+e['column']['field']+'\x20from\x20'+e['oldIndex']+'\x20to\x20'+e['newIndex']),setTimeout(function(){var columns=e['sender']['columns'];TriSysSDK['Grid']['Persistence']['WriteColumns'](sJQueryGridDiv);},0x32);},'ColumnResize':function(e,sJQueryGridDiv,gridLayout){TriSysApex['Logging']['LogMessage'](sJQueryGridDiv+':\x20Column\x20Resize:\x20'+e['column']['field']+'\x20from\x20'+e['oldWidth']+'\x20to\x20'+e['newWidth']);if(!e['column']['field'])return;TriSysSDK['Grid']['Persistence']['WriteColumns'](sJQueryGridDiv);},'Filters':function(stuff){},'Sorting':{'SortEvent':function(e,gridLayout){console['log'](e['sort']['field']),console['log'](e['sort']['dir']);var sJQueryGridDiv='#'+gridLayout['Div'],grid=$(sJQueryGridDiv)['data']('kendoGrid'),ds=grid['dataSource'],sort=ds['sort']();if(sort)for(var i=0x0;i<sort['length'];i++){console['log']('Field:'+sort[i]['field']+'\x20direction:'+sort[i]['dir']);}else console['log']('no\x20sorting');}},'WriteColumns':function(sJQueryGridDiv){if(TriSysApex['Device']['isPhone']())return;var grid=$(sJQueryGridDiv)['data']('kendoGrid');grid&&(grid['columns']&&TriSysApex['UserOptions']['WriteSetting'](0x0,{'Name':TriSysSDK['Grid']['Persistence']['ColumnsCookie'](sJQueryGridDiv)},JSON['stringify'](grid['columns'])));},'ReadColumns':function(sJQueryGridDiv,columns,fnCallback){if(TriSysApex['Device']['isPhone']()){if(fnCallback)fnCallback(columns);return columns;}var cachedColumns=null,fnReadUserSetting=function(setting){if(setting)cachedColumns=JSON['parse'](setting['Value']);else cachedColumns=TriSysAPI['Persistence']['Read'](TriSysSDK['Grid']['Persistence']['ColumnsCookie'](sJQueryGridDiv));if(!cachedColumns)cachedColumns=columns;else for(var i in cachedColumns){var cachedColumn=cachedColumns[i];if(cachedColumn['command'])for(var k in columns){var originalColumn=columns[k];if(originalColumn['command']){var bClassNameMatch=originalColumn['command']['className']&&originalColumn['command']['className']==cachedColumn['command']['className'],bNameMatch=originalColumn['command']['name']&&originalColumn['command']['name']==cachedColumn['command']['name'];if(bClassNameMatch||bNameMatch)cachedColumn['command']=originalColumn['command'];}}}TriSysSDK['Grid']['AddColumnHeaderAttributes'](cachedColumns);if(fnCallback)fnCallback(cachedColumns);};return TriSysApex['UserOptions']['ReadLoggedInUserSetting'](TriSysSDK['Grid']['Persistence']['ColumnsCookie'](sJQueryGridDiv),fnReadUserSetting),cachedColumns;},'ColumnCookiePrefix':'TriSysSDK.Grid.Persistence.','ColumnsCookie':function(sJQueryGridDiv){sJQueryGridDiv=sJQueryGridDiv['replace']('#','');var sCookie=TriSysSDK['Grid']['Persistence']['ColumnCookiePrefix']+sJQueryGridDiv;return sCookie;},'DeleteAll':function(){var removeKeys=[],cookies=TriSysAPI['Cookies']['All']();for(var i in cookies){var cookie=cookies[i];if(cookie['key']&&cookie['key']['indexOf'](TriSysSDK['Grid']['Persistence']['ColumnCookiePrefix'])==0x0)removeKeys['push'](cookie['key']);}for(var i in removeKeys){var cookieKey=removeKeys[i];TriSysAPI['Persistence']['Write'](cookieKey,null);}TriSysApex['UserOptions']['DeleteSetting'](0x0,{'Prefix':TriSysSDK['Grid']['Persistence']['ColumnCookiePrefix']}),TriSysApex['Toasters']['Success']('All\x20your\x20custom\x20grid\x20layouts\x20have\x20been\x20reset.');},'_ListOfGridLayout':[],'RememberGridLayout':function(gridLayout){TriSysSDK['Grid']['Persistence']['RemoveRememberedGridLayout'](gridLayout['Div']),TriSysSDK['Grid']['Persistence']['_ListOfGridLayout']['push'](gridLayout),TriSysSDK['Grid']['RemoveSelectAllRowsInGridModePanel'](gridLayout);},'RemoveRememberedGridLayout':function(sDiv){for(var i=TriSysSDK['Grid']['Persistence']['_ListOfGridLayout']['length']-0x1;i>=0x0;i--){var gridLayout=TriSysSDK['Grid']['Persistence']['_ListOfGridLayout'][i];if(gridLayout['Div']==sDiv)TriSysSDK['Grid']['Persistence']['_ListOfGridLayout']['splice'](i,0x1);}},'RememberedGridLayout':function(sDiv){var rememberedGridLayoutItem=null;return TriSysSDK['Grid']['Persistence']['_ListOfGridLayout']['forEach'](function(gridLayoutItem){if(gridLayoutItem['Div']==sDiv)rememberedGridLayoutItem=gridLayoutItem;}),rememberedGridLayoutItem;}},'ResizingEventHandler':function(gridLayout,sJQueryGridDiv){if(gridLayout['Height']>0x0){}else $(window)['resize'](function(){TriSysSDK['Grid']['Resize'](gridLayout,sJQueryGridDiv);});},'Resize':function(gridLayout,sJQueryGridDiv){var bResizeAlgorithm=!TriSysApex['Device']['isPhone']();if(!TriSysAPI['Operators']['isEmpty'](gridLayout['Height']))bResizeAlgorithm=gridLayout['Height']<=0x0;bResizeAlgorithm=![];if(bResizeAlgorithm){var divy=$(sJQueryGridDiv);if(divy['length']&&TriSysApex['Pages']['Index']['FormHeight']()>0x0){var pos=divy['position'](),lTop=pos['top'],iHeightAdjustmentKludge=0x0;if(TriSysSDK['FormRegions']['Enabled']())lTop=TriSysSDK['FormRegions']['FixedTopHeight']();var lHeight=TriSysApex['Pages']['Index']['FormHeight']()-lTop-iHeightAdjustmentKludge;TriSysApex['Logging']['LogMessage']('lTop='+lTop+',\x20height='+lHeight+',\x20TriSysApex.Pages.Index.FormHeight()='+TriSysApex['Pages']['Index']['FormHeight']());var gridElement=$(sJQueryGridDiv),dataArea=gridElement['find']('.k-grid-content'),gridHeight=gridElement['innerHeight'](),otherElements=gridElement['children']()['not']('.k-grid-content'),otherElementsHeight=0x0;otherElements['each'](function(){otherElementsHeight+=$(this)['outerHeight']();}),dataArea['height'](lHeight-otherElementsHeight);}}var bMobile=TriSysApex['Device']['isPhone']();if(bMobile)TriSysSDK['Grid']['ColumnVisibilityForMobileDevices'](gridLayout,sJQueryGridDiv);},'ColumnVisibilityForMobileDevices':function(gridLayout,sJQueryGridDiv){var mobileVisibleColumns=gridLayout['MobileVisibleColumns'];if(mobileVisibleColumns){var grid=$(sJQueryGridDiv)['data']('kendoGrid'),bMobile=TriSysApex['Device']['isPhone']();try{if(!grid['columns'])return;}catch(ex){return;}try{var iStartColumnIndex=gridLayout['MultiRowSelect']?0x1:0x0,iEndColumnIndex=gridLayout['DrillDownFunction']?grid['columns']['length']-0x1:grid['columns']['length'];for(var iAllColumns=iStartColumnIndex;iAllColumns<iEndColumnIndex;iAllColumns++){var sColumnName=gridLayout['Columns'][iAllColumns]['field'],bHidden=gridLayout['Columns'][iAllColumns]['hidden'],bFound=!bMobile;if(bMobile)for(var i=0x0;i<mobileVisibleColumns['length'];i++){var sColumnField=mobileVisibleColumns[i]['field'],sColumnTitle=mobileVisibleColumns[i]['title'];sColumnName==sColumnField&&(bFound=!![],sColumnTitle&&$(sJQueryGridDiv+'\x20thead\x20[data-field='+sColumnName+']\x20.k-link')['html'](sColumnTitle));}if(bHidden||!bFound)grid['hideColumn'](sColumnName);else grid['showColumn'](sColumnName);}}catch(e){}}},'CalculatedColumnsGrandTotal':function(divTag,sCalculateColumnFieldPrefix){var ctlGrid=$('#'+divTag)['data']('kendoGrid');if(ctlGrid){var fTotal=0x0,gridData=ctlGrid['dataSource']['_data'],gridColumns=ctlGrid['columns'];for(var iCol=0x0;iCol<gridData['length'];iCol++){var colData=gridData[iCol];for(var iPeriodCol=0x0;iPeriodCol<gridColumns['length'];iPeriodCol++){var column=gridColumns[iPeriodCol],sFieldName=column['field'];if(sFieldName['indexOf'](sCalculateColumnFieldPrefix)==0x0){var fValue=colData[sFieldName];fTotal+=fValue;}}}for(var iPeriodCol=0x0;iPeriodCol<gridColumns['length'];iPeriodCol++){var fColumnTotal=0x0,column=gridColumns[iPeriodCol],sFieldName=column['field'];if(sFieldName['indexOf'](sCalculateColumnFieldPrefix)==0x0)for(var iRow=0x0;iRow<gridData['length'];iRow++){var rowData=gridData[iRow],fValue=rowData[sFieldName];fColumnTotal+=fValue;}TriSysSDK['Grid']['ColumnTotalEvent'](column,fColumnTotal);}return fTotal;}},'CalculateColumnTotal':function(divTag,sCalculateColumnFieldPrefix,sColumnTitle){var ctlGrid=$('#'+divTag)['data']('kendoGrid');if(ctlGrid){var gridData=ctlGrid['dataSource']['_data'],gridColumns=ctlGrid['columns'];for(var iPeriodCol=0x0;iPeriodCol<gridColumns['length'];iPeriodCol++){var column=gridColumns[iPeriodCol],sTitle=column['title'];if(sTitle){var parts=sTitle['split']('<br');if(parts['length']>0x0)sTitle=parts[0x0];sTitle=sTitle['replace']('<b>',''),sTitle=sTitle['replace']('</b>','');}if(sColumnTitle==sTitle){var sFieldName=column['field'];if(sFieldName['indexOf'](sCalculateColumnFieldPrefix)==0x0){var fColumnTotal=0x0;for(var iRow=0x0;iRow<gridData['length'];iRow++){var rowData=gridData[iRow],fValue=rowData[sFieldName];fColumnTotal+=fValue;}return fColumnTotal;}}}}return 0x0;},'ColumnTotalEvent':function(column,fColumnTotal){var sTitle=column['title'];if(sTitle){sTitle=sTitle['replace']('<b>',''),sTitle=sTitle['replace']('</b>','');if(TriSysWebJobs['Agency']['CustomerIDMatch']('CoSector')){if(sTitle=='Miscellaneous'){var block=$('#trisys-timesheet-miscellaneous-hours-reason-block');fColumnTotal>0x0?block['show']():block['hide']();}}}},'ReadGridContents':function(divTag){var ctlGrid=$('#'+divTag)['data']('kendoGrid');if(ctlGrid){var gridRows=ctlGrid['dataSource']['_data'],gridColumns=ctlGrid['columns'],gridDataObject={'rows':gridRows,'columns':gridColumns};return gridDataObject;}},'ReadFilteredGridContents':function(divTag,fnCallback){var ctlGrid=$('#'+divTag)['data']('kendoGrid');if(ctlGrid){var dataSource=ctlGrid['dataSource'],filters=dataSource['filter'](),allData=dataSource['data'](),query=new kendo['data']['Query'](allData),data=query['filter'](filters)['data'],totalRowCount=parseInt(dataSource['total']()['toString']()),totalPages=Math['ceil'](totalRowCount/dataSource['pageSize']()),filteredRows=[],fnPageTraverser=function(dataSource,targetPage,totalPages,filters,completionFunction){var iNumberOfRecordsPerPage=TriSysApex['UserOptions']['RecordsPerPage']();dataSource['query']({'page':targetPage,'pageSize':iNumberOfRecordsPerPage,'filter':filters})['then'](function(){var view=dataSource['view']();for(var viewItemId=0x0;viewItemId<view['length'];viewItemId++){var viewItem=view[viewItemId];filteredRows['push'](viewItem);}targetPage++,targetPage<=totalPages?fnPageTraverser(dataSource,targetPage,totalPages,filters,completionFunction):completionFunction(filteredRows);});};fnPageTraverser(dataSource,0x1,totalPages,filters,function(filteredRows){fnCallback(filteredRows);});}},'GetSelectedSingletonRowRecordIdFromGrid':function(sGrid,idField,sEntity,bDisplayNotFoundMessage){var lRecordId=TriSysSDK['Grid']['GetSelectedSingletonRowFieldValueFromGrid'](sGrid,idField,sEntity,bDisplayNotFoundMessage);return lRecordId?lRecordId:0x0;},'GetSelectedSingletonRowFieldValueFromGrid':function(sGrid,sField,sEntity,bDisplayNotFoundMessage){var sFieldValue=null,selectedRows=TriSysSDK['Grid']['GetCheckedRows'](sGrid);if(selectedRows&&selectedRows['length']==0x1){var selectedRow=selectedRows[0x0];sFieldValue=selectedRow[sField];}if(!sFieldValue){if(TriSysAPI['Operators']['isEmpty'](bDisplayNotFoundMessage))bDisplayNotFoundMessage=!![];if(bDisplayNotFoundMessage)TriSysApex['UI']['ShowMessage']('Please\x20select\x20a\x20single\x20'+sEntity+'\x20record.');}return sFieldValue;},'GetSelectedMultipleRowsFromGrid':function(sGrid,idField){var selectedRows=TriSysSDK['Grid']['GetCheckedRows'](sGrid),gridLayout=TriSysSDK['Grid']['Persistence']['RememberedGridLayout'](sGrid),bSelectAllMode=TriSysSDK['Grid']['isGridInSelectAllRowsInGridMode'](gridLayout);if(bSelectAllMode){selectedRows=TriSysSDK['SelectAllRowsPanel']['GetSelectedAllMultipleRows'](gridLayout,idField);if(selectedRows&&idField){var lst=[];selectedRows['forEach'](function(row){var item={};item[idField]=row,lst['push'](item);}),selectedRows=lst;}}if(selectedRows&&selectedRows['length']>=0x1){var lst=[],ctlGrid=$('#'+sGrid)['data']('kendoGrid'),gridColumns=ctlGrid['columns'];for(var i=0x0;i<selectedRows['length'];i++){var selectedRow=selectedRows[i];if(idField){var sFieldValue=selectedRow[idField];if(!sFieldValue){var sIDField=idField['replace']('Id','ID');sFieldValue=selectedRow[sIDField];}if(sFieldValue)lst['push'](sFieldValue);}else{var lstRowFieldValues=[];gridColumns['forEach'](function(gridColumn){var rowFieldValue={'Name':gridColumn['field'],'Value':selectedRow[gridColumn['field']]};lstRowFieldValues['push'](rowFieldValue);});var rowFieldsObject={'FieldValues':lstRowFieldValues};lst['push'](rowFieldsObject);}}return lst;}return null;},'MultiSelectGridFieldValuesToList':function(lstFieldValues){var lstObject=[];return lstFieldValues['forEach'](function(item){var fieldValues=item['FieldValues'],object={};fieldValues['forEach'](function(field){object[field['Name']]=field['Value'];}),lstObject['push'](object);}),lstObject;},'GetListOfSelectedContactIdFromGrid':function(sGrid){var lstContactID=[],selectedRows=TriSysSDK['Grid']['GetCheckedRows'](sGrid);if(selectedRows)for(var i=0x0;i<selectedRows['length'];i++){var selectedRow=selectedRows[i],lContactId=selectedRow['Contact_ContactId'];if(!lContactId)lContactId=selectedRow['Contact_ContactID'];if(!lContactId)lContactId=selectedRow['ContactId'];if(lContactId>0x0)lstContactID['push'](lContactId);}return lstContactID;},'GetSelectedSingletonContactIdFromGrid':function(sGrid){var lstContactId=TriSysSDK['Grid']['GetListOfSelectedContactIdFromGrid'](sGrid);if(lstContactId&&lstContactId['length']>0x0)return lstContactId[0x0];},'DoubleClickHandler':{'LastSelectedItem':null,'OnChangeEvent':function(e,gridObject,gridLayout){TriSysSDK['Grid']['DoubleClickHandler']['LastSelectedItem']=null;var rows=e['sender']['select']();rows&&rows['each'](function(e){var dataItem=gridObject['dataItem'](this);if(!TriSysSDK['Grid']['DoubleClickHandler']['LastSelectedItem'])TriSysSDK['Grid']['DoubleClickHandler']['LastSelectedItem']=dataItem;if(gridLayout){if(gridLayout['SingleClickRowHandler'])gridLayout['SingleClickRowHandler'](dataItem);}});},'Callback':function(sGridDiv,fnCallback){var sGridCSS=sGridDiv+'\x20table\x20tr';$(sGridCSS)['off']('dblclick');var fnDoubleClick=null;fnCallback&&(fnDoubleClick=function(){TriSysSDK['Grid']['DoubleClickHandler']['LastSelectedItem']&&(fnCallback(TriSysSDK['Grid']['DoubleClickHandler']['LastSelectedItem']),TriSysApex['UI']['CloseModalPopup']());},$(sGridCSS)['off']()['on']('dblclick',fnDoubleClick));}},'Clear':function(sID){try{$('#'+sID)['data']('kendoGrid')['dataSource']['data']([]);}catch(e){}},'Empty':function(sID){var ctlGrid=$((sID['indexOf']('#')<0x0?'#':'')+sID);try{ctlGrid['data']()['kendoGrid']['destroy'](),ctlGrid['empty']();}catch(err){}},'GetMobileRowTemplateObjectFromGridLayout':function(gridLayout){var sClassName='k-info-colored',sTemplateHTML='<tr\x20data-uid=\x22#=\x20uid\x20#\x22>',sOpenCaption=gridLayout['OpenButtonCaption']?gridLayout['OpenButtonCaption']:'Open',sDrillDownButton='';if(gridLayout['DrillDownFunction']&&!gridLayout['HideOpenButton']){var lBackColour=TriSysProUI['BackColour'](),sBorderColour='#DADADA',sAvoidCSSlikeThePlague='onMouseOver=\x22this.style.borderColor=\x27'+lBackColour+'\x27\x22\x20onMouseOut=\x22this.style.borderColor=\x27'+sBorderColour+'\x27\x22';sAvoidCSSlikeThePlague='',sDrillDownButton='<td\x20role=\x22gridcell\x22><a\x20class=\x22k-button\x20k-button-icontext\x20'+sClassName+'\x22'+sAvoidCSSlikeThePlague+'>'+sOpenCaption+'</a></td>';}sTemplateHTML+='<td\x20style=\x22display:none\x22\x20role=\x22gridcell\x22>#:\x20'+gridLayout['KeyColumnName']+'\x20#</td>'+gridLayout['MobileRowTemplate']+sDrillDownButton+'</tr>';var mobileRowTemplateObject=kendo['template'](sTemplateHTML);return mobileRowTemplateObject;},'ShowHiddenOpenButtonForPhonesWithMobileRowTemplates':function(ctlGrid){setTimeout(function(){ctlGrid['find']('td')['each'](function(){var sRole=$(this)['attr']('role');if(sRole=='gridcell'){var td=$(this);td['find']('a')['each'](function(){td['show']();});}});},0x400);},'_ExportingToExcel':![],'ExportToExcel':function(sGridID){var grid=$('#'+sGridID)['data']('kendoGrid'),dataSource=grid['dataSource'],iNumRecords=dataSource['total'](),sMessage='Are\x20you\x20sure\x20you\x20wish\x20to\x20export\x20'+TriSysSDK['Numbers']['ThousandsSeparator'](iNumRecords)+'\x20row'+(iNumRecords==0x1?'':'s')+'\x20to\x20Microsoft\x20Excel?',fnExport=function(){return TriSysSDK['Grid']['ExportToExcelConfirmed'](sGridID),!![];};TriSysApex['UI']['questionYesNo'](sMessage,'Excel\x20Export','Yes',fnExport,'No');},'ExportToExcelConfirmed':function(sGridID){try{var grid=$('#'+sGridID)['data']('kendoGrid'),options=grid['getOptions']();options['excel']['allPages']=!![],options['excel']['fileName']='TriSys-'+sGridID['replace']('div','')+'-'+moment(new Date())['format']('YYYY-MM-DD-HHmmss')+'.xlsx',options['excelExport']=function(e){var rows=e['workbook']['sheets'][0x0]['rows'],iColumnIndexIncrement=0x0;try{for(var ri=0x0;ri<rows['length'];ri++){var row=rows[ri],ci;if(row['type']=='group-header'||row['type']=='header')for(ci=0x0;ci<row['cells']['length'];ci++){var cell=row['cells'][ci];TriSysSDK['Grid']['isReportGridColumnRightAligned'](grid,ci)&&(cell['hAlign']='right');}else{if(row['type']=='data')for(ci=0x0;ci<row['cells']['length'];ci++){var cell=row['cells'][ci],iColumnIndex=ci+iColumnIndexIncrement;}else{if(row['type']=='group-footer'||row['type']=='footer')for(ci=0x0;ci<row['cells']['length'];ci++){var cell=row['cells'][ci];if(cell['value']){var sValue=$(cell['value'])['text']();if(sValue){sValue=sValue['replace'](',','');var fValue=parseFloat(sValue);cell['value']=fValue,cell['hAlign']='right';}}}}}}}catch(ex){}},TriSysSDK['Grid']['_ExportingToExcel']=!![],TriSysApex['UI']['ShowWait'](null,'Exporting...'),grid['setOptions'](options),grid['saveAsExcel']();}catch(e){TriSysApex['UI']['errorAlert'](TriSysApex['Logging']['CatchVariableToText'](e));}},'isReportGridColumnRightAligned':function(grid,iColumnIndex){var columns=grid['columns'],column=columns[iColumnIndex],headerTemplate=column['headerTemplate'];if(headerTemplate){var sRightAlign='text-align:right';return headerTemplate['indexOf'](sRightAlign)>0x0;}},'isReportGridColumnOfType':function(grid,iColumnIndex,sType){var columns=grid['columns'],column=columns[iColumnIndex];if(column){var sTypeOfColumn=column['type'];return sTypeOfColumn==sType;}},'isReportGridColumnFieldName':function(grid,iColumnIndex,sFieldName){var columns=grid['columns'],column=columns[iColumnIndex];if(column){var sFieldNameOfColumn=column['field'];return sFieldNameOfColumn==sFieldName;}},'DynamicColumnPrefix':'DynamicColumn_','InjectDynamicColumns':function(gridLayout,columns){for(i=columns['length']-0x1;i>=0x0;i--){var col=columns[i];col['field']&&(col['field']['indexOf'](TriSysSDK['Grid']['DynamicColumnPrefix'])==0x0&&columns['splice'](i,0x1));}if(gridLayout['DynamicColumns']){var iColumnIndex=0x0;if(gridLayout['MultiRowSelect'])iColumnIndex=0x1;gridLayout['DynamicColumns']['forEach'](function(column){var columnCopy=JSON['parse'](JSON['stringify'](column)),lstWierdChars=['/','\x20','-','(',')','{','}','[',']','!','£','$','&','+','=','#','~'];lstWierdChars['forEach'](function(sChar){do{columnCopy['field']=columnCopy['field']['replace'](sChar,'');}while(columnCopy['field']['indexOf'](sChar)>=0x0);}),columnCopy['field']=columnCopy['field']['replace']('ConfigFields_','_'),columnCopy['field']=columnCopy['field']['replace']('Skill_','_'),columnCopy['field']=TriSysSDK['Grid']['DynamicColumnPrefix']+columnCopy['field'];if(columnCopy['type']=='date')columnCopy['format']='{0:dd\x20MMM\x20yyyy\x20}';columnCopy['headerTemplate']='<span\x20style=\x22color:\x20'+TriSysProUI['BackColour']()+';\x22><strong>'+columnCopy['title']+'</strong></span>',columnCopy['width']=0x96,columns['splice'](iColumnIndex,0x0,columnCopy),iColumnIndex+=0x1;});for(var i=iColumnIndex+0x1;i<columns['length'];i++){var column=columns[i];gridLayout['DynamicColumns']['forEach'](function(dynamicColumn){if(column['field']==dynamicColumn['field'])column['hidden']=!![];});}}},'CustomGridColumnTemplates':{'Apply':function(columns,sID){if(!columns)return;TriSysSDK['Grid']['CustomGridColumnTemplates']['_Columns']['length']>0x0&&columns['forEach'](function(column){TriSysSDK['Grid']['CustomGridColumnTemplates']['_Columns']['forEach'](function(customFieldSpecification){if(column['field']==customFieldSpecification['field'])column['template']=customFieldSpecification['template'];});}),TriSysSDK['Grid']['CustomGridColumnTemplates']['_GridColumns']['length']>0x0&&TriSysSDK['Grid']['CustomGridColumnTemplates']['_GridColumns']['forEach'](function(customGridSpecification){sID==customGridSpecification['grid']&&columns['forEach'](function(column){if(column['field']==customGridSpecification['field'])column['template']=customGridSpecification['template'];});});},'_Columns':[],'AddColumnTemplate':function(sField,fnTemplate){TriSysSDK['Grid']['CustomGridColumnTemplates']['_Columns']['push']({'field':sField,'template':fnTemplate});},'_GridColumns':[],'AddGridColumnTemplate':function(sID,sField,fnTemplate){TriSysSDK['Grid']['CustomGridColumnTemplates']['_GridColumns']['push']({'grid':sID,'field':sField,'template':fnTemplate});},'FormatDateWarning':function(sColumn,sColour){var fnFormat=function(dataItem){var objValue=dataItem[sColumn],sFormattedValue=kendo['toString'](kendo['parseDate'](objValue),'dd\x20MMM\x20yyyy');if(sFormattedValue){if(sColour)return'<span\x20class=\x22label\x22\x20style=\x22background-color:'+sColour+'\x22>'+sFormattedValue+'</span>';else return'<span\x20class=\x22label\x20label-warning\x22>'+sFormattedValue+'</span>';}else return'';};return fnFormat;},'FormatColourByColumnValue':function(sColumn,valueColours){var fnFormat=function(dataItem,sSuffix){var objValue=dataItem[sColumn],sFormattedValue=kendo['toString'](objValue);if(sFormattedValue){var sColour=null,sClass=null;valueColours['forEach'](function(valueColour){if(valueColour['value']==sFormattedValue){if(valueColour['colour'])sColour=valueColour['colour'];if(valueColour['cssClass'])sClass=valueColour['cssClass'];}});var sStyle='<span\x20class=\x22label';if(sColour)sStyle+='\x22\x20style=\x22background-color:\x20'+sColour+';';if(sClass)sStyle+='\x20label-'+sClass;return sStyle+='\x22>'+sFormattedValue+(sSuffix?sSuffix:'')+'</span>',sStyle;}else return'';};return fnFormat;},'ShowContactUserPhoto':function(sUserNameColumn,sUserIdColumn){var fnFormat=function(dataItem){var sUserName=kendo['toString'](dataItem[sUserNameColumn]),lUserId=parseInt(kendo['toString'](dataItem[sUserIdColumn]));if(lUserId>0x0){var sImage=TriSysApex['Cache']['UsersManager']['Photo'](lUserId);if(!sImage)sImage=TriSysApex['Constants']['DefaultContactGreyImage'];sImage='<img\x20src=\x22'+sImage+'\x22\x20style=\x22border-radius:\x2050%;\x20height:\x2024px;\x20width:\x2024px;\x22>';var sStyle='<table\x20style=\x22border:\x200;\x20border-width:\x200;\x22>'+'<tbody>'+'<tr>'+'\x20\x20<td\x20style=\x22width:\x2026px;\x20border:\x200;\x20border-style:\x20none;\x22>'+''+sImage+'\x20\x20</td>'+'\x20\x20<td\x20style=\x22border-width:\x200;\x22>'+''+sUserName+'\x20\x20</td>'+'</tr>'+'<tbody>'+'</table>';return sStyle;}else return sUserName;};return fnFormat;},'SlimeyHacksToOvercomeGridLimitations':function(gridLayout,sJQueryGridDiv){var fnEnforceColumnResizableAttribute=function(){var grid=$(sJQueryGridDiv)['data']('kendoGrid');grid&&grid['resizable']['bind']('start',function(e){var sField=$(e['currentTarget'])['data']('th')['data']('field');gridLayout['Columns']['forEach'](function(column){var bResizable=!![];if(!TriSysAPI['Operators']['isEmpty'](column['resizable']))bResizable=column['resizable'];(sField==column['field']||!sField)&&!bResizable&&(e['preventDefault'](),setTimeout(function(){grid['wrapper']['removeClass']('k-grid-column-resizing'),$(document['body'])['add']('.k-grid\x20th')['css']('cursor','');}));});});};setTimeout(fnEnforceColumnResizableAttribute,0x3e8);}},'HyperlinkedColumns':{'Register':function(gridLayout,displayColumns){var bHyperlinkedColumns=gridLayout['HyperlinkedColumns']||gridLayout['HyperlinkedEntities']?!![]:![];if(!bHyperlinkedColumns||!gridLayout['DrillDownFunction'])return;var lstHyperlinkedColumns=[];gridLayout['HyperlinkedColumns']&&gridLayout['HyperlinkedColumns']['forEach'](function(sColumnName){TriSysSDK['Grid']['HyperlinkedColumns']['RegisterColumnCallback'](sColumnName,gridLayout),displayColumns['forEach'](function(column){(column['field']==sColumnName||column['field']==TriSysSDK['Grid']['DynamicColumnPrefix']+sColumnName)&&lstHyperlinkedColumns['push']({'Column':column});});}),gridLayout['HyperlinkedEntities']&&gridLayout['HyperlinkedEntities']['Columns']&&gridLayout['HyperlinkedEntities']['Columns']['forEach'](function(hyperlinkColumn){TriSysSDK['Grid']['HyperlinkedColumns']['RegisterColumnCallback'](hyperlinkColumn['field'],gridLayout),displayColumns['forEach'](function(column){(column['field']==hyperlinkColumn['field']||column['field']==TriSysSDK['Grid']['DynamicColumnPrefix']+hyperlinkColumn['field'])&&lstHyperlinkedColumns['push']({'Column':column,'HyperlinkColumn':hyperlinkColumn});});}),lstHyperlinkedColumns['forEach'](function(linkedColumn){var column=linkedColumn['Column'],hyperlinkColumn=linkedColumn['HyperlinkColumn']?linkedColumn['HyperlinkColumn']:{},sColumnField=hyperlinkColumn['linkType']?'\x27'+column['field']+'\x27':'null',sClass=TriSysProUI['Grid']['HyperlinkedColumnCommandName'](column['field']),sKeyColumnName=gridLayout['KeyColumnName'];if(hyperlinkColumn['keyColumnName'])sKeyColumnName=hyperlinkColumn['keyColumnName'];var sFunction='TriSysSDK.Grid.HyperlinkedColumns.DrillDown(\x27'+gridLayout['Div']+'\x27,\x20'+'\x27'+sKeyColumnName+'\x27,\x20'+'\x27#=\x20'+sKeyColumnName+'\x20#\x27,\x20'+sColumnField+')',sPreHyperlink='<a\x20onclick=\x22'+sFunction+'\x22\x20class=\x22'+sClass+'\x22>',sPostHyperlink='</a>';column['template']=sPreHyperlink+'#=\x20('+column['field']+'==\x20null)\x20?\x20\x27\x27\x20:\x20kendo.toString('+column['field']+')\x20#'+sPostHyperlink;});},'ReadGridDrillDownCallbackFunctions':function(sGridDiv){var foundGridLayout=null;return TriSysSDK['Grid']['HyperlinkedColumns']['GridDrillDownCallbackFunctions']&&TriSysSDK['Grid']['HyperlinkedColumns']['GridDrillDownCallbackFunctions']['forEach'](function(gridLayoutColumns){gridLayoutColumns['gridLayout']['Div']==sGridDiv&&(foundGridLayout=gridLayoutColumns);}),foundGridLayout;},'RegisterColumnCallback':function(sColumnName,gridLayout){var foundGridLayout=TriSysSDK['Grid']['HyperlinkedColumns']['ReadGridDrillDownCallbackFunctions'](gridLayout['Div']);!foundGridLayout&&(foundGridLayout={'gridLayout':gridLayout,'columns':[]},TriSysSDK['Grid']['HyperlinkedColumns']['GridDrillDownCallbackFunctions']['push'](foundGridLayout));var bFoundColumn=![];foundGridLayout['columns']['forEach'](function(sColumn){if(sColumnName==sColumn)bFoundColumn=!![];});if(!bFoundColumn)foundGridLayout['columns']['push'](sColumnName);},'GridDrillDownCallbackFunctions':[],'DrillDown':function(gridLayoutDiv,sKeyColumnName,lRecordId,sField){if(gridLayoutDiv=='cvautorecognition-IncomingCVGrid')lRecordId=lRecordId['replace'](/\\/g,'\x5c\x5c');var gridLayoutColumns=TriSysSDK['Grid']['HyperlinkedColumns']['ReadGridDrillDownCallbackFunctions'](gridLayoutDiv);if(gridLayoutColumns){if(gridLayoutColumns['gridLayout']['DrillDownFunction']&&gridLayoutColumns['gridLayout']['KeyColumnName']){var gridData=TriSysSDK['Grid']['ReadGridContents'](gridLayoutDiv);if(gridData){var gridRows=gridData['rows'];for(var iRow=0x0;iRow<gridRows['length'];iRow++){var row=gridRows[iRow],sKey=row[sKeyColumnName];if(sKey==lRecordId){if(sField)TriSysSDK['Grid']['HyperlinkedColumns']['DrillDownIntoReferentialEntityOrSpecialField'](gridLayoutColumns['gridLayout'],sField,lRecordId,row);else gridLayoutColumns['gridLayout']['DrillDownFunction'](row);return;}}}}}},'DrillDownIntoReferentialEntityOrSpecialField':function(gridLayout,sField,lRecordId,row){gridLayout['HyperlinkedEntities']&&gridLayout['HyperlinkedEntities']['Columns']&&gridLayout['HyperlinkedEntities']['Columns']['forEach'](function(hyperlinkColumn){hyperlinkColumn['field']==sField&&(hyperlinkColumn['fnCallback']?hyperlinkColumn['fnCallback'](row):TriSysSDK['Grid']['HyperlinkedColumns']['CallWebAPItoIdentifyReferentialEntityOrSpecialField']({'EntityName':gridLayout['HyperlinkedEntities']['EntityName'],'Field':sField,'LinkType':hyperlinkColumn['linkType'],'RecordId':lRecordId}));});},'FireAtWill':function(options,CReadReferentialLinkTypeResponse){var lLinkedRecordId=CReadReferentialLinkTypeResponse['LinkedRecordId'];if(lLinkedRecordId>0x0){var sEntityName=options['LinkType'];switch(options['LinkType']){case'Client\x20Contact':case'Candidate\x20Contact':case'User\x20Contact':sEntityName='Contact';break;}TriSysApex['FormsManager']['OpenForm'](sEntityName,lLinkedRecordId);}else{}},'SpecialFields':{'DrillDown':function(rowData,sType,sField){var sFieldValue=rowData[sField];if(!sFieldValue||!sType)return;switch(sType){case'E-Mail':TriSysSDK['Controls']['FieldHyperlinks']['OpenEMail'](sFieldValue);break;case'Phone':TriSysSDK['Controls']['FieldHyperlinks']['OpenTelNo'](sFieldValue);break;case'WebPage':TriSysSDK['Browser']['OpenURL'](sFieldValue);break;}}},'CallWebAPItoIdentifyReferentialEntityOrSpecialField':function(options){var sFunction='TriSysSDK.Grid.HyperlinkedColumns.CallWebAPItoIdentifyReferentialEntity',CReadReferentialLinkTypeRequest={'EntityName':options['EntityName'],'EntityId':options['RecordId'],'LinkType':options['LinkType']},payloadObject={};payloadObject['URL']='Entity/ReadReferentialLinkType',payloadObject['OutboundDataPacket']=CReadReferentialLinkTypeRequest,payloadObject['InboundDataFunction']=function(CReadReferentialLinkTypeResponse){TriSysApex['UI']['HideWait']();if(CReadReferentialLinkTypeResponse){if(CReadReferentialLinkTypeResponse['Success'])TriSysSDK['Grid']['HyperlinkedColumns']['FireAtWill'](options,CReadReferentialLinkTypeResponse);else TriSysApex['UI']['ShowError'](CReadReferentialLinkTypeResponse['ErrorMessage']);}else TriSysApex['UI']['ShowError'](sFunction+'\x20Error:\x20NULL\x20response');},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert'](sFunction+':\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Reading\x20'+options['LinkType']+'...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'Custom':{'DisplayColumns':function(gridLayout){var columns=gridLayout['Columns'],nonFieldColumns=[];columns&&columns['forEach'](function(column){if(!column['field'])nonFieldColumns['push'](column);});var sFile='grid-columns.json',sJSONFilePath=TriSysApex['CustomFormsAndComponents']['getCustomFormURL'](sFile);if(sJSONFilePath){var jsonData=TriSysApex['Forms']['Configuration']['GetJSONFromFileUsingAjax'](sJSONFilePath);if(jsonData){var grids=jsonData['Grids'];grids&&grids['forEach'](function(grid){grid['ID']['forEach'](function(sID){if(sID==gridLayout['Div']){columns=grid['Columns'];if(nonFieldColumns['length']>0x0)for(var i=nonFieldColumns['length']-0x1;i>=0x0;i--){var column=nonFieldColumns[i];columns['unshift'](column);}}});});}}return columns;},'DisplayColumnNames':function(sGridID){var customColumns=TriSysSDK['Grid']['Custom']['DisplayColumns']({'Div':sGridID});if(customColumns){var columnNames=[];return customColumns['forEach'](function(column){columnNames['push'](column['field']);}),columnNames;}},'idFieldHandling':function(gridLayout){gridLayout['PopulationByObject']&&gridLayout['Columns']['forEach'](function(column){column['field']=='id'&&(column['field']='RecordID',gridLayout['PopulationByObject']['forEach'](function(item){item['RecordID']=item['id'],delete item['id'];}));});}}},'CShowForm':{'fieldDescriptions':function(sEntityName){var bDebugList=![];if(bDebugList)console['log']('TriSysSDK.CShowForm.fieldDescriptions('+sEntityName+'):');var fieldDescriptionArray=[],cachedFieldDescriptions=TriSysApex['Cache']['FieldDescriptions']();if(cachedFieldDescriptions)for(var i=0x0;i<cachedFieldDescriptions['length'];i++){var fd=cachedFieldDescriptions[i];if(fd['TableName']==sEntityName||fd['TableName']==sEntityName+'ConfigFields'){var bAddToList=!![];if(sEntityName=='Placement'&&fd['TableName']==sEntityName){var lstAllowedFieldNames=['PlacementId','UserId','ParentPlacementId','Type','ContactId','CompanyId','AddressId','RequirementId'];if(lstAllowedFieldNames['indexOf'](fd['TableFieldName'])<0x0)bAddToList=![];}if(bAddToList){TriSysSDK['CShowForm']['tweakFieldDescription'](fd),fieldDescriptionArray['push'](fd);if(bDebugList)console['log'](i+':\x20Field:\x20'+fd['TableFieldName']+',\x20Label:\x20'+fd['FieldLabel']);}}}return fieldDescriptionArray;},'tweakFieldDescription':function(fieldDescription){switch(fieldDescription['TableName']+'_'+fieldDescription['TableFieldName']){case'Contact_HomeAddressCountry':break;}},'getFieldDescriptionValuesList':function(sEntityName){var fieldDescriptions=TriSysSDK['CShowForm']['fieldDescriptions'](sEntityName),fieldDescriptionValues=[];for(var i=0x0;i<fieldDescriptions['length'];i++){var fd=fieldDescriptions[i],sFieldID=fd['TableName']+'_'+fd['TableFieldName'],bFieldOnForm=TriSysApex['Forms']['doesFieldExistInDOM'](sFieldID);bFieldOnForm=!![];if(bFieldOnForm){var fdValue={'FieldId':fd['FieldId'],'Value':fd['Value']};fieldDescriptionValues['push'](fdValue);}}return fieldDescriptionValues;},'copyFieldDescriptionValuesListToFieldDescriptions':function(sEntityName,fieldDescriptionValues){var fieldDescriptions=TriSysSDK['CShowForm']['fieldDescriptions'](sEntityName);for(iField=0x0;iField<fieldDescriptions['length'];iField++){var fd=fieldDescriptions[iField];for(iFieldValue=0x0;iFieldValue<fieldDescriptionValues['length'];iFieldValue++){var fdValue=fieldDescriptionValues[iFieldValue];fdValue['FieldId']==fd['FieldId']&&(fd['Value']=fdValue['Value'],fd['DisplayValue']=fdValue['DisplayValue']);}}return TriSysApex['Cache']['populateFormFieldDescriptions']=fieldDescriptions,fieldDescriptions;},'clearFormFields':function(sEntityName,fnCallback){var fieldDescriptions=TriSysSDK['CShowForm']['getFieldDescriptionsInDOM'](sEntityName);if(fieldDescriptions){for(iField=0x0;iField<fieldDescriptions['length'];iField++){var fd=fieldDescriptions[iField],objDefaultValue=fd['DefaultValue']?fd['DefaultValue']:null;fd['Value']=objDefaultValue,fd['DisplayValue']=objDefaultValue;}TriSysSDK['CShowForm']['populateFieldsFromFieldDescriptions'](fieldDescriptions);}if(fnCallback)fnCallback(0x0,fieldDescriptions);},'readEntityFormDataFromServer':function(sEntityName,lRecordId,fnCallbackToPopulate){TriSysSDK['CurrentRecord']['EntityName']=sEntityName,TriSysSDK['CurrentRecord']['RecordId']=lRecordId;if(lRecordId<=0x0){if(TriSysAPI['Operators']['stringToBoolean'](TriSysApex['Cache']['UserSettingManager']['GetValue']('RetainFormInMemory',![]),![]))TriSysSDK['CShowForm']['clearFormFields'](sEntityName,null);try{fnCallbackToPopulate(lRecordId,null);}catch(e){}return;}var dataPacket={'EntityName':sEntityName,'EntityId':lRecordId},payloadObject={};payloadObject['URL']='Entity/ReadEntity',payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var JSONdataset=data;if(JSONdataset){var bCallback=![];if(JSONdataset['Success']){var fieldDescriptions=TriSysSDK['CShowForm']['copyFieldDescriptionValuesListToFieldDescriptions'](sEntityName,JSONdataset['Entity']['FieldDescriptionValues']);if(fieldDescriptions)try{TriSysSDK['CShowForm']['populateFieldsFromFieldDescriptions'](fieldDescriptions),bCallback=!![];}catch(e){TriSysApex['UI']['ShowError'](e,'TriSysSDK.CShowForm.populateFieldsFromFieldDescriptions:\x20'+sEntityName);}}else{if(JSONdataset['ErrorMessage']){var bCouldNotFind=JSONdataset['ErrorMessage']['indexOf']('Could\x20not\x20find\x20database\x20record')==0x0;if(bCouldNotFind&&lRecordId==0x0){bCallback=!![];if(TriSysAPI['Operators']['stringToBoolean'](TriSysApex['Cache']['UserSettingManager']['GetValue']('RetainFormInMemory',![]),![]))TriSysSDK['CShowForm']['clearFormFields'](sEntityName,null);}else{if(bCouldNotFind)TriSysApex['UI']['ShowMessage'](JSONdataset['ErrorMessage']);else TriSysApex['UI']['errorAlert'](JSONdataset['ErrorMessage']);}}}if(bCallback)try{fnCallbackToPopulate(lRecordId,fieldDescriptions);}catch(e){TriSysApex['UI']['ShowError'](e,'Reading\x20'+sEntityName);}}else sDisplay='No\x20records\x20found.';return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('readEntityFormDataFromServer:\x20',request,status,error);},TriSysApex['UI']['ShowWait'](null,'Reading\x20'+sEntityName+'...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'writeEntityFormDataToServer':function(sEntityName,lRecordId,fieldDescriptions,fnCallbackOnSave){var fieldDescriptionValues=[];if(fieldDescriptions)for(var i=0x0;i<fieldDescriptions['length'];i++){var fd=fieldDescriptions[i],fdValue={'FieldId':fd['FieldId'],'Value':fd['Value']};fieldDescriptionValues['push'](fdValue);}var dataPacket={'EntityName':sEntityName,'EntityId':lRecordId,'FieldDescriptionValues':fieldDescriptionValues},payloadObject={},sAPIFunction=lRecordId>0x0?'UpdateEntity':'CreateEntity';payloadObject['URL']='Entity/'+sAPIFunction,payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var CCreateReadUpdateDeleteOperation=data,sDisplay=null;if(CCreateReadUpdateDeleteOperation){if(CCreateReadUpdateDeleteOperation['Success']){lRecordId=CCreateReadUpdateDeleteOperation['RecordId'],sDisplay='Successfuly\x20updated\x20'+sEntityName,TriSysApex['BrowserHistory']['Replace'](sEntityName,lRecordId),TriSysSDK['CurrentRecord']['EntityName']=sEntityName,TriSysSDK['CurrentRecord']['RecordId']=lRecordId;if(fnCallbackOnSave){fnCallbackOnSave(CCreateReadUpdateDeleteOperation['RecordId'],fieldDescriptions);return;}}else sDisplay=CCreateReadUpdateDeleteOperation['ErrorMessage'];}else sDisplay='No\x20data\x20returned.';return TriSysApex['UI']['ShowMessage'](sDisplay),!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.CShowForm.writeEntityFormDataToServer:\x20',request,status,error);},TriSysApex['UI']['ShowWait'](null,'Saving\x20'+sEntityName+'...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'populateFieldsFromFieldDescriptions':function(fieldDescriptions){for(var i=0x0;i<fieldDescriptions['length'];i++){var fieldDescription=fieldDescriptions[i],sFieldID=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'];if(TriSysApex['Forms']['doesFieldExistInDOM'](sFieldID))try{TriSysSDK['CShowForm']['writeFieldDescriptionValue'](fieldDescription);}catch(ex){var sError=ex;console['log'](ex+':\x20'+sFieldID);}}},'getFieldDescriptionsInDOM':function(sEntityName){var fieldDescriptions=TriSysSDK['CShowForm']['fieldDescriptions'](sEntityName);if(!fieldDescriptions)return null;var fieldDescriptionsInDOM=TriSysSDK['CShowForm']['filterOnlyFieldDescriptionsInDOM'](fieldDescriptions);return fieldDescriptionsInDOM;},'filterOnlyFieldDescriptionsInDOM':function(fieldDescriptions){var fieldDescriptionsInDOM=[];if(fieldDescriptions)for(var i=0x0;i<fieldDescriptions['length'];i++){var fieldDescription=fieldDescriptions[i],sFieldID=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'];if(TriSysApex['Forms']['doesFieldExistInDOM'](sFieldID))try{var bFound=![];$['each'](fieldDescriptionsInDOM,function(index,fd){if(fd['TableName']==fieldDescription['TableName']&&fd['TableFieldName']==fieldDescription['TableFieldName'])bFound=!![];});if(!bFound)fieldDescriptionsInDOM['push'](fieldDescription);}catch(ex){var sError=ex;console['log'](ex+':\x20'+sFieldID);}}return fieldDescriptionsInDOM;},'MoveUploadedTemporaryFileReference':function(sEntityName,lRecordId,sTableFieldName,sServerFilePath,fnCallback){var dataPacket={'TableName':sEntityName,'TableFieldName':sTableFieldName,'RecordId':lRecordId,'TemporaryFilePath':sServerFilePath},payloadObject={};payloadObject['URL']='Entity/MoveUploadedTemporaryFileReference',payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(data){var JSONdataset=data;if(JSONdataset){if(JSONdataset['Success'])fnCallback(JSONdataset['URL']);}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('MoveUploadedTemporaryFileReference:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'InitialiseFields':function(sEntityName,entityFormFieldDescriptionModifications){TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']();var fieldDescriptions=TriSysSDK['CShowForm']['getFieldDescriptionsInDOM'](sEntityName);if(fieldDescriptions)for(var i=0x0;i<fieldDescriptions['length'];i++){var fieldDescription=fieldDescriptions[i];if(entityFormFieldDescriptionModifications)for(var m=0x0;m<entityFormFieldDescriptionModifications['length'];m++){var mod=entityFormFieldDescriptionModifications[m];fieldDescription['TableName']==mod['TableName']&&fieldDescription['TableFieldName']==mod['TableFieldName']&&(fieldDescription['Callback']=mod['Callback'],mod['ImageClickEventTargets']&&mod['ImageClickEventTargets']['forEach'](function(sFieldID){TriSysSDK['Images']['AddFieldClickCallbackEvent'](sFieldID,fieldDescription);}));}TriSysSDK['CShowForm']['InitialiseFieldWidget'](fieldDescription);}TriSysSDK['CShowForm']['InitialiseFormFields']['MarkFormAsLoaded'](sEntityName,!![]);},'HTMLFieldsCodeInjection':function(options){var rootElement=document;if(options){if(options['rootElementId'])rootElement=document['getElementById'](options['rootElementId']);}var TriSysFieldTag='trisys-field',elements=rootElement['getElementsByTagName'](TriSysFieldTag);if(elements)for(var i=elements['length']-0x1;i>=0x0;i--){var element=$(elements[i]);TriSysSDK['CShowForm']['HTMLFieldCodeInjection'](element);}var TriSysComponentTag='trisys-component',elements=rootElement['getElementsByTagName'](TriSysComponentTag);if(elements)for(var i=elements['length']-0x1;i>=0x0;i--){var element=$(elements[i]);TriSysSDK['CShowForm']['HTMLComponentCodeInjection'](element);}},'TriSysFieldPickerToHTML':function(sID,fieldDescription){var sType=null,sProperties='',eFieldType=fieldDescription['FieldTypeId'];switch(eFieldType){case TriSysSDK['Controls']['FieldTypes']['Date']:sType='date';break;case TriSysSDK['Controls']['FieldTypes']['User']:sType='usercombo';break;case TriSysSDK['Controls']['FieldTypes']['Contact']:sType='contact';break;case TriSysSDK['Controls']['FieldTypes']['Company']:sType='company';break;case TriSysSDK['Controls']['FieldTypes']['Integer']:case TriSysSDK['Controls']['FieldTypes']['Float']:case TriSysSDK['Controls']['FieldTypes']['Percent']:sType='numeric',sProperties=eFieldType==TriSysSDK['Controls']['FieldTypes']['Integer']?'integer=\x22true\x22':'';break;case TriSysSDK['Controls']['FieldTypes']['Text']:sType='textbox';if(TriSysAPI['Operators']['stringToBoolean'](fieldDescription['Lookup'],![]))sType='combo';else{if(TriSysAPI['Operators']['stringToBoolean'](fieldDescription['MultiLine'],![]))sType='textboxmultiline';}break;case TriSysSDK['Controls']['FieldTypes']['SkillCombo']:sType='skillcombo';break;case TriSysSDK['Controls']['FieldTypes']['Combo']:sType='combo';break;case TriSysSDK['Controls']['FieldTypes']['Image']:return'<table\x20class=\x22table\x20table-borderless\x22\x20style=\x22text-align:\x20center\x22>'+'<tbody>'+'\x20\x20\x20<tr>'+'\x20\x20\x20\x20\x20\x20\x20<td><img\x20id=\x22'+sID+'-Thumbnail\x22\x20style=\x22height:\x20100px;\x20width:\x20100px;\x20border-radius:\x205px;\x22\x20/></td>'+'\x20\x20\x20<tr>'+'\x20\x20\x20\x20\x20\x20\x20<td>'+'\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22'+sID+'\x22\x20style=\x22width:100%;\x22></div>'+'\x20\x20\x20\x20\x20\x20\x20</td>'+'\x20\x20</tr>'+'</tbody>'+'</table>';case TriSysSDK['Controls']['FieldTypes']['FileUploadImage']:return'<h1>FileUploadImage</h1>';case TriSysSDK['Controls']['FieldTypes']['JobTitle']:sType='jobtitle';break;case TriSysSDK['Controls']['FieldTypes']['FileReference']:sType='file';break;case TriSysSDK['Controls']['FieldTypes']['EMail']:sType='email';break;case TriSysSDK['Controls']['FieldTypes']['Internet']:sType='internet';break;case TriSysSDK['Controls']['FieldTypes']['Telephone']:sType='telephone';break;case TriSysSDK['Controls']['FieldTypes']['YesNo']:sType='yesno';break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmount']:sType='currencyamount';break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmountPeriod']:sType='currencyamountperiod';break;case TriSysSDK['Controls']['FieldTypes']['Password']:return'<input\x20type=\x22password\x22\x20id=\x22'+sID+'\x22\x20class=\x22k-textbox\x22\x20style=\x22width:100%;\x22\x20/>';}if(sType)sType='type=\x22'+sType+'\x22';var sHTML='<trisys-field\x20id=\x22'+sID+'\x22\x20'+sType+'\x20'+sProperties+'></trisys-field>';return sHTML;},'TriSysFieldTypeIdToString':function(fieldDescription){var sType=null,eFieldType=fieldDescription['FieldTypeId'];switch(eFieldType){case TriSysSDK['Controls']['FieldTypes']['Date']:sType='date';break;case TriSysSDK['Controls']['FieldTypes']['User']:sType='usercombo';break;case TriSysSDK['Controls']['FieldTypes']['Contact']:sType='contact';break;case TriSysSDK['Controls']['FieldTypes']['Company']:sType='company';break;case TriSysSDK['Controls']['FieldTypes']['Integer']:case TriSysSDK['Controls']['FieldTypes']['Float']:case TriSysSDK['Controls']['FieldTypes']['Percent']:sType='numeric';break;case TriSysSDK['Controls']['FieldTypes']['Text']:sType='textbox';if(TriSysAPI['Operators']['stringToBoolean'](fieldDescription['Lookup'],![]))sType='combo';else{if(TriSysAPI['Operators']['stringToBoolean'](fieldDescription['MultiLine'],![]))sType='textboxmultiline';}break;case TriSysSDK['Controls']['FieldTypes']['SkillCombo']:sType='skillcombo';break;case TriSysSDK['Controls']['FieldTypes']['Combo']:sType='combo';break;case TriSysSDK['Controls']['FieldTypes']['Image']:return'image';case TriSysSDK['Controls']['FieldTypes']['FileUploadImage']:return'fileuploadimage';case TriSysSDK['Controls']['FieldTypes']['JobTitle']:sType='jobtitle';break;case TriSysSDK['Controls']['FieldTypes']['FileReference']:sType='file';break;case TriSysSDK['Controls']['FieldTypes']['EMail']:sType='email';break;case TriSysSDK['Controls']['FieldTypes']['Internet']:sType='internet';break;case TriSysSDK['Controls']['FieldTypes']['Telephone']:sType='telephone';break;case TriSysSDK['Controls']['FieldTypes']['YesNo']:sType='yesno';break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmount']:sType='currencyamount';break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmountPeriod']:sType='currencyamountperiod';break;case TriSysSDK['Controls']['FieldTypes']['Password']:return'password';}return sType;},'TriSysFieldReadOnly':function(fieldDescription,bReadOnly){var sFieldId=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'];TriSysSDK['CShowForm']['ElementReadOnly'](sFieldId,fieldDescription['FieldTypeId'],bReadOnly,fieldDescription['Lookup']);},'ElementReadOnly':function(sFieldId,eFieldType,bReadOnly,bLookup){switch(eFieldType){case TriSysSDK['Controls']['FieldTypes']['Date']:TriSysSDK['CShowForm']['datePickerReadOnly'](sFieldId,bReadOnly);break;case TriSysSDK['Controls']['FieldTypes']['User']:TriSysSDK['CShowForm']['ComboReadonly'](sFieldId,bReadOnly);break;case TriSysSDK['Controls']['FieldTypes']['Integer']:case TriSysSDK['Controls']['FieldTypes']['Float']:case TriSysSDK['Controls']['FieldTypes']['Percent']:TriSysSDK['Controls']['NumericSpinner']['Readonly'](sFieldId,bReadOnly);break;case TriSysSDK['Controls']['FieldTypes']['EMail']:case TriSysSDK['Controls']['FieldTypes']['Internet']:case TriSysSDK['Controls']['FieldTypes']['Telephone']:case TriSysSDK['Controls']['FieldTypes']['Text']:case TriSysSDK['Controls']['FieldTypes']['Password']:case TriSysSDK['Controls']['FieldTypes']['YesNo']:if(bLookup)TriSysSDK['CShowForm']['ComboReadonly'](sFieldId,bReadOnly);else bReadOnly?$('#'+sFieldId)['attr']('readonly','readonly'):$('#'+sFieldId)['removeAttr']('readonly');break;case TriSysSDK['Controls']['FieldTypes']['Image']:break;case TriSysSDK['Controls']['FieldTypes']['FileUploadImage']:break;case TriSysSDK['Controls']['FieldTypes']['JobTitle']:sType='jobtitle';break;case TriSysSDK['Controls']['FieldTypes']['FileReference']:TriSysSDK['Controls']['FileReference']['FindButtonVisible'](sFieldId,!bReadOnly),TriSysSDK['Controls']['FileReference']['DeleteButtonVisible'](sFieldId,!bReadOnly);break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmount']:TriSysSDK['Controls']['CurrencyAmount']['Readonly'](sFieldId,bReadOnly);break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmountPeriod']:TriSysSDK['Controls']['CurrencyAmountPeriod']['Readonly'](sFieldId,bReadOnly);break;}},'HTMLFieldCodeInjection':function(element){try{var sID=element['attr']('id'),sType=element['attr']('type'),sStyle=element['attr']('style'),sValue=element['attr']('value'),sTitle=element['attr']('title'),sMinimum=element['attr']('minimum'),sMaximum=element['attr']('maximum'),sIncrement=element['attr']('increment'),sInteger=element['attr']('integer'),sRows=element['attr']('rows'),sCategory=element['attr']('category'),sDataFunction=element['attr']('datafunction'),sOnChangeFunction=element['attr']('onchange'),sValueFunction=element['attr']('valuefunction'),sHideFindButton=element['attr']('hidefindbutton'),sHideDeleteButton=element['attr']('hidedeletebutton'),sHideOpenButton=element['attr']('hideopenbutton'),sMaxLength=element['attr']('maxlength'),sReadOnly=element['attr']('readonly'),sReadOnlyCheckBox='',bReadOnly=![],sLookups=element['attr']('lookups'),sPlaceholder=element['attr']('placeholder'),sIndex=element['attr']('index'),sFlexivaField=element['attr'](TriSysFlexiva['Settings']['FieldDataTag']),sAlt=element['attr']('alt'),sTitle=element['attr']('title'),sClass=element['attr']('class'),sTextValueListBase64=element['attr']('textvaluelist');if(sValueFunction){var fn=TriSysApex['DynamicClasses']['GetObject'](sValueFunction);sValue=fn();}if(sMaxLength)sMaxLength='\x20maxlength=\x22'+sMaxLength+'\x22\x20';(sReadOnly=='true'||sReadOnly=='readonly')&&(sReadOnly='\x20'+sReadOnly+'\x20',sReadOnlyCheckBox='\x20disabled\x20',bReadOnly=!![]);if(sPlaceholder)sPlaceholder='\x20placeholder=\x22'+sPlaceholder+'\x22\x20';var iIndex=0x0;if(sIndex)iIndex=parseInt(sIndex);if(sFlexivaField)sFlexivaField='\x20'+TriSysFlexiva['Settings']['FieldDataTag']+'=\x22'+sFlexivaField+'\x22\x20';var sAdditionalTags='';if(sAlt)sAdditionalTags+='\x20alt=\x22'+sAlt+'\x22\x20';if(sTitle)sAdditionalTags+='\x20title=\x22'+sTitle+'\x22\x20';switch(sType){case'textbox':element['replaceWith']('<input\x20type=\x22text\x22\x20class=\x22k-textbox\x22\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+sReadOnly+sPlaceholder+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+sMaxLength+'\x20/>');if(sValue)$('#'+sID)['val'](sValue);break;case'textboxmultiline':var iRows=sRows?parseFloat(sRows):0x4;element['replaceWith']('<textarea\x20class=\x22k-textbox\x22\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+'\x20rows=\x22'+iRows+'\x22'+sMaxLength+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%','resize:\x20none'])+'></textarea>');if(sValue)$('#'+sID)['val'](sValue);break;case'date':element['replaceWith']('<input\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'\x20/>'),TriSysSDK['CShowForm']['datePicker'](sID);if(sValue)TriSysSDK['CShowForm']['setDatePickerValue'](sID,sValue);if(bReadOnly)setTimeout(function(){TriSysSDK['CShowForm']['datePickerReadOnly'](sID,bReadOnly);},0x1f4);break;case'datetime':element['replaceWith']('<input\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:350px'])+'\x20/>'),TriSysSDK['CShowForm']['dateTimePicker'](sID);if(sValue)TriSysSDK['CShowForm']['setDateTimePickerValue'](sID,sValue);if(bReadOnly)setTimeout(function(){TriSysSDK['CShowForm']['dateTimePickerReadOnly'](sID,bReadOnly);},0x1f4);break;case'numeric':element['replaceWith']('<input\x20type=\x22number\x22\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'\x20/>');var fMinValue=sMinimum?parseFloat(sMinimum):0x0,fMaxValue=sMaximum?parseFloat(sMaximum):0x64,fIncrement=sIncrement?parseFloat(sIncrement):0x1,fValue=sValue?parseFloat(sValue):0x0,fieldDescription={'MinValue':fMinValue,'MaxValue':fMaxValue,'SpinIncrement':fIncrement},bInteger=![];if(sInteger)bInteger=sInteger=='true'?!![]:![];fieldDescription['Format']='###,###,###,###,###'+(bInteger?'':'.00'),TriSysSDK['Controls']['NumericSpinner']['Initialise'](sID,fieldDescription),TriSysSDK['Controls']['NumericSpinner']['SetValue'](sID,fValue);break;case'combo':element['replaceWith']('<input\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'\x20/>');var lstData=[],iIndex=0x0;if(sLookups){var lst=sLookups['split'](',');lst['forEach'](function(sItem,indexInList){lstData['push']({'text':sItem,'value':sItem});if(sValue&&sItem==sValue)iIndex=indexInList;});}else{if(sTextValueListBase64){var sJSON=TriSysAPI['Encryption']['Base64']['decode'](sTextValueListBase64);lstData=JSON['parse'](sJSON),lstData['forEach'](function(values,indexInList){if(sValue&&values['value']==sValue)iIndex=indexInList;});}}var fnSingleSelect=function(value,sText,sFieldID){sOnChangeFunction&&TriSysApex['DynamicClasses']['CallFunction'](sOnChangeFunction,value,sText,sFieldID);};TriSysSDK['CShowForm']['populateComboFromDataSource'](sID,lstData,iIndex,fnSingleSelect);if(bReadOnly)setTimeout(function(){TriSysSDK['CShowForm']['ComboReadonly'](sID,bReadOnly);},0x1f4);break;case'skillcombo':element['replaceWith']('<input\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'\x20/>');var fnSingleSelect=function(value,sText,sFieldID){};TriSysSDK['CShowForm']['skillCombo'](sID,sCategory,sValue,fnSingleSelect);if(bReadOnly)setTimeout(function(){TriSysSDK['CShowForm']['ComboReadonly'](sID,bReadOnly);},0x1f4);break;case'usercombo':element['replaceWith']('<input\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'\x20/>');var fnSelectUser=function(lUserId,sUserName){};TriSysSDK['CShowForm']['UserCombo'](sID,fnSelectUser);if(bReadOnly)setTimeout(function(){TriSysSDK['CShowForm']['ComboReadonly'](sID,bReadOnly);},0x1f4);break;case'contact':var sContactLookupTableHTML=TriSysSDK['Controls']['ContactLookup']['ContactControlHTML'](sID,sHideFindButton,sHideOpenButton,sHideDeleteButton);element['replaceWith'](sContactLookupTableHTML);break;case'company':var sCompanyLookupTableHTML=TriSysSDK['Controls']['CompanyLookup']['CompanyControlHTML'](sID,sHideFindButton,sHideOpenButton,sHideDeleteButton);element['replaceWith'](sCompanyLookupTableHTML);break;case'singleselectcombo':element['replaceWith']('<input\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'\x20/>');if(sDataFunction){var fn=TriSysApex['DynamicClasses']['GetObject'](sDataFunction);if(fn){var lst=fn(),fnSingleSelect=function(value,sText,sFieldID){var sSelected=sText;sOnChangeFunction&&TriSysApex['DynamicClasses']['CallFunction'](sOnChangeFunction,value,sText,sFieldID);};TriSysSDK['CShowForm']['populateComboFromDataSource'](sID,lst,iIndex,fnSingleSelect);}}if(bReadOnly)setTimeout(function(){TriSysSDK['CShowForm']['ComboReadonly'](sID,bReadOnly);},0x1f4);break;case'list':element['replaceWith']('<input\x20type=\x22text\x22\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'\x20/>');var fn=TriSysApex['DynamicClasses']['GetObject'](sDataFunction),lst=fn(),fnOnChange=function(e,r){var sFieldID=e['sender']['element'][0x0]['id'],lstValues=TriSysSDK['CShowForm']['GetSelectedSkillsFromListAsArray'](sFieldID),sSelected=lstValues['join'](',\x20');};TriSysSDK['CShowForm']['populateMultiSelectComboFromDataSource'](sID,lst,fnOnChange);if(sValue)TriSysSDK['CShowForm']['SetSkillsInList'](sID,sValue);break;case'currencyamount':element['replaceWith']('<div\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'\x20></div>');var fMinValue=sMinimum?parseFloat(sMinimum):0x0,fMaxValue=sMaximum?parseFloat(sMaximum):0xe8d4a50fff,fIncrement=sIncrement?parseFloat(sIncrement):0x1,fieldDescription={'MinValue':fMinValue,'MaxValue':fMaxValue,'SpinIncrement':fIncrement};TriSysSDK['Controls']['CurrencyAmount']['Load'](sID,fieldDescription,function(){if(sValue)TriSysSDK['Controls']['CurrencyAmount']['SetCurrencyAmount'](sID,sValue);});if(bReadOnly)setTimeout(function(){TriSysSDK['Controls']['CurrencyAmount']['Readonly'](sID,bReadOnly);},0x1f4);break;case'currencyamountperiod':element['replaceWith']('<div\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'\x20></div>');var fMinValue=sMinimum?parseFloat(sMinimum):0x0,fMaxValue=sMaximum?parseFloat(sMaximum):0xe8d4a50fff,fIncrement=sIncrement?parseFloat(sIncrement):0x1,fieldDescription={'MinValue':fMinValue,'MaxValue':fMaxValue,'SpinIncrement':fIncrement};TriSysSDK['Controls']['CurrencyAmountPeriod']['Load'](sID,fieldDescription);if(sValue)TriSysSDK['Controls']['CurrencyAmountPeriod']['SetCurrencyAmountPeriod'](sID,sValue);if(bReadOnly)setTimeout(function(){TriSysSDK['Controls']['CurrencyAmountPeriod']['Readonly'](sID,bReadOnly);},0x1f4);break;case'file':element['replaceWith']('<div\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle,['width:100%'])+'></div>');var defaults={};if(sHideFindButton)defaults['HideFindButton']=sHideFindButton=='true'?!![]:![];if(sHideDeleteButton)defaults['HideDeleteButton']=sHideDeleteButton=='true'?!![]:![];if(sHideOpenButton)defaults['HideOpenButton']=sHideOpenButton=='true'?!![]:![];var fnSelectedFile=function(sOperation,sFieldID,sFilePath){};TriSysSDK['Controls']['FileReference']['Load'](sID,null,fnSelectedFile,defaults);break;case'jobtitle':var sJobTitleHTML=TriSysSDK['JobTitle']['JobTitleControlHTML'](sID,sHideFindButton);element['replaceWith'](sJobTitleHTML);break;case'telephone':var sPhoneTable=''+'<table\x20style=\x22width:\x20100%;\x22\x20cellpadding=\x220\x22\x20cellspacing=\x220\x22>'+'\x09<tr>'+'\x09\x09<td>'+'\x09\x09\x09<input\x20type=\x22text\x22\x20class=\x22k-textbox\x22\x20name=\x22'+sID+'\x22\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+'style=\x22width:100%;\x22\x20/>\x20'+'\x09\x09</td>'+'\x09\x09<td\x20style=\x22width:\x2040px;\x20padding-left:\x205px;\x22>'+'\x09\x09\x09<button\x20type=\x22submit\x22\x20class=\x22btn\x20btn-sm\x20btn-default\x22\x20'+'\x09\x09\x09\x09onclick=\x22TriSysSDK.Controls.FieldHyperlinks.TelNo(\x27'+sID+'\x27)\x22\x20title=\x22'+sTitle+'\x22\x20style=\x22right:0px;\x22>'+'\x09\x09\x09\x09<i\x20class=\x22gi\x20gi-phone_alt\x20themed-color\x22></i>'+'\x09\x09\x09</button>'+'\x09\x09</td>'+'\x09</tr>'+'</table>';element['replaceWith'](sPhoneTable),$('#'+sID)['val'](sValue);break;case'email':var sEMailTable=''+'<table\x20style=\x22width:\x20100%;\x22\x20cellpadding=\x220\x22\x20cellspacing=\x220\x22>'+'\x09<tr>'+'\x09\x09<td>'+'\x09\x09\x09<input\x20type=\x22text\x22\x20class=\x22k-textbox\x22\x20name=\x22'+sID+'\x22\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+'\x20style=\x22width:100%;\x22\x20/>'+'\x09\x09</td>'+'\x09\x09<td\x20style=\x22width:\x2040px;\x20padding-left:\x205px;\x22>'+'\x09\x09\x09<button\x20type=\x22submit\x22\x20class=\x22btn\x20btn-sm\x20btn-default\x22\x20'+'\x09\x09\x09\x09onclick=\x22TriSysSDK.Controls.FieldHyperlinks.EMail(\x27'+sID+'\x27)\x22\x20title=\x22'+sTitle+'\x22\x20style=\x22right:0px;\x22>'+'\x09\x09\x09\x09<i\x20class=\x22gi\x20gi-envelope\x20themed-color\x22></i>'+'\x09\x09\x09</button>'+'\x09\x09</td>'+'\x09</tr>'+'</table>';element['replaceWith'](sEMailTable),$('#'+sID)['val'](sValue);break;case'internet':var sInternetTable=''+'<table\x20style=\x22width:\x20100%;\x22\x20cellpadding=\x220\x22\x20cellspacing=\x220\x22>'+'\x09<tr>'+'\x09\x09<td>'+'\x09\x09\x09<input\x20type=\x22text\x22\x20class=\x22k-textbox\x22\x20name=\x22'+sID+'\x22\x20id=\x22'+sID+''+sFlexivaField+sAdditionalTags+'\x22\x20style=\x22width:100%;\x22\x20/>'+'\x09\x09</td>'+'\x09\x09<td\x20style=\x22width:\x2040px;\x20padding-left:\x205px;\x22>'+'\x09\x09\x09<button\x20type=\x22submit\x22\x20class=\x22btn\x20btn-sm\x20btn-default\x22\x20'+'\x09\x09\x09\x09onclick=\x22TriSysSDK.Controls.FieldHyperlinks.Web(\x27'+sID+'\x27)\x22\x20title=\x22'+sTitle+'\x22\x20style=\x22right:0px;\x22>'+'\x09\x09\x09\x09<i\x20class=\x22gi\x20gi-globe\x20themed-color\x22></i>'+'\x09\x09\x09</button>'+'\x09\x09</td>'+'\x09</tr>'+'</table>';element['replaceWith'](sInternetTable),$('#'+sID)['val'](sValue);break;case'yesno':var sOnChange=sOnChangeFunction?'\x20onchange=\x22'+sOnChangeFunction+'\x22':'';sTitle=sTitle?'&nbsp;\x20&nbsp;'+sTitle:'';var sYesNo=''+'<label\x20class=\x22switch\x20switch-primary\x22>'+'\x09<input\x20type=\x22checkbox\x22\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+sOnChange+sReadOnlyCheckBox+'\x20/>'+'\x09<span></span>'+'</label>'+sTitle;element['replaceWith'](sYesNo);if(sValue)TriSysSDK['CShowForm']['SetCheckBoxValue'](sID,sValue=='true'?!![]:![]);break;case'image':var sImage='<img\x20id=\x22'+sID+'\x22\x20'+sFlexivaField+sAdditionalTags+TriSysSDK['CShowForm']['ApplyFieldStyle'](sStyle)+'\x20/>';element['replaceWith'](sImage);break;case'bigeditbutton':var sOnClick=sDataFunction?'\x20onclick=\x22'+sDataFunction+'\x22':'',sBigEditButtonTable=''+'<table\x20style=\x22width:\x20100%;\x22\x20cellpadding=\x220\x22\x20cellspacing=\x220\x22>'+'\x09<tr>'+'\x09\x09<td>'+'\x09\x09\x09<strong>'+sValue+'</strong>'+'\x09\x09</td>'+'\x09\x09<td\x20style=\x22width:\x2040px;\x20padding-left:\x205px;\x22>'+'\x09\x09\x09<button\x20type=\x22submit\x22\x20class=\x22btn\x20btn-sm\x20btn-default\x22\x20id=\x22'+sID+'\x22'+'\x09\x09\x09\x09'+sOnClick+'\x20title=\x22'+sTitle+'\x22\x20style=\x22right:0px;\x22>'+'\x09\x09\x09\x09<i\x20class=\x22gi\x20gi-pen\x20themed-color\x22></i>'+'\x09\x09\x09</button>'+'\x09\x09</td>'+'\x09</tr>'+'</table>';element['replaceWith'](sBigEditButtonTable);break;case'grid':var sGrid='<div\x20id=\x22'+sID+'\x22\x20style=\x22border-width:\x201px;\x20width:\x20100%;\x20\x22>'+'</div>';element['replaceWith'](sGrid);break;case'icon':var sIconPickerHTML=TriSysApex['ModalDialogue']['IconPicker']['ControlHTML'](sID,sHideFindButton,sClass);element['replaceWith'](sIconPickerHTML);break;case'colour':var sColourPicker='<div\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+'></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20&nbsp;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<a\x20style=\x22cursor:\x20pointer;\x22\x20class=\x22btn\x20btn-sm\x20btn-default\x20enable-tooltip\x22\x20title=\x22Clear\x20Colour\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20id=\x22'+sID+'-clear\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onclick=\x22TriSysSDK.Controls.ColourPicker.ClearColour(\x27'+sOnChangeFunction+'\x27,\x20\x27'+sID+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22gi\x20gi-remove_2\x22></i>\x20&nbsp;\x20Clear\x20&nbsp;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</a>';element['replaceWith'](sColourPicker),TriSysSDK['Controls']['ColourPicker']['Load'](sID,sValue,sOnChangeFunction);break;case'fileuploadimage':var sControlHTML='<table\x20class=\x22table\x20table-borderless\x22\x20id=\x22'+sID+'\x22'+sFlexivaField+sAdditionalTags+'>\x0a\x09\x09\x09\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tbody>\x0a\x09\x09\x09\x09\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x09\x09\x09\x09\x09\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x09\x09\x09\x09\x09\x09\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20class=\x22image-tag\x22>\x0a\x09\x09\x09\x09\x09\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x09\x09\x09\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tbody>\x0a\x09\x09\x09\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>';element['replaceWith'](sControlHTML),TriSysSDK['Controls']['FileUploadImage']['Load'](sID,sValue,sOnChangeFunction);break;}}catch(ex){TriSysApex['UI']['errorAlert'](TriSysApex['Logging']['CatchVariableToText'](ex));}},'HTMLComponentCodeInjection':function(element){try{var sID=element['attr']('id'),sType=element['attr']('type');switch(sType){case'Colour':case'Contact':case'Company':case'CurrencyAmount':case'CurrencyAmountPeriod':case'Date':case'DateTime':case'EMail':case'FolderReference':case'Internet':case'JobTitle':case'Telephone':case'SkillCombo':case'Combo':case'YesNo':element['attr']('type',sType['toLowerCase']()),TriSysSDK['CShowForm']['HTMLFieldCodeInjection'](element);break;case'Float':case'Integer':element['attr']('type','numeric'),TriSysSDK['CShowForm']['HTMLFieldCodeInjection'](element);break;case'FileReference':element['attr']('type','file'),TriSysSDK['CShowForm']['HTMLFieldCodeInjection'](element);break;case'Password':element['attr']('type','textbox'),TriSysSDK['CShowForm']['HTMLFieldCodeInjection'](element);break;case'Percent':element['attr']('type','numeric'),element['attr']('minimum',0x0),element['attr']('maximum',0x64),TriSysSDK['CShowForm']['HTMLFieldCodeInjection'](element);break;case'Text':element['attr']('type','textbox'),TriSysSDK['CShowForm']['HTMLFieldCodeInjection'](element);break;case'User':element['attr']('type','usercombo'),TriSysSDK['CShowForm']['HTMLFieldCodeInjection'](element);break;default:TriSysFlexiva['Forms']['Renderer']['Components']['HTMLCodeInjection'](element);break;}}catch(e){}},'ApplyFieldStyle':function(sStyle,lstAdditionalStyles){if(!sStyle)sStyle='';else{if(sStyle[sStyle['length']-0x1]!=';')sStyle+=';';}var sAllStyles=sStyle?sStyle:'';lstAdditionalStyles&&lstAdditionalStyles['forEach'](function(sStyle){var bAddStyle=!![],parts=sStyle['split'](':');if(sAllStyles['indexOf'](parts[0x0]+':')>=0x0)bAddStyle=![];if(bAddStyle){if(sAllStyles['length']>0x0)sAllStyles+='\x20';sAllStyles+=sStyle+';';}});if(sAllStyles['length']>0x0)sAllStyles='\x20style=\x22'+sAllStyles+'\x22';return sAllStyles;},'InitialiseFormFields':{'_Forms':[],'Clear':function(){TriSysSDK['CShowForm']['InitialiseFormFields']['_Form']=[];},'FormObject':function(sFormName){var foundForm=null;return TriSysSDK['CShowForm']['InitialiseFormFields']['_Forms']['forEach'](function(form){if(form['FormName']==sFormName)foundForm=form;}),foundForm;},'MarkFormAsLoaded':function(sFormName,bInitialised){if(!sFormName)return;var form=TriSysSDK['CShowForm']['InitialiseFormFields']['FormObject'](sFormName);if(form)form['Initialised']=bInitialised;else TriSysSDK['CShowForm']['InitialiseFormFields']['_Forms']['push']({'FormName':sFormName,'Initialised':bInitialised});},'WaitUntilFormLoaded':function(sFormName,fnLoadEntityFormData){var fnWaitForFormToBeLoaded=function(){var bFormLoaded=!![],form=TriSysSDK['CShowForm']['InitialiseFormFields']['FormObject'](sFormName);if(form)bFormLoaded=form['Initialised'];if(bFormLoaded)fnLoadEntityFormData();else setTimeout(fnWaitForFormToBeLoaded,0xfa);};fnWaitForFormToBeLoaded();}},'InitialiseFieldWidget':function(fieldDescription){var sFieldID=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'],sJQueryID='#'+sFieldID;switch(fieldDescription['FieldTypeId']){case TriSysSDK['Controls']['FieldTypes']['Text']:if(fieldDescription['Lookup']&&sFieldID!='Contact_Users')TriSysSDK['CShowForm']['skillCombo'](sFieldID,fieldDescription['TableFieldName'],null);break;case TriSysSDK['Controls']['FieldTypes']['Date']:TriSysSDK['CShowForm']['datePicker'](sFieldID);break;case TriSysSDK['Controls']['FieldTypes']['List']:case TriSysSDK['Controls']['FieldTypes']['MultiSelectList']:TriSysSDK['CShowForm']['skillList'](sFieldID,fieldDescription['TableFieldName']);break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmountPeriod']:TriSysSDK['Controls']['CurrencyAmountPeriod']['Load'](sFieldID,fieldDescription);break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmount']:TriSysSDK['Controls']['CurrencyAmount']['Load'](sFieldID,fieldDescription);break;case TriSysSDK['Controls']['FieldTypes']['FileReference']:case TriSysSDK['Controls']['FieldTypes']['Image']:TriSysSDK['Controls']['FileReference']['Load'](sFieldID,fieldDescription);break;case TriSysSDK['Controls']['FieldTypes']['JobTitle']:TriSysSDK['CShowForm']['jobTitleCombo'](sFieldID,null);break;case TriSysSDK['Controls']['FieldTypes']['Integer']:fieldDescription['Format']='###,###,###,###,###',TriSysSDK['Controls']['NumericSpinner']['Initialise'](sFieldID,fieldDescription);break;case TriSysSDK['Controls']['FieldTypes']['Float']:case TriSysSDK['Controls']['FieldTypes']['Currency']:case TriSysSDK['Controls']['FieldTypes']['Percent']:TriSysSDK['Controls']['NumericSpinner']['Initialise'](sFieldID,fieldDescription);break;case TriSysSDK['Controls']['FieldTypes']['User']:var bBlankRow=!![];TriSysSDK['CShowForm']['UserCombo'](sFieldID,null,bBlankRow);break;case TriSysSDK['Controls']['FieldTypes']['SkillCombo']:if(fieldDescription['TableFieldName']=='Type')TriSysSDK['CShowForm']['entityTypeCombo'](fieldDescription['TableName'],sFieldID,null);else TriSysSDK['CShowForm']['skillCombo'](sFieldID,fieldDescription['SkillComboCategory'],fieldDescription['DefaultValue']);break;case TriSysSDK['Controls']['FieldTypes']['Contact']:break;case TriSysSDK['Controls']['FieldTypes']['Company']:break;}switch(fieldDescription['TableName']){case'Contact':switch(fieldDescription['TableFieldName']){case'Priority':TriSysSDK['CShowForm']['ContactPriorityCombo'](sFieldID);break;case'Users':TriSysSDK['CShowForm']['MultiUserCombo'](sFieldID);break;}break;case'Company':switch(fieldDescription['TableFieldName']){case'IndustryId':TriSysSDK['CShowForm']['IndustryCombo'](sFieldID);break;}break;}},'writeFieldValueToWidget':function(sFieldID,htmlValue,fieldDescription){var dataValue=htmlValue,bMandatory=!![],bEditable=!![],bWriteToField=!![],sJQueryID='#'+sFieldID,iFieldTypeId=fieldDescription['FieldTypeId'],bLookup=fieldDescription['Lookup'],sDisplayFormat=fieldDescription['DisplayFormat'];switch(iFieldTypeId){case TriSysSDK['Controls']['FieldTypes']['Text']:var bConvertTextToHTML=![];if(htmlValue&&bConvertTextToHTML)htmlValue=htmlValue['replace'](/\r\n/g,'<br\x20/>\x0d\x0a');bMandatory=![];bLookup&&(TriSysSDK['CShowForm']['SetTextInCombo'](sFieldID,htmlValue),bWriteToField=![]);break;case TriSysSDK['Controls']['FieldTypes']['YesNo']:TriSysSDK['CShowForm']['SetCheckBoxValue'](sFieldID,htmlValue),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['Date']:TriSysSDK['CShowForm']['setDatePickerValue'](sFieldID,htmlValue,sDisplayFormat),bMandatory=![],bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['List']:case TriSysSDK['Controls']['FieldTypes']['MultiSelectList']:TriSysSDK['CShowForm']['SetSkillsInList'](sFieldID,htmlValue),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmountPeriod']:TriSysSDK['Controls']['CurrencyAmountPeriod']['SetCurrencyAmountPeriod'](sFieldID,htmlValue),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmount']:TriSysSDK['Controls']['CurrencyAmount']['SetCurrencyAmount'](sFieldID,htmlValue),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['JobTitle']:TriSysSDK['CShowForm']['SetJobTitleInField'](sFieldID,htmlValue),bWriteToField=![],bMandatory=![];break;case TriSysSDK['Controls']['FieldTypes']['FileReference']:case TriSysSDK['Controls']['FieldTypes']['Image']:TriSysSDK['Controls']['FileReference']['SetFile'](sFieldID,htmlValue),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['Integer']:case TriSysSDK['Controls']['FieldTypes']['Float']:case TriSysSDK['Controls']['FieldTypes']['Currency']:case TriSysSDK['Controls']['FieldTypes']['Percent']:TriSysSDK['Controls']['NumericSpinner']['SetValue'](sFieldID,htmlValue),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['User']:TriSysSDK['CShowForm']['SetUserIdInCombo'](sFieldID,htmlValue),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['SkillCombo']:var bSet=TriSysSDK['CShowForm']['SetTextInCombo'](sFieldID,htmlValue);if(!bSet)TriSysSDK['CShowForm']['SetValueInCombo'](sFieldID,htmlValue);break;case TriSysSDK['Controls']['FieldTypes']['Combo']:var bSet=TriSysSDK['CShowForm']['SetValueInCombo'](sFieldID,htmlValue);if(!bSet)TriSysSDK['CShowForm']['SetTextInCombo'](sFieldID,htmlValue);break;case TriSysSDK['Controls']['FieldTypes']['Contact']:TriSysSDK['Controls']['ContactLookup']['WriteContactId'](sFieldID,fieldDescription['Value'],fieldDescription['DisplayValue']),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['Company']:TriSysSDK['Controls']['CompanyLookup']['WriteCompanyId'](sFieldID,fieldDescription['Value'],fieldDescription['DisplayValue']),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['Icon']:var sHTML='',sIcon=htmlValue;TriSysApex['ModalDialogue']['IconPicker']['Display'](sFieldID,sIcon),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['ImageURL']:$('#'+sFieldID)['attr']('src',htmlValue),bWriteToField=![];break;case TriSysSDK['Controls']['FieldTypes']['FileUploadImage']:TriSysSDK['Controls']['FileUploadImage']['Show'](sFieldID,htmlValue),bWriteToField=![];break;}bWriteToField&&$(sJQueryID)['val'](htmlValue);},'writeFieldDescriptionValue':function(fieldDescription){var sFieldID=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'],sJQueryID='#'+sFieldID,htmlValue=TriSysSDK['CShowForm']['getFieldDescriptionValue'](fieldDescription);TriSysSDK['CShowForm']['writeFieldValueToWidget'](sFieldID,htmlValue,fieldDescription);switch(fieldDescription['TableName']){case'Contact':switch(fieldDescription['TableFieldName']){case'ContactMale':TriSysSDK['CShowForm']['contactSexFieldEditableProperties'](sFieldID,htmlValue);break;case'ContactTitle':TriSysSDK['CShowForm']['contactTitleFieldEditableProperties'](sFieldID,htmlValue);break;case'ContactMarried':TriSysSDK['CShowForm']['contactMarriedFieldEditableProperties'](sFieldID,htmlValue);break;}break;case'ContactConfigFields':switch(fieldDescription['TableFieldName']){}break;}},'getFieldDescriptionFromCollection':function(fieldDescriptions,sTableName,sTableFieldName){if(fieldDescriptions)for(var i=0x0;i<fieldDescriptions['length'];i++){var fieldDescription=fieldDescriptions[i];if(fieldDescription['TableName']==sTableName&&fieldDescription['TableFieldName']==sTableFieldName)return fieldDescription;}},'getFieldDescriptionValue':function(fieldDescription){if(!fieldDescription)return null;var fieldNamesForDisplayValue=['Contact_CompanyName','Contact_CompanyAddress'],sFieldID=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'];for(var i=0x0;i<fieldNamesForDisplayValue['length'];i++){var sFieldName=fieldNamesForDisplayValue[i];if(sFieldName==sFieldID)return fieldDescription['DisplayValue'];switch(fieldDescription['FieldTypeId']){case TriSysSDK['Controls']['FieldTypes']['JobTitle']:if(TriSysSDK['CShowForm']['JobTitlesCached']())fieldDescription['DisplayValue'];else{if($['isNumeric'](fieldDescription['Value']))return fieldDescription['DisplayValue'];else return fieldDescription['Value'];}break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmountPeriod']:case TriSysSDK['Controls']['FieldTypes']['CurrencyAmount']:return fieldDescription['DisplayValue'];break;}}return fieldDescription['Value'];},'entityTypeCombo':function(sEntityName,sFieldID,sType){var iTypeIndex=0x0,iEntityTypeIndex=-0x1,sourceTypes=[],entityTypes=TriSysApex['Cache']['EntityTypes']();for(var i=0x0;i<entityTypes['length'];i++){var entityType=entityTypes[i];if(entityType['EntityName']==sEntityName){iEntityTypeIndex+=0x1;var sourceStruct={'value':entityType['EntityTypeId'],'text':entityType['Name']};sourceTypes['push'](sourceStruct);if(entityType['Name']==sType)iTypeIndex=iEntityTypeIndex;}}TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,sourceTypes,iTypeIndex);},'ContactPriorityCombo':function(sFieldID){var sourcePriorities=[],priorities=TriSysApex['Cache']['ContactPriorities']();for(var i=0x0;i<priorities['length'];i++){var CContactPriorityColour=priorities[i],sourceStruct={'value':CContactPriorityColour['ContactPriorityId'],'text':CContactPriorityColour['ContactPriority']};sourcePriorities['push'](sourceStruct);}TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,sourcePriorities,0x0);},'IndustryCombo':function(sFieldID){var sourceIndustries=[],industries=TriSysApex['Cache']['Industries']();for(var i=0x0;i<industries['length'];i++){var Industry=industries[i],sourceStruct={'value':Industry['IndustryId'],'text':Industry['Name']};sourceIndustries['push'](sourceStruct);}TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,sourceIndustries,0x0);},'UserCombo':function(sFieldID,fnComboSelectCallback,bBlankRow,bHighlightCurrentUser){var lstHideUserId=[0x1,0x2],sourceUsers=TriSysSDK['CShowForm']['UserCacheDataSource'](![],bBlankRow,lstHideUserId),iIndex=0x0;if(bBlankRow||bHighlightCurrentUser){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials){var lUserId=userCredentials['LoggedInUser']['UserId'];$['each'](sourceUsers,function(index,item){if(item['value']==lUserId)iIndex=index;});}}TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,sourceUsers,iIndex,fnComboSelectCallback);},'UserCacheDataSource':function(bIgnoreLocked,bBlankRow,lstHideUserId){var sourceUsers=[];if(bBlankRow)sourceUsers['push']({'value':0x0,'text':''});return $['each'](TriSysApex['Cache']['Users'](),function(index,user){var sourceStruct={'value':user['UserId'],'text':user['FullName']},bAddToList=bIgnoreLocked?!user['Locked']:!![];if(lstHideUserId){if(lstHideUserId['indexOf'](user['UserId'])>=0x0)bAddToList=![];}if(bAddToList)sourceUsers['push'](sourceStruct);}),sourceUsers;},'AddressTypesCombo':function(sFieldID){var source=TriSysSDK['CShowForm']['AddressTypesCacheDataSource']();TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,source,0x0);},'AddressTypesCacheDataSource':function(){var source=[];return $['each'](TriSysApex['Cache']['AddressTypes'](),function(index,addressType){var sourceStruct={'value':addressType['AddressTypeId'],'text':addressType['Name']};source['push'](sourceStruct);}),source;},'MultiUserCombo':function(sFieldID,fnOnChange){var bIgnoreLocked=!![],sourceUsers=TriSysSDK['CShowForm']['UserCacheDataSource'](bIgnoreLocked);TriSysSDK['CShowForm']['populateMultiSelectComboFromDataSource'](sFieldID,sourceUsers,fnOnChange);},'entityTypeMultiSelectCombo':function(sEntityName,sFieldID){var sourceTypes=[],entityTypes=TriSysApex['Cache']['EntityTypes']();for(var i=0x0;i<entityTypes['length'];i++){var entityType=entityTypes[i];if(entityType['EntityName']==sEntityName){var sourceStruct={'value':entityType['EntityTypeId'],'text':entityType['Name']};sourceTypes['push'](sourceStruct);}}TriSysSDK['CShowForm']['populateMultiSelectComboFromDataSource'](sFieldID,sourceTypes);},'taskTypeMultiSelectCombo':function(sFieldID){var sourceTypes=[],taskTypes=TriSysApex['Cache']['TaskTypes']();for(var i=0x0;i<taskTypes['length'];i++){var taskType=taskTypes[i],sourceStruct={'value':taskType['TaskTypeId'],'text':taskType['Name']};sourceTypes['push'](sourceStruct);}TriSysSDK['CShowForm']['populateMultiSelectComboFromDataSource'](sFieldID,sourceTypes);},'LoadCurrencyCombo':function(sJQueryDivTag){var currencies=TriSysApex['Cache']['Currencies'](),sourceCurrencies=[];if(!currencies)return;for(var i=0x0;i<currencies['length'];i++){var currency=currencies[i],sourceStruct={'value':currency['Symbol'],'text':currency['Symbol']};sourceCurrencies['push'](sourceStruct);}TriSysSDK['CShowForm']['populateComboFromDataSource'](sJQueryDivTag,sourceCurrencies,0x0);},'LoadConsultancyPeriodCombo':function(sJQueryDivTag){var periods=TriSysApex['Cache']['ConsultancyPeriods'](),sourcePeriods=[];if(!periods)return;for(var i=0x0;i<periods['length'];i++){var period=periods[i],sourceStruct={'value':period['Name'],'text':period['Name']};sourcePeriods['push'](sourceStruct);}TriSysSDK['CShowForm']['populateComboFromDataSource'](sJQueryDivTag,sourcePeriods,0x0);},'skillCombo':function(sFieldID,sCategory,sSkill,fnComboSelectCallback,options){var iSkillIndex=0x0,iSkillCategoryCounter=0x0,sourceSkills=[],skills=TriSysApex['Cache']['Skills']();if(!skills){TriSysApex['Logging']['LogMessage']('TriSysSDK.CShowForm.skillCombo('+sFieldID+',\x20'+sCategory+',\x20'+sSkill+')\x20-\x20Missing\x20cached\x20skills.');return;}try{var lstSkillsInCategory=TriSysSDK['CShowForm']['skillCategorySortedListOfSkills'](sCategory);options&&(options['FirstItem']&&sourceSkills['push']({'value':options['FirstItem']['Value'],'text':options['FirstItem']['Text']}));for(var i=0x0;i<lstSkillsInCategory['length'];i++){var skill=lstSkillsInCategory[i];iSkillCategoryCounter+=0x1;var sourceStruct={'value':skill['SkillId'],'text':skill['Skill']};sourceSkills['push'](sourceStruct);if(skill['Skill']==sSkill)iSkillIndex=iSkillCategoryCounter-0x1;}TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,sourceSkills,iSkillIndex,fnComboSelectCallback);}catch(e){}},'parseDateFormats':['dd\x20MMMM\x20yyyy','dd\x20MMM\x20yyyy','dd\x20MM\x20yyyy','dd\x20MM\x20yy','dd\x20MMM\x20yy','dd/MM/yyyy','dd/MM/yy','dd-MM-yyyy','d-M-yyyy','dd-MM-yy','d/M/yy','d-M-yy','d/M/yyyy','d-M-yyyy'],'datePicker':function(sFieldId,fnChange){var sJQueryID='#'+sFieldId;$(sJQueryID)['kendoDatePicker']({'format':'dddd\x20dd\x20MMMM\x20yyyy','parseFormats':TriSysSDK['CShowForm']['parseDateFormats'],'min':new Date(0x76c,0x1,0x1),'change':function(e){try{var dtSelectedDate=$(sJQueryID)['data']('kendoDatePicker')['value']();if(fnChange)fnChange(dtSelectedDate,sFieldId);else TriSysApex['FieldEvents']['DateChange'](sFieldId,dtSelectedDate);}catch(e){}}});},'dateTimePicker':function(sFieldId,fnChange){var sJQueryID='#'+sFieldId;$(sJQueryID)['kendoDateTimePicker']({'format':'dddd\x20dd\x20MMMM\x20yyyy\x20HH:mm','timeFormat':'HH:mm','parseFormats':TriSysSDK['CShowForm']['parseDateFormats'],'min':new Date(0x76c,0x1,0x1),'change':function(e){try{var dtSelectedDateTime=$(sJQueryID)['data']('kendoDateTimePicker')['value']();if(fnChange)fnChange(dtSelectedDateTime,sFieldId);}catch(e){}}});},'setDatePickerValue':function(sFieldId,dtValue,sDisplayFormat){var sJQueryID='#'+sFieldId;try{var datepicker=$(sJQueryID)['data']('kendoDatePicker');if(datepicker){sDisplayFormat&&datepicker['setOptions']({'format':sDisplayFormat});var dt=null;if(dtValue)dt=new Date(dtValue);datepicker['value'](dt);}}catch(err){}},'getDatePickerValue':function(sFieldId,sFormat){var sJQueryID='#'+sFieldId,datepicker=$(sJQueryID)['data']('kendoDatePicker');if(datepicker){var sValue=datepicker['value']();if(sValue){if(!sFormat)sFormat='YYYY/MM/DD';return sValue=moment(sValue)['format'](sFormat),sValue;}}},'setDateTimePickerValue':function(sFieldId,dtValue){var sJQueryID='#'+sFieldId,datepicker=$(sJQueryID)['data']('kendoDateTimePicker');if(datepicker)try{var dt=null;if(dtValue)dt=new Date(dtValue);datepicker['value'](dt);}catch(err){}},'getDateTimePickerValue':function(sFieldId,sFormat){var sJQueryID='#'+sFieldId,datepicker=$(sJQueryID)['data']('kendoDateTimePicker');if(datepicker){var sValue=datepicker['value']();if(sValue){if(!sFormat)sFormat='YYYY/MM/DD\x20HH:mm';return sValue=moment(sValue)['format'](sFormat),sValue;}}},'datePickerReadOnly':function(sFieldId,bReadOnly){var sJQueryID='#'+sFieldId,datepicker=$(sJQueryID)['data']('kendoDatePicker');datepicker&&datepicker['readonly'](bReadOnly);},'dateTimePickerReadOnly':function(sFieldId,bReadOnly){var sJQueryID='#'+sFieldId,datepicker=$(sJQueryID)['data']('kendoDateTimePicker');datepicker&&datepicker['readonly'](bReadOnly);},'CheckBoxClickEvent':function(sFieldId,fnCallback){$('#'+sFieldId)['off']()['change'](function(){var bChecked=this['checked'];fnCallback(sFieldId,bChecked);});},'CheckBoxValue':function(sFieldId,bDefault){return TriSysSDK['CShowForm']['GetCheckBoxValue'](sFieldId,bDefault);},'GetCheckBoxValue':function(sFieldId,bDefault){try{var bValue=document['getElementById'](sFieldId)['checked'];return bValue;}catch(ex){}return bDefault;},'SetCheckBoxValue':function(sFieldId,sValue){try{var bValue=TriSysAPI['Operators']['stringToBoolean'](sValue);document['getElementById'](sFieldId)['checked']=bValue;}catch(ex){}},'populateComboFromListOfString':function(sDiv,lstOfString,sSelectedItem,fnChange){if(lstOfString){var dataSource=TriSysSDK['CShowForm']['generateDataSourceFromListOfString'](lstOfString);if(dataSource['length']>0x0){TriSysSDK['CShowForm']['populateComboFromDataSource'](sDiv,dataSource,0x0,fnChange);if(sSelectedItem)TriSysSDK['CShowForm']['SetTextInCombo'](sDiv,sSelectedItem);}}},'generateDataSourceFromListOfString':function(lstOfString){if(lstOfString){var dataSource=[];for(var i=0x0;i<lstOfString['length'];i++){var sItem=lstOfString[i],item={'text':sItem,'value':sItem};dataSource['push'](item);}return dataSource;}},'populateComboFromDataSource':function(sFieldID,sourceData,iIndex,fnChange,options){if(!iIndex)iIndex=0x0;if(sFieldID['indexOf']('#')==0x0)sFieldID=sFieldID['substring'](0x1);var myFunctionChange=function(){var value=$('#'+sFieldID)['val'](),sText=TriSysSDK['CShowForm']['GetTextFromCombo'](sFieldID);TriSysApex['FieldEvents']['ComboClick'](sFieldID,sText,value);};fnChange&&(myFunctionChange=function(){var value=$('#'+sFieldID)['val'](),sText=TriSysSDK['CShowForm']['GetTextFromCombo'](sFieldID);fnChange(value,sText,sFieldID);});var myKendoUIOptions={'dataTextField':'text','dataValueField':'value','dataSource':sourceData,'index':iIndex,'change':myFunctionChange};options&&options['template']&&(myKendoUIOptions['template']=options['template']);var elem=$('#'+sFieldID);elem['kendoDropDownList'](myKendoUIOptions);var dropdownlist=elem['data']('kendoDropDownList');try{dropdownlist['select'](iIndex);}catch(ex){}return;try{var ddl=dropdownlist['list']['width']('auto');}catch(ex){}setTimeout(function(){try{var iWidth=elem['parent']()['width']();elem['width'](iWidth);}catch(e){}},0x3e8);},'RePopulateDataSourceInCombo':function(sFieldID,sourceData){if(sFieldID['indexOf']('#')==0x0)sFieldID=sFieldID['substring'](0x1);var dropdownlist=$('#'+sFieldID)['data']('kendoDropDownList');dropdownlist&&(dropdownlist['dataSource']['data']([]),dropdownlist['dataSource']['options']['data']=sourceData,dropdownlist['dataSource']['data'](sourceData),sourceData['length']>0x0&&dropdownlist['select'](0x0));},'addItemToCombo':function(sFieldID,sItem,bSelectItem,objValue,bInsertAtTop){try{if(!objValue)objValue=sItem;var combo=$('#'+sFieldID)['data']('kendoDropDownList'),newItem={'text':sItem,'value':objValue};if(bInsertAtTop)combo['dataSource']['insert'](newItem);else combo['dataSource']['add'](newItem);bSelectItem&&combo['value'](objValue);}catch(e){}},'populateMultiSelectComboFromDataSource':function(sDiv,sourceData,fnOnChange,fOnFilter){if(!sourceData)sourceData=[];try{$('#'+sDiv)['kendoMultiSelect']({'dataTextField':'text','dataValueField':'value','dataSource':sourceData,'change':fnOnChange,'filtering':fOnFilter});}catch(e){}},'skillCategorySortedListOfSkills':function(sCategory){if(!sCategory)return null;var skills=TriSysApex['Cache']['Skills']();if(!skills){TriSysApex['Logging']['LogMessage']('TriSysSDK.CShowForm.skillCategorySortedListOfSkills('+sCategory+')\x20-\x20Missing\x20cached\x20skills.');return;}var fieldDescription=null,fieldDescriptions=TriSysApex['Cache']['FieldDescriptions']();fieldDescriptions&&fieldDescriptions['forEach'](function(fd){if(fd['TableFieldName']==sCategory){if(fieldDescription){fieldDescription=null;return;}else fieldDescription=fd;}});var lstSkillsInCategory=[];return skills['forEach'](function(skill){var bAddSkill=![];if(fieldDescription&&skill['FieldId']){if(skill['FieldId']==fieldDescription['FieldId'])bAddSkill=!![];}else{if(skill['Category']['trim']()==sCategory['trim']())bAddSkill=!![];}if(bAddSkill)lstSkillsInCategory['push'](skill);}),fieldDescription&&(fieldDescription['SortAlphabetically']?lstSkillsInCategory['sort'](function(a,b){return a['Skill']['localeCompare'](b['Skill']);}):lstSkillsInCategory['sort'](function(a,b){return parseInt(a['Ordering'])-parseInt(b['Ordering']);})),lstSkillsInCategory;},'skillList':function(sFieldID,sCategory,fnOnChange){var lstSkillsInCategory=TriSysSDK['CShowForm']['skillCategorySortedListOfSkills'](sCategory);try{var sourceSkills=[];for(var i=0x0;i<lstSkillsInCategory['length'];i++){var skill=lstSkillsInCategory[i],sourceStruct={'text':skill['Skill'],'value':skill['SkillId']};sourceSkills['push'](sourceStruct);}$('#'+sFieldID)['kendoMultiSelect']({'dataTextField':'text','dataValueField':'value','dataSource':sourceSkills,'change':fnOnChange});}catch(e){TriSysApex['Logging']['LogMessage']('TriSysSDK.CShowForm.skillList('+sFieldID+',\x20'+sCategory+')\x20-\x20Missing\x20cached\x20skills.');}},'RemoveItemFromCombo':function(sFieldID,sItemTextOrValue){var dropdownlist=$('#'+sFieldID)['data']('kendoDropDownList');if(dropdownlist){var ds=dropdownlist['dataSource']['data']();ds&&$['each'](ds,function(index,item){if(item['value']==sItemTextOrValue||item['text']==sItemTextOrValue)dropdownlist['dataSource']['remove'](item);});}},'SetValueInCombo':function(sFieldID,objValue){var dropdownlist=$('#'+sFieldID)['data']('kendoDropDownList');if(dropdownlist){var ds=dropdownlist['dataSource']['options']['data']||dropdownlist['dataSource']['data']()||dropdownlist['dataSource']['_data'];if(ds&&ds['length']){var foundItem=ds['find'](function(item){return item['value']==objValue;});if(foundItem)return dropdownlist['value'](objValue),!![];else console['warn']('Value\x20'+objValue+'\x20not\x20found\x20in\x20dropdown\x20list\x20for\x20'+sFieldID);}}return![];},'SetTextInCombo':function(sFieldID,sValue){try{var dropdownlist=$('#'+sFieldID)['data']('kendoDropDownList');if(dropdownlist){var ds=dropdownlist['dataSource']['options']['data'];if(ds){if(sValue)for(var j=0x0;j<ds['length'];j++){if(sValue==ds[j]['text'])return dropdownlist['value'](ds[j]['value']),!![];}}}}catch(e){}},'SetIndexInCombo':function(sFieldID,iIndex){try{var dropdownlist=$('#'+sFieldID)['data']('kendoDropDownList');if(dropdownlist){var ds=dropdownlist['dataSource']['options']['data'];ds&&dropdownlist['value'](ds[iIndex]['value']);}}catch(e){}},'ComboReadonly':function(sFieldID,bReadOnly){var dropdownlist=$('#'+sFieldID)['data']('kendoDropDownList');if(dropdownlist){if(TriSysAPI['Operators']['isEmpty'](bReadOnly))bReadOnly=!![];dropdownlist['readonly'](bReadOnly);}},'ComboVisible':function(sFieldID,bVisible){var dropdownlist=$('#'+sFieldID)['data']('kendoDropDownList');if(dropdownlist){if(TriSysAPI['Operators']['isEmpty'](bVisible))bVisible=!![];var widget=dropdownlist['wrapper'];if(widget){if(bVisible)widget['show']();else widget['hide']();}}},'DivVisible':function(sID,bVisible){var obj=$('#'+sID);try{if(bVisible)obj['show']();else obj['hide']();}catch(e){}},'isWidgetMultiSelectCombo':function(sFieldID){var skillListWidget=$('#'+sFieldID)['data']('kendoMultiSelect');if(skillListWidget)return!![];return![];},'SetSkillsInList':function(sFieldID,sValue){var skillListWidget=$('#'+sFieldID)['data']('kendoMultiSelect');if(skillListWidget){var ds=skillListWidget['dataSource']['data']();if(ds){var values=[];if(sValue){var sTextArray=null;if(Array['isArray'](sValue))sTextArray=sValue;else sTextArray=sValue['split'](',\x20');for(var i=0x0;i<sTextArray['length'];i++){var sText=sTextArray[i];for(var j=0x0;j<ds['length'];j++){if(sText==ds[j]['text'])values['push'](ds[j]['value']);}}}skillListWidget['value'](null);if(values['length']>0x0)skillListWidget['value'](values);}}},'SetValuesArrayInList':function(sFieldID,textArray){var skillListWidget=$('#'+sFieldID)['data']('kendoMultiSelect');if(skillListWidget){var ds=skillListWidget['dataSource']['options']['data'];if(ds){skillListWidget['value'](null);if(textArray){var values=[];for(var i=0x0;i<textArray['length'];i++){var sText=textArray[i];for(var j=0x0;j<ds['length'];j++){if(sText==ds[j]['text'])values['push'](ds[j]['value']);}}skillListWidget['value'](values);}}}},'GetSelectedSkillsFromList':function(sFieldID,sQuoterChar,bArray){if(!sQuoterChar)sQuoterChar='';var valuesArray=TriSysSDK['CShowForm']['GetSelectedSkillsFromListAsArray'](sFieldID);if(bArray)return valuesArray;if(valuesArray){var sValues='';for(var i=0x0;i<valuesArray['length'];i++){var sSkillText=valuesArray[i];if(sValues)sValues+=',\x20';sValues+=sQuoterChar+sSkillText+sQuoterChar;}return sValues;}},'GetSelectedSkillsFromListAsArray':function(sFieldID){var skillListWidget=$('#'+sFieldID)['data']('kendoMultiSelect');if(skillListWidget){var ds=skillListWidget['dataSource']['data']();if(ds){var valuesArray=skillListWidget['value']();if(valuesArray){var textArray=[];for(var i=0x0;i<valuesArray['length'];i++){var iValue=valuesArray[i];for(var j=0x0;j<ds['length'];j++){if(ds[j]['value']==iValue){textArray['push'](ds[j]['text']);break;}}}return textArray;}}}},'GetSelectedValuesFromListAsArray':function(sFieldID){var skillListWidget=$('#'+sFieldID)['data']('kendoMultiSelect');if(skillListWidget){var ds=skillListWidget['dataSource']['data']();if(ds){var valuesArray=skillListWidget['value']();return valuesArray;}}},'addItemToMultiSelectCombo':function(sFieldID,objValue,sText){var widget=$('#'+sFieldID)['data']('kendoMultiSelect');widget&&widget['dataSource']['add']({'text':sText,'value':objValue});},'replaceItemsInMultiSelectCombo':function(sFieldID,dataValueTextArray){var widget=$('#'+sFieldID)['data']('kendoMultiSelect');if(widget){widget['value']([]);var dataSource=new kendo['data']['DataSource']({'data':dataValueTextArray});widget['setDataSource'](dataSource);}},'addCallbackOnComboSelect':function(sFieldID,fnCallback){function dropdownlist_change(e){var value=this['value'](),text=this['text']();fnCallback(value,text);}var dropdownlist=$('#'+sFieldID)['data']('kendoDropDownList');dropdownlist['bind']('change',dropdownlist_change);},'jobTitleCombo':function(sFieldID,sJobTitle){var iJobTitleIndex=0x0,bJobTitleId=$['isNumeric'](sJobTitle),sourceJobTitles=[],jobTitles=TriSysApex['Cache']['JobTitles'](),iMax=jobTitles['length'];if(iMax==0x0){var fieldElement=$('#'+sFieldID);fieldElement['addClass']('k-textbox'),fieldElement['attr']('type','text');if(sJobTitle)fieldElement['val'](sJobTitle);return;}for(var i=0x0;i<iMax;i++){var jobTitle=jobTitles[i],sourceStruct={'value':jobTitle['JobTitleId'],'text':jobTitle['JobTitle']};sourceJobTitles['push'](sourceStruct);if(bJobTitleId){if(jobTitle['JobTitleId']==sJobTitle)iJobTitleIndex=i;}else{if(jobTitle['JobTitle']==sJobTitle)iJobTitleIndex=i;}}TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,sourceJobTitles,iJobTitleIndex);},'GetJobTitleFromField':function(sFieldID){var sJobTitle=null;if(!TriSysSDK['CShowForm']['JobTitlesCached']()){var fieldElement=$('#'+sFieldID);sJobTitle=fieldElement['val']();}else sJobTitle=TriSysSDK['CShowForm']['GetTextFromCombo'](sFieldID);return sJobTitle;},'JobTitlesCached':function(){var jobTitles=TriSysApex['Cache']['JobTitles'](),iMax=jobTitles?jobTitles['length']:0x0;return iMax>0x0?!![]:![];},'SetJobTitleInField':function(sFieldID,sJobTitle){if(!TriSysSDK['CShowForm']['JobTitlesCached']()){var fieldElement=$('#'+sFieldID);fieldElement['val'](sJobTitle);}else TriSysSDK['CShowForm']['SetTextInCombo'](sFieldID,sJobTitle);},'contactTitleFieldEditableProperties':function(sFieldID,sTitle){var iContactTitleIndex=0x0,sourceTitles=[],contactTitles=TriSysApex['Cache']['ContactTitles']();for(var i=0x0;i<contactTitles['length'];i++){var contactTitle=contactTitles[i],sourceStruct={'value':contactTitle['ContactTitleId'],'text':contactTitle['Name']};sourceTitles['push'](sourceStruct);if(contactTitle['Name']==sTitle)iContactTitleIndex=i;}TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,sourceTitles,iContactTitleIndex);},'contactTypeOfWorkField':function(sFieldID){var sourceData=[],skills=TriSysApex['Cache']['SkillManager']['SkillsInCategory']('TypeOfWorkRequired');skills&&(skills['forEach'](function(skill){var sourceStruct={'value':skill['SkillId'],'text':skill['Skill']};sourceData['push'](sourceStruct);}),TriSysSDK['CShowForm']['populateMultiSelectComboFromDataSource'](sFieldID,sourceData));},'contactMarriedFieldEditableProperties':function(sFieldID,bMarried){var data=[{'value':0x0,'text':'Single'},{'value':0x1,'text':'Married'}],iMarried=bMarried?0x1:0x0;TriSysSDK['CShowForm']['dropDownComboFieldEditableProperties'](sFieldID,iMarried,data);},'countriesCombo':function(sFieldID,sDefaultCountry){var countriesData=TriSysSDK['Countries']['Load']();if(countriesData){var data=[];for(var i=0x0;i<countriesData['length'];i++){var country=countriesData[i],struct={'value':country['name'],'text':country['name']};data['push'](struct);}TriSysSDK['CShowForm']['dropDownComboFieldEditableProperties'](sFieldID,sDefaultCountry,data,null);}},'dropDownComboFieldEditableProperties':function(sFieldID,objSelectedValue,sourceData){var sText='',iValueIndex=0x0;for(var i=0x0;i<sourceData['length'];i++){var sourceDataItem=sourceData[i];if(sourceDataItem['value']==objSelectedValue)iValueIndex=i;}TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,sourceData,iValueIndex);},'contactSexFieldEditableProperties':function(sFieldID,objMale){var iSex=-0x1,data=[{'value':-0x1,'text':'\x20'},{'value':0x1,'text':'Male'},{'value':0x0,'text':'Female'}];if(!TriSysAPI['Operators']['isEmpty'](objMale)){var bMale=objMale;iSex=bMale?0x1:0x0;}TriSysSDK['CShowForm']['dropDownComboFieldEditableProperties'](sFieldID,iSex,data);},'PopulateGenderCombo':function(sFieldID){var iIndex=0x0,sDefault='Unknown',sourceGender=[];$['each'](TriSysApex['Cache']['Skills'](),function(index,skill){if(skill['Category']=='Gender'){var sourceStruct={'value':skill['SkillId'],'text':skill['Skill']};sourceGender['push'](sourceStruct);if(skill['Skill']==sDefault)iIndex=sourceGender['length']-0x1;}}),TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldID,sourceGender,iIndex);},'EntityIdFromFieldDescriptionValues':function(sEntityName,fieldDescriptions){for(var i=0x0;i<fieldDescriptions['length'];i++){var fd=fieldDescriptions[i];if(fd['TableName']==sEntityName&&fd['TableFieldName']==sEntityName+'Id'){var lRecordId=fd['Value'];return lRecordId;}}},'GetFileReference':function(sDivID){var bCVFileRef=sDivID['indexOf']('CVFileRef')>=0x0;if(bCVFileRef){var cvPath=TriSysSDK['Controls']['CVManager']['GetCVPath'](sDivID);if(cvPath)return cvPath['DocumentPath'];}else{var sDocumentPath=TriSysSDK['Controls']['FileReference']['GetFile'](sDivID);return sDocumentPath;}},'ReadFieldDescriptionValues':function(sEntity,bIncludeNullFields,bInEditingMode){var fieldDescriptions=TriSysSDK['CShowForm']['fieldDescriptions'](sEntity),populatedFieldDescriptions=[];for(var i=0x0;i<fieldDescriptions['length'];i++){var fd=fieldDescriptions[i],sValue=TriSysSDK['CShowForm']['FieldWidgetValue'](fd);if(sValue||bIncludeNullFields){if(bInEditingMode&&sValue=='Empty')sValue=null;fd['Value']=sValue,fd['DisplayValue']=sValue,populatedFieldDescriptions['push'](fd);}}return populatedFieldDescriptions;},'readFieldValueFromWidget':function(sID,iFieldTypeId,bLookup){var sJQueryDivTag='#'+sID;try{if($(sJQueryDivTag)['length']==0x0)return null;}catch(err){return null;}var sValue=$(sJQueryDivTag)['val']();sValue=TriSysSDK['Miscellaneous']['Trim'](sValue);switch(iFieldTypeId){case TriSysSDK['Controls']['FieldTypes']['Text']:if(bLookup)sValue=TriSysSDK['CShowForm']['GetTextFromCombo'](sID);break;case TriSysSDK['Controls']['FieldTypes']['YesNo']:var bValueOfCheckbox=TriSysSDK['CShowForm']['CheckBoxValue'](sID,![]);sValue=bValueOfCheckbox;break;case TriSysSDK['Controls']['FieldTypes']['Date']:var sValueOfDate=TriSysSDK['CShowForm']['getDatePickerValue'](sID);if(sValueOfDate)sValue=sValueOfDate;bMandatory=![];break;case TriSysSDK['Controls']['FieldTypes']['FileReference']:case TriSysSDK['Controls']['FieldTypes']['Image']:sValue=TriSysSDK['CShowForm']['GetFileReference'](sID);break;case TriSysSDK['Controls']['FieldTypes']['List']:case TriSysSDK['Controls']['FieldTypes']['MultiSelectList']:sValue=TriSysSDK['CShowForm']['GetSelectedSkillsFromList'](sID);break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmountPeriod']:sValue=TriSysSDK['Controls']['CurrencyAmountPeriod']['GetCurrencyAmountPeriod'](sID);break;case TriSysSDK['Controls']['FieldTypes']['CurrencyAmount']:sValue=TriSysSDK['Controls']['CurrencyAmount']['GetCurrencyAmount'](sID);break;case TriSysSDK['Controls']['FieldTypes']['JobTitle']:sValue=TriSysSDK['CShowForm']['GetJobTitleFromField'](sID);break;case TriSysSDK['Controls']['FieldTypes']['SkillCombo']:if(!sValue)sValue=TriSysSDK['CShowForm']['GetTextFromCombo'](sID);break;case TriSysSDK['Controls']['FieldTypes']['Combo']:sValue=TriSysSDK['CShowForm']['GetValueFromCombo'](sID);break;case TriSysSDK['Controls']['FieldTypes']['TextDropDown']:sValue=TriSysSDK['Controls']['TextBoxDropDown']['GetText'](sID);break;case TriSysSDK['Controls']['FieldTypes']['Integer']:case TriSysSDK['Controls']['FieldTypes']['Float']:case TriSysSDK['Controls']['FieldTypes']['Currency']:case TriSysSDK['Controls']['FieldTypes']['Percent']:sValue=TriSysSDK['Controls']['NumericSpinner']['GetValue'](sID);break;case TriSysSDK['Controls']['FieldTypes']['User']:sValue=TriSysSDK['CShowForm']['GetValueFromCombo'](sID);break;case TriSysSDK['Controls']['FieldTypes']['Contact']:sValue=TriSysSDK['Controls']['ContactLookup']['ReadContactId'](sID);break;case TriSysSDK['Controls']['FieldTypes']['Company']:sValue=TriSysSDK['Controls']['CompanyLookup']['ReadCompanyId'](sID);break;case TriSysSDK['Controls']['FieldTypes']['Icon']:const iconClasses=$('#'+sID+'\x20i')['attr']('class')||'',matches=iconClasses['split']('\x20')['filter'](cls=>cls==='fa'||cls==='gi'||cls['startsWith']('fa-')||cls['startsWith']('gi-')),iconString=matches['length']>=0x2?matches['slice'](0x0,0x2)['join']('\x20'):'';return iconString;break;case TriSysSDK['Controls']['FieldTypes']['FileUploadImage']:sValue=TriSysSDK['Controls']['FileUploadImage']['ReadURL'](sID);break;default:break;}return sValue;},'FieldWidgetValue':function(fieldDescription){var sID=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'],sValue=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sID,fieldDescription['FieldTypeId'],fieldDescription['Lookup']);switch(sID){case'Contact_ContactMarried':sValue=TriSysSDK['CShowForm']['GetTextFromCombo'](sID),sValue=sValue=='Married'?!![]:![];break;case'Contact_ContactMale':sValue=TriSysSDK['CShowForm']['GetTextFromCombo'](sID),sValue=sValue=='Female'?![]:!![];break;}return sValue;},'GetTextFromCombo':function(sID){var sJQueryDivTag='#'+sID,dropdownlist=$(sJQueryDivTag)['data']('kendoDropDownList');if(dropdownlist){var sValue=dropdownlist['text']();return sValue;}else TriSysApex['Logging']['LogMessage']('TriSysSDK.CShowForm.GetTextFromCombo('+sID+')\x20could\x20not\x20find\x20control');},'GetValueFromCombo':function(sID){var sJQueryDivTag='#'+sID,dropdownlist=$(sJQueryDivTag)['data']('kendoDropDownList');if(dropdownlist){var sValue=dropdownlist['value']();return sValue;}},'ComboEnabled':function(sID,bEnabled){var sJQueryDivTag='#'+sID,dropdownlist=$(sJQueryDivTag)['data']('kendoDropDownList');dropdownlist&&dropdownlist['enable'](bEnabled);},'RemoveComboItem':function(sID,sText){var sJQueryDivTag='#'+sID,dropdownlist=$(sJQueryDivTag)['data']('kendoDropDownList');if(dropdownlist){var sDefault=null,dataSource=dropdownlist['dataSource'],ds=dataSource['options']['data'];for(var i=0x0;i<ds['length'];i++){var item=ds[i];if(item['text']==sText)ds['splice'](i,0x1);if(i==0x0)sDefault=item['text'];}dropdownlist['setDataSource'](dataSource),dropdownlist['dataSource']['read'](),dropdownlist['refresh'](),TriSysSDK['CShowForm']['SetTextInCombo'](sID,sDefault);}},'RemoveKendoPopup'(controlId){const popupSelector='#'+controlId+'-list',popupContainer=$(popupSelector)['closest']('.k-list-container.k-popup');popupContainer['length']&&(popupContainer['remove'](),console['log']('Removed\x20Kendo\x20popup\x20for:',controlId));},'TaskTypeCombo':function(sFieldID,sImageFieldID,fnCascade){var taskTypesData=[],cachedTaskTypes=TriSysApex['Cache']['TaskTypes'](),sFirstItem=null;for(var i=0x0;i<cachedTaskTypes['length'];i++){var taskType=cachedTaskTypes[i];if(!sFirstItem)sFirstItem=taskType['Name'];var sImage=taskType['Name']['replace']('&&','-');sImage=sImage['replace']('/','-'),sImage=sImage['replace']('&','-');var taskTypeRecord={'TaskType':taskType['Name'],'TaskTypeImage':sImage};taskTypesData['push'](taskTypeRecord);}var fnSelect=function(e){e['preventDefault']();if(fnCascade)fnCascade(sFieldID,sImageFieldID);},sPNG='images/trisys/16x16/tasktype/${data.TaskTypeImage}.png';$('#'+sFieldID)['kendoDropDownList']({'dataTextField':'TaskType','dataValueField':'TaskType','headerTemplate':'','template':'<table><tr><td\x20style=\x22width:\x2030px;\x20padding:\x202px;\x22><img\x20src=\x22'+sPNG+'\x22\x20style=\x22width:\x2024px;\x20height:\x2024px;\x22\x20alt=\x22#:data.TaskType#\x22\x20/></td>'+'<td>#:\x20data.TaskType\x20#</td></tr></table>','dataSource':taskTypesData,'height':0x172,'cascade':fnSelect}),TriSysSDK['CShowForm']['SetTaskTypeComboValue'](sFieldID,sFirstItem);},'SetTaskTypeComboValue':function(sDiv,sTaskType){var cmb=$('#'+sDiv)['data']('kendoDropDownList');if(cmb)cmb['text'](sTaskType);},'GetTaskTypeFromCombo':function(sDiv){var cmb=$('#'+sDiv)['data']('kendoDropDownList');if(cmb){var sTaskType=cmb['text']();return sTaskType;}},'TaskTypeImageFile':function(sTaskType){var cachedTaskTypes=TriSysApex['Cache']['TaskTypes']();for(var i=0x0;i<cachedTaskTypes['length'];i++){var taskType=cachedTaskTypes[i];if(taskType['Name']==sTaskType){var sImage=taskType['Name']['replace']('&&','-');return sImage=sImage['replace']('/','-'),sImage=sImage['replace']('&','-'),sImage='images/trisys/16x16/tasktype/'+sImage+'.png',sImage;}}},'SetUserIdInCombo':function(sFieldID,objUserId){var lUserId=objUserId;if(!lUserId||!$['isNumeric'](lUserId)){var iLoggedInUserId=0x0,userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials)iLoggedInUserId=userCredentials['LoggedInUser']['UserId'];if(!lUserId)lUserId=iLoggedInUserId;else{var users=TriSysSDK['CShowForm']['UserCacheDataSource'](![]);$['each'](users,function(index,item){if(item['text']==objUserId)lUserId=item['value'];});}}TriSysSDK['CShowForm']['SetValueInCombo'](sFieldID,lUserId);},'CustomFieldsTab':{'Load':function(sControlID,sTabCaptionID,sEntityName){var customTab=TriSysSDK['CShowForm']['CustomFieldsTab']['Data']['CustomTab'](sEntityName);if(!customTab){var sNoFieldsHTML='<h4>Use\x20Administrator\x20Console\x20[Field\x20Descriptions]\x20to\x20configure\x20custom\x20tab\x20fields</h4>';$('#'+sControlID)['html'](sNoFieldsHTML);return;}var fieldDescriptions=customTab['FieldDescriptions'];if(customTab['Caption'])$('#'+sTabCaptionID)['text'](customTab['Caption']);if(fieldDescriptions){var iColumnWidth=0xc/customTab['ColumnCount'],lstColumn=[];for(var i=0x0;i<customTab['ColumnCount'];i++){var sColumnHeaderHTML=''+'<div\x20class=\x22col-md-'+iColumnWidth+'\x22>'+'<table\x20class=\x22table\x20table-borderless\x20form-horizontal\x20form-bordered\x20table-striped\x22>'+'\x20\x20\x20<tbody>',sColumnFooterHTML=''+'</tbody>'+'</table>'+'</div>';lstColumn['push']({'TopHTML':sColumnHeaderHTML,'FieldHTML':'','BottomHTML':sColumnFooterHTML});}var iColumnCounter=0x1;fieldDescriptions['forEach'](function(fieldDescription){var sFieldName=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'],sRowHTML='<tr>'+'<td\x20style=\x22width:\x20'+customTab['LabelWidth']+'px;\x22>'+'\x20\x20\x20<strong>'+fieldDescription['FieldLabel']+'</strong>'+'</td>'+'<td>'+TriSysSDK['CShowForm']['TriSysFieldPickerToHTML'](sFieldName,fieldDescription)+'</td>',item=lstColumn[iColumnCounter-0x1];item['FieldHTML']+=sRowHTML;if(iColumnCounter<customTab['ColumnCount'])iColumnCounter+=0x1;else iColumnCounter=0x1;});var sHTML=''+'<div\x20class=\x22row\x22>'+'\x20\x20\x20<div\x20class=\x22col-md-12\x22>'+'\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22form-group\x22>';lstColumn['forEach'](function(col){sHTML+=col['TopHTML']+col['FieldHTML']+col['BottomHTML'];}),sHTML+=''+'\x20\x20\x20\x20\x20\x20\x20</div>'+'</div>'+'</div>',$('#'+sControlID)['html'](sHTML);}},'Data':{'CachedCustomEntityFieldTabs':[],'CustomTab':function(sEntityName){var customTab=null;return TriSysSDK['CShowForm']['CustomFieldsTab']['Data']['CachedCustomEntityFieldTabs']['forEach'](function(item){if(item['EntityName']==sEntityName)customTab=item;}),customTab;},'AddedCustomTab':function(sEntityName,customTabSettings){var customTab=TriSysSDK['CShowForm']['CustomFieldsTab']['Data']['CustomTab'](sEntityName);if(!customTab)TriSysSDK['CShowForm']['CustomFieldsTab']['Data']['CachedCustomEntityFieldTabs']['push'](customTabSettings);},'Initialise':function(customTabFields){var cachedFieldDescriptions=TriSysApex['Cache']['FieldDescriptions']();customTabFields&&customTabFields['forEach'](function(customTab){var entityFieldDescriptions=customTab;entityFieldDescriptions['FieldDescriptions']=[],customTab['Fields']&&customTab['Fields']['forEach'](function(customTabField){cachedFieldDescriptions['forEach'](function(fieldDescription){if(fieldDescription['FieldId']==customTabField['FieldId'])entityFieldDescriptions['FieldDescriptions']['push'](fieldDescription);});}),TriSysSDK['CShowForm']['CustomFieldsTab']['Data']['CachedCustomEntityFieldTabs']['push'](entityFieldDescriptions);});}}}},'CurrentRecord':{'EntityName':null,'RecordId':0x0},'Controls':{'General':{'ReplaceDivTagsOfDynamicallyLoadedUserControl':function(divTag){TriSysSDK['Controls']['General']['RenameElementIdsWithParentIdPrefixOrSuffix'](divTag,divTag,!![]);},'RenameElementIdsWithParentIdPrefixOrSuffix':function(sRootElementID,sParentID,bPrefix){if(TriSysAPI['Operators']['isEmpty'](bPrefix))bPrefix=!![];var sPrefix=sParentID+'-',sSuffix='-'+sParentID,nodesArray=TriSysSDK['DocumentObjectModel']['GetAllNodesBeneathUniqueDivID'](sRootElementID);if(nodesArray)for(var i=0x0;i<nodesArray['length'];i++){var node=nodesArray[i];if(node['id']){var sID=node['id'];if(sID['length']>0x0&&sID!=sRootElementID){if(bPrefix)node['id']=sPrefix+sID;else node['id']=sID+sSuffix;}}}},'GetElementIdWithinRootElement':function(sRootElementID,sElementID,bPrefix){if(TriSysAPI['Operators']['isEmpty'](bPrefix))bPrefix=!![];if(sRootElementID&&sElementID&&sElementID['indexOf'](sRootElementID)>=0x0){if(bPrefix){var sPrefix=sRootElementID+'-',parts=sElementID['split'](sPrefix);return parts[0x1];}else{var sSuffix='-'+sRootElementID,parts=sElementID['split'](sSuffix);return parts[0x0];}}return sElementID;}},'FieldTypes':{'Text':0x1,'Integer':0x2,'Float':0x3,'Percent':0x4,'Currency':0x5,'YesNo':0x6,'Date':0x7,'Panel':0x8,'Grid':0x9,'FileReference':0xb,'List':0xd,'Image':0xe,'EMail':0xf,'Internet':0x10,'Telephone':0x11,'User':0x12,'Contact':0x13,'Company':0x14,'CurrencyLink':0x15,'WebPage':0x16,'Label':0x17,'Graph':0x18,'RichTextBox':0x19,'Schedule':0x1a,'WordProcessor':0x1b,'MultiSelectList':0x1c,'ProgressBar':0x1d,'GridAlpha':0x1e,'Application':0x1f,'DocumentPreview':0x20,'Video':0x21,'ChartFX':0x22,'CurrencyAmount':0x23,'SkillTree':0x24,'PanelAlpha':0x25,'Address':0x26,'CurrencyAmountPeriod':0x27,'EntitySearchCriteria':0x28,'ActivityTypeCombo':0x29,'FolderReference':0x2a,'ListView':0x2b,'TreeView':0x2c,'GridGamma':0x2d,'JobTitle':0x2e,'ChartFXASync':0x2f,'FormUserControl':0x30,'SkillCombo':0x31,'Password':0x32,'DocumentEditor':0x33,'TextDropDown':0x3e9,'Icon':0x3ea,'ImageURL':0x3eb,'ImageBase64':0x3ec,'FileUploadImage':0x3ed,'Combo':0x3ee},'HelpHint':{'Load':function(divTag,sHintText){var sHTML='<div\x20class=\x27TriSys-ctrlHelpHint\x27>'+'<p\x20class=\x27TriSys-ctrlHelpHint-Text\x27>'+sHintText+'</p></div>';$('#'+divTag)['html'](sHTML);}},'CVManager':{'Load':function(divTag,bCVFileRef,iIndex){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlCVManager.html');TriSysApex['FormsManager']['loadPageIntoDiv'](divTag,sPath,function(response,status,xhr){TriSysSDK['Controls']['CVManager']['AfterLoadEvent'](divTag,bCVFileRef,iIndex);});},'MaxFormattedCVs':0x4,'AfterLoadEvent':function(divTag,bCVFileRef,iIndex){TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);var sPrefix=divTag+'-',formattedCVFields=TriSysApex['Cache']['SystemSettingManager']['FormattedCVFields'](),sDisplayNameForFormattedCV=formattedCVFields[iIndex-0x1],sCaption=(bCVFileRef?'Original\x20Candidate':sDisplayNameForFormattedCV)+'\x20CV\x20File\x20Reference',sJQueryDiv='#'+sPrefix+'CVManager_Title';$(sJQueryDiv)['text'](sCaption),sJQueryDiv='#'+sPrefix+'CVManager_Menu',$(sJQueryDiv)['kendoMenu']({'openOnClick':![]}),$(sJQueryDiv)['css']('border-radius','8px');var sJQueryDivFind='#'+sPrefix+'CVManager_FindCVButton';$(sJQueryDivFind)['click'](function(){TriSysSDK['Miscellaneous']['PreventButtonDoubleClick'](sJQueryDivFind),findCV(sJQueryDivFind);});var sJQueryDivOpen='#'+sPrefix+'CVManager_OpenCVButton';$(sJQueryDivOpen)['click'](function(){TriSysSDK['Miscellaneous']['PreventButtonDoubleClick'](sJQueryDivOpen),openCV(sPrefix);});var sJQueryDivDelete='#'+sPrefix+'CVManager_DeleteCVButton';$(sJQueryDivDelete)['click'](function(){TriSysSDK['Miscellaneous']['PreventButtonDoubleClick'](sJQueryDivDelete),deleteCV(divTag);});var sJQueryDivCopyToFormatted='#'+sPrefix+'CVManager_CopyCV_ToFormatted',fnCopyCVClosure=function(iCVNumber){return function(){copyCV(iIndex,iCVNumber),CloseDropDown(divTag);};};for(var i=0x0;i<TriSysSDK['Controls']['CVManager']['MaxFormattedCVs'];i++){var iCVNumber=i+0x1,sDiv=sJQueryDivCopyToFormatted+iCVNumber;$(sDiv)['click'](fnCopyCVClosure(iCVNumber));var sCustomisedLabel=formattedCVFields[i],sReplaceLabel=sPrefix+'CVManager'+iCVNumber+'Label';$('#'+sReplaceLabel)['html'](sCustomisedLabel);}if(!bCVFileRef){for(var i=0x1;i<=iIndex;i++){var sFormattedCVField='#'+sPrefix+'CVManager_CopyCV_ToFormatted'+i;$(sFormattedCVField)['hide']();}if(iIndex==TriSysSDK['Controls']['CVManager']['MaxFormattedCVs'])$('#'+sPrefix+'CVManager_CopyCVMenu')['hide']();}if(formattedCVFields['length']>0x0){for(var i=formattedCVFields['length']+0x1;i<=TriSysSDK['Controls']['CVManager']['MaxFormattedCVs'];i++){var sFormattedCVField='#'+sPrefix+'CVManager_CopyCV_ToFormatted'+i;$(sFormattedCVField)['hide']();}if(iIndex>=formattedCVFields['length'])$('#'+sPrefix+'CVManager_CopyCVMenu')['hide']();}function openCV(sCVFieldPrefix){var sPath=$('#'+sCVFieldPrefix+'CVManager_FilePath')['val'](),sName=$('#'+sCVFieldPrefix+'CVManager_FileName')['val']();if(!sPath){TriSysApex['UI']['ShowMessage']('No\x20CV\x20specified.</br\x20/>Use\x20the\x20Find\x20CV\x20button\x20to\x20upload\x20a\x20CV.');return;}TriSysApex['Pages']['FileManagerForm']['FileOpenDrillDown'](sPath);}function findCV(sJQueryDiv){TriSysSDK['Controls']['FileManager']['FindFileUpload']('Find\x20CV',function(sFile){assignUploadedCVToContactCVField(sJQueryDiv,sFile);});}function assignUploadedCVToContactCVField(sJQueryDiv,sRelativeUploadFilePath){if(TriSysSDK['CurrentRecord']['RecordId']>0x0){var objParts={'CVField':null,'Operation':null};splitFieldOperationParts(sJQueryDiv,objParts);var sParts=objParts['CVField']['split']('_'),sTableName=sParts[0x0],sTableFieldName=sParts[0x1],payloadObject={};payloadObject['URL']='ContactCV/MoveUploadedCVFileReference',payloadObject['OutboundDataPacket']={'UploadedFilePath':sRelativeUploadFilePath,'ContactId':TriSysSDK['CurrentRecord']['RecordId'],'TableFieldName':sTableFieldName},payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var JSONdataset=data;if(JSONdataset){if(JSONdataset['Success']){var sCVFilePath=JSONdataset['CVFolderFilePath'],sDiv=objParts['CVField'];TriSysSDK['Controls']['CVManager']['SetCVPath'](sDiv,sCVFilePath),TriSysSDK['Controls']['CVManager']['ShowCVPath'](sDiv),afterFilePickCV(sDiv);}else TriSysApex['UI']['errorAlert'](JSONdataset['ErrorMessage']);}else{}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('assignUploadedCVToContactCVField:\x20',request,status,error);},TriSysApex['UI']['ShowWait'](null,'Renaming\x20CV...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}}function afterFilePickCV(sDiv){var sLastUpdatedField='ContactConfigFields_CVLastUpdated',sFormattedChunk='FormattedCVFileRef';if(sDiv['indexOf'](sFormattedChunk)>0x0){var sParts=sDiv['split'](sFormattedChunk),iFormattedCVIndex=sParts[0x1];sLastUpdatedField='ContactConfigFields_FormattedCV'+iFormattedCVIndex+'LastUpdated';}TriSysSDK['CShowForm']['setDatePickerValue'](sLastUpdatedField,new Date()),TriSysApex['Pages']['ContactForm']['AutoSaveNow']();}function deleteCV(sJQueryDiv){TriSysSDK['Controls']['CVManager']['SetCVPath'](sJQueryDiv,''),TriSysSDK['Controls']['CVManager']['ShowCVPath'](sJQueryDiv),TriSysApex['Pages']['ContactForm']['AutoSaveNow']();}function copyCV(iSourceIndex,iFormattedCVNumber){var sCVSourceField='ContactConfigFields_CVFileRef';if(iSourceIndex>0x0)sCVSourceField='ContactConfigFields_FormattedCVFileRef'+iSourceIndex;var cvPath=TriSysSDK['Controls']['CVManager']['GetCVPath'](sCVSourceField);if(cvPath){var sFormattedCVField='ContactConfigFields_FormattedCVFileRef'+iFormattedCVNumber,sFormattedDateField='ContactConfigFields_FormattedCV'+iFormattedCVNumber+'LastUpdated',payloadObject={};payloadObject['URL']='ContactCV/CreateFormattedCVFileReference',payloadObject['OutboundDataPacket']={'OriginalCVPath':cvPath['DocumentPath'],'ContactId':TriSysSDK['CurrentRecord']['RecordId'],'TableFieldName':sFormattedCVField},payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var JSONdataset=data;if(JSONdataset){if(JSONdataset['Success']){var sCVFilePath=JSONdataset['FormattedCVFilePath'];TriSysSDK['Controls']['CVManager']['SetCVPath'](sFormattedCVField,sCVFilePath),TriSysSDK['Controls']['CVManager']['ShowCVPath'](sFormattedCVField),TriSysSDK['CShowForm']['setDatePickerValue'](sFormattedDateField,new Date()),TriSysApex['Pages']['ContactForm']['AutoSaveNow']();}else TriSysApex['UI']['errorAlert'](JSONdataset['ErrorMessage']);}else{}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('copyCV:\x20',request,status,error);},TriSysApex['UI']['ShowWait'](null,'Copying\x20CV...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}}function splitFieldOperationParts(sMenuItem,objParts){sMenuItem=sMenuItem['replace']('#','');var sParts=sMenuItem['split']('-');objParts['CVField']=sParts[0x0],objParts['Operation']=sParts[0x1];}function CloseDropDown(divTag){var sPrefix=divTag+'-',menu=$('#'+sPrefix+'CVManager_Menu')['data']('kendoMenu');menu['close']();}},'SetCVPath':function(sDivID,objValue){var cvPath=TriSysSDK['Controls']['CVManager']['GetCVPath'](sDivID);if(cvPath){cvPath['DocumentPath']=objValue;return;}var newCVPath=new TriSysSDK['Controls']['CVManager']['CVPath'](sDivID,objValue);TriSysSDK['Controls']['CVManager']['CVPaths']['push'](newCVPath);},'GetCVPath':function(sDivID){for(var i=0x0;i<TriSysSDK['Controls']['CVManager']['CVPaths']['length'];i++){var cvPath=TriSysSDK['Controls']['CVManager']['CVPaths'][i];if(cvPath['FieldName']==sDivID)return cvPath;}return null;},'ShowCVPath':function(sDivID){var sPath=null,sName=null,cvPath=TriSysSDK['Controls']['CVManager']['GetCVPath'](sDivID);if(cvPath){sPath=cvPath['DocumentPath'];if(sPath){var sParts=sPath['split']('\x5c');sName=sParts[sParts['length']-0x1];}}$('#'+sDivID+'-CVManager_FileName')['val'](sName),$('#'+sDivID+'-CVManager_FilePath')['val'](sPath);},'CVPaths':[],'CVPath':function(sFieldName,sDocumentPath){this['FieldName']=sFieldName,this['DocumentPath']=sDocumentPath;}},'FileManager':{'FindFileUpload':function(sFunction,fnCallback){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=sFunction,parametersObject['ContentURL']=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlUploadFile.html'),parametersObject['Height']=0x1c2,parametersObject['Resizable']=![],parametersObject['Maximize']=![],parametersObject['Image']='upload',parametersObject['CloseTopRightButton']=!![],parametersObject['Layer']=0x2,TriSysSDK['Controls']['FileManager']['SaveCallbackFunction']=fnCallback,parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',TriSysApex['UI']['PopupMessage'](parametersObject);},'SaveCallbackFunction':null,'GetOpenFileURLFromWebService':function(sTitle,sFile,sName){if(TriSysSDK['Controls']['FileManager']['isWordFile'](sFile)&&sFile['indexOf'](':')>0x0){TriSysSDK['Controls']['FileManager']['OpenDocumentViewer'](sTitle,sFile,sName);return;}var fnCallback=function(sTitle,sURL,sName){TriSysSDK['Controls']['FileManager']['OpenDocumentViewer'](sTitle,sURL,sName);};TriSysSDK['Controls']['FileManager']['GetOpenFileURLFromWebServiceWithCallback'](sTitle,sFile,sName,!![],fnCallback);},'GetOpenFileURLFromWebServiceWithCallback':function(sTitle,sFile,sName,bShowWait,fnCallback){var payloadObject={};payloadObject['URL']='Files/GetFileURL',payloadObject['OutboundDataPacket']={'FilePath':sFile},payloadObject['InboundDataFunction']=function(data){if(bShowWait)TriSysApex['UI']['HideWait']();if(data&&data['Success']&&fnCallback){var sURL=data['URL'];sName=data['FileName'],fnCallback(sTitle,sURL,sName);}else TriSysApex['Logging']['LogMessage'](data['ErrorMessage']);return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){if(bShowWait)TriSysApex['UI']['HideWait']();TriSysApex['UI']['errorAlert']('GetOpenFileURLFromWebServiceWithCallback('+sFile+')\x20:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);};if(bShowWait)TriSysApex['UI']['ShowWait'](null,'Reading\x20'+(sName?sName:'Document'));TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'OpenDocumentViewer':function(sTitle,sDocumentPath,sName){TriSysSDK['Controls']['FileManager']['DocumentPath']=sDocumentPath;if(TriSysSDK['Controls']['FileManager']['isImageFile'](sDocumentPath)){$['fancybox']['open']({'src':sDocumentPath,'opts':{'caption':sName}});return;}if(TriSysSDK['Controls']['FileManager']['isVideoOrAudioFile'](sDocumentPath)||TriSysSDK['Controls']['FileManager']['isMSGFile'](sDocumentPath)){TriSysApex['ModalDialogue']['DocumentViewer']['DownloadAndOpen'](sName,sDocumentPath);return;}TriSysApex['ModalDialogue']['DocumentViewer']['Show'](sName,sDocumentPath);},'DocumentPath':null,'OpenHTMLEditor':function(sTitle,sDocumentPath,sName,fnAfterSave){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']='Edit:\x20'+sName,parametersObject['Image']='fa-file-code-o',parametersObject['Maximize']=!![],parametersObject['FullScreen']=!![],parametersObject['CloseTopRightButton']=!![],parametersObject['ContentURL']=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlHTMLEditor.html'),parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftText']='Save',parametersObject['ButtonLeftFunction']=function(){var fnSaveCompleted=function(){TriSysApex['UI']['CloseModalPopup'](),fnAfterSave();};return ctrlHTMLEditor['SaveFile'](sDocumentPath,fnSaveCompleted),![];},parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightFunction']=function(){return!![];},parametersObject['OnLoadCallback']=function(){ctrlHTMLEditor['Load'](sTitle,sDocumentPath,sName);},TriSysApex['UI']['PopupMessage'](parametersObject);},'OpenHTMLEditorForEditOnly':function(sHTML,sName,fnAfterUpdate){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']='Edit:\x20'+sName,parametersObject['Image']='fa-file-code-o',parametersObject['Maximize']=!![],parametersObject['FullScreen']=!![],parametersObject['ContentURL']=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlHTMLEditor.html'),parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftText']='Update',parametersObject['ButtonLeftFunction']=function(){var sHTML=ctrlHTMLEditor['GetHTML']();return fnAfterUpdate(sHTML),!![];},parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightFunction']=function(){return!![];},parametersObject['OnLoadCallback']=function(){ctrlHTMLEditor['LoadHTML'](sHTML);},TriSysApex['UI']['PopupMessage'](parametersObject);},'OpenUserFriendlyHTMLEditor':function(sTitle,sHTML,fnAfterSave){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=sTitle,parametersObject['Image']='gi-edit',parametersObject['FullScreen']=!![],parametersObject['CloseTopRightButton']=!![],parametersObject['Draggable']=![],parametersObject['ContentURL']=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlUserFriendlyHTMLEditor.html'),parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftText']='Save',parametersObject['ButtonLeftFunction']=function(){var sHTML=ctrlUserFriendlyHTMLEditor['ReadHTML']();return TriSysApex['UI']['CloseModalPopup'](),fnAfterSave(sHTML),![];},parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightFunction']=function(){return!![];},parametersObject['OnLoadCallback']=function(){ctrlUserFriendlyHTMLEditor['Load'](sTitle,sHTML);},TriSysApex['UI']['PopupMessage'](parametersObject);},'isWordFile':function(sPath){var bWord=![],sSuffix=TriSysApex['Pages']['FileManagerForm']['FileSuffix'](sPath);if(sSuffix)switch(sSuffix['toLowerCase']()){case'doc':case'docx':case'dot':case'dotx':case'rtf':bWord=!![];break;}return bWord;},'isPDFFile':function(sPath){var bPDF=![],sSuffix=TriSysApex['Pages']['FileManagerForm']['FileSuffix'](sPath);if(sSuffix)switch(sSuffix['toLowerCase']()){case'pdf':bPDF=!![];break;}return bPDF;},'isImageFile':function(sPath){var bImage=![],sSuffix=TriSysApex['Pages']['FileManagerForm']['FileSuffix'](sPath);if(sSuffix)switch(sSuffix['toLowerCase']()){case'jpg':case'jpeg':case'png':case'bmp':case'gif':case'webp':bImage=!![];break;}if(sPath){const parts=sPath['split']('/');if(parts['length']==0x5&&parts[0x3]=='media')bImage=!![];}if(!bImage&&sPath){const sLinkedInMediaPath='https://media.licdn.com';if(sPath['indexOf'](sLinkedInMediaPath)>=0x0)bImage=!![];}return bImage;},'isVideoOrAudioFile':function(sPath){var bMediaFile=![],sSuffix=TriSysApex['Pages']['FileManagerForm']['FileSuffix'](sPath);if(sSuffix)switch(sSuffix['toLowerCase']()){case'wmv':case'mp4':case'mov':case'3gp':case'asf':case'avi':case'flv':case'mpg':case'mpeg':case'ogg':case'swf':case'wav':case'mp3':case'm4a':case'm4p':case'oga':case'wma':bMediaFile=!![];break;}return bMediaFile;},'isHTMLFile':function(sPath){var bHTML=![],sSuffix=TriSysApex['Pages']['FileManagerForm']['FileSuffix'](sPath);if(sSuffix)switch(sSuffix['toLowerCase']()){case'htm':case'html':case'htx':case'mht':case'mhtml':bHTML=!![];break;}return bHTML;},'isEMLFile':function(sPath){var bEML=![],sSuffix=TriSysApex['Pages']['FileManagerForm']['FileSuffix'](sPath);if(sSuffix)switch(sSuffix['toLowerCase']()){case'eml':bEML=!![];break;}return bEML;},'isMSGFile':function(sPath){var bMSG=![],sSuffix=TriSysApex['Pages']['FileManagerForm']['FileSuffix'](sPath);if(sSuffix)switch(sSuffix['toLowerCase']()){case'msg':bMSG=!![];break;}return bMSG;},'GetFileNameFromPath':function(sPath){if(!sPath)return null;var slashes=['/','\x5c'],sName=null;$['each'](slashes,function(index,sSlash){var i=sPath['lastIndexOf'](sSlash);i>0x0&&(sName=sPath['substring'](i+0x1));});if(!sName||sName=='')sName=sPath;return sName;},'GetFolderPathFromFile':function(sPath,sSeparator){if(!sPath||!sSeparator)return null;var parts=sPath['split'](sSeparator);if(parts){var sPartPath='';for(var i=0x0;i<=parts['length']-0x2;i++){if(sPartPath['length']>0x0)sPartPath+=sSeparator;sPartPath+=parts[i];}return sPartPath+sSeparator;}return sPath;},'ImagePath':function(sAttachment){var sImage='unknown.png',sSuffix=TriSysApex['Pages']['FileManagerForm']['FileSuffix'](sAttachment);if(sSuffix)switch(sSuffix['toLowerCase']()){case'doc':case'docx':case'dot':case'dotx':case'rtf':sImage='word.png';break;case'xls':case'xlsx':sImage='excel.png';break;case'ppt':case'pptx':sImage='powerpoint.png';break;case'avi':case'mpg':case'mp4':sImage='movie.png';break;case'mp3':case'wmv':case'wav':sImage='music.png';break;case'txt':case'log':sImage='txt.png';break;case'xml':case'json':sImage='code.png';break;case'psd':sImage='photoshop.png';break;case'pdf':sImage='acrobat.png';break;case'zip':sImage='zip.png';break;case'htm':case'html':sImage='html.png';break;case'jpg':case'png':case'jpeg':case'gif':case'tif':case'tiff':case'bmp':case'webp':sImage='image.png';break;}return'images/trisys/file-manager/'+sImage;},'UploadFile':function(trisysFile,fnCallback,options){var formData=new FormData();formData['append']('trisysFile',trisysFile);var bShowProgressWait=!![];if(options&&!TriSysAPI['Operators']['isEmpty'](options['ShowProgressWait']))bShowProgressWait=options['ShowProgressWait'];if(bShowProgressWait)TriSysApex['UI']['ShowWait'](null,'Uploading\x20File...');var sUploadFileURL=TriSysAPI['Constants']['SecureURL']+'files/uploadfile';$['ajax']({'type':'POST','url':sUploadFileURL,'contentType':![],'processData':![],'data':formData,'cache':![],'crossDomain':!![],'beforeSend':function(xhr){xhr['setRequestHeader']('SiteKey',TriSysAPI['Session']['DeveloperSiteKey']());var sDataServicesKey=TriSysAPI['Session']['DataServicesKey']();if(!TriSysAPI['Operators']['isEmpty'](sDataServicesKey))xhr['setRequestHeader']('DataServicesKey',sDataServicesKey);},'success':function(result){if(bShowProgressWait)TriSysApex['UI']['HideWait']();var sFile=result[0x0];fnCallback(sFile);},'error':function(request,status,error){if(bShowProgressWait)TriSysApex['UI']['HideWait']();TriSysApex['UI']['errorAlert']('The\x20uploaded\x20file\x20was\x20rejected.\x20This\x20could\x20be\x20because\x20the\x20file\x20type\x20is\x20not\x20allowed,\x20or\x20that\x20the\x20file\x20is\x20too\x20large.',TriSysApex['Copyright']['ShortProductName']);}});},'UploadFileAndMoveToG':function(trisysFile,fnCallbackAfterMoveToG,options){var fnAfterUploadingFileCallback=function(sFilePath){var payloadObject={};payloadObject['URL']='Files/MoveUploadedFileReferenceDocument';var sFolder='Documents';if(options&&!TriSysAPI['Operators']['isEmpty'](options['Folder']))sFolder=options['Folder'];payloadObject['OutboundDataPacket']={'UploadedFilePath':sFilePath,'SubFolder':sFolder,'UniqueSubFolder':!![]},payloadObject['InboundDataFunction']=function(data){var JSONdataset=data;if(JSONdataset){if(JSONdataset['Success']){var sFilePath=JSONdataset['FolderFilePath'];fnCallbackAfterMoveToG(sFilePath);}else TriSysApex['UI']['errorAlert'](JSONdataset['ErrorMessage']);}else{}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.Controls.FileManager.UploadFileAndMoveToG:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);};TriSysSDK['Controls']['FileManager']['UploadFile'](trisysFile,fnAfterUploadingFileCallback,options);},'GetFileReferenceServerFilePathToExternalFilePath':function(sServerFilePath,fnCallback){var CFileReferenceInternalToExternalPathRequest={'FolderFilePath':sServerFilePath},payloadObject={};payloadObject['URL']='Files/FileReferenceInternalToExternalPath',payloadObject['OutboundDataPacket']=CFileReferenceInternalToExternalPathRequest,payloadObject['InboundDataFunction']=function(data){var CFileReferenceInternalToExternalPathResult=data;if(CFileReferenceInternalToExternalPathResult){if(CFileReferenceInternalToExternalPathResult['Success'])fnCallback(CFileReferenceInternalToExternalPathResult['URL']);else TriSysApex['UI']['errorAlert'](CFileReferenceInternalToExternalPathResult['ErrorMessage'],TriSysWeb['Constants']['ApplicationName']);}else TriSysApex['UI']['ShowMessage']('No\x20response\x20from\x20'+payloadObject['URL'],TriSysWeb['Constants']['ApplicationName']);return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.Controls.FileManager.GetFileReferenceServerFilePathToExternalFilePath:\x20',request,status,error,![]);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'StripInconvenientFileNameCharacters':function(sName,bFileStrip,bAllowSpaces){if(sName){if(bFileStrip){var sFile=sName;sFile=sFile['replace'](/[\(\)\[\]{}]/g,'');if(!bAllowSpaces)sFile=sFile['replace'](/ /g,'_');return sFile=sFile['replace'](/&/g,''),sFile=sFile['replace'](/!/g,''),sFile=sFile['replace'](/"/g,''),sFile=sFile['replace'](/'/g,''),sFile=sFile['replace'](/£/g,''),sFile=sFile['replace'](/\$/g,''),sFile=sFile['replace'](/%/g,''),sFile=sFile['replace'](/\^/g,''),sFile=sFile['replace'](/\*/g,''),sFile=sFile['replace'](/\+/g,''),sFile=sFile['replace'](/=/g,''),sFile=sFile['replace'](/#/g,''),sFile=sFile['replace'](/\\/g,''),sFile=sFile['replace'](/\//g,''),sFile=sFile['replace'](/|/g,''),sFile=sFile['replace'](/\|/g,''),sFile=sFile['replace'](/</g,''),sFile=sFile['replace'](/>/g,''),sFile=sFile['replace'](/@/g,''),sFile=sFile['replace'](/;/g,''),sFile=sFile['replace'](/:/g,''),sFile=sFile['replace'](/~/g,''),sFile=sFile['replace'](/\?/g,''),sFile=sFile['replace'](/,/g,''),sFile;}else{sName=sName['replace'](/[\(\)\[\]{}]/g,'');if(!bAllowSpaces)sFile=sFile['replace'](/ /g,'_');sName=sName['replace'](/,/g,''),sName=sName['replace'](/"/g,''),sName=sName['replace'](/\+/g,''),sName=sName['replace'](/\'/g,''),sName=sName['replace'](/\(/g,''),sName=sName['replace'](/\//g,''),sName=sName['replace'](/;/g,''),sName=sName['replace'](/:/g,''),sName=sName['replace'](/!/g,''),sName=sName['replace'](/|/g,''),sName=sName['replace'](/#/g,''),sName=sName['replace'](/£/g,''),sName=sName['replace'](/%/g,''),sName=sName['replace'](/^/g,''),sName=sName['replace'](/&/g,'');}}return sName;}},'CurrencyAmountPeriod':{'Load':function(sFieldDivTag,fieldDescription,fnCallbackAfterLoad){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlCurrencyAmountPeriod.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['Controls']['CurrencyAmountPeriod']['AfterLoadEvent'](sFieldDivTag,fieldDescription);if(fnCallbackAfterLoad)fnCallbackAfterLoad();});},'AfterLoadEvent':function(divTag,fieldDescription){var sPrefix=divTag+'-';TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);var sJQueryCurrencyDiv='#'+sPrefix+'CurrencyAmountPeriod_Currency';TriSysSDK['CShowForm']['LoadCurrencyCombo'](sJQueryCurrencyDiv);var sJQueryPeriodDiv='#'+sPrefix+'CurrencyAmountPeriod_Period';TriSysSDK['CShowForm']['LoadConsultancyPeriodCombo'](sJQueryPeriodDiv),TriSysSDK['Controls']['NumericSpinner']['Initialise'](sPrefix+'CurrencyAmountPeriod_Amount',fieldDescription);if(fieldDescription){var sDefault=fieldDescription['DefaultValue'];if(sDefault){var parts=sDefault['split'](';');if(parts['length']==0x3){var sPeriod=parts[0x2];if(sPeriod)TriSysSDK['CShowForm']['SetValueInCombo'](sPrefix+'CurrencyAmountPeriod_Period',sPeriod);}}}},'SetCurrencyAmountPeriod':function(sFieldID,htmlValue){var sCurrency=TriSysSDK['Controls']['CurrencyAmount']['DefaultCurrencySymbol'](),fAmount=0x0,sPeriod='';if(htmlValue){var sParts=htmlValue['split']('\x20'),sCurrencyPlusAmount=sParts[0x0],sPer=sParts[0x1];sPeriod=sParts[0x2];var currencies=TriSysApex['Cache']['Currencies']();if(currencies)for(var i=0x0;i<currencies['length'];i++){var currency=currencies[i],iIndex=sCurrencyPlusAmount['indexOf'](currency['Symbol']);if(iIndex>=0x0){var sNumber=sCurrencyPlusAmount['substring'](iIndex+currency['Symbol']['length']);sNumber=sNumber['replace'](/,/g,'');if($['isNumeric'](sNumber)){sCurrency=currency['Symbol'],fAmount=sNumber;break;}}}}var sPrefix=sFieldID+'-';TriSysSDK['CShowForm']['SetValueInCombo'](sPrefix+'CurrencyAmountPeriod_Currency',sCurrency);if(sPeriod)TriSysSDK['CShowForm']['SetValueInCombo'](sPrefix+'CurrencyAmountPeriod_Period',sPeriod);TriSysSDK['Controls']['CurrencyAmountPeriod']['SetAmount'](sFieldID,fAmount);},'SetAmount':function(sFieldID,fAmount){var sPrefix=sFieldID+'-';TriSysSDK['Controls']['NumericSpinner']['SetValue'](sPrefix+'CurrencyAmountPeriod_Amount',fAmount);},'GetCurrencyAmountPeriod':function(sFieldID,bThousandSeparator){var sAmount=TriSysSDK['Controls']['CurrencyAmountPeriod']['GetAmount'](sFieldID);if(bThousandSeparator&&sAmount)sAmount=TriSysSDK['Numbers']['ThousandsSeparator'](parseInt(sAmount));var sDisplay=TriSysSDK['Controls']['CurrencyAmountPeriod']['GetCurrency'](sFieldID)+sAmount+'\x20per\x20'+TriSysSDK['Controls']['CurrencyAmountPeriod']['GetPeriod'](sFieldID);return sDisplay;},'GetCurrency':function(sFieldID){var sPrefix=sFieldID+'-',sCurrency=TriSysSDK['CShowForm']['GetTextFromCombo'](sPrefix+'CurrencyAmountPeriod_Currency');return sCurrency;},'GetAmount':function(sFieldID){var sPrefix=sFieldID+'-';return TriSysSDK['Controls']['NumericSpinner']['GetValue'](sPrefix+'CurrencyAmountPeriod_Amount');},'GetPeriod':function(sFieldID){var sPrefix=sFieldID+'-',sPeriod=TriSysSDK['CShowForm']['GetTextFromCombo'](sPrefix+'CurrencyAmountPeriod_Period');return sPeriod;},'GetCurrencyAmountPeriodPerHour':function(sFieldID){var sPrefix=sFieldID+'-',sCurrency=TriSysSDK['CShowForm']['GetTextFromCombo'](sPrefix+'CurrencyAmountPeriod_Currency'),sPeriod=TriSysSDK['CShowForm']['GetTextFromCombo'](sPrefix+'CurrencyAmountPeriod_Period'),fAmount=$('#'+sPrefix+'CurrencyAmountPeriod_Amount')['val']();switch(sPeriod){case'Day':fAmount=fAmount/7.5;break;case'Week':fAmount=fAmount/37.5;break;case'Month':fAmount=fAmount/(7.5*0x14);break;case'Annum':fAmount=fAmount/(7.5*0x14*0xc);break;}return fAmount;},'Readonly':function(sFieldID,bReadOnly,options){try{if(!options)options={'Currency':!![],'Period':!![],'Amount':!![]};var sPrefix=sFieldID+'-';if(options['Currency'])TriSysSDK['CShowForm']['ComboReadonly'](sPrefix+'CurrencyAmountPeriod_Currency',bReadOnly);if(options['Period'])TriSysSDK['CShowForm']['ComboReadonly'](sPrefix+'CurrencyAmountPeriod_Period',bReadOnly);if(options['Amount'])TriSysSDK['Controls']['NumericSpinner']['Readonly'](sPrefix+'CurrencyAmountPeriod_Amount',bReadOnly);}catch(e){}},'SetIncrement':function(sFieldID,fIncrement){var sPrefix=sFieldID+'-';TriSysSDK['Controls']['NumericSpinner']['SetIncrement'](sPrefix+'CurrencyAmountPeriod_Amount',fIncrement);},'ParseAmount':function(sDisplay){var parsed={'Currency':null,'Amount':null,'Period':null};return TriSysSDK['Controls']['CurrencyAmountPeriod']['Parse'](sDisplay,parsed),parseFloat(parsed['Amount']);},'Parse':function(sDisplay,parsed){if(sDisplay){var parts=sDisplay['split']('\x20');if(parts['length']>0x0){parsed['Period']=parts[0x2];var sCurrencyAmount=parts[0x0];TriSysSDK['Controls']['CurrencyAmount']['Parse'](sCurrencyAmount,parsed);}}},'PopulateCurrencyAmountPeriodWidget':function(sDiv,iSpinIncrement,sPeriod){if(!iSpinIncrement)iSpinIncrement=0x3e8;if(!sPeriod)sPeriod='Annum';var fieldDescription={'MinValue':0x0,'SpinIncrement':iSpinIncrement},fnSetDefaultValue=function(){var sPoundSign='£',sDefaultAmount=sPoundSign+'0\x20per\x20'+sPeriod;TriSysSDK['Controls']['CurrencyAmountPeriod']['SetCurrencyAmountPeriod'](sDiv,sDefaultAmount);};TriSysSDK['Controls']['CurrencyAmountPeriod']['Load'](sDiv,fieldDescription,fnSetDefaultValue);}},'CurrencyAmount':{'Initialise':function(sDiv,iSpinIncrement){if(!iSpinIncrement)iSpinIncrement=0x3e8;var fieldDescription={'MinValue':-0xf423f,'SpinIncrement':iSpinIncrement},fnSetDefaultValue=function(){var sPoundSign='£',sDefaultAmount=sPoundSign+'0',sDefaultCurrency=TriSysSDK['Controls']['CurrencyAmount']['DefaultCurrencySymbol']();if(sDefaultCurrency!=TriSysSDK['Controls']['CurrencyAmount']['UKPound'])sDefaultAmount=sDefaultCurrency+'0';TriSysSDK['Controls']['CurrencyAmount']['SetCurrencyAmount'](sDiv,sDefaultAmount);};TriSysSDK['Controls']['CurrencyAmount']['Load'](sDiv,fieldDescription,fnSetDefaultValue);},'UKPound':'£','DefaultCurrencySymbol':function(){var sDefaultCurrency=TriSysSDK['Controls']['CurrencyAmount']['UKPound'],currencies=TriSysApex['Cache']['Currencies']();if(currencies){if(currencies['length']>0x0){var currency=currencies[0x0];if(currency)sDefaultCurrency=currency['Symbol'];}}return sDefaultCurrency;},'Load':function(sFieldDivTag,fieldDescription,fnCallbackAfterLoad){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlCurrencyAmount.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){if(!fieldDescription)fieldDescription={'MinValue':-0xf423f,'MaxValue':0x3b9ac9ff,'SpinIncrement':0x1};TriSysSDK['Controls']['CurrencyAmount']['AfterLoadEvent'](sFieldDivTag,fieldDescription);if(fnCallbackAfterLoad)fnCallbackAfterLoad();});},'AfterLoadEvent':function(divTag,fieldDescription){var sPrefix=divTag+'-';TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);var sJQueryCurrencyDiv='#'+sPrefix+'CurrencyAmount_Currency';TriSysSDK['CShowForm']['LoadCurrencyCombo'](sJQueryCurrencyDiv),TriSysSDK['Controls']['NumericSpinner']['Initialise'](sPrefix+'CurrencyAmount_Amount',fieldDescription);},'SetCurrencyAmount':function(sFieldID,htmlValue){var parsed={'Currency':TriSysSDK['Controls']['CurrencyAmount']['DefaultCurrencySymbol'](),'Amount':0x0};if(htmlValue){var sCurrencyPlusAmount=htmlValue;TriSysSDK['Controls']['CurrencyAmount']['Parse'](sCurrencyPlusAmount,parsed);}var sPrefix=sFieldID+'-';TriSysSDK['CShowForm']['SetValueInCombo'](sPrefix+'CurrencyAmount_Currency',parsed['Currency']),TriSysSDK['Controls']['CurrencyAmount']['SetAmount'](sFieldID,parsed['Amount']);},'SetAmount':function(sFieldID,fAmount){var sPrefix=sFieldID+'-';TriSysSDK['Controls']['NumericSpinner']['SetValue'](sPrefix+'CurrencyAmount_Amount',fAmount);},'GetCurrencyAmount':function(sFieldID){var sDisplay=TriSysSDK['Controls']['CurrencyAmount']['GetCurrency'](sFieldID)+TriSysSDK['Controls']['CurrencyAmount']['GetAmount'](sFieldID);return sDisplay;},'GetAmount':function(sFieldID){var sPrefix=sFieldID+'-',fValue=TriSysSDK['Controls']['NumericSpinner']['GetValue'](sPrefix+'CurrencyAmount_Amount');if(isNaN(fValue))fValue=0x0;return parseFloat(fValue);},'GetCurrency':function(sFieldID){var sPrefix=sFieldID+'-',sCurrency=TriSysSDK['CShowForm']['GetTextFromCombo'](sPrefix+'CurrencyAmount_Currency');return sCurrency;},'Readonly':function(sFieldID,bReadOnly){var sPrefix=sFieldID+'-';TriSysSDK['CShowForm']['ComboReadonly'](sPrefix+'CurrencyAmount_Currency',bReadOnly),TriSysSDK['Controls']['NumericSpinner']['Readonly'](sPrefix+'CurrencyAmount_Amount',bReadOnly);},'SetIncrement':function(sFieldID,fIncrement){var sPrefix=sFieldID+'-';TriSysSDK['Controls']['NumericSpinner']['SetIncrement'](sPrefix+'CurrencyAmount_Amount',fIncrement);},'Parse':function(sCurrencyPlusAmount,parsed){if(sCurrencyPlusAmount){sCurrencyPlusAmount=''+sCurrencyPlusAmount;var currencies=TriSysApex['Cache']['Currencies']();if(currencies)for(var i=0x0;i<currencies['length'];i++){var currency=currencies[i],iIndex=sCurrencyPlusAmount['indexOf'](currency['Symbol']);if(iIndex>=0x0){var sNumber=sCurrencyPlusAmount['substring'](iIndex+currency['Symbol']['length']);sNumber=sNumber['replace'](/,/g,'');if($['isNumeric'](sNumber)){parsed['Currency']=currency['Symbol'],parsed['Amount']=sNumber;break;}}}}}},'NumericSpinner':{'Initialise':function(sFieldID,fieldDescription){var bInitialised=![];try{var numericBox=$('#'+sFieldID)['data']('kendoNumericTextBox');if(numericBox)bInitialised=!![];}catch(e){}if(bInitialised)return;if(!fieldDescription)fieldDescription={'MinValue':-0xf423f,'MaxValue':0x3b9ac9ff,'SpinIncrement':0x1};var fMin=-0xf423f;if(!TriSysAPI['Operators']['isEmpty'](fieldDescription['MinValue']))fMin=parseFloat(fieldDescription['MinValue']);var fMax=0x3b9ac9ff;if(!TriSysAPI['Operators']['isEmpty'](fieldDescription['MaxValue']))fMax=parseFloat(fieldDescription['MaxValue']);var fIncrement=0x1;if(!TriSysAPI['Operators']['isEmpty'](fieldDescription['SpinIncrement'])){if(parseFloat(fieldDescription['SpinIncrement'])>0x0)fIncrement=parseFloat(fieldDescription['SpinIncrement']);}var sFormat=null;if(!TriSysAPI['Operators']['isEmpty'](fieldDescription['Format']))sFormat=fieldDescription['Format'];var fDefaultValue=0x0;if(!TriSysAPI['Operators']['isEmpty'](fieldDescription['DefaultValue']))fDefaultValue=parseFloat(fieldDescription['DefaultValue']);TriSysSDK['Controls']['NumericSpinner']['Load'](sFieldID,fMin,fMax,fIncrement,sFormat,fDefaultValue);},'Load':function(sFieldID,fMin,fMax,fIncrement,sFormat,fDefaultValue){TriSysSDK['Controls']['NumericSpinner']['RemoveEventHandlers'](sFieldID);if(!sFormat)sFormat='###,###,###,###,###.00';if(!fDefaultValue)fDefaultValue=0x0;var sJQueryDiv='#'+sFieldID;try{$(sJQueryDiv)['kendoNumericTextBox']({'decimals':0x2,'restrictDecimals':!![],'min':fMin,'max':fMax,'step':fIncrement,'format':sFormat,'value':fDefaultValue,'change':onChange,'spin':onChange}),$(sJQueryDiv)['focus'](function(){var input=$(this);setTimeout(function(){input['select']();});});var numericBox=$(sJQueryDiv)['data']('kendoNumericTextBox');numericBox['element']['on']('keyup',function(e){var newValue=e['target']['value'];if(newValue)try{var bAllow=newValue['substr'](newValue['length']-0x1,0x1)=='.';if(newValue['length']>0x2&&!bAllow)bAllow=newValue['substr'](newValue['length']-0x2,0x2)=='.0';if(bAllow)return;}catch(ex){}numericBox['value'](newValue),numericBox['trigger']('change');});}catch(err){}function onChange(){if(TriSysSDK['Controls']['NumericSpinner']['RaisingEvent'])return;var value=this['value']();TriSysApex['Logging']['LogMessage']('TriSysSDK.Controls.NumericSpinner:\x20'+sFieldID+'='+value),TriSysSDK['Controls']['NumericSpinner']['RaisingEvent']=!![];try{TriSysApex['FieldEvents']['NumberChange'](sFieldID,value);}catch(e){}TriSysSDK['Controls']['NumericSpinner']['RaisingEvent']=![];}},'RemoveEventHandlers':function(sFieldID){var sJQueryDiv='#'+sFieldID;try{var numerictextbox=$(sJQueryDiv)['data']('kendoNumericTextBox');numerictextbox&&numerictextbox['destroy']();}catch(err){}},'SetValue':function(sFieldID,fValue){if(TriSysAPI['Operators']['isEmpty'](fValue))return;var sJQueryDiv='#'+sFieldID;try{var numerictextbox=$(sJQueryDiv)['data']('kendoNumericTextBox');if(numerictextbox){if(fValue<numerictextbox['options']['min'])numerictextbox['options']['min']=fValue;numerictextbox['value'](fValue);}}catch(err){}},'GetValue':function(sFieldID){var sJQueryDiv='#'+sFieldID;try{var numerictextbox=$(sJQueryDiv)['data']('kendoNumericTextBox');if(numerictextbox){var fValue=numerictextbox['value']();return fValue;}}catch(err){}return 0x0;},'Readonly':function(sFieldID,bReadOnly){var sJQueryDiv='#'+sFieldID;try{var numerictextbox=$(sJQueryDiv)['data']('kendoNumericTextBox');if(TriSysAPI['Operators']['isEmpty'](bReadOnly))bReadOnly=!![];numerictextbox['readonly'](bReadOnly);}catch(err){}},'SetIncrement':function(sFieldID,fIncrement){var sJQueryDiv='#'+sFieldID;try{var numerictextbox=$(sJQueryDiv)['data']('kendoNumericTextBox');if(numerictextbox)numerictextbox['step'](fIncrement);}catch(err){}},'DecimalPlaces':function(sFieldID,iDecimalPlaces){var sJQueryDiv='#'+sFieldID;try{TriSysSDK['Controls']['NumericSpinner']['RaisingEvent']=!![];var numerictextbox=$(sJQueryDiv)['data']('kendoNumericTextBox');numerictextbox['setOptions']({'decimals':iDecimalPlaces,'format':'n'+iDecimalPlaces}),numerictextbox['_focusin'](),numerictextbox['_focusout'](),TriSysSDK['Controls']['NumericSpinner']['RaisingEvent']=![];}catch(err){TriSysSDK['Controls']['NumericSpinner']['RaisingEvent']=![];}},'RaisingEvent':![]},'TextBoxDropDown':{'Load':function(sFieldDivTag){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlTextDropDown.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['Controls']['TextBoxDropDown']['AfterLoadEvent'](sFieldDivTag);});},'AfterLoadEvent':function(divTag){var sPrefix=divTag+'-';TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);var sJQueryDiv='#'+sPrefix+'TextDropDown_Menu';$(sJQueryDiv)['kendoMenu']({'openOnClick':!![],'closeOnClick':![]});var sJQueryDivOK='#'+sPrefix+'TextDropDown_OKButton';$(sJQueryDivOK)['click'](function(){SaveTextEditToSummary(divTag);});var sJQueryDivCancel='#'+sPrefix+'TextDropDown_CancelButton';$(sJQueryDivCancel)['click'](function(){CloseDropDown(divTag);});function SaveTextEditToSummary(divTag){var sEditedText=TriSysSDK['Controls']['TextBoxDropDown']['GetText'](divTag);TriSysSDK['Controls']['TextBoxDropDown']['SetText'](divTag,sEditedText),CloseDropDown(divTag);}function CloseDropDown(divTag){var sPrefix=divTag+'-',menu=$('#'+sPrefix+'TextDropDown_Menu')['data']('kendoMenu');menu['close']();}},'SetText':function(divTag,sText){var sPrefix=divTag+'-';$('#'+sPrefix+'TextDropDown_Summary')['val'](sText),$('#'+sPrefix+'TextDropDown_Text')['val'](sText);},'GetText':function(divTag){var sPrefix=divTag+'-',sEditedText=$('#'+sPrefix+'TextDropDown_Text')['val']();return sEditedText;}},'FileReference':{'Load':function(sFieldDivTag,fieldDescription,fnCallback,defaults){TriSysAPI['Operators']['isEmpty'](fieldDescription)&&(fieldDescription={},fieldDescription['TableName']='General',fieldDescription['TableFieldName']=sFieldDivTag);var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlFileReference.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['Controls']['FileReference']['AfterLoadEvent'](sFieldDivTag,fieldDescription,fnCallback,defaults);});},'AfterLoadEvent':function(divTag,fieldDescription,fnCallback,defaults){var sPrefix=divTag+'-';TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);if(!fnCallback){if(fieldDescription['Callback'])fnCallback=fieldDescription['Callback'];}var bDisplayFindButton=!![],bDisplayDeleteButton=!![],bDisplayOpenButton=!![],bCallbackOnlyOnDelete=![];if(defaults){if(defaults['HideFindButton'])bDisplayFindButton=![];if(defaults['HideDeleteButton'])bDisplayDeleteButton=![];if(defaults['HideOpenButton'])bDisplayOpenButton=![];if(defaults['CallbackOnlyOnDelete'])bCallbackOnlyOnDelete=!![];}var sJQueryDivFind='#'+sPrefix+'FileReference_FindButton';$(sJQueryDivFind)['click'](function(){FindFile(divTag,fieldDescription,fnCallback);});if(!bDisplayFindButton)$(sJQueryDivFind)['hide']();var sJQueryDivOpen='#'+sPrefix+'FileReference_OpenButton';$(sJQueryDivOpen)['click'](function(){OpenFile(divTag,fieldDescription);});if(!bDisplayOpenButton)$(sJQueryDivOpen)['hide']();var sJQueryDivDelete='#'+sPrefix+'FileReference_DeleteButton';$(sJQueryDivDelete)['click'](function(){DeleteFile(divTag,fnCallback,bCallbackOnlyOnDelete);});if(!bDisplayDeleteButton)$(sJQueryDivDelete)['hide']();function FindFile(divTag,fieldDescription,fnCallback){TriSysSDK['Controls']['FileManager']['FindFileUpload']('Find\x20'+TriSysSDK['Miscellaneous']['CamelCaseToMultipleWords'](fieldDescription['TableFieldName']),function(sFile){assignUploadedDocumentToFormField(divTag,sFile,fieldDescription,fnCallback);});}function OpenFile(divTag,fieldDescription){var sFilePath=TriSysSDK['Controls']['FileReference']['GetFile'](divTag);if(sFilePath){var sTitle='Open\x20'+fieldDescription['TableFieldName'];if(sFilePath['indexOf']('https://')==0x0){var sParts=sFilePath['split']('/'),sName=sParts[sParts['length']-0x1];TriSysSDK['Controls']['FileManager']['OpenDocumentViewer'](sTitle,sFilePath,sName);}else TriSysApex['Pages']['FileManagerForm']['FileOpenDrillDown'](sFilePath);var sFieldID=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'];TriSysApex['FieldEvents']['FileReferenceFieldEvent'](sFieldID,sFilePath,'open');}}function DeleteFile(divTag,fnCallback,bCallbackOnlyOnDelete){if(!bCallbackOnlyOnDelete)TriSysSDK['Controls']['FileReference']['SetFile'](divTag,'');if(fnCallback)fnCallback('delete',divTag,null);else TriSysApex['FieldEvents']['FileReferenceFieldEvent'](divTag,null,'delete');}function assignUploadedDocumentToFormField(sJQueryDiv,sRelativeUploadFilePath,fieldDescription,fnCallback){var payloadObject={};payloadObject['URL']='Files/MoveUploadedFileReferenceDocument',payloadObject['OutboundDataPacket']={'UploadedFilePath':sRelativeUploadFilePath,'TableName':fieldDescription['TableName'],'TableFieldName':fieldDescription['TableFieldName']},payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var JSONdataset=data;if(JSONdataset){if(JSONdataset['Success']){var sFilePath=JSONdataset['FolderFilePath'];TriSysSDK['Controls']['FileReference']['SetFile'](sJQueryDiv,sFilePath);if(fnCallback)fnCallback('find',divTag,sFilePath);else{var sFieldID=(fieldDescription['TableName']?fieldDescription['TableName']+'_':'')+fieldDescription['TableFieldName'];TriSysApex['FieldEvents']['FileReferenceFieldEvent'](sFieldID,sFilePath,'find');}}else TriSysApex['UI']['errorAlert'](JSONdataset['ErrorMessage']);}else{}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('assignUploadedDocumentToFormField:\x20',request,status,error);},TriSysApex['UI']['ShowWait'](null,'Renaming\x20'+fieldDescription['TableFieldName']+'...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'SetFile':function(divTag,sFilePath){var sThumbnail=divTag+'-Thumbnail',bThumbnail=$('#'+sThumbnail)['length']>0x0,sFileName='';if(sFilePath){if(sFilePath['indexOf'](':')>0x0){var sParts=sFilePath['split']('\x5c');sFileName=sParts[sParts['length']-0x1],bThumbnail&&TriSysSDK['Images']['AfterFileReferenceFind'](sFilePath,sThumbnail);}}else{if(bThumbnail)TriSysSDK['Images']['AfterFileReferenceDelete'](sThumbnail);}var sPrefix=divTag+'-';$('#'+sPrefix+'FileReference_FileName')['val'](sFileName),$('#'+sPrefix+'FileReference_FilePath')['text'](sFilePath);},'GetFile':function(divTag){var sPrefix=divTag+'-',sFilePath=$('#'+sPrefix+'FileReference_FilePath')['text']();if(sFilePath){if(sFilePath['indexOf'](':')>0x0)return sFilePath;}},'FindButtonVisible':function(divTag,bVisible){var sPrefix=divTag+'-',sJQueryDivFind='#'+sPrefix+'FileReference_FindButton';if(bVisible)$(sJQueryDivFind)['show']();else $(sJQueryDivFind)['hide']();},'DeleteButtonVisible':function(divTag,bVisible){var sPrefix=divTag+'-',sJQueryDivDelete='#'+sPrefix+'FileReference_DeleteButton';if(bVisible)$(sJQueryDivDelete)['show']();else $(sJQueryDivDelete)['hide']();},'OpenButtonVisible':function(divTag,bVisible){var sPrefix=divTag+'-',sJQueryDivFind='#'+sPrefix+'FileReference_OpenButton';if(bVisible)$(sJQueryDivFind)['show']();else $(sJQueryDivFind)['hide']();},'OpenFileButtonClick':function(divTag){var sPrefix=divTag+'-',sJQueryDivOpen='#'+sPrefix+'FileReference_OpenButton';$(sJQueryDivOpen)['trigger']('click');},'FindFileButtonClick':function(divTag){var sPrefix=divTag+'-',sJQueryDivFind='#'+sPrefix+'FileReference_FindButton';$(sJQueryDivFind)['trigger']('click');},'DeleteFileButtonClick':function(divTag){var sPrefix=divTag+'-',sJQueryDivDelete='#'+sPrefix+'FileReference_DeleteButton';$(sJQueryDivDelete)['trigger']('click');}},'Animations':{'StartWaitingSpinner':function(sDiv,sMessage){if(!sMessage)sMessage='Loading';var sHTML='<img\x20src=\x22images/wait-spinner.gif\x22\x20>'+'\x20&nbsp;\x20'+sMessage+'...',sTempDiv='Waiting-'+sDiv;sHTML='<div\x20id=\x22'+sTempDiv+'\x22>'+sHTML+'</div>',$('#'+sDiv)['before'](sHTML),$('#'+sDiv)['hide']();},'StopWaitingSpinner':function(sDiv){var sTempDiv='Waiting-'+sDiv;try{$('#'+sTempDiv)['remove'](),$('#'+sDiv)['show']();}catch(e){}},'AccordionGroupClick':function(element,sDivTag,fnCallbackOnOpen){var sAttributeName='AccordionGroupClickOpenStatus',bOpen=![];if(element['hasAttribute'](sAttributeName)){var sStatus=element['getAttribute'](sAttributeName);bOpen=TriSysAPI['Operators']['stringToBoolean'](sStatus);}bOpen=!bOpen,element['setAttribute'](sAttributeName,bOpen),bOpen&&fnCallbackOnOpen&&fnCallbackOnOpen(sDivTag);}},'Duration':{'Initialise':function(sFieldDivTag,options){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlDuration.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['Controls']['Duration']['AfterLoadEvent'](sFieldDivTag,options);});},'AfterLoadEvent':function(divTag,options){var sPrefix=divTag+'-';TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);if(ctrlDuration)ctrlDuration['Load'](sPrefix,options);},'Set':function(sFieldID,sDuration){var sPrefix=sFieldID+'-';try{if(ctrlDuration)ctrlDuration['SetValue'](sPrefix,sDuration);}catch(e){}},'Get':function(sFieldID){if(ctrlDuration){var sPrefix=sFieldID+'-',sDuration=ctrlDuration['GetValue'](sPrefix);return sDuration;}}},'FieldHyperlinks':{'FieldValue':function(sFieldID,bHTML){var elem=$('#'+sFieldID);if(elem){if(bHTML)return elem['html']();else return elem['val']();}},'EMail':function(sFieldID,bHTML){var sValue=TriSysSDK['Controls']['FieldHyperlinks']['FieldValue'](sFieldID,bHTML);TriSysSDK['Controls']['FieldHyperlinks']['OpenEMail'](sValue);},'OpenEMail':function(sValue){if(sValue){var sMailTo='mailto:'+sValue;TriSysSDK['Controls']['FieldHyperlinks']['OpenURLUsingiFrame'](sMailTo);}},'TelNo':function(sFieldID,bHTML){var sPhoneNumber=TriSysSDK['Controls']['FieldHyperlinks']['FieldValue'](sFieldID,bHTML);sPhoneNumber&&TriSysSDK['Controls']['Skype']['Call'](sPhoneNumber);},'OpenTelNo':function(sPhoneNumber){sPhoneNumber&&TriSysSDK['Controls']['Skype']['Call'](sPhoneNumber);},'Skype':function(sFieldID,bHTML){var sSkype=TriSysSDK['Controls']['FieldHyperlinks']['FieldValue'](sFieldID,bHTML);sSkype&&TriSysSDK['Controls']['Skype']['Connect'](sSkype);},'Map':function(sFieldID,bHTML){var sAddress=TriSysSDK['Controls']['FieldHyperlinks']['FieldValue'](sFieldID,bHTML);if(sAddress){var sWebURL='https://www.google.co.uk/maps/place/'+sAddress;TriSysSDK['Browser']['OpenURL'](sWebURL);}},'Web':function(sFieldID,bHTML){var sWebURL=TriSysSDK['Controls']['FieldHyperlinks']['FieldValue'](sFieldID,bHTML);if(sWebURL){if(sWebURL['indexOf']('http')<0x0)sWebURL='http://'+sWebURL;TriSysSDK['Browser']['OpenURL'](sWebURL);}},'OpenURLUsingiFrame':function(src){var bChromeApp=TriSysApex['Environment']['isChromeStandaloneApp'](),bWindowsStoreApp=TriSysApex['Environment']['isWindowsStoreApp']();if(TriSysApex['Device']['PhoneGapEnabled']())TriSysPhoneGap['DownloadFile'](src);else{if(bChromeApp||bWindowsStoreApp){var sTitle=TriSysSDK['Controls']['FileManager']['GetFileNameFromPath'](src);setTimeout('window.open(\x27'+src+'\x27)',0x32);}else{window['open'](src);return;var ifrm=document['createElement']('IFRAME');ifrm['setAttribute']('style','display:none;'),ifrm['setAttribute']('src',src),ifrm['style']['width']=0x0+'px',ifrm['style']['height']=0x0+'px',document['body']['appendChild'](ifrm),setTimeout(function(){ifrm['remove']();},0x7d0);}}}},'Skype':{'Call':function(sPhoneNumber){sPhoneNumber=TriSysSDK['Controls']['Skype']['InternationalisePhoneNumber'](sPhoneNumber);var sCallPhone='tel:'+sPhoneNumber,bRingCentral=TriSysApex['UserOptions']['PhoneDialingVendor']()=='RingCentral';if(bRingCentral){window['top']['postMessage']({'type':'c2d','number':sPhoneNumber,'isQuickAccess':!![]},'*');return;}TriSysSDK['Controls']['FieldHyperlinks']['OpenURLUsingiFrame'](sCallPhone);},'Connect':function(sSkype){sSkype='skype:'+sSkype,TriSysSDK['Controls']['FieldHyperlinks']['OpenURLUsingiFrame'](sSkype);},'InternationalisePhoneNumber':function(sPhoneNumber){var plus44='+44';if(sPhoneNumber['indexOf']('044')==0x0)sPhoneNumber=plus44+sPhoneNumber['substring'](0x3);else{if(sPhoneNumber['indexOf']('001')==0x0)sPhoneNumber='+1'+sPhoneNumber['substring'](0x3);else{if(sPhoneNumber['indexOf']('0')==0x0)sPhoneNumber=plus44+sPhoneNumber['substring'](0x1);}}return sPhoneNumber=sPhoneNumber['replace'](/ /g,''),sPhoneNumber;}},'Button':{'ReadOnly':function(sId,bReadOnly){var item=$('#'+sId),sPointer=bReadOnly?'none':'',sOpacity=bReadOnly?'0.6':'';item['css']('pointer-events',sPointer)['css']('opacity',sOpacity);},'Click':function(sId){$('#'+sId+'\x20a')['trigger']('click');}},'ContactLookup':{'Load':function(sFieldDivTag,options){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlContactLookup.html');TriSysApex['FormsManager']['loadControlReplacingDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['Controls']['ContactLookup']['AfterLoadEvent'](sFieldDivTag,options);});},'AfterLoadEvent':function(sFieldDivTag,options){$('#ctrlContactLookup-TextBox-ID')['attr']('id',sFieldDivTag);var sButton='ctrlContactLookup-PickList-'+sFieldDivTag;$('#ctrlContactLookup-PickList-ID')['attr']('id',sButton);if(options['ContactId']>0x0)TriSysSDK['Controls']['ContactLookup']['WriteContactId'](sFieldDivTag,options['ContactId'],options['ContactName']);options['PreventSelection']?($('#'+sButton)['parent']()['prev']()['hide'](),$('#'+sButton)['parent']()['hide']()):$('#'+sButton)['off']()['on']('click',function(){TriSysSDK['Controls']['ContactLookup']['Pick'](sFieldDivTag,options);});},'Pick':function(sFieldDivTag,options){var fnSelectContact=function(selectedRow){if(!selectedRow)return;var lContactId=selectedRow['Contact_ContactId'],sFullName=selectedRow['Contact_Christian']+'\x20'+selectedRow['Contact_Surname'],sCompany=selectedRow['Contact_Company'];if(sCompany&&sCompany['length']>0x0)sFullName+=',\x20'+sCompany;return TriSysSDK['Controls']['ContactLookup']['WriteContactId'](sFieldDivTag,lContactId,sFullName),TriSysApex['FieldEvents']['ContactPickerFieldEvent'](sFieldDivTag,lContactId,sFullName,'picked'),!![];};TriSysApex['ModalDialogue']['Contacts']['Select'](fnSelectContact);},'ReadContactName':function(sFieldDivTag){var sContactName=$('#'+sFieldDivTag)['val']();return sContactName;},'ReadContactId':function(sFieldDivTag){var lContactId=$('#'+sFieldDivTag)['data']('ContactId');if(!lContactId)lContactId=0x0;return parseInt(lContactId);},'WriteContactId':function(sFieldDivTag,lContactId,sContactName){$('#'+sFieldDivTag)['val'](sContactName),$('#'+sFieldDivTag)['data']('ContactId',lContactId);},'Open':function(sFieldDivTag){var lContactId=TriSysSDK['Controls']['ContactLookup']['ReadContactId'](sFieldDivTag);if(lContactId>0x0)TriSysApex['FormsManager']['OpenForm']('Contact',lContactId);},'Delete':function(sFieldDivTag){TriSysSDK['Controls']['ContactLookup']['WriteContactId'](sFieldDivTag,0x0,''),TriSysApex['FieldEvents']['ContactPickerFieldEvent'](sFieldDivTag,0x0,'','deleted');},'ContactControlHTML':function(sID,sHideFindButton,sHideOpenButton,sHideDeleteButton){var sContactLookupTableHTML=TriSysApex['FormsManager']['getControlTemplateHTML']('ctrlContact.html');sContactLookupTableHTML=sContactLookupTableHTML['replace'](/{{ctrlContact-FieldID}}/g,sID);var sStyle=TriSysAPI['Operators']['stringToBoolean'](sHideFindButton,![])?'display:\x20none;':'';return sContactLookupTableHTML=sContactLookupTableHTML['replace']('{{ctrlContact-PickStyle1}}',sStyle),sContactLookupTableHTML=sContactLookupTableHTML['replace']('{{ctrlContact-PickStyle2}}',sStyle),sStyle=TriSysAPI['Operators']['stringToBoolean'](sHideOpenButton,![])?'display:\x20none;':'',sContactLookupTableHTML=sContactLookupTableHTML['replace']('{{ctrlContact-OpenStyle1}}',sStyle),sContactLookupTableHTML=sContactLookupTableHTML['replace']('{{ctrlContact-OpenStyle2}}',sStyle),sStyle=TriSysAPI['Operators']['stringToBoolean'](sHideDeleteButton,![])?'display:\x20none;':'',sContactLookupTableHTML=sContactLookupTableHTML['replace']('{{ctrlContact-DeleteStyle1}}',sStyle),sContactLookupTableHTML=sContactLookupTableHTML['replace']('{{ctrlContact-DeleteStyle2}}',sStyle),sContactLookupTableHTML;}},'CompanyLookup':{'Load':function(sFieldDivTag,options){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlCompanyLookup.html');TriSysApex['FormsManager']['loadControlReplacingDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['Controls']['CompanyLookup']['AfterLoadEvent'](sFieldDivTag,options);});},'AfterLoadEvent':function(sFieldDivTag,options){$('#ctrlCompanyLookup-TextBox-ID')['attr']('id',sFieldDivTag);var sButton='ctrlCompanyLookup-PickList-'+sFieldDivTag;$('#ctrlCompanyLookup-PickList-ID')['attr']('id',sButton);if(options['CompanyId']>0x0)TriSysSDK['Controls']['CompanyLookup']['WriteCompanyId'](sFieldDivTag,options['CompanyId'],options['CompanyName']);options['PreventSelection']?($('#'+sButton)['parent']()['prev']()['hide'](),$('#'+sButton)['parent']()['hide']()):$('#'+sButton)['off']()['on']('click',function(){TriSysSDK['Controls']['CompanyLookup']['Pick'](sFieldDivTag,options);});},'Pick':function(sFieldDivTag,options){var fnSelectCompany=function(selectedRow){if(!selectedRow)return;var lCompanyId=selectedRow['Company_CompanyId'],sCompany=selectedRow['Company_Name'];return TriSysSDK['Controls']['CompanyLookup']['WriteCompanyId'](sFieldDivTag,lCompanyId,sCompany),TriSysApex['FieldEvents']['CompanyPickerFieldEvent'](sFieldDivTag,lCompanyId,sCompany,'picked'),!![];};TriSysApex['ModalDialogue']['Companies']['Select'](fnSelectCompany);},'ReadCompanyId':function(sFieldDivTag){var lCompanyId=$('#'+sFieldDivTag)['data']('CompanyId');if(!lCompanyId)lCompanyId=0x0;return parseInt(lCompanyId);},'WriteCompanyId':function(sFieldDivTag,lCompanyId,sCompanyName){$('#'+sFieldDivTag)['val'](sCompanyName),$('#'+sFieldDivTag)['data']('CompanyId',lCompanyId);},'Open':function(sFieldDivTag){var lCompanyId=TriSysSDK['Controls']['CompanyLookup']['ReadCompanyId'](sFieldDivTag);if(lCompanyId>0x0)TriSysApex['FormsManager']['OpenForm']('Company',lCompanyId);},'Delete':function(sFieldDivTag){TriSysSDK['Controls']['CompanyLookup']['WriteCompanyId'](sFieldDivTag,0x0,''),TriSysApex['FieldEvents']['CompanyPickerFieldEvent'](sFieldDivTag,0x0,'','deleted');},'CompanyControlHTML':function(sID,sHideFindButton,sHideOpenButton,sHideDeleteButton){var sCompanyLookupTableHTML=TriSysApex['FormsManager']['getControlTemplateHTML']('ctrlCompany.html');sCompanyLookupTableHTML=sCompanyLookupTableHTML['replace'](/{{ctrlCompany-FieldID}}/g,sID);var sStyle=TriSysAPI['Operators']['stringToBoolean'](sHideFindButton,![])?'display:\x20none;':'';return sCompanyLookupTableHTML=sCompanyLookupTableHTML['replace']('{{ctrlCompany-PickStyle1}}',sStyle),sCompanyLookupTableHTML=sCompanyLookupTableHTML['replace']('{{ctrlCompany-PickStyle2}}',sStyle),sStyle=TriSysAPI['Operators']['stringToBoolean'](sHideOpenButton,![])?'display:\x20none;':'',sCompanyLookupTableHTML=sCompanyLookupTableHTML['replace']('{{ctrlCompany-OpenStyle1}}',sStyle),sCompanyLookupTableHTML=sCompanyLookupTableHTML['replace']('{{ctrlCompany-OpenStyle2}}',sStyle),sStyle=TriSysAPI['Operators']['stringToBoolean'](sHideDeleteButton,![])?'display:\x20none;':'',sCompanyLookupTableHTML=sCompanyLookupTableHTML['replace']('{{ctrlCompany-DeleteStyle1}}',sStyle),sCompanyLookupTableHTML=sCompanyLookupTableHTML['replace']('{{ctrlCompany-DeleteStyle2}}',sStyle),sCompanyLookupTableHTML;}},'ColourPicker':{'Load':function(sID,colour,sOnChangeFunction){$('#'+sID)['kendoColorPicker']({'value':colour,'buttons':![],'select':function(e){TriSysSDK['Controls']['ColourPicker']['ChangeColour'](e,sOnChangeFunction,sID);}});},'ChangeColour':function(e,sOnChangeFunction,sID){var colour=e['value'];if(sOnChangeFunction)TriSysApex['DynamicClasses']['CallFunction'](sOnChangeFunction,colour,sID);},'GetColour':function(sID,colour){try{var colorpicker=$('#'+sID)['data']('kendoColorPicker');return colorpicker['value']();}catch(ex){}},'SetColour':function(sID,colour){try{var colorpicker=$('#'+sID)['data']('kendoColorPicker');colorpicker['value'](colour);}catch(ex){}},'ClearColour':function(sOnChangeFunction,sID){const clearColour=TriSysProUI['GroupBackColour']();try{var colorpicker=$('#'+sID)['data']('kendoColorPicker');colorpicker['value'](clearColour);if(sOnChangeFunction)TriSysApex['DynamicClasses']['CallFunction'](sOnChangeFunction,clearColour,sID,!![]);}catch(ex){}}},'FileUploadImage':{'Load':function(sID,sMediaID,sOnChangeFunction){var sFieldName=null,sFieldLabel=null;const field=TriSysFlexiva['Forms']['Renderer']['Properties']['ReadFromDOM'](sID,TriSysFlexiva['Settings']['FieldDataTag']);sFieldName=field['Name'],sFieldLabel=field['LabelText'];const fnShowImage=function(sID,field,sImageURL){const elemImageContainer=$('#'+sID),imgElem=elemImageContainer['find']('img.image-tag');imgElem['attr']('src',sImageURL);if(field&&field['MaxHeight']){const iMaxHeight=parseInt(field['MaxHeight']);if(iMaxHeight>0x0)imgElem['css']('max-height',iMaxHeight+'px');}},sDefaultImageURL='images/image.png';fnShowImage(sID,field,sDefaultImageURL);const sFileName='';TriSysSDK['Controls']['FileUploadImage']['WriteMetaData'](sID,sFieldName,sFieldLabel,sMediaID,null,null,sFileName);const elem=$('#'+sID);elem['off']()['on']('click',function(){const metaData=TriSysSDK['Controls']['FileUploadImage']['ReadMetaData'](sID),fnViewImage=function(){return metaData&&metaData['FullImageURL']&&setTimeout(function(){TriSysApex['Pages']['FileManagerForm']['OpenDocumentViewer'](metaData['FullImageURL'],metaData['FileName'],'image');},0xa),!![];},fnUploadImage=function(){return metaData&&setTimeout(function(){TriSysSDK['Controls']['FileManager']['FindFileUpload']('Upload\x20'+metaData['FieldLabel'],function(sFile){setTimeout(function(){var fnShowAndSetImageURL=function(sFileURL){metaData['FullImageURL']=sFileURL,metaData['ThumbnailURL']=metaData['FullImageURL'],TriSysSDK['Controls']['FileUploadImage']['WriteMetaDataObject'](sID,metaData),fnShowImage(sID,field,metaData['ThumbnailURL']);};TriSysSDK['Controls']['FileManager']['GetFileReferenceServerFilePathToExternalFilePath'](sFile,fnShowAndSetImageURL);},0xa);});},0xa),!![];},fnDeleteImage=function(){return setTimeout(function(){metaData['FullImageURL']=null,metaData['ThumbnailURL']=null,metaData['FileName']=null,TriSysSDK['Controls']['FileUploadImage']['WriteMetaDataObject'](sID,metaData);const sDefaultImageURL='images/image.png';fnShowImage(sID,field,sDefaultImageURL);},0xa),!![];};var sMessage='Please\x20choose\x20to\x20view\x20the\x20image\x20in\x20more\x20detail,\x20upload\x20a\x20new\x20image\x20to\x20replace\x20the\x20current\x20image,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20or\x20delete\x20the\x20current\x20image?';TriSysApex['UI']['questionYesNoCancel'](sMessage,'View,\x20Upload\x20or\x20Delete\x20'+metaData['FieldLabel'],'View',fnViewImage,'Upload',fnUploadImage,'Delete',fnDeleteImage,{'CloseTopRightButton':!![]});});},'Show':function(sID,sMediaID){const elem=$('#'+sID),sThumbnail='?s=t',sFullImageURL='https://restdb.trisys.co.uk/media/'+sMediaID,sThumbnailURL=sFullImageURL+sThumbnail;elem['find']('img.image-tag')['attr']('src',sThumbnailURL);const sFileName='TODO\x20Garry',metaData=TriSysSDK['Controls']['FileUploadImage']['ReadMetaData'](sID);metaData['MediaID']=sMediaID,metaData['FullImageURL']=sFullImageURL,metaData['ThumbnailURL']=sThumbnailURL,TriSysSDK['Controls']['FileUploadImage']['WriteMetaDataObject'](sID,metaData);},'MetaDataTag':'data-meta','WriteMetaData':function(sID,sFieldName,sFieldLabel,sMediaID,sFullImageURL,sThumbnailURL,sFileName){const elem=$('#'+sID),metaData={'DOMid':sID,'FieldName':sFieldName,'FieldLabel':sFieldLabel,'MediaID':sMediaID,'NewMediaID':null,'FullImageURL':sFullImageURL,'ThumbnailURL':sThumbnailURL,'FileName':sFileName};TriSysSDK['Controls']['FileUploadImage']['WriteMetaDataObject'](sID,metaData);},'WriteMetaDataObject':function(sID,metaData){const elem=$('#'+sID),sMetaData=JSON['stringify'](metaData),sBase64=btoa(sMetaData);elem['attr'](TriSysSDK['Controls']['FileUploadImage']['MetaDataTag'],sBase64);},'ReadMetaData':function(sID){const elem=$('#'+sID),sBase64=elem['attr'](TriSysSDK['Controls']['FileUploadImage']['MetaDataTag']);if(sBase64){const sJSON=atob(sBase64),metaData=JSON['parse'](sJSON);return metaData;}},'ReadURL':function(sID){const metaData=TriSysSDK['Controls']['FileUploadImage']['ReadMetaData'](sID);if(metaData)return metaData['FullImageURL'];}}},'EntityFormTabs':{'AddClickEventHandlers':function(sNavDiv,bTabLookAndFeel){!bTabLookAndFeel&&$('#'+sNavDiv)['off']()['on']('click','li',function(){$('#'+sNavDiv)['find']('li')['removeClass']('active'),$(this)['addClass']('active');});if(bTabLookAndFeel){var sLightColour=TriSysProUI['BlockTitleBottomColour']();$('#'+sNavDiv)['find']('li')['each'](function(){$(this)['css']({'border-right':'1px\x20solid\x20'+sLightColour});});var sThemeColour=TriSysProUI['ThemedColour']();$('#'+sNavDiv+'\x20li')['find']('a')['hover'](function(){var bParentLiActive=$(this)['parent']()['hasClass']('active');!bParentLiActive&&$(this)['css']({'background-color':sLightColour,'border-left-color':sLightColour,'border-right-color':sLightColour});})['mouseout'](function(){var bParentLiActive=$(this)['parent']()['hasClass']('active');$(this)['css']({'border-top-color':bParentLiActive?sThemeColour:'','border-left-color':'','border-right-color':'','background-color':''});});}},'HighlightTabButton':function(sID){$('#'+sID)['find']('a')['trigger']('click');},'TabContainerClickEvent':function(jqueryThisHyperlink,sTabPaneId,fnCallback){var parentLI=jqueryThisHyperlink['parent']();if(parentLI){var bActive=parentLI['hasClass']('active');if(bActive)return;}var parentUL=parentLI['parent'](),parentBlockTitle=parentUL['parent'](),parentBlockFullContainer=parentBlockTitle['parent'](),tabContent=parentBlockFullContainer['find']('.tab-content');parentUL['find']('li')['removeClass']('active'),tabContent['find']('.tab-pane')['removeClass']('active')['hide'](),parentUL['find']('a')['each'](function(){$(this)['css']({'color':'','border-top':'','border-top-left-radius':'','border-top-right-radius':'','font-weight':''});}),parentLI['addClass']('active'),$('#'+sTabPaneId)['addClass']('active')['show']();var sNavBarInverseColour=TriSysProUI['NavBarInverseColour'](),sThemeColour=TriSysProUI['ThemedColour']();jqueryThisHyperlink['css']({'color':sNavBarInverseColour,'border-top':'2px\x20solid\x20'+sThemeColour,'border-top-left-radius':'4px','border-top-right-radius':'4px','font-weight':'bold','background-color':''});if(fnCallback)fnCallback(sTabPaneId);return TriSysApex['FormsManager']['EntityUpdateController']['AsynchronousFormTabClick'](sTabPaneId),setTimeout(function(){TriSysApex['ErrorHandling']['SendScreenshot'](sTabPaneId,{'TabClick':!![]});},0x3e8),![];},'isTabSelected':function(sID){var bSelected=$('#'+sID)['hasClass']('active');return bSelected;},'TabClickEvent':function(sGroupPanelPrefix,sSelectedPanelID,sButtonRowDiv,fnCallback){$('[id^=\x22'+sGroupPanelPrefix+'\x22]')['hide']();var sDivPanelID=sGroupPanelPrefix+sSelectedPanelID,divPanel=$('#'+sDivPanelID);divPanel['show']();var bScrollContentIntoView=![];if(sButtonRowDiv&&bScrollContentIntoView){var divPanelPosition=divPanel['position'](),lTop=divPanelPosition['top'],lHeight=divPanel['height'](),lAppCaptionHeight=$('#app-caption-fixed-top')['height'](),lWindowHeight=$(window)['height']()-lAppCaptionHeight,tabButtons=$('#'+sButtonRowDiv),lTabButtonsTop=tabButtons['position']()['top'],lScrollTop=$(document)['scrollTop']();if(lHeight+lTop>lWindowHeight){var lTopPosition=lTabButtonsTop-(lAppCaptionHeight+0xf);if(TriSysApex['Device']['isPhone']())lTopPosition=divPanelPosition['top']-(lAppCaptionHeight+0xa);$('html,body')['animate']({'scrollTop':lTopPosition},0x190);}}if(fnCallback)fnCallback(sDivPanelID);return setTimeout(function(){TriSysApex['ErrorHandling']['SendScreenshot'](sDivPanelID,{'TabClick':!![]});},0x3e8),![];},'AddHorizontalScrollBar':function(sDiv){var elem=$('#'+sDiv);elem['mCustomScrollbar']({'axis':'x','theme':'dark-thin','autoExpandScrollbar':!![],'advanced':{'autoExpandHorizontalScroll':!![]}});},'AddVerticalScrollBar':function(sDivOrElement,bFirstParameterIsJQueryElement){var elem;if(bFirstParameterIsJQueryElement)elem=sDivOrElement;else elem=$('#'+sDivOrElement);elem['mCustomScrollbar']({'axis':'y','theme':'dark-thin','autoExpandScrollbar':!![],'advanced':{'autoExpandVerticalScroll':!![]}});},'DrawTabs':function(sDivTagOfTabControl,sFormName){var dataSourceTabs=TriSysSDK['EntityFormTabs']['GetTabDataSource'](sFormName);dataSourceTabs?$('#'+sDivTagOfTabControl)['kendoTabStrip']({'animation':{'open':{'effects':'fadeIn'}},'dataTextField':'text','dataImageUrlField':'imageUrl','dataContentField':'content','dataSource':dataSourceTabs})['data']('kendoTabStrip')['select'](0x0):$('#'+sDivTagOfTabControl)['kendoTabStrip']({'animation':{'open':{'effects':'fadeIn'}}})['data']('kendoTabStrip')['select'](0x0);},'ResizeEventManagement':function(sDivTagOfTabControl,fnResizeCallback,bFullPage){$(window)['resize'](function(){if(bFullPage)resizePageEvent();else resizeTabEvent();});var resizePageEvent=function(){var iTODOCalculateCaptionAndLogoHeight=0x37,iDocumentHeight=$(document)['height']()-iTODOCalculateCaptionAndLogoHeight;fnResizeCallback(iDocumentHeight);return;},resizeTabEvent=function(){try{var tabStripElement=$('#'+sDivTagOfTabControl)['kendoTabStrip']();tabStrip=tabStripElement['data']('kendoTabStrip');var pos=tabStripElement['position'](),lTop=pos['top'],iFudgeFactor=0x4,lHeight=TriSysApex['Pages']['Index']['FormHeight']()-lTop-iFudgeFactor;tabStripElement['height'](lHeight);var iObjectHeight=lHeight-0x20;fnResizeCallback(iObjectHeight);}catch(err){}var expandContentDivs=function(divs){var iFudgeKludge=0x5;divs['height'](tabStripElement['innerHeight']()-tabStripElement['children']('.k-tabstrip-items')['outerHeight']()-iFudgeKludge);},resizeAllTabs=function(){expandContentDivs(tabStripElement['children']('.k-content'));};resizeAllTabs();};if(bFullPage)resizePageEvent();else resizeTabEvent();},'SelectedTabId':function(sId){var sSelectedId=null;return $('#'+sId)['find']('li')['each'](function(){var sId=this['id'];$(this)['hasClass']('active')&&(sSelectedId=this['id']);}),sSelectedId;},'GetTabDataSource':function(sEntityName){switch(sEntityName){case'Dashboard':return DashboardTabDataSource();case'Contact':return null;default:return EmptyTabDataSource();}function EmptyTabDataSource(){return null;}function DashboardTabDataSource(){var ds=[{'text':'Metrics','content':'<div\x20id=\x22divTestCharts\x22\x20style=\x22border-width:\x200;\x20height:\x2020px\x22></div>'+'<div\x20id=\x22chartTest\x22\x20style=\x22min-width:\x20310px;\x20height:\x20400px;\x20margin:\x200\x20auto\x22></div>'},{'text':'Recruitment\x20Activity\x20Summary','content':'A\x20summary\x20of\x20all\x20your\x20recruiting\x20activity\x20allowing\x20drill\x20down\x20to\x20important\x20events\x20and\x20tasks.'},{'text':'Active\x20Searching','content':'TriSys\x20continually\x20matches\x20candidates\x20with\x20requirements.\x20alerting\x20you\x20for\x20each\x20match\x20found,\x20allowing\x20you\x20to\x20save\x20valuable\x20time\x20and\x20increase\x20efficiency.'},{'text':'My\x20E-Mail','content':'Your\x20incoming\x20and\x20outgoing\x20e-mail\x20messages\x20which\x20could\x20not\x20be\x20synchronised\x20with\x20contacts\x20in\x20your\x20database.'},{'text':'Help\x20Guide','content':'<div\x20id=\x22TriSysHelpGuide\x22\x20></div>'},{'text':'Support\x20Information','content':'<div\x20id=\x22TriSysSupportInformation\x22></div>'},{'text':'TriSys\x20Web\x20Jobs','content':'<div\x20id=\x22TriSysWebJobs\x22></div>'}];return ds;}function ContactTabDataSource(){var ds=[{'text':'Personal','content':'Personal\x20details','imageUrl':'Images/TriSys/16x16/cvar.ico'},{'text':'Employment','content':'A\x20summary\x20of\x20all\x20your\x20recruiting\x20activity\x20allowing\x20drill\x20down\x20to\x20important\x20events\x20and\x20tasks.'},{'text':'Attributes','content':'TriSys\x20continually\x20matches\x20candidates\x20with\x20requirements.\x20alerting\x20you\x20for\x20each\x20match\x20found,\x20allowing\x20you\x20to\x20save\x20valuable\x20time\x20and\x20increase\x20efficiency.'},{'text':'Social\x20Networks','content':'Your\x20incoming\x20and\x20outgoing\x20e-mail\x20messages\x20which\x20could\x20not\x20be\x20synchronised\x20with\x20contacts\x20in\x20your\x20database.'},{'text':'Back\x20Office','content':'<div\x20id=\x22TriSysHelpGuide\x22\x20></div>'},{'text':'Requirements','content':'<div\x20id=\x22TriSysSupportInformation\x22></div>'},{'text':'Placements','content':'<div\x20id=\x22TriSysWebJobs\x22></div>'},{'text':'Notes/History','content':'<div\x20id=\x22TriSysWebJobs\x22></div>'},{'text':'Scheduled\x20Tasks','content':'<div\x20id=\x22TriSysWebJobs\x22></div>'}];return ds;}}},'DocumentObjectModel':{'GetAllNodesBeneathUniqueDivID':function(sDivID){var el=document['getElementById'](sDivID),nodes=[];htmlTree(el,nodes);function htmlTree(el,nodesArray){if(el){nodesArray['push'](el);if(el['hasChildNodes']()){var child=el['firstChild'];while(child){if(child['nodeType']===0x1&&child['nodeName']!='SCRIPT')htmlTree(child,nodesArray);child=child['nextSibling'];}}}}return nodes;},'GetVisibleGridDiv':function(){var nodes=document['getElementsByClassName']('k-grid');if(nodes)for(var i=0x0;i<nodes['length'];i++){var node=nodes[i];if(!TriSysSDK['DocumentObjectModel']['isHidden'](node)){var sGridID=nodes[i]['id'];return sGridID;}}},'isHidden':function(el){var style=window['getComputedStyle'](el);return style['display']==='none';},'isVisible':function isElementVisible(sIDofJQueryItemWith){var $element=$(sIDofJQueryItemWith);if($element['length']===0x0){$element=$('#'+sIDofJQueryItemWith);if($element['length']===0x0)return![];}var display=$element['css']('display'),visibility=$element['css']('visibility'),width=$element['width'](),height=$element['height']();return display!=='none'&&visibility!=='hidden'&&width>0x0&&height>0x0;},'SetHyperlinkProperties':function(JQueryDiv,sHref,sText){$(JQueryDiv)['attr']('href',sHref),$(JQueryDiv)['text'](sText);},'RemoveStyleDisplayNone':function(sHTML){var variations=['style=\x22display:none;','style=\x22display:\x20none;'];for(var i=0x0;i<variations['length'];i++){var sVariation=variations[i];sHTML=sHTML['replace'](sVariation,'style=\x22');}return sHTML;}},'Database':{'SQLQuoterNull':function(sValue){if(sValue)return sValue['replace'](/'/g,'\x27\x27');else return'null';},'SQLDateFormat':function(sValue){if(sValue)return'\x27'+TriSysSDK['Database']['SQLQuoterNull'](sValue)+'\x27';else return'null';},'GetDataSet':function(sSQL,fnCallback,objCallerDefinedData){var iMaxRecords=0x400,dataPacketForSQL={'SQL':sSQL,'PageNumber':0x1,'RecordsPerPage':iMaxRecords},payloadObject={};payloadObject['URL']='SQLDatabase/SQL_Select',payloadObject['OutboundDataPacket']=dataPacketForSQL,payloadObject['Asynchronous']=!![],payloadObject['InboundDataFunction']=function(result){var CSQLDatabaseSearchResults=result;fnCallback(CSQLDatabaseSearchResults,objCallerDefinedData);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'GetDataSetFromFunction':function(fnPopulationByFunction,fnCallback,objCallerDefinedData){var iMaxRecords=0x400,dataPacketForFunction={'PageNumber':0x1,'RecordsPerPage':iMaxRecords};if(fnPopulationByFunction['Parameters'])fnPopulationByFunction['Parameters'](dataPacketForFunction);var payloadObject={};payloadObject['URL']=fnPopulationByFunction['API'],payloadObject['OutboundDataPacket']=dataPacketForFunction,payloadObject['Asynchronous']=!![],payloadObject['InboundDataFunction']=function(response){if(response){if(response['Success']&&fnPopulationByFunction['DataTableFunction']){var myDataTable=fnPopulationByFunction['DataTableFunction'](response);if(fnCallback)fnCallback(myDataTable,objCallerDefinedData);}else TriSysApex['UI']['errorAlert'](response['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){var sError='TriSysSDK.Database.GetDataSetFromFunction:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText'];TriSysApex['Logging']['LogMessage'](sError);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'DataTableToDataSource':function(dt,sFieldName){var sourceData=[];if(dt)for(var i=0x0;i<dt['length'];i++){var dr=dt[i],sValue=dr[sFieldName],sourceStruct={'text':sValue,'value':sValue};sourceData['push'](sourceStruct);}return sourceData;},'ListToDataSource':function(lst){var sourceData=[];if(lst)for(var i=0x0;i<lst['length'];i++){var sValue=lst[i],sourceStruct={'text':sValue,'value':sValue};sourceData['push'](sourceStruct);}return sourceData;},'GetSnapshotFieldFromDataTable':function(dt,sFieldName){try{if(dt){var dr=dt[0x0],sValue=dr[sFieldName];return sValue;}}catch(err){}},'SelectedMultiSelectComboSQLClause':function(sDiv,sFieldName){var sWhereSQL='',sValuesFromCombo=TriSysSDK['CShowForm']['GetSelectedSkillsFromList'](sDiv);if(sValuesFromCombo){var sValues=sValuesFromCombo['split'](',\x20');if(sValues['length']>0x0){sWhereSQL+=sFieldName+'\x20in\x20(';for(var i=0x0;i<sValues['length'];i++){var sValue=sValues[i];if(i>0x0)sWhereSQL+=',';sWhereSQL+='\x27'+TriSysSDK['Database']['SQLQuoterNull'](sValue)+'\x27';}sWhereSQL+=')';}}return sWhereSQL;},'SQL':{'Constants':{'ContactsGridName':'grdContacts'},'Query':function(sID){var allQueries=TriSysSDK['Database']['SQL']['Load']();if(allQueries)for(var i=0x0;i<allQueries['length'];i++){var resource=allQueries[i];if(resource['ID']==sID){var sQuery=resource['SQL']['join']('\x0a');return sQuery;}}},'Load':function(){var SQLQueriesData=null,sFilePath=TriSysLoad['Utility']['FilePathPrefix']()+'data/sql.json',SQLQueriesData=TriSysApex['Forms']['Configuration']['JsonFileData'](sFilePath);return SQLQueriesData;}}},'Titles':{'List':function(){var sFilePath='data/titles.json',titlesData=TriSysApex['Forms']['Configuration']['JsonFileData'](sFilePath);return titlesData;},'LoadCombo':function(sComboID){var titlesData=TriSysSDK['Titles']['List']();if(titlesData){var data=[];for(var i=0x0;i<titlesData['length'];i++){var title=titlesData[i],struct={'value':title['Name'],'text':title['Name']};data['push'](struct);}TriSysSDK['CShowForm']['dropDownComboFieldEditableProperties'](sComboID,'Mr',data,null);}}},'Countries':{'Load':function(){var sFilePath=TriSysLoad['Utility']['FilePathPrefix']()+'data/countries.json',countriesData=TriSysApex['Forms']['Configuration']['JsonFileData'](sFilePath);return countriesData;},'_CountryName':null,'DefaultCountryName':'United\x20Kingdom','DefaultCountryCode':'GB','CurrentCountryName':function(fnCallback){if(TriSysSDK['Countries']['_CountryName']){if(fnCallback)fnCallback(TriSysSDK['Countries']['_CountryName']);return;}bNetworkAvailability=TriSysPhoneGap['isConnectedToComms']();if(!bNetworkAvailability){TriSysSDK['Countries']['_CountryName']=TriSysSDK['Countries']['DefaultCountryName'];if(fnCallback)fnCallback(TriSysSDK['Countries']['_CountryName']);return;}var payloadObject={};payloadObject['URL']='GeoLocation/CountryCode',payloadObject['TimeoutMilliseconds']=0x1388,payloadObject['InboundDataFunction']=function(sCountryCode){var invalidCountryCode='NotValid';if(!sCountryCode)sCountryCode=TriSysSDK['Countries']['DefaultCountryCode'];if(sCountryCode){var sCountryName=null,sLanguageCode=null,countriesData=TriSysSDK['Countries']['Load']();if(countriesData){for(var i=0x0;i<countriesData['length'];i++){var country=countriesData[i];if(country['cca2']==sCountryCode){sCountryName=country['name'];var languageCodes=country['languageCodes'];if(languageCodes&&languageCodes['length']>0x0)sLanguageCode=languageCodes[0x0];break;}}if(sCountryCode==invalidCountryCode)sCountryCode=null;else TriSysSDK['Countries']['_CountryName']=sCountryName,TriSysSDK['Countries']['DefaultCountryName']=sCountryName,sLanguageCode&&(TriSysSDK['Resources']['Language']=sLanguageCode,ApexIndexPage['SetTranslationLanguageCode'](sLanguageCode));if(fnCallback)fnCallback(sCountryName);return;}}},payloadObject['ErrorHandlerFunction']=function(request,status,error){if(fnCallback)fnCallback(TriSysSDK['Countries']['DefaultCountryName']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'CurrentCityName':function(fnCallback){var payloadObject={};payloadObject['URL']='GeoLocation/CityName',payloadObject['InboundDataFunction']=function(sCityName){if(sCityName){if(fnCallback)fnCallback(sCityName);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'ChangeCountryAndLanguage':function(sCountryName){var countriesData=TriSysSDK['Countries']['Load']();if(countriesData)for(var i=0x0;i<countriesData['length'];i++){var country=countriesData[i];if(country['name']==sCountryName){var languageCodes=country['languageCodes'];if(languageCodes&&languageCodes['length']>0x0)sLanguageCode=languageCodes[0x0];TriSysSDK['Countries']['_CountryName']=sCountryName,TriSysSDK['Countries']['DefaultCountryName']=sCountryName;sLanguageCode&&(TriSysSDK['Resources']['Language']=sLanguageCode,TriSysSDK['Countries']['SetAppModeAfterLanguageChange'](!![]));return;}}},'SetAppModeAfterLanguageChange':function(bShowConfirmationDialogue){var sLanguageCode=TriSysSDK['Resources']['Language'];if(bShowConfirmationDialogue){var sMessage=TriSysSDK['Resources']['Message']('TriSysSDK.Countries.SetAppModeAfterLanguageChange');sMessage=sMessage['replace']('##Country##',sLanguageCode),TriSysApex['UI']['ShowMessage'](sMessage,TriSysWeb['Constants']['ApplicationName']);}}},'Resources':{'Language':'en','InsertNewline':![],'Message':function(sID){var allResources=TriSysSDK['Resources']['Load']();if(allResources)for(var i=0x0;i<allResources['length'];i++){var resource=allResources[i];if(resource['ID']==sID){var sJoinSeparator='';if(TriSysSDK['Resources']['InsertNewline'])sJoinSeparator='\x0a';var sHTML=resource['HTML']['join'](sJoinSeparator);return sHTML;}}return sID;},'Load':function(){var resourcesData=null,sFilePath=TriSysSDK['Resources']['FilePath'](TriSysSDK['Resources']['Language']),jsonData=TriSysApex['Forms']['Configuration']['JsonFileData'](sFilePath);return!jsonData&&(sFilePath=TriSysSDK['Resources']['FilePath']('en'),jsonData=TriSysApex['Forms']['Configuration']['JsonFileData'](sFilePath)),jsonData;},'FilePath':function(sLanguage){var sFilePath='data/resource-'+sLanguage+'.json';return sFilePath;}},'PostCode':{'Lookup':function(sPostCodeDiv,sStreetDiv,sCityDiv,sCountyDiv,sCountryDiv,options){var sPostCode=$('#'+sPostCodeDiv)['val']();if(!sPostCode)return;TriSysApex['UI']['ShowWait'](null,'Post\x20Code\x20Lookup...');var bInternalDatabaseOnly=![];if(options)bInternalDatabaseOnly=options['InternalDatabaseOnly'];var dataPacket={'PostCode':sPostCode,'InternalDatabaseOnly':bInternalDatabaseOnly},payloadObject={};payloadObject['URL']='PostCode/Lookup',payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var CPostCodeLookupResponse=data;if(CPostCodeLookupResponse){if(CPostCodeLookupResponse['Success']){var fnUpdateAddressOnScreen=function(address){var sStreet=address['Street'],sCity=address['City'],sCounty=address['County'];sPostCode=address['PostCode'];var sCountry=address['Country'];$('#'+sStreetDiv)['val'](sStreet),$('#'+sCityDiv)['val'](sCity),$('#'+sCountyDiv)['val'](sCounty),$('#'+sPostCodeDiv)['val'](sPostCode);if(sCountry)TriSysSDK['CShowForm']['SetTextInCombo'](sCountryDiv,sCountry);};CPostCodeLookupResponse['Addresses']['length']==0x1?fnUpdateAddressOnScreen(CPostCodeLookupResponse['Address']):TriSysApex['ModalDialogue']['PostCode']['Select'](CPostCodeLookupResponse['Addresses'],function(selectedRow){if(selectedRow){var address={'Street':selectedRow['Street'],'City':selectedRow['City'],'County':selectedRow['County'],'PostCode':selectedRow['PostCode'],'Country':selectedRow['Country']};return fnUpdateAddressOnScreen(address),!![];}});}else TriSysApex['Toasters']['Error'](CPostCodeLookupResponse['ErrorMessage']);}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.PostCode.Lookup:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'LookupCityCounty':function(sWildcard,fnCallback){TriSysApex['UI']['ShowWait'](null,'City\x20Lookup...');var dataPacket={'Wildcard':sWildcard},payloadObject={};payloadObject['URL']='PostCode/LookupCityCounty',payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(CPostCodeCityCountyLookupResponse){TriSysApex['UI']['HideWait']();if(CPostCodeCityCountyLookupResponse){if(CPostCodeCityCountyLookupResponse['Success']){var fnUpdateAddressOnScreen=function(address){var sCity=address['City'],sCounty=address['County'];fnCallback(sCity,sCounty);};if(CPostCodeCityCountyLookupResponse['Addresses']['length']==0x1)fnUpdateAddressOnScreen(CPostCodeCityCountyLookupResponse['Address']);else{var myColumns=[{'field':'City','title':'City','type':'string'},{'field':'County','title':'County','type':'string'}];TriSysApex['ModalDialogue']['PostCode']['Select'](CPostCodeCityCountyLookupResponse['Addresses'],function(selectedRow){if(selectedRow){var address={'City':selectedRow['City'],'County':selectedRow['County']};return fnUpdateAddressOnScreen(address),!![];}},myColumns);}}else TriSysApex['Toasters']['Error'](CPostCodeCityCountyLookupResponse['ErrorMessage']);}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.PostCode.LookupCityCounty:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'JobTitle':{'Lookup':function(sJobTitlePrefix,sJobTitleDiv,fnChange){var fnUpdateJobTitleOnScreen=function(sJobTitle){$('#'+sJobTitleDiv)['val'](sJobTitle);if(fnChange)fnChange(sJobTitleDiv,sJobTitle);};TriSysSDK['JobTitle']['LookupCallback'](sJobTitlePrefix,fnUpdateJobTitleOnScreen);},'LookupCallback':function(sJobTitlePrefix,fnCallback){TriSysApex['UI']['ShowWait'](null,'Job\x20Title\x20Lookup...');var dataPacket={'Wildcard':sJobTitlePrefix},payloadObject={};payloadObject['URL']='Cache/JobTitles',payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(CJobTitlesResponse){TriSysApex['UI']['HideWait']();if(CJobTitlesResponse){if(CJobTitlesResponse['Success']){var fnUpdateJobTitleOnScreen=function(sJobTitle){$('#'+sJobTitleDiv)['val'](sJobTitle);};CJobTitlesResponse['JobTitles']['length']==0x1?fnCallback(CJobTitlesResponse['JobTitles'][0x0]['JobTitle']):TriSysApex['ModalDialogue']['JobTitle']['Select'](sJobTitlePrefix,CJobTitlesResponse['JobTitles'],function(selectedRow){if(selectedRow)return fnCallback(selectedRow['JobTitle']),!![];});}else TriSysApex['Toasters']['Error']('No\x20matching\x20job\x20titles\x20found.');}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.JobTitle.LookupCallback:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'LookupField':function(sJobTitleField){var sJobTitle=TriSysSDK['CShowForm']['GetJobTitleFromField'](sJobTitleField);TriSysSDK['JobTitle']['Lookup'](sJobTitle,sJobTitleField);},'LookupFieldKeyUp':function(sJobTitleField,e){if(e&&e['keyCode']==0xd)TriSysSDK['JobTitle']['LookupField'](sJobTitleField);},'JobTitleControlHTML':function(sID,sHideFindButton){var sJobTitleLookupTableHTML=TriSysApex['FormsManager']['getControlTemplateHTML']('ctrlJobTitle.html');sJobTitleLookupTableHTML=sJobTitleLookupTableHTML['replace'](/{{ctrlJobTitle-FieldID}}/g,sID);var sStyle=TriSysAPI['Operators']['stringToBoolean'](sHideFindButton,![])?'display:\x20none;':'';return sJobTitleLookupTableHTML=sJobTitleLookupTableHTML['replace']('{{ctrlJobTitle-PickStyle}}',sStyle),sJobTitleLookupTableHTML;}},'Numbers':{'Pad':function(a,b){return(0x38d7ea4c68000+a+'')['slice'](-b);},'Format':function(num,decimalPlaces){try{var p=num['toFixed'](decimalPlaces)['split']('.');return p[0x0]['split']('')['reduceRight'](function(acc,num,i,orig){if('-'===num&&0x0===i)return num+acc;var pos=orig['length']-i-0x1;return num+(pos&&!(pos%0x3)?',':'')+acc;},'')+(p[0x1]?'.'+p[0x1]:'');}catch(e){}},'ThousandsSeparator':function(lNum){var n=lNum,s=lNum;try{s=n['toLocaleString']();}catch(ex){s=lNum;}return s;}},'Tables':{'ColumnVisibilityByIndex':function(sTableDiv,iColumnIndex,bVisible){var stl;if(bVisible)stl='block';else stl='none';var tbl=document['getElementById'](sTableDiv),rows=tbl['getElementsByTagName']('tr');for(var row=0x0;row<rows['length'];row++){var cells=rows[row]['getElementsByTagName']('td');if(!bVisible)cells[iColumnIndex]['style']['display']=stl;}}},'Scheduler':{'SchedulerDivTag':null,'AgendaViewDayCount':0x7,'Instantiate':function(sDivTag,dataSourceArray){TriSysSDK['Scheduler']['SchedulerDivTag']=sDivTag;var Timezone='Etc/UTC',currentDate=new Date(),startTime=new Date(moment(currentDate)['format']('YYYY/MM/DD')+'\x2007:00'),bAgendaSelected=!![],sEventTemplate=$('#trisys-diary-event-template')['html'](),CustomAgenda=kendo['ui']['AgendaView']['extend']({'endDate':function(){var dtStart=kendo['ui']['AgendaView']['fn']['endDate']['call'](this),dtEnd=kendo['date']['addDays'](dtStart,TriSysSDK['Scheduler']['AgendaViewDayCount']);return dtEnd;}}),scheduler=$('#'+sDivTag)['kendoScheduler']({'date':currentDate,'startTime':new Date(startTime),'timezone':Timezone,'currentTimeMarker':{'useLocalTimezone':!![]},'dateHeaderTemplate':kendo['template']('<strong>#=kendo.toString(date,\x20\x27dddd\x27)#\x20#=kendo.toString(date,\x20\x27dd\x27)#\x20#=kendo.toString(date,\x20\x27MMMM\x27)#</strong>'),'views':[{'type':'day','showWorkHours':![]},{'type':'week','showWorkHours':![]},{'type':'month','showWorkHours':!![]},{'type':CustomAgenda,'selected':bAgendaSelected,'title':'Agenda','eventTimeTemplate':kendo['template']('<div\x20style=\x22padding:\x2010px;\x22'+'><span>#=kendo.toString(start,\x20\x27HH:mm\x27)#</span>\x20-\x20<span>#=kendo.toString(end,\x20\x27HH:mm\x27)#</span></div>')}],'selectable':![],'dataBound':TriSysSDK['Scheduler']['TelerikHackForNonUSADateFormat'],'save':TriSysSDK['Scheduler']['Save'],'remove':TriSysSDK['Scheduler']['Delete'],'edit':TriSysSDK['Scheduler']['Edit'],'add':TriSysSDK['Scheduler']['Add'],'moveStart':TriSysSDK['Scheduler']['MoveStart'],'move':TriSysSDK['Scheduler']['Move'],'moveEnd':TriSysSDK['Scheduler']['MoveEnd'],'resizeEnd':TriSysSDK['Scheduler']['ResizeEnd'],'navigate':TriSysSDK['Scheduler']['Navigate'],'editable':{'confirmation':![],'destroy':![]},'eventTemplate':sEventTemplate,'dataSource':dataSourceArray});$('#'+sDivTag)['on']('click','.k-task',function(){var scheduler=TriSysSDK['Scheduler']['GetSchedulerInstance']();if(scheduler){var dataItem=scheduler['occurrenceByUid']($(this)['data']('uid'));TriSysSDK['Scheduler']['DrillDown'](dataItem);}}),$('#'+sDivTag)['on']('mouseenter\x20mouseleave','.k-event',function(e){DiaryManager['PopupTaskHover'](e);});},'StartPopulationAfterLoad':function(){TriSysSDK['Scheduler']['NavigatePopulation']('today','Agenda',new Date());var toolbarDiv=document['querySelector']('div.k-scheduler-toolbar.k-toolbar.k-toolbar-md[data-role=\x22toolbar\x22]');if(toolbarDiv){var buttonGroups=toolbarDiv['querySelectorAll']('span[data-role=\x22buttongroup\x22].k-button-group');if(buttonGroups['length']>0x1){var newButtonGroup=document['createElement']('span');newButtonGroup['className']='k-widget\x20k-button-group\x20k-toolbar-button-group';var newButton=document['createElement']('button');newButton['className']='k-view-custom\x20k-button\x20k-button-md\x20k-rounded-md\x20k-button-solid\x20k-button-solid-base\x20k-toolbar-tool\x20k-button-rectangle',newButton['setAttribute']('type','button'),newButton['setAttribute']('role','button'),newButton['setAttribute']('aria-disabled','false'),newButton['setAttribute']('tabindex','0');var buttonText=document['createElement']('span');buttonText['className']='k-button-text',buttonText['textContent']='Diary\x20Options/Users',newButton['appendChild'](buttonText),newButton['addEventListener']('click',function(){DiaryManager['Options']['Popup']();}),newButtonGroup['appendChild'](newButton);var secondButtonGroup=buttonGroups[0x1];toolbarDiv['insertBefore'](newButtonGroup,secondButtonGroup);}}},'TaskTypeResources':function(){var taskTypesData=[],cachedTaskTypes=TriSysApex['Cache']['TaskTypes']();for(var i=0x0;i<cachedTaskTypes['length'];i++){var taskType=cachedTaskTypes[i],sHTMLColour=taskType['HTMLColour'],Color=net['brehaut']['Color'],pastel=Color(sHTMLColour)['lightenByAmount'](0.25)['toCSS'](),taskTypeRecord={'value':taskType['TaskTypeId'],'text':taskType['Name'],'color':pastel};taskTypesData['push'](taskTypeRecord);}var taskTypes=[{'field':'taskTypeId','dataSource':taskTypesData,'title':'TaskTypeId'}];return taskTypes;},'TaskTextColour':function(task){return TriSysSDK['Scheduler']['GetTaskTypeColour'](task['taskTypeId']);},'GetTaskTypeColour':function(lTaskTypeId){var cachedTaskTypes=TriSysApex['Cache']['TaskTypes']();for(var i=0x0;i<cachedTaskTypes['length'];i++){var taskType=cachedTaskTypes[i];if(lTaskTypeId==taskType['TaskTypeId']){var sHTMLColour=taskType['HTMLColour'],Color=net['brehaut']['Color'],pastel=Color(sHTMLColour)['lightenByAmount'](0.25)['toCSS']();return pastel;}}return'black';},'TaskTextDecoration':function(task){if(!task['Scheduled']||task['Clear'])return'line-through';else return'normal';},'TurnOffYellowTooltips':function(){$('.k-scheduler-table\x20.k-task')['attr']('title',''),$('.k-scheduler-timecolumn')['css']('width','8em');},'Populate':function(sDivTag,dtStart,dtEnd,populationOptions){if(!dtStart||!dtEnd)return;var scheduler=$('#'+sDivTag)['data']('kendoScheduler'),userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials){var lUserId=userCredentials['LoggedInUser']['UserId'],fnPopulationByFunction={'API':'Tasks/DiaryList','Parameters':function(request){request['UserId']=lUserId;var bAllUsers=!![];if(populationOptions){if(populationOptions['LoggedInUserOnly'])bAllUsers=![];}if(bAllUsers)try{var lst=TriSysSDK['Scheduler']['Options']['SelectedUserList'];lst&&(lst['length']>0x0&&(request['UserId']=0x0,request['UserList']=lst));}catch(ex){}request['StartDate']=moment(dtStart)['format']('YYYY-MM-DD'),request['EndDate']=moment(dtEnd)['format']('YYYY-MM-DD');},'DataTableFunction':function(response){return response['List'];}},options={'StartDate':dtStart,'EndDate':dtEnd};TriSysSDK['Scheduler']['PopulateSchedulerAsynchronously'](scheduler,fnPopulationByFunction,options);}},'PopulateSchedulerAsynchronously':function(scheduler,fnPopulationByFunction,options){var fnProcessDataTable=function(dataTable){var schedulerDataTable=[];if(dataTable){var dt=dataTable;for(var i=0x0;i<dt['length'];i++){var dr=dt[i],lTaskId=dr['TaskId'],sStartDate=dr['StartDate'],sEndDate=dr['EndDate'],sDescription=dr['Description'],sDisplayDescription=dr['DisplayDescription'],lTaskTypeId=dr['TaskTypeId'],sTaskType=dr['TaskType'],bScheduled=dr['Scheduled'],bClear=dr['Clear'],bComplete=dr['Complete'],sUserName=dr['UserName'];if(!sDisplayDescription)sDisplayDescription='';if(!sDescription)sDescription=sDisplayDescription;sDescription=sDisplayDescription,sDisplayDescription=$('<p>'+sDisplayDescription+'</p>')['text']();var users=sUserName['split'](','),iUsers=users['length'],sUser=users[0x0],lstUserImages=[],sUserImage=TriSysApex['Cache']['UsersManager']['Photo'](null,sUser);iUsers>0x1&&(sUser+='\x20+\x20'+(iUsers-0x1)+'\x20other'+(iUsers==0x2?'':'s'),users['forEach'](function(user){var sPhoto=TriSysApex['Cache']['UsersManager']['Photo'](null,user);lstUserImages['push'](sPhoto);}));var sMomentFormatUTC='YYYY-MM-DDTHH:mm:ss',dtStart=moment(sStartDate)['format'](sMomentFormatUTC),dtEnd=moment(sEndDate)['format'](sMomentFormatUTC),fnDatesAreOnSameDay=function(s,e){var bSameDate=s['getFullYear']()===e['getFullYear']()&&s['getMonth']()===e['getMonth']()&&s['getDate']()===e['getDate']();return bSameDate;},iIdentifierIndex=0x0,task={'id':lTaskId+iIdentifierIndex,'taskid':lTaskId,'start':dtStart,'end':dtEnd,'title':sDescription,'description':sDisplayDescription,'taskTypeId':lTaskTypeId,'TaskType':sTaskType,'Scheduled':bScheduled,'Clear':bClear,'Complete':bComplete,'UserName':sUser,'UserImage':sUserImage};dtStart=new Date(dtStart),dtEnd=new Date(dtEnd);if(fnDatesAreOnSameDay(dtStart,dtEnd))schedulerDataTable['push'](task);else{var dtStartLoop=new Date(new Date(dtStart)['setHours'](0x0,0x0,0x0,0x0)),dtEndLoop=new Date(new Date(dtEnd)['setHours'](0x17,0x3b,0x3b)),iNumberOfDays=0x0;for(var day=dtStartLoop;day<=dtEndLoop;day['setDate'](day['getDate']()+0x1)){var bWithinRange=!![];if(options){if(day>options['EndDate'])bWithinRange=![];}if(bWithinRange)iNumberOfDays+=0x1;}dtStartLoop=new Date(dtStart),dtEndLoop=new Date(dtEnd);var dtDay=new Date(dtStartLoop);for(var iDayCount=0x1;iDayCount<=iNumberOfDays;iDayCount++){iDayCount>0x1&&dtDay['setDate'](dtDay['getDate']()+0x1);var dtMidnight=new Date(dtDay['setHours'](0x0,0x0,0x0,0x0)),dtEndOfDay=new Date(dtDay['setHours'](0x17,0x3b,0x3b));if(iDayCount==0x1)task['start']=moment(new Date(dtDay['setHours'](dtStart['getHours'](),dtStart['getMinutes'](),dtStart['getSeconds']())))['format'](sMomentFormatUTC),task['end']=moment(dtEndOfDay)['format'](sMomentFormatUTC);else iDayCount>=iNumberOfDays?(task['start']=moment(dtMidnight)['format'](sMomentFormatUTC),task['end']=moment(new Date(dtDay['setHours'](dtEnd['getHours'](),dtEnd['getMinutes'](),dtEnd['getSeconds']())))['format'](sMomentFormatUTC)):(task['start']=moment(dtMidnight)['format'](sMomentFormatUTC),task['end']=moment(dtEndOfDay)['format'](sMomentFormatUTC));schedulerDataTable['push'](task),task=JSON['parse'](JSON['stringify'](task));}}}TriSysSDK['Scheduler']['PopulateSchedulerFromDataSet'](scheduler,schedulerDataTable);}};TriSysSDK['Database']['GetDataSetFromFunction'](fnPopulationByFunction,fnProcessDataTable);},'PopulateSchedulerFromDataSet':function(scheduler,dataTable){try{var dataSource=new kendo['data']['SchedulerDataSource']({'data':dataTable,'batch':!![],'serverAggregates':!![],'serverFiltering':!![],'serverGrouping':!![],'serverPaging':!![],'serverSorting':!![]});if(scheduler&&dataSource)scheduler['setDataSource'](dataSource);TriSysSDK['Scheduler']['TurnOffYellowTooltips']();}catch(e){var bSendErrorToServer=!![];TriSysApex['Logging']['LogMessage']('TriSysSDK.Scheduler.PopulateSchedulerFromDataSet:\x20'+TriSysApex['Logging']['CatchVariableToText'](e),bSendErrorToServer);}},'NavigatePopulation':function(sAction,sView,dt){var dtStart=dt,dtEnd=null;if(sAction=='changeView'){if(sView=='week'){while(moment(dt)['day']()>0x0)dt=moment(dt)['add'](-0x1,'days');dtStart=dt,dtEnd=moment(dtStart)['add'](0x7,'days'),TriSysSDK['Scheduler']['Populate'](TriSysSDK['Scheduler']['SchedulerDivTag'],dtStart,dtEnd);}return;}if((sAction=='changeDate'||sAction=='today')&&sView=='week'){while(moment(dt)['day']()>0x0)dt=moment(dt)['add'](-0x1,'days');dtStart=dt,dtEnd=moment(dtStart)['add'](0x7,'days');}else{if(sAction=='previous')dtEnd=dt,dtStart=TriSysSDK['Scheduler']['CalculateDateAdd'](dtEnd,sView,![]);else dtEnd=TriSysSDK['Scheduler']['CalculateDateAdd'](dtStart,sView,!![]);}(sView=='agenda'||sView=='Agenda')&&(dtStart=dt,dtEnd=TriSysSDK['Scheduler']['CalculateDateAdd'](dtStart,sView,!![])),dtEnd&&TriSysSDK['Scheduler']['Populate'](TriSysSDK['Scheduler']['SchedulerDivTag'],dtStart,dtEnd);},'CalculateDateAdd':function(dtStart,sView,bStart){var iMultiplier=bStart?0x1:-0x1,dtEnd=null;switch(sView['toLowerCase']()){case'day':dtEnd=moment(dtStart)['add'](0x18*iMultiplier,'hours');break;case'week':dtEnd=moment(dtStart)['add'](0x7*iMultiplier,'days');break;case'month':dtEnd=moment(dtStart)['add'](0x1*iMultiplier,'months');break;case'agenda':dtEnd=moment(dtStart)['add'](TriSysSDK['Scheduler']['AgendaViewDayCount']-0x1,'days');break;}return new Date(dtEnd);},'Navigate':function(e){switch(e['view']){case'agenda':case'Agenda':this['options']['eventTemplate']=$('#trisys-diary-event-template')['html']();break;default:this['options']['eventTemplate']=$('#trisys-diary-event-template-month')['html']();}TriSysSDK['Scheduler']['NavigatePopulation'](e['action'],e['view'],e['date']);},'Edit':function(e){e['preventDefault'](),TriSysSDK['Scheduler']['DrillDown'](e['event']);},'Move':function(e){},'MoveStart':function(e){},'MoveEnd':function(e){TriSysSDK['Scheduler']['UpdateEventAfterMoveOrResize'](e),TriSysSDK['Scheduler']['TaskUpdateDate'](e['event']['id'],e['start'],e['end']);},'ResizeEnd':function(e){TriSysSDK['Scheduler']['UpdateEventAfterMoveOrResize'](e),TriSysSDK['Scheduler']['TaskUpdateDate'](e['event']['id'],e['start'],e['end']);},'TelerikHackForNonUSADateFormat':function(e){var scheduler=$('#'+TriSysSDK['Scheduler']['SchedulerDivTag'])['getKendoScheduler']();if(!scheduler)return;var schedulerView=scheduler['view']();if(!schedulerView)return;var dtStart=schedulerView['startDate'](),dtEnd=schedulerView['endDate'](),sView=schedulerView['name'];sView=='agenda'&&(dtEnd=TriSysSDK['Scheduler']['CalculateDateAdd'](dtStart,sView,!![]));var sDateFormat='dddd\x20DD\x20MMMM\x20YYYY',sStart=moment(dtStart)['format'](sDateFormat),sEnd=moment(dtEnd)['format'](sDateFormat),sFormattedDate=sStart+(sView=='day'?'':'\x20to\x20'+sEnd);scheduler['_model']['set']('formattedDate',sFormattedDate);},'Add':function(e){e&&(e['preventDefault'](),e['event']&&TriSysApex['ModalDialogue']['Task']['QuickShow'](null,!![],e['event']['start'],e['event']['end']));},'DrillDown':function(event){const lTaskId=event['id'],sTaskType=event['TaskType'];if(sTaskType=='Post-It\x20Note')TriSysApex['PostItNotes']['OpenPostItNote'](lTaskId);else TriSysSDK['Scheduler']['EditTask'](lTaskId);},'EditTask':function(lTaskId){TriSysApex['ModalDialogue']['Task']['QuickShow'](lTaskId,!![]);},'UpdateEventAfterMoveOrResize':function(e){var dataSource=TriSysSDK['Scheduler']['GetLiveInMemoryDataSource']();if(dataSource)for(var ev=0x0;ev<dataSource['length'];ev++){var event=dataSource[ev];if(event['id']==e['event']['id']){event['start']=e['start'],event['end']=e['end'];break;}}},'GetSchedulerInstance':function(){var scheduler=$('#'+TriSysSDK['Scheduler']['SchedulerDivTag'])['data']('kendoScheduler');return scheduler;},'GetLiveInMemoryDataSource':function(){var scheduler=TriSysSDK['Scheduler']['GetSchedulerInstance']();if(scheduler){var dataSource=scheduler['_data'];return dataSource;}},'Save':function(e){TriSysApex['Logging']['LogMessage']('TriSysSDK.Scheduler.Save('+e['event']['id']+')');},'Delete':function(e){TriSysApex['Logging']['LogMessage']('TriSysSDK.Scheduler.Delete('+e['event']['id']+')');var lTaskId=e['event']['id'],sDescription=e['event']['description'],sMessage='Delete\x20task:\x20'+lTaskId+':\x20'+sDescription+'?',fnDelete=function(){return TriSysApex['ModalDialogue']['Task']['SubmitTaskDeletion'](lTaskId),!![];};e['preventDefault'](),TriSysApex['UI']['questionYesNo'](sMessage,TriSysApex['Copyright']['ShortProductName'],'Yes',fnDelete,'No');},'RefreshFromServer':function(){var scheduler=TriSysSDK['Scheduler']['GetSchedulerInstance']();if(scheduler){if(scheduler['view']()){var dtStart=scheduler['view']()['startDate'](),dtEnd=scheduler['view']()['endDate'](),sView=scheduler['view']()['name'];if(sView=='agenda')dtEnd=TriSysSDK['Scheduler']['CalculateDateAdd'](dtStart,sView,!![]);TriSysSDK['Scheduler']['Populate'](TriSysSDK['Scheduler']['SchedulerDivTag'],dtStart,dtEnd);}}},'TaskUpdateDate':function(lTaskId,dtStart,dtEnd){dtStart=moment(dtStart)['format']('YYYY-MM-DDTHH:mm:ss'),dtEnd=moment(dtEnd)['format']('YYYY-MM-DDTHH:mm:ss');var dataPacket={'TaskId':lTaskId,'StartDate':dtStart,'EndDate':dtEnd},payloadObject={};payloadObject['URL']='Task/UpdateDate',payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(data){var objCompleted=data;if(objCompleted){if(objCompleted['Success'])return;else TriSysApex['UI']['ShowMessage'](objCompleted['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('TriSysSDK.Scheduler.TaskUpdateDate:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'SetView':function(sView){var scheduler=TriSysSDK['Scheduler']['GetSchedulerInstance']();if(scheduler&&sView)scheduler['view'](sView);},'SetDate':function(dt,populationOptions){var scheduler=TriSysSDK['Scheduler']['GetSchedulerInstance']();if(scheduler)scheduler['date'](dt);var dtTomorrow=new Date(moment(dt)['add'](0x1,'days')),iYear=moment(dtTomorrow)['year'](),iMonth=moment(dtTomorrow)['month'](),iDay=moment(dtTomorrow)['date']();dtFollowUp=new Date(iYear,iMonth,iDay,0x0,0x0,0x0,0x0),TriSysSDK['Scheduler']['Populate'](TriSysSDK['Scheduler']['SchedulerDivTag'],dt,dtTomorrow,populationOptions);},'Options':{'SelectedUserList':null}},'Browser':{'SupportsSynchronousAPI':function(){var iVersion=TriSysSDK['Browser']['InternetExplorerVersion']();if(iVersion>0x0&&iVersion<0xa)return![];else return!![];},'CORSProxyKludgeApplied':![],'CORSProxyKludge':function(){if(TriSysSDK['Browser']['CORSProxyKludgeApplied'])return;var bKludgeRequired=![],iVersion=TriSysSDK['Browser']['InternetExplorerVersion']();if(iVersion>=0x8&&iVersion<=0x9)bKludgeRequired=!![];bKludgeRequired&&$['corsProxy']['register']({'url':'https://api.trisys.co.uk/cors-proxy.html'}),TriSysSDK['Browser']['CORSProxyKludgeApplied']=!![];},'CORSProxyJavascriptLoad':function(){var iVersion=TriSysSDK['Browser']['InternetExplorerVersion']();if(iVersion>=0x8&&iVersion<=0x9){var sFile='https://api.trisys.co.uk/javascript/cors-proxy.js';$['getScript'](sFile,function(data,status,jqxhr){});}},'Supported':function(){var iVersion=TriSysSDK['Browser']['InternetExplorerVersion']();if(iVersion>0x0&&iVersion<0x8)return![];else return!![];},'InternetExplorerVersion':function(){var sVersion=TriSysSDK['Browser']['Version']();if(sVersion){if(sVersion['indexOf']('msie')===0x0){var sParts=sVersion['split']('\x20'),iVersion=parseInt(sParts[0x1],0xa);return iVersion;}}return-0x1;},'Version':function(){var sDescription=null,uagent=navigator['userAgent']['toLowerCase'](),match='',_browser={};_browser['chrome']=/webkit/['test'](uagent)&&/chrome/['test'](uagent),_browser['firefox']=/mozilla/['test'](uagent)&&/firefox/['test'](uagent),_browser['msie']=/msie/['test'](uagent)||/trident/['test'](uagent),_browser['safari']=/safari/['test'](uagent)&&/applewebkit/['test'](uagent)&&!/chrome/['test'](uagent),_browser['opr']=/mozilla/['test'](uagent)&&/applewebkit/['test'](uagent)&&/chrome/['test'](uagent)&&/safari/['test'](uagent)&&/opr/['test'](uagent),_browser['edge']=/edge/['test'](uagent),_browser['brave']=/brave/['test'](uagent),_browser['version']='';try{if(_browser['edge']){var parts=uagent['split']('edge/');return sDescription='edge\x20'+parts[0x1],sDescription;}if(_browser['brave']){var parts=uagent['split']('brave/'),sVersion=parts[0x1];return parts=sVersion['split']('\x20'),sDescription='brave\x20'+parts[0x0],sDescription;}}catch(e){}for(x in _browser){if(_browser[x])return match=uagent['match'](new RegExp('('+x+')(\x20|/)([0-9]+)')),match?_browser['version']=match[0x3]:(match=uagent['match'](new RegExp('rv:([0-9]+)')),match&&(_browser['version']=match[0x1])),sDescription=(x==='opr'?'Opera':x)+'\x20'+_browser['version'],sDescription;}},'isMatch':function(sMatch){var sVersion=TriSysSDK['Browser']['Version']();if(sVersion){sVersion=sVersion['toLowerCase'](),sMatch=sMatch['toLowerCase']();var bMatched=sVersion['indexOf'](sMatch)>=0x0;return bMatched;}},'Firefox':function(){return TriSysSDK['Browser']['isMatch']('firefox');},'Chrome':function(){return TriSysSDK['Browser']['isMatch']('chrome');},'Safari':function(){return TriSysSDK['Browser']['isMatch']('safari');},'InternetExplorer':function(){return TriSysSDK['Browser']['isMatch']('msie');},'Edge':function(){return TriSysSDK['Browser']['isMatch']('edge');},'Brave':function(){return TriSysSDK['Browser']['isMatch']('brave');},'Detection':{'GOOGLE_VENDOR_NAME':'Google\x20Inc.','isOpera':function(){return Boolean(window['opr'],![]);},'isChromium':function(){return Boolean(window['chrome'],![]);},'isChrome':function(){var name=TriSysSDK['Browser']['Detection']['getBrowserName']();return name==='Chrome';},'getBrowserName':function(){var userAgent=window['navigator']['userAgent'],vendor=window['navigator']['vendor'];switch(!![]){case/Edge|Edg|EdgiOS/['test'](userAgent):return'Edge';case/OPR|Opera/['test'](userAgent)&&TriSysSDK['Browser']['Detection']['isOpera']():return'Opera';case/CriOS/['test'](userAgent):case/Chrome/['test'](userAgent)&&vendor===TriSysSDK['Browser']['Detection']['GOOGLE_VENDOR_NAME']&&TriSysSDK['Browser']['Detection']['isChromium']():return'Chrome';case/Vivaldi/['test'](userAgent):return'Vivaldi';case/YaBrowser/['test'](userAgent):return'Yandex';case/Firefox|FxiOS/['test'](userAgent):return'Firefox';case/Safari/['test'](userAgent):return'Safari';case/MSIE|Trident/['test'](userAgent):return'Internet\x20Explorer';default:return'Unknown';}}},'OpenURL':function(sURL,options){if(!sURL)return;if(sURL['toLowerCase']()['indexOf']('http')<0x0)sURL='https://'+sURL;var fnOpenRemoteDesktopBrowserTab=function(){try{var win=window['open'](sURL,'_blank');if(win)win['focus']();else TriSysApex['UI']['ShowMessage']('Please\x20disable\x20your\x20browser\x20pop-up\x20blocker.');}catch(e){TriSysApex['UI']['errorAlert'](TriSysApex['Logging']['CatchVariableToText'](e));}return!![];};if(options){if(options['Prompt']){TriSysApex['UI']['questionYesNo']('Open:'+'<br/>'+sURL+'<br/>'+'in\x20a\x20separate\x20tab?','Open\x20Tab','Yes',fnOpenRemoteDesktopBrowserTab,'No');return;}}fnOpenRemoteDesktopBrowserTab();}},'FormTabs':{'Initialise':function(){$('.nav-tabs:first')['tabdrop'](),$('.nav-tabs:last')['tabdrop']({'text':'More\x20options'});},'TabClickEvent':function(itemClicked,fnCallback,sShowDiv){if(fnCallback)fnCallback(sShowDiv);},'TabClickEvent2015':function(e,thisObj,fnCallback){e['preventDefault'](),$(thisObj)['tab']('show');var sID=thisObj['hash'];sID&&(sID=sID['replace']('#',''),fnCallback(sID));}},'FormMenus':{'Constants':{'File_New':'file-new','File_Open':'file-open','File_Save':'file-save','File_Save_As':'file-saveas','File_Delete':'file-delete','File_Print':'file-print','File_Close':'file-close','Grid_SelectAll':'grid-select-all','Grid_SelectNone':'grid-select-none','Action_Call':'action-call','Action_CVSend':'action-cvsend','Action_Labels':'action-labels','Action_MailMerge':'action-mail-merge','Action_Meeting':'action-meeting','Action_Note':'action-note','Action_ScreeningInterview':'action-screening-interview','Action_SendSMSText':'action-send-sms-text','Action_SendJobSpecification':'action-send-job-specification','Action_ToDo':'action-todo','Action_More':'action-more...','Help_Contents':'help-contents','Help_Search':'help-search'},'Draw':function(sDivTag,settings){var fm=TriSysSDK['FormMenus']['Constants'],menu=$('#'+sDivTag)['kendoMenu']({'select':TriSysSDK['FormMenus']['SelectedMenuItem'],'openOnClick':!![],'closeOnClick':!![],'dataSource':[{'text':'File','items':[{'value':fm['File_New'],'text':'New','imageUrl':'images/trisys/16x16/document.png'},{'value':fm['File_Open'],'text':'Open','imageUrl':'images/trisys/16x16/folder-open-file.png'},{'value':fm['File_Save'],'text':'Save','imageUrl':'images/trisys/16x16/save.png'},{'value':fm['File_Delete'],'text':'Delete','imageUrl':'images/trisys/16x16/delete.png'},{'value':fm['File_Print'],'text':'Print','imageUrl':'images/trisys/16x16/printer.png'},{'value':fm['File_Close'],'text':'Close','imageUrl':'images/trisys/16x16/close.png'}]},{'text':'Grid','items':[{'value':fm['Grid_SelectAll'],'text':'Select\x20All','imageUrl':'images/trisys/16x16/select-all.png'},{'value':fm['Grid_SelectNone'],'text':'Select\x20None','imageUrl':'images/trisys/16x16/select-none.png'}]},{'text':'Actions','items':[{'value':fm['Action_Call'],'text':'Call','imageUrl':'images/trisys/16x16/phone-office.png'},{'value':fm['Action_CVSend'],'text':'CV\x20Send','imageUrl':'images/trisys/16x16/cv-send.png'},{'value':fm['Action_Labels'],'text':'Labels','imageUrl':'images/trisys/16x16/label.png'},{'value':fm['Action_MailMerge'],'text':'Mail\x20Merge','imageUrl':'images/trisys/16x16/email.png'},{'value':fm['Action_Meeting'],'text':'Meeting','imageUrl':'images/trisys/16x16/meeting.png'},{'value':fm['Action_Note'],'text':'Note','imageUrl':'images/trisys/16x16/note-history.png'},{'value':fm['Action_ScreeningInterview'],'text':'Screening\x20Interview','imageUrl':'images/trisys/16x16/interview-screening.png'},{'value':fm['Action_SendSMSText'],'text':'Send\x20SMS/Text','imageUrl':'images/trisys/16x16/pda.png'},{'value':fm['Action_SendJobSpecification'],'text':'Send\x20Job\x20Specification','imageUrl':'images/trisys/16x16/send-job-specification.png'},{'value':fm['Action_ToDo'],'text':'ToDo','imageUrl':'images/trisys/16x16/todo.png'}]},{'text':'Help','items':[{'value':fm['Help_Contents'],'text':'Contents','imageUrl':'images/trisys/16x16/help-file.png'},{'value':fm['Help_Search'],'text':'Search\x20for\x20Help','imageUrl':'images/trisys/16x16/binoculars.png'}]}]});},'SelectedMenuItem':function(e){var selectedItem=TriSysSDK['FormMenus']['KendoUIMenuSelectEvent'](this,e);if(selectedItem){var sMenuItem=selectedItem['value'],sText=selectedItem['text'],fm=TriSysSDK['FormMenus']['Constants'];switch(sMenuItem){case fm['File_Close']:TriSysApex['FormsManager']['CloseCurrentForm']();return;case fm['Grid_SelectAll']:case fm['Grid_SelectNone']:var sGridDiv=TriSysSDK['DocumentObjectModel']['GetVisibleGridDiv']();if(sGridDiv)TriSysSDK['Grid']['SelectAllRows'](sGridDiv,sMenuItem==fm['Grid_SelectAll']);return;case fm['Action_More']:break;}TriSysApex['Toasters']['Success'](sText+'\x20('+sMenuItem+')');}},'KendoUIMenuSelectEvent':function(eventThis,e){var sSelectedText=$(e['item'])['children']('.k-link')['text'](),item=$(e['item']),menuElement=item['closest']('.k-menu'),dataItem=eventThis['options']['dataSource'],index=item['parentsUntil'](menuElement,'.k-item')['map'](function(){return $(this)['index']();})['get']()['reverse']();index['push'](item['index']());try{for(var i=-0x1,len=index['length'];++i<len;){dataItem=dataItem[index[i]],dataItem=i<len-0x1?dataItem['items']:dataItem;}}catch(e){}if(!dataItem)return null;var sSelectedValue=dataItem['value'];if(sSelectedValue===undefined||!sSelectedValue||sSelectedValue=='')return null;var selectedItem={'text':sSelectedText,'value':sSelectedValue};return selectedItem;},'DrawDropDownMenuFromTemplate':function(sDiv,sFormName,sTemplateFile,fnMenuItemCallback,sMenuItemsParentDiv,bNoDivReplacement,visibleMenuItems,sRenameMenuItemsParentDiv){var fnLoadControl=TriSysApex['FormsManager']['loadControlReplacingDiv'];if(bNoDivReplacement)fnLoadControl=TriSysApex['FormsManager']['loadControlIntoDiv'];fnLoadControl(sDiv,sTemplateFile,function(response,status,xhr){var sEnumerateDiv=sMenuItemsParentDiv?sMenuItemsParentDiv:sDiv;sRenameMenuItemsParentDiv&&($('#'+sMenuItemsParentDiv)['attr']('id',sRenameMenuItemsParentDiv),sEnumerateDiv=sRenameMenuItemsParentDiv),$('#'+sEnumerateDiv)['find']('a')['each'](function(){var sID=$(this)['attr']('id');if(sID){if(visibleMenuItems)for(var i=0x0;i<visibleMenuItems['length'];i++){var sMenuID=visibleMenuItems[i];if(sID==sMenuID)$(this)['show']();}$(this)['attr']('id',sID+'-'+sFormName),$(this)['click'](function(e){e['preventDefault']();var sID=this['id'];fnMenuItemCallback(sID);});}});});},'DrawUniqueDropDownMenuFromTemplate':function(sDiv,sTemplateFile,fnOnLoadComplete){var fnLoadControl=TriSysApex['FormsManager']['loadControlReplacingDiv'];fnLoadControl(sDiv,sTemplateFile,function(response,status,xhr){fnOnLoadComplete();});},'AddEventHandlersToMenuItems':function(sEnumerateDiv,fnMenuItemCallback,bAddSuffixToMenuItem,sMenuItemSuffix){$('#'+sEnumerateDiv)['find']('a')['each'](function(){var sID=$(this)['attr']('id');sID&&(bAddSuffixToMenuItem&&sMenuItemSuffix&&$(this)['attr']('id',sID+'-'+sMenuItemSuffix),$(this)['click'](function(e){e['preventDefault'](),e['stopPropagation']();var sID=this['id'];fnMenuItemCallback(sID);}));});},'DeleteEventHandlersOnMenuItems':function(sEnumerateDiv){$('#'+sEnumerateDiv)['find']('a')['each'](function(){var sID=$(this)['attr']('id');if(sID)try{$(this)['unbind']('click');}catch(e){}});},'DrawGridMenu':function(sDiv,sGrid){TriSysApex['FormsManager']['loadControlReplacingDiv'](sDiv,'ctrlGridMenu.html',function(response,status,xhr){$('#grid-menu-select-all-in-dataset')['click'](function(e){e['preventDefault'](),TriSysSDK['Grid']['SelectAllRows'](sGrid,![],!![]);}),$('#grid-menu-select-all')['click'](function(e){e['preventDefault'](),TriSysSDK['Grid']['SelectAllRows'](sGrid,!![]);}),$('#grid-menu-select-none')['click'](function(e){e['preventDefault'](),TriSysSDK['Grid']['SelectAllRows'](sGrid,![]);}),$('#grid-menu-apply-filter')['click'](function(e){e['preventDefault'](),TriSysSDK['Grid']['Filtering']['ApplySavedFilter'](sGrid);}),$('#grid-menu-clear-filter')['click'](function(e){e['preventDefault'](),TriSysSDK['Grid']['Filtering']['ClearFilter'](sGrid);}),$('#grid-menu-save-filter')['click'](function(e){e['preventDefault'](),TriSysSDK['Grid']['Filtering']['SaveFilter'](sGrid);}),$('#grid-menu-toggle-filter')['click'](function(e){e['preventDefault'](),TriSysSDK['Grid']['Filtering']['ToggleFilterRow'](sGrid);}),$('#grid-menu-toggle-grouping')['click'](function(e){e['preventDefault'](),TriSysSDK['Grid']['Grouping']['ToggleGrouping'](sGrid);}),$('#grid-menu-refresh')['click'](function(e){e['preventDefault'](),TriSysSDK['Grid']['RefreshData'](sGrid);}),$('#grid-menu-select-all-in-dataset')['attr']('id','#grid-menu-select-all-in-dataset-'+sGrid),$('#grid-menu-select-all')['attr']('id','#grid-menu-select-all-'+sGrid),$('#grid-menu-select-none')['attr']('id','#grid-menu-select-none-'+sGrid),$('#grid-menu-apply-filter')['attr']('id','#grid-menu-apply-filter-'+sGrid),$('#grid-menu-clear-filter')['attr']('id','#grid-menu-clear-filter-'+sGrid),$('#grid-menu-save-filter')['attr']('id','#grid-menu-save-filter-'+sGrid),$('#grid-menu-toggle-filter')['attr']('id','#grid-menu-toggle-filter-'+sGrid),$('#grid-menu-toggle-grouping')['attr']('id','#grid-menu-toggle-grouping-'+sGrid),$('#grid-menu-refresh')['attr']('id','#grid-menu-refresh-'+sGrid);});},'DrawFileMenu':function(sDiv,sGrid,fnMenuItemSelectionCallback,hideMenuItemPrefixes){TriSysSDK['FormMenus']['DrawFileMenuFromTemplate'](sDiv,sGrid,'ctrlFileMenu.html',fnMenuItemSelectionCallback,null,hideMenuItemPrefixes);},'DrawGridFileMenu':function(sDiv,sGrid,fnMenuItemSelectionCallback){TriSysSDK['FormMenus']['DrawFileMenuFromTemplate'](sDiv,sGrid,'ctrlGridFileMenu.html',fnMenuItemSelectionCallback);},'DrawFileMenuFromTemplate':function(sDiv,sGrid,sTemplate,fnMenuItemSelectionCallback,callbackMenuItems,hideMenuItemPrefixes){var fnCallback=function(sItem){if(fnMenuItemSelectionCallback)fnMenuItemSelectionCallback(sItem);else TriSysApex['Toasters']['Warning']('Unhandled\x20menu\x20click:\x20'+sItem+'\x20on\x20grid/form:\x20'+sGrid);},fnCallbackClosure=null;callbackMenuItems&&(fnCallbackClosure=function(sItem){return function(){fnCallback(sItem);};}),TriSysApex['FormsManager']['loadControlReplacingDiv'](sDiv,sTemplate,function(response,status,xhr){var items=['file-menu-new','file-menu-open','file-menu-save','file-menu-saveas','file-menu-delete','file-menu-close','file-menu-pre-save-divider','file-menu-save-items','file-menu-pre-delete-divider','file-menu-delete-items','file-menu-pre-close-divider','file-menu-close-items'];if(callbackMenuItems)for(var i=0x0;i<callbackMenuItems['length'];i++){var callbackMenuItem=callbackMenuItems[i];$('#'+callbackMenuItem)['click'](fnCallbackClosure(callbackMenuItem));}else{var fm=TriSysSDK['FormMenus']['Constants'];$('#file-menu-new')['click'](function(e){fnCallback(fm['File_New']);}),$('#file-menu-open')['click'](function(e){fnCallback(fm['File_Open']);}),$('#file-menu-save')['click'](function(e){fnCallback(fm['File_Save']);}),$('#file-menu-saveas')['click'](function(e){fnCallback(fm['File_Save_As']);}),$('#file-menu-delete')['click'](function(e){fnCallback(fm['File_Delete']);}),$('#file-menu-close')['click'](function(e){fnCallback(fm['File_Close']);});for(var i=0x0;i<items['length'];i++){var item=items[i];$('#'+item)['attr']('id',item+'-'+sGrid);}}if(hideMenuItemPrefixes)for(var h=0x0;h<hideMenuItemPrefixes['length'];h++){var hideMenuItemPrefix=hideMenuItemPrefixes[h];if(callbackMenuItems)for(var i=0x0;i<callbackMenuItems['length'];i++){var callbackMenuItem=callbackMenuItems[i];if(callbackMenuItem['indexOf'](hideMenuItemPrefix)==0x0)$('#'+callbackMenuItem)['hide']();}else for(var i=0x0;i<items['length'];i++){var item=items[i];if(item==hideMenuItemPrefix)$('#'+item+'-'+sGrid)['hide']();}}});},'HideFileMenuItems':function(sGrid,items){var fn=function(){for(var i=0x0;i<items['length'];i++){var sItem=items[i];sItem='#file-menu-'+sItem+'-'+sGrid;var parent=$(sItem)['closest']('li');parent&&(parent['hide'](),$(sItem)['hide']());}};setTimeout(fn,0x3e8);}},'FormRegions':{'FixedTop':'#trisys-form-fixed-top','ScrollableContent':'#trisys-form-scrollable-content','Initialise':function(){if($(TriSysSDK['FormRegions']['FixedTop'])['length']){var iHeight=TriSysSDK['FormRegions']['FixedTopHeight']();$(TriSysSDK['FormRegions']['ScrollableContent'])['css']({'top':iHeight});}else $(TriSysSDK['FormRegions']['ScrollableContent'])['css']({'top':'0px'});},'Enabled':function(){return $(TriSysSDK['FormRegions']['FixedTop'])['length']>0x0;},'FixedTopHeight':function(){var iHeight=$(TriSysSDK['FormRegions']['FixedTop'])['height']();return iHeight;}},'Blocks':{'toggleBlockSize':function(thisObject,sDiv){$('#'+sDiv)['toggle']();var bVisible=$('#'+sDiv)['is'](':visible'),sClass=bVisible?'fa\x20fa-angle-up':'fa\x20fa-angle-down',sTitle=(bVisible?'Minimise':'Maximise')+'\x20lookup\x20criteria';$(thisObject)['find']('i')['removeClass']()['addClass'](sClass),thisObject['title']=sTitle,$(window)['trigger']('resize');}},'Miscellaneous':{'GUID':function(){function _p8(s){var p=(Math['random']()['toString'](0x10)+'000000000')['substr'](0x2,0x8);return s?'-'+p['substr'](0x0,0x4)+'-'+p['substr'](0x4,0x4):p;}return _p8()+_p8(!![])+_p8(!![])+_p8();},'RandomNumber':function(iMin,iMax){return~~(Math['random']()*(iMax-iMin+0x1))+iMin;},'ArrayToCommaSeparatedIdList':function(lst,bInClause){var sIds=null;for(var i=0x0;i<lst['length'];i++){if(sIds)sIds+=',';else sIds='';sIds+=lst[i];}if(!sIds&&bInClause)sIds='-1';if(bInClause)sIds='\x20In\x20('+sIds+')';return sIds;},'EscapeHTML':function(sHTML){return sHTML['replace'](/&/g,'&amp;')['replace'](/</g,'&lt;')['replace'](/>/g,'&gt;')['replace'](/\"/g,'&quot;')['replace'](/\'/g,'&#39;');},'EscapeDOMid':function(sID,bSupressColonAndDot){if(sID){if(bSupressColonAndDot)sID=sID['replace'](/[^a-zA-Z0-9_-]/g,'');else sID=sID['replace'](/[^a-z0-9\-_:\.]|^[^a-z]+/gi,'');}return sID;},'EscapeJSONField':function(sText){if(sText){const jsonFieldNameRegex=/^[a-zA-Z0-9_-]+$/;!jsonFieldNameRegex['test'](sText)&&(sText=sText['replace'](/[^a-zA-Z0-9_-]/g,''));}return sText;},'EscapeVariableName':function(sText){if(sText){const allowedChars='a-zA-Z0-9_\x5c.-',jsonFieldNameRegex=new RegExp('^['+allowedChars+']+$');!jsonFieldNameRegex['test'](sText)&&(sText=sText['replace'](new RegExp('[^'+allowedChars+']','g'),''));}return sText;},'EllipsisText':function(sText,iLength){if(sText&&iLength>0x0){if(sText['length']>iLength)sText=sText['substring'](0x0,iLength-0x1)+'...';}return sText;},'Trim':function(sValue){if(sValue){if(typeof sValue==='string')sValue=sValue['trim']();}return sValue;},'isDate':function(value){switch(typeof value){case'number':return!![];case'string':return!isNaN(Date['parse'](value));case'object':if(value instanceof Date)return!isNaN(value['getTime']());default:return![];}},'ReplaceWithinTags':function(sOriginal,sStartTag,sEndTag,sReplacement){if(sOriginal){var iStart=sOriginal['indexOf'](sStartTag);if(iStart>=0x0){var iEnd=sOriginal['indexOf'](sEndTag,iStart+sStartTag['length']);if(iEnd>iStart){var sPre=sOriginal['substring'](0x0,iStart),sPost=sOriginal['substring'](iEnd+sEndTag['length']);sOriginal=sPre+sReplacement+sPost;}}}return sOriginal;},'RemoveAttribute':function(sOriginal,sAttribute){if(sOriginal){sAttribute=sAttribute+'=\x22';var iStart=sOriginal['indexOf'](sAttribute);if(iStart>=0x0){var sEndTag='\x22',iEnd=sOriginal['indexOf'](sEndTag,iStart+sAttribute['length']+0x1);if(iEnd>iStart){var sPre=sOriginal['substring'](0x0,iStart),sPost=sOriginal['substring'](iEnd+sEndTag['length']);sOriginal=sPre+sPost;}}}return sOriginal;},'CamelCase':function(str,bCapitaliseFirstCharacter){if(str){str=str['replace'](/(?:^\w|[A-Z]|\b\w)/g,function(word,index){return index==0x0?word['toLowerCase']():word['toUpperCase']();})['replace'](/\s+/g,'');if(bCapitaliseFirstCharacter){var s=str[0x0]['toUpperCase']();str=s+(str['length']>=0x2?str['substring'](0x1):'');}return str;}},'CamelCaseToMultipleWords':function(sCamelCase){if(sCamelCase){var lstException=['ASP','CRM','RDP','SQL','TriSys','CV','CVAR','CMS','API','GDPR','E-Mail'],fnConvert=function(str,exceptions){return exceptions['forEach'](function(exception,index){var regex=new RegExp(exception,'g');str=str['replace'](regex,'\x20__PLACEHOLDER__'+index+'__\x20');}),str=str['replace'](/([a-z])([A-Z])/g,'$1\x20$2'),exceptions['forEach'](function(exception,index){var regex=new RegExp('__PLACEHOLDER__'+index+'__','g');str=str['replace'](regex,exception);}),str['replace'](/\s+/g,'\x20')['trim']();};return fnConvert(sCamelCase,lstException);}},'_PreventButtonDoubleClickState':![],'PreventButtonDoubleClick':function(sID){var iMilliSecondPeriod=0x12c;if(!sID){if(!TriSysSDK['Miscellaneous']['_PreventButtonDoubleClickState'])return TriSysSDK['Miscellaneous']['_PreventButtonDoubleClickState']=!![],setTimeout(function(){TriSysSDK['Miscellaneous']['_PreventButtonDoubleClickState']=![];},iMilliSecondPeriod),!![];else return![];}if(sID['indexOf']('#')!==0x0)sID='#'+sID;$(sID)['prop']('disabled',!![]),setTimeout(function(){$(sID)['prop']('disabled',![]);},iMilliSecondPeriod);},'ParseFullContactName':function(sFullName){var parts=sFullName['split']('\x20'),sForenames=parts[0x0],sSurname=parts['length']>0x1?parts[0x1]:'?';if(parts['length']>0x2)for(var i=0x2;i<parts['length'];i++){var sPart=parts[i];sSurname+='\x20'+sPart;}return{'Forenames':sForenames,'Surname':sSurname};}},'Fonts':{'UserSettingName':'Font','UserSettingWeight':'Font-Weight','Install':function(sFontName){var sURLFriendly=sFontName['replace'](/ /g,'+');$('head')['append']('<link\x20href=\x27https://fonts.googleapis.com/css?family='+sURLFriendly+'\x27\x20rel=\x27stylesheet\x27\x20type=\x27text/css\x27>');},'List':[{'name':'Arial','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Calibri','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Cambria','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Candara','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Century\x20Gothic','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Franklin\x20Gothic','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Helvetica','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Lato','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Lucida\x20Sans','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Montserrat','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Open\x20Sans','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Oswald','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Poppins','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Questrial','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Raleway','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Roboto','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Rockwell','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Segoe\x20UI','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Source\x20Sans\x20Pro','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd},{'name':'Trebuchet\x20MS','bodySize':0xc,'headerSize':0xd,'dropdownSize':0xd}],'ApplyFontChange':function(sFontName,bLoadFont){var fontObject=null;TriSysSDK['Fonts']['List']['forEach'](function(fontInformation){if(sFontName==fontInformation['name'])fontObject=fontInformation;});if(bLoadFont)TriSysSDK['Fonts']['Install'](sFontName);if(fontObject){var fnInjectFontIntoFamily=function(sFontFamily,sName){sFontFamily=sFontFamily['replace']('\x22'+sName+'\x22,',''),sFontFamily=sFontFamily['replace']('\x22'+sName+'\x22',''),sFontFamily=sFontFamily['replace'](sName+',',''),sFontFamily=sFontFamily['replace'](sName,'');if(sName['indexOf']('\x20')>0x0)sName='\x22'+sName+'\x22';return sFontFamily=sName+',\x20'+sFontFamily,sFontFamily;},sFontFamily=$('body')['css']('font-family');sFontFamily=fnInjectFontIntoFamily(sFontFamily,fontObject['name']),$('body')['css']('font-family',sFontFamily);}},'WeightList':[{'weight':'100'},{'weight':'200'},{'weight':'300'},{'weight':'400'},{'weight':'500'},{'weight':'600'},{'weight':'700'},{'weight':'800'},{'weight':'900'},{'weight':'bold'},{'weight':'bolder'},{'weight':'lighter'},{'weight':'normal'}],'ApplyFontWeightChange':function(sFontWeight){var fontWeightObject=null;TriSysSDK['Fonts']['WeightList']['forEach'](function(fontWeightInformation){if(sFontWeight==fontWeightInformation['weight'])fontWeightObject=fontWeightInformation;}),fontWeightObject&&$('body')['css']('font-weight',fontWeightObject['weight']);},'PostLogin':function(){var sName=TriSysApex['Cache']['UserSettingManager']['GetValue'](TriSysSDK['Fonts']['UserSettingName'],null);if(sName)TriSysSDK['Fonts']['ApplyFontChange'](sName,!![]);var sWeight=TriSysApex['Cache']['UserSettingManager']['GetValue'](TriSysSDK['Fonts']['UserSettingWeight'],null);if(sWeight)TriSysSDK['Fonts']['ApplyFontWeightChange'](sWeight);}},'Attributes':{'Load':function(sEntityName,lRecordId,sFieldDivTag){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlSkillsTree.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['Attributes']['AfterControlLoaded'](sEntityName,lRecordId,sFieldDivTag);});},'AfterControlLoaded':function(sEntityName,lRecordId,sFieldDivTag){var fnLoad=function(){ctrlSkillsTree['PostLoad'](sFieldDivTag),ctrlSkillsTree['PopulateSource'](sEntityName,sFieldDivTag);var fnPopulate=function(skills){ctrlSkillsTree['AddAssignedSkills'](sFieldDivTag,skills);};TriSysSDK['Attributes']['PopulateEntitySkills'](sEntityName,lRecordId,fnPopulate);};try{fnLoad();}catch(e){setTimeout(fnLoad,0x1f4);}},'PopulateEntitySkills':function(sEntityName,lRecordId,fnCallback){var dataPacket={'EntityName':sEntityName,'RecordId':lRecordId},payloadObject={};payloadObject['URL']='Skills/ReadEntitySkills',payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(data){var CReadEntitySkillsResponse=data;if(CReadEntitySkillsResponse){if(CReadEntitySkillsResponse['Success']){fnCallback(CReadEntitySkillsResponse['Skills']);return;}else TriSysApex['UI']['ShowMessage'](CReadEntitySkillsResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('TriSysSDK.Attributes.PopulateEntitySkills:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'SaveEntitySkills':function(sEntityName,lRecordId,sControlDiv){if(typeof ctrlSkillsTree=='undefined')return;var bPopulated=TriSysApex['ControlPopulationDirty']['GetPopulated'](sControlDiv),bDirty=TriSysApex['ControlPopulationDirty']['GetDirty'](sControlDiv);if(!bPopulated||!bDirty)return;var skills=ctrlSkillsTree['ReadSkills'](sControlDiv);if(!skills)return;var dataPacket={'EntityName':sEntityName,'RecordId':lRecordId,'Skills':skills},payloadObject={};payloadObject['URL']='Skills/WriteEntitySkills',payloadObject['OutboundDataPacket']=dataPacket,payloadObject['InboundDataFunction']=function(data){var CWriteEntitySkillsResponse=data;if(CWriteEntitySkillsResponse){if(CWriteEntitySkillsResponse['Success']){TriSysApex['ControlPopulationDirty']['SetDirty'](sControlDiv,![]);return;}else{if(CWriteEntitySkillsResponse['ErrorMessage'])TriSysApex['UI']['ShowMessage'](CWriteEntitySkillsResponse['ErrorMessage']);}}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('TriSysSDK.Attributes.SaveEntitySkills:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'Images':{'ShowServerPathInImageTag':function(sServerFilePath,sImageDivTag,sImageDivTag2){var fnShowImageURLCallback=function(sURL){$('#'+sImageDivTag)['attr']('src',sURL);if(sImageDivTag2)$('#'+sImageDivTag2)['attr']('src',sURL);TriSysSDK['Images']['ProfilePhotoDetection'](sURL,sImageDivTag);},CFileReferenceInternalToExternalPathRequest={'FolderFilePath':sServerFilePath},payloadObject={};payloadObject['URL']='Files/FileReferenceInternalToExternalPath',payloadObject['OutboundDataPacket']=CFileReferenceInternalToExternalPathRequest,payloadObject['InboundDataFunction']=function(data){var CFileReferenceInternalToExternalPathResult=data;if(CFileReferenceInternalToExternalPathResult){if(CFileReferenceInternalToExternalPathResult['Success'])fnShowImageURLCallback(CFileReferenceInternalToExternalPathResult['URL']);else{if(TriSysApex['Constants']['ShowFileErrorsAsAToaster'])TriSysApex['Toasters']['Error'](CFileReferenceInternalToExternalPathResult['ErrorMessage']);}}else TriSysApex['UI']['ShowMessage']('No\x20response\x20from\x20'+payloadObject['URL'],TriSysWeb['Constants']['ApplicationName']);return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.Images.ShowServerPathInImageTag:\x20',request,status,error,![]);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'AfterFileReferenceFind':function(sServerFilePath,sImageDivTag,sImageDivTag2){TriSysSDK['Images']['ShowServerPathInImageTag'](sServerFilePath,sImageDivTag,sImageDivTag2);},'AfterFileReferenceDelete':function(sImageDivTag,sImageDivTag2,sDefaultImage){if(!sDefaultImage)sDefaultImage=null;$('#'+sImageDivTag)['attr']('src',sDefaultImage);if(sImageDivTag2)$('#'+sImageDivTag2)['attr']('src',sDefaultImage);TriSysSDK['Images']['ProfilePhotoDetection'](null,sImageDivTag);},'FieldDescriptionImageCallback':function(sOperation,divTag,sFilePath,sThumbnailDiv1,sThumbnailDiv2){switch(sOperation){case'find':TriSysSDK['Images']['AfterFileReferenceFind'](sFilePath,sThumbnailDiv1,sThumbnailDiv2),TriSysApex['Pages']['ContactForm']['AutoSaveNow']();break;case'delete':TriSysSDK['Images']['AfterFileReferenceDelete'](sThumbnailDiv1,sThumbnailDiv2),TriSysApex['Pages']['ContactForm']['AutoSaveNow']();break;}},'ProfilePhotoDetection':function(sFilePath,sThumbnailDiv){if(sThumbnailDiv['indexOf']('ContactConfigFields_ContactPhoto')==0x0){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials&&userCredentials['LoggedInUser']){var contact=userCredentials['LoggedInUser']['Contact'];contact&&(contact['ContactId']==TriSysApex['Pages']['ContactForm']['ContactId']&&(contact['ContactPhoto']=sFilePath,TriSysApex['Pages']['Index']['ShowLoggedInAvatar'](sFilePath)));}}},'AddFieldClickCallbackEvent':function(sFieldID,fieldDescription){var fnClick=function(){var sFieldDescriptionID=fieldDescription['TableName']+'_'+fieldDescription['TableFieldName'],sPrefix=sFieldDescriptionID+'-',sFilePath=TriSysSDK['Controls']['FileReference']['GetFile'](sFieldDescriptionID);if(sFilePath){var sJQueryDivOpen='#'+sPrefix+'FileReference_OpenButton';$(sJQueryDivOpen)['trigger']('click');}else{var sJQueryDivFind='#'+sPrefix+'FileReference_FindButton';$(sJQueryDivFind)['trigger']('click');}};$('#'+sFieldID)['off']()['on']('click',fnClick);}},'DocumentLibrary':{'Load':function(sEntityName,lRecordId,sFieldDivTag){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlDocumentLibrary.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['DocumentLibrary']['AfterControlLoaded'](sEntityName,lRecordId,sFieldDivTag);});},'AfterControlLoaded':function(sEntityName,lRecordId,sFieldDivTag){ctrlDocumentLibrary['PostLoad'](sEntityName,lRecordId,sFieldDivTag);}},'CompanyOrganogram':{'Load':function(lRecordId,sFieldDivTag){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlCompanyOrganogram.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['CompanyOrganogram']['AfterControlLoaded'](lRecordId,sFieldDivTag);});},'AfterControlLoaded':function(lRecordId,sFieldDivTag){ctrlCompanyOrganogram['PostLoad'](lRecordId,sFieldDivTag);},'SetCSSColours':function(lBackColour,lNavBarInverseColour){TriSysSDK['CompanyOrganogram']['NodeBackColour']=lBackColour,TriSysSDK['CompanyOrganogram']['NodeHoverColour']=lNavBarInverseColour,TriSysSDK['CompanyOrganogram']['ApplyCSSColours']();},'NodeBackColour':null,'NodeHoverColour':null,'ApplyCSSColours':function(){try{$('.jOrgChart\x20.node')['css']('background-color',TriSysSDK['CompanyOrganogram']['NodeBackColour']),$('.drop-hover')['css']('border-color',TriSysSDK['CompanyOrganogram']['NodeHoverColour']),$('.drop-hover')[0x0]['style']['setProperty']('border-color',TriSysSDK['CompanyOrganogram']['NodeHoverColour'],'important');}catch(err){}},'AfterDragNodeEvent':function(sDOM_HTML){ctrlCompanyOrganogram['AfterNodeRelocation'](sDOM_HTML);},'Save':function(lCompanyId,sControlDiv){var bPopulated=TriSysApex['ControlPopulationDirty']['GetPopulated'](sControlDiv),bDirty=TriSysApex['ControlPopulationDirty']['GetDirty'](sControlDiv);if(!bPopulated||!bDirty)return;if(typeof ctrlCompanyOrganogram=='undefined')return;ctrlCompanyOrganogram['Save'](lCompanyId);}},'ContractRates':{'Load':function(sEntityName,lRecordId,sFieldDivTag){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlContractRates.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){TriSysSDK['ContractRates']['AfterControlLoaded'](sEntityName,lRecordId,sFieldDivTag);});},'AfterControlLoaded':function(sEntityName,lRecordId,sFieldDivTag){ctrlContractRates['PostLoad'](sEntityName,lRecordId,sFieldDivTag);}},'PermanentSalary':{'Load':function(sEntityName,lRecordId,sFieldDivTag,fnCallback){var sControlFile='ctrlPermanentSalary.html',sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath'](sControlFile);TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){fnCallback();});}},'KendoUICharts':{'Font':'Open\x20Sans','ValueAxes':{'Get':function(valueAxesParameter){var valueAxes={};if(valueAxesParameter){if(valueAxesParameter['MaxValue']&&valueAxesParameter['Ticks']){var iMaxValue=valueAxesParameter['MaxValue'],iTicks=valueAxesParameter['Ticks'];if(iMaxValue>0x0){var iDivider=0xf4240;while(iMaxValue<iDivider){iDivider/=0xa;}var iRoundToNearestThousand=Math['ceil'](iMaxValue/ iDivider)*iDivider;iMajorUnit=iRoundToNearestThousand/ iTicks,iMajorUnit=Math['ceil'](iMajorUnit/ iDivider)*iDivider,valueAxes['majorUnit']=iMajorUnit;}}valueAxes['labels']=TriSysSDK['KendoUICharts']['ValueAxes']['Labels'](valueAxesParameter);}return valueAxes;},'Labels':function(valueAxesParameter){var iNum=0x0,sPreSymbol='',sPostSymbol='',iSkip=0x1,iStep=0x0,iMajorUnit=0x0;if(valueAxesParameter){if(valueAxesParameter['DecimalPlaces'])iNum=valueAxesParameter['DecimalPlaces'];if(valueAxesParameter['PreSymbol'])sPreSymbol=valueAxesParameter['PreSymbol'];if(valueAxesParameter['PostSymbol'])sPostSymbol=valueAxesParameter['PostSymbol'];if(valueAxesParameter['Skip'])iSkip=valueAxesParameter['Skip'];if(valueAxesParameter['Step'])iStep=valueAxesParameter['Step'];}var sFormat=sPreSymbol+'#,'+iNum+sPostSymbol,fnVisual=function(e){var center=e['rect']['center']();return new kendo['drawing']['Text'](e['text'],e['rect']['origin'],{'fill':{'color':'black'}});},sTemplate=sPreSymbol+'#=\x20TriSysSDK.Numbers.Format(value,\x20'+iNum+')\x20#'+sPostSymbol,label={'format':sFormat,'visual':fnVisual,'template':sTemplate,'margin':{'right':0x5,'left':0x5},'padding':{'right':0x5,'left':0x5}};if(iSkip>0x0)label['skip']=iSkip;if(iStep>0x0)label['step']=iStep;var bSetFont=!![];return bSetFont&&(label['font']='12px\x20'+TriSysSDK['KendoUICharts']['Font']),label;}},'ValueAxesParameter':{'PreSymbol':null,'PostSymbol':null,'DecimalPlaces':null,'Skip':null,'Step':null,'MaxValue':null}},'KendoUIEditor':{'Fonts':{'name':'fontName','items':[{'text':'Arial','value':'Arial'},{'text':'Arial\x20Nova','value':'Arial\x20Nova'},{'text':'Bell\x20MT','value':'Bell\x20MT'},{'text':'Bodoni\x20MT','value':'Bodoni\x20MT'},{'text':'Bookman\x20Old\x20Style','value':'Bookman\x20Old\x20Style'},{'text':'Calibri','value':'Calibri'},{'text':'Cambria','value':'Cambria'},{'text':'Didot','value':'Didot'},{'text':'Futura','value':'Futura'},{'text':'Georgia','value':'Georgia'},{'text':'Garamond','value':'Garamond'},{'text':'Goudy\x20Old\x20Style','value':'Goudy\x20Old\x20Style'},{'text':'Helvetica','value':'Helvetica'},{'text':'Open\x20Sans','value':'Open\x20Sans'},{'text':'Segoe\x20UI','value':'Segoe\x20UI'},{'text':'Times\x20New\x20Roman','value':'Times\x20New\x20Roman'},{'text':'Trebuchet\x20MS','value':'Trebuchet\x20MS'}]}},'SearchCriteria':{'Load':function(sEntityName,lRecordId,sFieldDivTag,fnCallback){var fnLoadControlHTML=function(){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlSearchCriteria.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){ctrlSearchCriteria['PostLoad'](sEntityName,lRecordId,sFieldDivTag,fnCallback);});};TriSysApex['WhiteLabelling']['LoadJavascriptFile']('js/pages/ctrlSearchCriteria.js',null,fnLoadControlHTML);},'LoadSavedSearchMenu':function(sEntityName,sEntitySearchPrefix,sSavedSearchMenu,sSearchCriteriaTree,fnSearchCallback){var sControlIdPrefix=sEntitySearchPrefix+sEntityName+'-id-',CSavedSearchesApexEntitySearchRequest={'EntityName':sEntityName,'ControlIdPrefix':sControlIdPrefix},payloadObject={};payloadObject['URL']='EntitySearch/SavedSearches',payloadObject['OutboundDataPacket']=CSavedSearchesApexEntitySearchRequest,payloadObject['InboundDataFunction']=function(CSavedSearchesApexEntitySearchResponse){if(CSavedSearchesApexEntitySearchResponse){if(CSavedSearchesApexEntitySearchResponse['Success']){if(CSavedSearchesApexEntitySearchResponse['Searches']['length']>0x0)TriSysSDK['SearchCriteria']['DrawLoadSavedSearchMenu'](sEntityName,CSavedSearchesApexEntitySearchResponse['Searches'],sSavedSearchMenu,sSearchCriteriaTree,fnSearchCallback);return;}}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('TriSysSDK.SearchCriteria.LoadSavedSearchMenu.LoadSearches:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'DrawLoadSavedSearchMenu':function(sEntityName,searches,sSavedSearchMenu,sSearchCriteriaTree,fnSearchCallback){TriSysApex['FormsManager']['loadControlReplacingDiv'](sSavedSearchMenu,'ctrlSavedSearchMenu.html',function(response,status,xhr){var sLI='saved-search-menu-li-item',sHyperlink='saved-search-menu-hyperlink',sHTML=$('#'+sHyperlink)['html'](),hyperlinkElement=document['getElementById'](sHyperlink);if(hyperlinkElement)sHTML=hyperlinkElement['outerHTML'];var sSearchNamePlaceholder='##Placeholder##',sNewLI=sLI+'-'+sSearchCriteriaTree;$('#'+sLI)['attr']('id',sNewLI),$('#'+sHyperlink)['remove']();for(var i=0x0;i<searches['length'];i++){var search=searches[i],sSearchItemHyperlinkId=sHyperlink+'-'+sSearchCriteriaTree+'-'+search['ApexEntitySearchId'],sSearchItemHTML=sHTML;sSearchItemHTML&&(sSearchItemHTML=sSearchItemHTML['replace'](sHyperlink,sSearchItemHyperlinkId),sSearchItemHTML=sSearchItemHTML['replace'](sSearchNamePlaceholder,search['SearchName']));$('#'+sNewLI)['append'](sSearchItemHTML);var fnCallback=TriSysSDK['SearchCriteria']['GetSavedSearchMenuFunctionCallback'](sEntityName,search,sSearchCriteriaTree,fnSearchCallback);$('#'+sSearchItemHyperlinkId)['click'](fnCallback);}setTimeout(TriSysProUI['kendoUI_Overrides'],0x64);});},'GetSavedSearchMenuFunctionCallback':function(sEntityName,search,sSearchCriteriaTree,fnSearchCallback){var fnMenuItemCallback=function(e){e['preventDefault']();var bPreventSaveCriteria=![];ctrlSearchCriteria['WriteToTreeAndInvokeSearch'](sEntityName,0x0,sSearchCriteriaTree,search['SearchTreeJson'],fnSearchCallback,bPreventSaveCriteria);};return fnMenuItemCallback;}},'SocialNetworks':{'LinkedIn':0x1,'Facebook':0x2,'Twitter':0x3,'YouTube':0xd,'Instagram':0xe,'Pinterest':0xf,'Populate':function(lContactId){TriSysSDK['SocialNetworks']['Load'](TriSysSDK['SocialNetworks']['LinkedIn'],'contact-form-social-linkedin'),TriSysSDK['SocialNetworks']['Load'](TriSysSDK['SocialNetworks']['Facebook'],'contact-form-social-facebook'),TriSysSDK['SocialNetworks']['Load'](TriSysSDK['SocialNetworks']['Twitter'],'contact-form-social-twitter'),TriSysSDK['SocialNetworks']['Load'](TriSysSDK['SocialNetworks']['YouTube'],'contact-form-social-youtube'),TriSysSDK['SocialNetworks']['Load'](TriSysSDK['SocialNetworks']['Instagram'],'contact-form-social-instagram'),TriSysSDK['SocialNetworks']['Load'](TriSysSDK['SocialNetworks']['Pinterest'],'contact-form-social-pinterest'),setTimeout(TriSysProUI['kendoUI_Overrides'],0xfa),TriSysSDK['SocialNetworks']['GetContactProfiles'](lContactId,TriSysSDK['SocialNetworks']['ShowData']);},'GetContactProfiles':function(lContactId,fnCallback){var CSocialNetworkProfileReadPerContactRequest={'ContactId':lContactId},payloadObject={};payloadObject['URL']='SocialNetwork/ReadPerContact',payloadObject['OutboundDataPacket']=CSocialNetworkProfileReadPerContactRequest,payloadObject['Asynchronous']=!![],payloadObject['InboundDataFunction']=function(data){if(data){var CSocialNetworkProfileReadPerContactResponse=data;if(CSocialNetworkProfileReadPerContactResponse['Success'])fnCallback(CSocialNetworkProfileReadPerContactResponse['Profiles'],CSocialNetworkProfileReadPerContactResponse['ContactSummary']);}},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'Load':function(iSocialNetwork,sFieldDivTag){var sPath=TriSysApex['CustomFormsAndComponents']['UserControlPath']('ctrlSocialNetworkPanel.html');TriSysApex['FormsManager']['loadPageIntoDiv'](sFieldDivTag,sPath,function(response,status,xhr){ctrlSocialNetworkPanel['Load'](iSocialNetwork,sFieldDivTag);});},'ShowData':function(profiles){if(profiles)for(var i=0x0;i<profiles['length'];i++){var profile=profiles[i];switch(profile['ProfileNumber']){case TriSysSDK['SocialNetworks']['LinkedIn']:ctrlSocialNetworkPanel['DisplayProfile'](profile,'contact-form-social-linkedin');break;case TriSysSDK['SocialNetworks']['Facebook']:ctrlSocialNetworkPanel['DisplayProfile'](profile,'contact-form-social-facebook');break;case TriSysSDK['SocialNetworks']['Twitter']:ctrlSocialNetworkPanel['DisplayProfile'](profile,'contact-form-social-twitter');break;case TriSysSDK['SocialNetworks']['YouTube']:ctrlSocialNetworkPanel['DisplayProfile'](profile,'contact-form-social-youtube');break;case TriSysSDK['SocialNetworks']['Instagram']:ctrlSocialNetworkPanel['DisplayProfile'](profile,'contact-form-social-instagram');break;case TriSysSDK['SocialNetworks']['Pinterest']:ctrlSocialNetworkPanel['DisplayProfile'](profile,'contact-form-social-pinterest');break;}}},'SocialNetworkToOpen':0x0,'OpenSocialNetworkProfile':function(iSocialNetwork,lContactId){TriSysSDK['SocialNetworks']['SocialNetworkToOpen']=iSocialNetwork,TriSysSDK['SocialNetworks']['GetContactProfiles'](lContactId,TriSysSDK['SocialNetworks']['ShowContactSocialNetworkProfile']);},'ShowContactSocialNetworkProfile':function(profiles,contactSummary){var bShowedProfile=![];if(profiles)for(var i=0x0;i<profiles['length'];i++){var profile=profiles[i];if(profile['ProfileNumber']==TriSysSDK['SocialNetworks']['SocialNetworkToOpen']){if(profile['URL']){if(profile['URL']['indexOf']('http')!=0x0)profile['URL']='https://'+profile['URL'];bShowedProfile=!![],TriSysSDK['Browser']['OpenURL'](profile['URL']);}}}if(!bShowedProfile){var sForenames=$('#Contact_Forenames')['val'](),sSurname=$('#Contact_Surname')['val']();contactSummary&&(sForenames=contactSummary['Forenames'],sSurname=contactSummary['Surname']);if(!sForenames||!sSurname){var sFullName=$('#ctrlContactPreview-contactname')['html']();if(sFullName){var parts=sFullName['split']('\x20');if(parts['length']==0x3)sForenames=parts[0x1],sSurname=parts[0x2];else{if(parts['length']>0x0)for(var i=0x0;i<parts['length'];i++){if(!sForenames)sForenames=parts[i];else{if(sSurname)sSurname+='\x20';sSurname+=parts[i];}}}}}TriSysSDK['SocialNetworks']['OpenContactInBrowser'](sForenames,sSurname,TriSysSDK['SocialNetworks']['SocialNetworkToOpen']);}},'OpenContactInBrowser':function(sForenames,sSurname,iSocialNetwork){if(sForenames&&sSurname){var sURL=null;switch(iSocialNetwork){case TriSysSDK['SocialNetworks']['LinkedIn']:sURL='https://www.linkedin.com/search/results/all/?keywords='+sForenames+'+'+sSurname;break;case TriSysSDK['SocialNetworks']['Facebook']:sURL='https://www.facebook.com/'+sForenames+'.'+sSurname;break;case TriSysSDK['SocialNetworks']['Twitter']:sURL='https://twitter.com/search?q='+sForenames+'+'+sSurname;break;case TriSysSDK['SocialNetworks']['YouTube']:sURL='https://www.youtube.com/results?search_query='+sForenames+'+'+sSurname;break;case TriSysSDK['SocialNetworks']['Instagram']:sURL='https://www.instagram.com/';break;case TriSysSDK['SocialNetworks']['Pinterest']:sURL='https://pinterest.com/';break;default:return;}sURL&&TriSysSDK['Browser']['OpenURL'](sURL);}}},'ContactTypes':{'SetClass':function(sID,sContactType){var contactTypeDOM=$('#'+sID);if(contactTypeDOM){contactTypeDOM['html'](sContactType);var sClass='info';switch(sContactType){case'Candidate':sClass='danger';break;case'ClientCandidate':sClass='warning';break;case'User':sClass='success';break;case'Referee':sClass='default';break;}contactTypeDOM['removeAttr']('class'),contactTypeDOM['addClass']('label\x20label-'+sClass);}},'PopulateCombo':function(sID,fnSelection){var sourceTypes=[],entityTypes=TriSysApex['Cache']['EntityTypes']();for(var i=0x0;i<entityTypes['length'];i++){var entityType=entityTypes[i];if(entityType['EntityName']=='Contact'){var sourceStruct={'value':entityType['EntityTypeId'],'text':entityType['Name']};sourceTypes['push'](sourceStruct);}}TriSysSDK['CShowForm']['populateComboFromDataSource'](sID,sourceTypes,0x0,fnSelection);}},'FileUpload':{'UploadFileURL':function(sFileURL,sFileName,bShowWait,sFileReferenceID,sPhotoEditor){var CFileUploadFileFromURLRequest={'Filename':sFileName,'URL':sFileURL},payloadObject={};payloadObject['URL']='Files/UploadFileFromURL',payloadObject['OutboundDataPacket']=CFileUploadFileFromURLRequest,payloadObject['InboundDataFunction']=function(CFileUploadFileFromURLResponse){if(bShowWait)TriSysApex['UI']['HideWait']();if(CFileUploadFileFromURLResponse){if(CFileUploadFileFromURLResponse['Success']){var sFile=CFileUploadFileFromURLResponse['FolderFilePath'];TriSysSDK['FileUpload']['AfterUploadFileURL'](sFile,sFileReferenceID,sPhotoEditor,bShowWait);}else TriSysApex['UI']['errorAlert']('TriSysSDK.FileUpload.UploadFileURL\x20Error:\x20'+CFileUploadFileFromURLResponse['ErrorMessage']);return;}TriSysApex['UI']['ShowError']('TriSysSDK.FileUpload.UploadFileURL\x20Error:\x20null\x20response');},payloadObject['ErrorHandlerFunction']=function(request,status,error){if(bShowWait)TriSysApex['UI']['HideWait']();TriSysApex['UI']['errorAlert']('TriSysSDK.FileUpload.UploadFileURL:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);};if(bShowWait)TriSysApex['UI']['ShowWait'](null,'Uploading\x20File...');TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'AfterUploadFileURL':function(sRelativeUploadFilePath,sFileReferenceID,sPhotoEditor,bShowWait){var payloadObject={};payloadObject['URL']='Files/MoveUploadedFileReferenceDocument',payloadObject['OutboundDataPacket']={'UploadedFilePath':sRelativeUploadFilePath},payloadObject['InboundDataFunction']=function(JSONdataset){if(bShowWait)TriSysApex['UI']['HideWait']();if(JSONdataset){if(JSONdataset['Success']){var sFilePath=JSONdataset['FolderFilePath'];TriSysSDK['Controls']['FileReference']['SetFile'](sFileReferenceID,sFilePath),$('#'+sPhotoEditor)['show'](),TriSysSDK['Images']['FieldDescriptionImageCallback']('find',sFileReferenceID,sFilePath,sPhotoEditor);}else TriSysApex['UI']['errorAlert'](JSONdataset['ErrorMessage']);}else{}},payloadObject['ErrorHandlerFunction']=function(request,status,error){if(bShowWait)TriSysApex['UI']['HideWait']();TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.FileUpload.AfterUploadFileURL:\x20',request,status,error);};if(bShowWait)TriSysApex['UI']['ShowWait'](null,'Renaming\x20file...');TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'AfterUploadingAFileMoveItAndGetExternalURL':function(sUploadedServerFilePath,fnCallback,bShowWait){var MoveUploadedFileToPublicURLRequest={'UploadedFilePath':sUploadedServerFilePath},payloadObject={};payloadObject['URL']='Files/MoveUploadedFileToPublicURL',payloadObject['OutboundDataPacket']=MoveUploadedFileToPublicURLRequest,payloadObject['InboundDataFunction']=function(CMoveUploadedFileToPublicURLResponse){if(bShowWait)TriSysApex['UI']['HideWait']();if(CMoveUploadedFileToPublicURLResponse){if(CMoveUploadedFileToPublicURLResponse['Success']){var sFilePathURL=CMoveUploadedFileToPublicURLResponse['PublicFilePath'];fnCallback(sFilePathURL);}else TriSysApex['UI']['errorAlert'](CMoveUploadedFileToPublicURLResponse['ErrorMessage']);}else{}},payloadObject['ErrorHandlerFunction']=function(request,status,error){if(bShowWait)TriSysApex['UI']['HideWait']();TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.FileUpload.AfterUploadingAFileMoveItAndGetExternalURL:\x20',request,status,error);};if(bShowWait)TriSysApex['UI']['ShowWait'](null,'Moving\x20file...');TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'Audio':{'PlayWoosh':function(){TriSysSDK['Audio']['PlayAsset']('audio-tag-woosh');},'PlayClick':function(){TriSysSDK['Audio']['PlayAsset']('audio-tag-click');},'PlayAsset':function(sAssetId,fnStoppedPlaying){try{var player=document['getElementById'](sAssetId);player['loop']=![],fnStoppedPlaying&&(player['onended']=function(){fnStoppedPlaying();}),player['play']()['then'](function(){console['log']('Playback\x20has\x20started\x20successfully.');})['catch'](function(error){console['log']('Playback\x20failed:\x20'+error);});}catch(e){}},'PauseAsset':function(sAssetId){try{document['getElementById'](sAssetId)['pause']();}catch(e){}},'_CustomAudioTag':'audio-tag-custom-event','Play':function(options){if(options){var sMP3orWav=null,sFolder='audio/';if(options['UserSetting']){sMP3orWav=TriSysApex['Cache']['UserSettingManager']['GetValue'](options['UserSetting']);if(sMP3orWav)sMP3orWav=sFolder+sMP3orWav;}if(options['SoundFile']&&!sMP3orWav)sMP3orWav=sFolder+options['SoundFile'];if(options['URL']&&!sMP3orWav)sMP3orWav=options['URL'];if(sMP3orWav){var sAudioTag=TriSysSDK['Audio']['_CustomAudioTag'];$('#'+sAudioTag)['attr']('src',sMP3orWav),TriSysSDK['Audio']['PlayAsset'](sAudioTag,options['StoppedPlayingCallback']);}}},'AudioAssetList':function(sOptionalText,sPossibleCustomValue){var lst=[{'text':'No\x20Sound','value':'No\x20Sound'},{'text':'Apple','value':'ApplePowermac.mp3'},{'text':'Dream','value':'appear.wav'},{'text':'Female','value':'Female'},{'text':'Male','value':'Male'},{'text':'Microsoft','value':'Windows95.mp3'},{'text':'SMS','value':'sms-alert-5.wav'},{'text':'Space','value':'Space-Invaders.mp3'}];if(sPossibleCustomValue){var bFound=![];lst['forEach'](function(item){if(item['text']==sPossibleCustomValue||item['value']==sPossibleCustomValue)bFound=!![];});if(!bFound)lst['push']({'text':sPossibleCustomValue,'value':sPossibleCustomValue});}if(sOptionalText){var sFoundItemValue=null;return lst['forEach'](function(item){if(item['text']==sOptionalText)sFoundItemValue=item['value'];}),sFoundItemValue;}return lst;},'AudioVoicePath':function(sGender,iNumberOfTaskAlarms){var sPath='voices/'+sGender['toLowerCase']()+'/'+(sGender=='Female'?'gwart':'william')+'/you-have-a-scheduled-task-alarm.mp3';return sPath;},'PlayTaskAlarmSound':function(sSoundSelected,iNumberOfTaskAlarms,fnStoppedPlaying){if(!sSoundSelected||iNumberOfTaskAlarms==0x0)return;var options={'SoundFile':sSoundSelected,'StoppedPlayingCallback':fnStoppedPlaying};switch(sSoundSelected){case'No\x20Sound':return;break;case'Female':case'Male':options['SoundFile']=TriSysSDK['Audio']['AudioVoicePath'](sSoundSelected,0x1);break;default:if(sSoundSelected['indexOf']('http')==0x0)options['URL']=sSoundSelected,options['SoundFile']=null;else options['SoundFile']=TriSysSDK['Audio']['AudioAssetList'](sSoundSelected);break;}TriSysSDK['Audio']['Play'](options);},'StopPlayingTaskAlarmSound':function(){TriSysSDK['Audio']['PauseAsset'](TriSysSDK['Audio']['_CustomAudioTag']);}},'WaitSpinner':{'Load':function(divTag,iHeight){TriSysApex['FormsManager']['loadPageIntoDiv'](divTag,'ctrlWaitSpinner.html',function(){TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);var sPrefix=divTag+'-';try{var lBackColour=TriSysProUI['BackColour'](),elem=$('#'+sPrefix+'ctrlWaitSpinner-image');elem['css']('color',lBackColour);if(iHeight>0x0)elem['css']('line-height',iHeight+'px');}catch(e){}});}},'SelectAllRowsPanel':{'Load':function(divTag,gridLayout,iNumRecords,fnCallback){TriSysApex['FormsManager']['loadPageIntoDiv'](divTag,'ctrlSelectAllRowsPanel.html',function(){TriSysSDK['Controls']['General']['ReplaceDivTagsOfDynamicallyLoadedUserControl'](divTag);var sPrefix=divTag+'-';try{TriSysSDK['SelectAllRowsPanel']['DisplayCorrectNumberOfRecords'](divTag,iNumRecords);var btn=$('#'+sPrefix+'ctrlSelectAllRowsPanel-Unselect');btn['off']()['on']('click',fnCallback),TriSysSDK['SelectAllRowsPanel']['BeginRetrievingAllDataFromWebAPI'](gridLayout);}catch(e){}});},'DisplayCorrectNumberOfRecords':function(divTag,iNumRecords){var sPrefix=divTag+'-';for(var i=0x1;i<=0x3;i++){var elem=$('#'+sPrefix+'ctrlSelectAllRowsPanel-Number'+i);elem['text'](TriSysSDK['Numbers']['ThousandsSeparator'](iNumRecords));}},'CompletedReadingAllDataVisuals':function(gridLayout){var sPrefix=TriSysSDK['Grid']['SelectAllRowsInGridModePanelName'](gridLayout)+'-';$('#'+sPrefix+'ctrlSelectAllRowsPanel-ReadingDataInstructions')['hide'](),$('#'+sPrefix+'ctrlSelectAllRowsPanel-ReadingDataSpinner')['hide'](),$('#'+sPrefix+'ctrlSelectAllRowsPanel-CompletedReadingDataInstructions')['show'](),$('#'+sPrefix+'ctrlSelectAllRowsPanel-CompletedReadingDeSelectButton')['show']();},'BeginRetrievingAllDataFromWebAPI':function(gridLayout){if(gridLayout['PopulationByObject']||gridLayout['PopulationByObjectRefreshCallback']){var fnCallback=function(gridData){var sPanelID=TriSysSDK['Grid']['SelectAllRowsInGridModePanelName'](gridLayout);TriSysSDK['SelectAllRowsPanel']['DisplayCorrectNumberOfRecords'](sPanelID,gridData['length']),gridLayout['Data']['AllRecordsData']=gridData,TriSysSDK['SelectAllRowsPanel']['CompletedReadingAllDataVisuals'](gridLayout);var fnSlimeyHack101=function(){$('#'+gridLayout['Div'])['hide']();};setTimeout(fnSlimeyHack101,0x64);};TriSysSDK['Grid']['ReadFilteredGridContents'](gridLayout['Div'],fnCallback);}else{if(gridLayout['PopulationByFunction']){var dataPacketForFunction=gridLayout['Data']['WebAPIPayload']['OutboundDataPacket'];dataPacketForFunction['Sorting']=[],dataPacketForFunction['PageNumber']=0x1,dataPacketForFunction['RecordsPerPage']=0x186a0;var payloadObject={};payloadObject['URL']=gridLayout['PopulationByFunction']['API'],payloadObject['OutboundDataPacket']=dataPacketForFunction,payloadObject['InboundDataFunction']=function(data){data&&(data['Success']&&(gridLayout['Data']['AllRecordsData']=data['List'],TriSysSDK['SelectAllRowsPanel']['CompletedReadingAllDataVisuals'](gridLayout)));},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysSDK.SelectAllRowsPanel.BeginRetrievingAllDataFromWebAPI:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}}},'GetSelectedAllMultipleRows':function(gridLayout,idField){if(gridLayout['Data']['AllRecordsData']){var lst=[];return gridLayout['Data']['AllRecordsData']['forEach'](function(row){if(idField){var sFieldValue=row[idField];if(!sFieldValue){var sIDField=idField['replace']('Id','ID');sFieldValue=row[sIDField];}lst['push'](sFieldValue);}else lst['push'](row);}),lst;}}},'DatePeriodDropDown':{'Load':function(sDiv,dtStart,dtEnd,fnCallbackOnDateSelection){var fnLoadControlHTML=function(){TriSysApex['FormsManager']['loadControlReplacingDiv'](sDiv,'ctrlDatePeriodDropDown.html',function(response,status,xhr){ctrlDatePeriodDropDown['Load'](sDiv,dtStart,dtEnd,fnCallbackOnDateSelection);});};TriSysApex['WhiteLabelling']['LoadJavascriptFile']('js/pages/ctrlDatePeriodDropDown.js',null,fnLoadControlHTML);},'GetStartDate':function(sDiv){var sPrefix=sDiv+'-',sDate=$('#'+sPrefix+'ctrlDatePeriodDropDown-CustomStartDate')['html'](),dt=new Date(moment(sDate));return dt;},'GetEndDate':function(sDiv){var sPrefix=sDiv+'-',sDate=$('#'+sPrefix+'ctrlDatePeriodDropDown-CustomEndDate')['html'](),dt=new Date(moment(sDate));return dt;}},'ConsultantsAndDateRange':{'Load':function(sDiv,parameters,fnCallbackOnSelection){var fnLoadControlHTML=function(){TriSysApex['FormsManager']['loadControlReplacingDiv'](sDiv,'ctrlConsultantsAndDateRange.html',function(response,status,xhr){ctrlConsultantsAndDateRange['Load'](sDiv,parameters,fnCallbackOnSelection);});};TriSysApex['WhiteLabelling']['LoadJavascriptFile']('js/pages/ctrlConsultantsAndDateRange.js',null,fnLoadControlHTML);}},'Javascript':{'Extend':function(){}},'Custom':{'ReadJSON':function(sFile,fnCallback,bSynchronous){var fnConvertStringToJSONObject=function(sFileContents){var jsonObject=JSON['parse'](sFileContents);return jsonObject;},fnCallbackWrapper=function(sFileContents){var jsonObject=fnConvertStringToJSONObject(sFileContents);fnCallback(jsonObject);};TriSysSDK['Custom']['WebAPI']['ReadFile'](sFile,fnCallbackWrapper,bSynchronous);},'WriteJSON':function(sFile,jsonObject,fnCallback){var sCode=JSON['stringify'](jsonObject);TriSysSDK['Custom']['WebAPI']['WriteFile'](sFile,sCode,fnCallback);},'WebAPI':{'ReadFile':function(sFile,fnCallback,bSynchronous){var CDeveloperStudio_CFileRequest={'FileName':sFile},payloadObject={};payloadObject['URL']='DeveloperStudio/ReadFile',payloadObject['OutboundDataPacket']=CDeveloperStudio_CFileRequest;if(bSynchronous)payloadObject['Asynchronous']=![];payloadObject['InboundDataFunction']=function(CDeveloperStudio_CFileResponse){TriSysApex['UI']['HideWait']();if(CDeveloperStudio_CFileResponse){if(CDeveloperStudio_CFileResponse['Success']){var sBase64Text=CDeveloperStudio_CFileResponse['Base64Text'],sFileContents=$['base64']['decode'](sBase64Text);fnCallback(sFileContents);return;}else TriSysApex['UI']['ShowMessage'](CDeveloperStudio_CFileResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('TriSysSDK.Custom.WebAPI.ReadFile:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Reading\x20File...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'WriteFile':function(sFile,sCode,fnCallback){var CDeveloperStudio_CFileWriteRequest={'FileName':sFile,'Base64Text':$['base64']['encode'](sCode)},payloadObject={};payloadObject['URL']='DeveloperStudio/WriteFile',payloadObject['OutboundDataPacket']=CDeveloperStudio_CFileWriteRequest,payloadObject['InboundDataFunction']=function(CDeveloperStudio_CFileWriteResponse){TriSysApex['UI']['HideWait']();if(CDeveloperStudio_CFileWriteResponse){if(CDeveloperStudio_CFileWriteResponse['Success']){if(fnCallback)fnCallback();return;}else TriSysApex['UI']['ShowMessage'](CDeveloperStudio_CFileWriteResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('TriSysSDK.Custom.WebAPI.WriteFile:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Saving\x20File...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}}},'Froala':{'InitialiseEditor':function(options){var editorSpecification={'key':'mA3A4B2E2vA1E1E1B4B8C7C6E1E5G4ibeqjchG3C-8qE2uj==','theme':'gray','htmlUntouched':!![],'toolbarButtons':['fullscreen','bold','italic','underline','strikeThrough','subscript','superscript','fontFamily','fontSize','|','color','emoticons','paragraphStyle','|','paragraphFormat','align','formatOL','formatUL','outdent','indent','quote','insertHR','-','insertLink','insertVideo','insertTable','undo','redo','clearFormatting','selectAll','|','html'],'tableEditButtons':['tableRows','tableColumns','tableCells','tableCellVerticalAlign','tableRemove'],'fontFamily':{'Arial,Helvetica,sans-serif':'Arial','Calibri':'Calibri','Georgia,serif':'Georgia','Impact,Charcoal,sans-serif':'Impact','Tahoma,Geneva,sans-serif':'Tahoma','\x27Times\x20New\x20Roman\x27,Times,serif':'Times\x20New\x20Roman','Verdana,Geneva,sans-serif':'Verdana'},'zIndex':0x30d3f};if(options['Height']>0x0)editorSpecification['height']=options['Height'];options['FullPage']&&(editorSpecification['fullPage']=!![],editorSpecification['htmlAllowedTags']=['.*'],editorSpecification['htmlRemoveTags']=[''],editorSpecification['lineBreakerTags']=[''],editorSpecification['lineBreakerOffset']=0x0,editorSpecification['linkAlwaysBlank']=!![],editorSpecification['linkText']=!![]);TriSysSDK['Froala']['CustomOverrides'](options,editorSpecification);var froalaEditorObject=$('#'+options['ID']);froalaEditorObject['froalaEditor']('destroy'),froalaEditorObject['froalaEditor'](editorSpecification),TriSysSDK['Froala']['SetTheme'](),froalaEditorObject['froalaEditor']('html.set',options['HTML']),options['DropEnabled']&&froalaEditorObject['froalaEditor']()['off']()['on']('froalaEditor.drop',function(e,editor,dropEvent){editor['markers']['insertAtPoint'](dropEvent['originalEvent']);var $marker=editor['$el']['find']('.fr-marker');$marker['replaceWith']($['FroalaEditor']['MARKERS']),editor['selection']['restore']();if(!editor['undo']['canDo']())editor['undo']['saveStep']();var sItemId=dropEvent['originalEvent']['dataTransfer']['getData']('Text');return editor['html']['insert'](sItemId),editor['undo']['saveStep'](),dropEvent['preventDefault'](),dropEvent['stopPropagation'](),![];});},'SetHTML':function(sID,sHTML){$('#'+sID)['froalaEditor']('html.set',sHTML);},'GetHTML':function(sID){var sHTML=$('#'+sID)['froalaEditor']('html.get');return sHTML;},'SetTheme':function(){var lGroupBackColour=TriSysProUI['GroupBackColour']();$('.gray-theme.fr-toolbar')['css']('background',lGroupBackColour);var sBorderColour=$('.block')['css']('border-left-color');$('.gray-theme.fr-toolbar')['css']('border-top','0px\x20solid\x20'+sBorderColour),$('.gray-theme.fr-box.fr-basic.fr-top\x20.fr-wrapper')['css']('box-shadow','0\x200px\x201px\x20'+sBorderColour+',\x200\x200px\x201px\x201px\x20'+sBorderColour),$('.gray-theme.fr-toolbar.fr-top')['css']('box-shadow','0\x200px\x201px\x20'+sBorderColour+',\x200\x200px\x201px\x201px\x20'+sBorderColour),$('.fr-element.fr-view')['css']('overflow-x','hidden');},'CustomOverrides':function(options,editorSpecification){if(typeof ctrlUserFriendlyHTMLEditor!==TriSysApex['Constants']['Undefined']){if(options['ID']==ctrlUserFriendlyHTMLEditor['EditorID']&&TriSysSDK['Froala']['CustomOverrideData']){if(TriSysSDK['Froala']['CustomOverrideData']['FontURL']){var link=document['createElement']('link');link['setAttribute']('rel','stylesheet'),link['setAttribute']('type','text/css');var sFont=TriSysSDK['Froala']['CustomOverrideData']['FontURL'];link['setAttribute']('href',sFont),document['head']['appendChild'](link),TriSysSDK['Froala']['CustomOverrideData']['FontURL']=null;}editorSpecification['iframe']=TriSysSDK['Froala']['CustomOverrideData']['iFrame'],editorSpecification['iframeStyleFiles']=TriSysSDK['Froala']['CustomOverrideData']['StyleFiles'],editorSpecification['fontFamily'][TriSysSDK['Froala']['CustomOverrideData']]=TriSysSDK['Froala']['CustomOverrideData']['FontFamily'];}}},'CustomOverrideData':null},'Relationships':{'Load':function(sDiv,sEntityName,fnCallbackAfterLoad){var fnLoadControlHTML=function(){var sHTML=$('#'+sDiv)['html']();sHTML&&sHTML['trim']()['length']>0x0?fnCallbackAfterLoad():TriSysApex['FormsManager']['loadControlIntoDiv'](sDiv,'ctrlRelationships.html',function(response,status,xhr){ctrlRelationships['Load'](sDiv,sEntityName,fnCallbackAfterLoad);});};TriSysApex['WhiteLabelling']['LoadJavascriptFile']('js/pages/ctrlRelationships.js',null,fnLoadControlHTML);},'LoadRelationships':function(sEntityName,lRecordId){ctrlRelationships['LoadRelationships'](sEntityName,lRecordId);}},'BackOffice':{'Load':function(sDiv,sEntityName,fnCallbackAfterLoad){var fnLoadControlHTML=function(){var sHTML=$('#'+sDiv)['html']();sHTML&&sHTML['trim']()['length']>0x0?fnCallbackAfterLoad():TriSysApex['FormsManager']['loadControlIntoDiv'](sDiv,'ctrlBankDetails.html',function(response,status,xhr){ctrlBankDetails['LoadRecord'](sDiv,sEntityName,fnCallbackAfterLoad);});};TriSysApex['WhiteLabelling']['LoadJavascriptFile']('js/pages/ctrlBankDetails.js',null,fnLoadControlHTML);},'LoadBankDetails':function(sEntityName,lRecordId){ctrlBankDetails['LoadBankDetails'](sEntityName,lRecordId);}},'References':{'Load':function(sDiv){var fnLoadControlHTML=function(){TriSysApex['FormsManager']['loadControlIntoDiv'](sDiv,'ctrlContactReferenceTable.html',function(response,status,xhr){ctrlContactReferenceTable['Load'](sDiv);});},bInDev=![];if(typeof ctrlContactReferenceTable===TriSysApex['Constants']['Undefined']||bInDev)TriSysApex['WhiteLabelling']['LoadJavascriptFile']('js/pages/ctrlContactReferenceTable.js',null,fnLoadControlHTML);else fnLoadControlHTML();},'LoadContactReferences':function(lContactId){ctrlContactReferenceTable['LoadContactReferences'](lContactId);}}};