var TriSysAPI={'Copyright':{'AllRightsReserved':'TriSys\x20Business\x20Software'},'Data':{'PostToWebAPI':function(payloadObject){var bAsynchronous=!![],sURL=null,sAPIurl=TriSysAPI['Data']['BaseAddress'](),dataPacketOutbound=null,fDataPacketInboundFunction=null,fErrorHandlerFunction=null,sHTTPVerb='POST',sFunction='TriSysAPI.Data.PostToWebAPI():\x20',bShowErrorAlert=!![],iTimeoutSeconds=0x3c*0xa,iTimeoutMilliseconds=iTimeoutSeconds*0x3e8;if(!TriSysAPI['Connectivity']['NetworkAvailability']())return;if(payloadObject)try{!TriSysAPI['Operators']['isEmpty'](payloadObject['URL'])&&(sURL=sAPIurl+payloadObject['URL']);if(!TriSysAPI['Operators']['isEmpty'](payloadObject['OutboundDataPacket']))dataPacketOutbound=payloadObject['OutboundDataPacket'];if(!TriSysAPI['Operators']['isEmpty'](payloadObject['InboundDataFunction']))fDataPacketInboundFunction=payloadObject['InboundDataFunction'];!TriSysAPI['Operators']['isEmpty'](payloadObject['ErrorHandlerFunction'])&&(fErrorHandlerFunction=payloadObject['ErrorHandlerFunction'],bShowErrorAlert=![]),!TriSysAPI['Operators']['isEmpty'](payloadObject['Asynchronous'])&&(bAsynchronous=payloadObject['Asynchronous']),!TriSysAPI['Operators']['isEmpty'](payloadObject['TimeoutMilliseconds'])&&(iTimeoutMilliseconds=payloadObject['TimeoutMilliseconds']);}catch(err){alert(sFunction+err['message']);}if(!sURL){alert(sFunction+'missing\x20URL\x20parameter.');return;}if(!fDataPacketInboundFunction){alert(sFunction+'missing\x20inbound\x20data\x20function.');return;}var bNativeFetch=![];if(bAsynchronous&&bNativeFetch){var fetch=new CTriSysFetchAPI();fetch['Post'](sURL,dataPacketOutbound,fDataPacketInboundFunction,{'FunctionName':sFunction,'ErrorHandlerFunction':fErrorHandlerFunction,'ShowErrorAlert':bShowErrorAlert,'TimeoutMilliseconds':iTimeoutMilliseconds});}else{var ajaxSetupStruct={'accepts':{'xml':'application/xml,\x20text/xml','html':'text/html','script':'text/javascript,\x20application/javascript','json':'application/json,\x20text/javascript','text':'text/plain','_default':''},'async':bAsynchronous,'timeout':iTimeoutMilliseconds};$['ajaxSetup'](ajaxSetupStruct),$['ajax']({'url':sURL,'data':dataPacketOutbound,'type':sHTTPVerb,'dataType':'json','crossDomain':!![],'cache':![],'beforeSend':function(xhr){var sSiteKey=TriSysAPI['Session']['DeveloperSiteKey']();if(!sSiteKey&&typeof TriSysApex!=='undefined')sSiteKey=TriSysApex['Constants']['DeveloperSiteKey'];xhr['setRequestHeader']('SiteKey',sSiteKey);var sDataServicesKey=TriSysAPI['Session']['DataServicesKey']();if(!TriSysAPI['Operators']['isEmpty'](sDataServicesKey))xhr['setRequestHeader']('DataServicesKey',sDataServicesKey);},'success':function(data){fDataPacketInboundFunction(data);},'error':function(request,status,error){var bReportError=![];if(request['status']!=0x0||status!='error')bReportError=!![];else{if(!TriSysAPI['Data']['_CheckingForConnectionLoss'])TriSysAPI['Data']['_CheckingForConnectionLoss']=!![],TriSysAPI['Data']['IPAddress'](!![],function(sError){}),TriSysAPI['Data']['_CheckingForConnectionLoss']=![];else{if(!TriSysAPI['Data']['_RetryingConnectionLoss'])setTimeout(TriSysAPI['Data']['CommunicationToWebAPIFailureMechanism'],0xa);return;}}if(bReportError){if(fErrorHandlerFunction)fErrorHandlerFunction(request,status,error);if(bShowErrorAlert&&typeof TriSysApex!=='undefined')TriSysApex['UI']['ErrorHandlerRedirector'](sFunction,request,status,error);}}})['fail'](function(jqXHR,textStatus,errorThrown){console['log']('AJAX\x20error:',textStatus,'Error:',errorThrown);});}},'_CheckingForConnectionLoss':![],'_RetryingConnectionLoss':![],'_RetryingConnectionPopupDisplayed':![],'CommunicationToWebAPIFailureMechanism':function(){if(TriSysAPI['Data']['_RetryingConnectionLoss']){if(typeof TriSysApex!=='undefined')TriSysApex['UI']['HideWait']();return;}TriSysAPI['Data']['_CheckingForConnectionLoss']=![];var sFullDateTime='';try{sFullDateTime=moment()['format']('dddd\x20DD\x20MMMM\x20YYYY')+'\x20@\x20'+moment()['format']('HH:mm');}catch(e){var date=new Date(),iHours=date['getHours']();iHours=('0'+iHours)['slice'](-0x2);var iMinutes=date['getMinutes']();iMinutes=('0'+iMinutes)['slice'](-0x2),sFullDateTime=date['toLocaleDateString']('en-gb',{'weekday':'long','year':'numeric','month':'short','day':'numeric'})+'\x20@\x20'+iHours+':'+iMinutes;}var sMessage=sFullDateTime+'<br><br>'+'Lost\x20Web\x20API\x20connection\x20to\x20'+TriSysAPI['Constants']['SecureURL']+'<br><br>'+'Our\x20support\x20team\x20are\x20aware\x20of\x20this\x20problem\x20and\x20will\x20now\x20attempt\x20to\x20diagnose\x20the\x20issue.'+'<br><br>'+'Would\x20you\x20like\x20to\x20retry\x20the\x20connection,\x20raise\x20a\x20support\x20issue\x20or\x20contact\x20us?',fnRetry=function(){var fnCheckIPAddress=function(){TriSysAPI['Data']['_RetryingConnectionPopupDisplayed']=![];typeof TriSysApex!=='undefined'&&(TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ShowWait'](null,'Retrying\x20Connection...'));TriSysAPI['Data']['_RetryingConnectionLoss']=!![];var sIPAddress=TriSysAPI['Data']['IPAddress'](!![],function(sError){});TriSysAPI['Data']['_RetryingConnectionLoss']=![],sIPAddress?typeof TriSysApex!=='undefined'&&(TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ShowMessage']('Connectivity\x20to\x20'+TriSysAPI['Constants']['SecureURL']+'\x20has\x20been\x20restored.'),TriSysApex['SignalR']['Communication']['SocketIO']&&TriSysApex['SignalR']['Communication']['SocketIO']['ReconnectedToWebAPI']()):setTimeout(TriSysAPI['Data']['CommunicationToWebAPIFailureMechanism'],0xa);};return setTimeout(fnCheckIPAddress,0xa),!![];},fnRaiseIssue=function(){var sURL='https://support.trisys.co.uk/?LogSupportIssue';return TriSysSDK['Browser']['OpenURL'](sURL),![];},fnContactSupport=function(){var sURL='https://www.trisys.co.uk/contact';return TriSysSDK['Browser']['OpenURL'](sURL),![];};!TriSysAPI['Data']['_RetryingConnectionPopupDisplayed']&&(typeof TriSysApex!=='undefined'&&(TriSysApex['UI']['HideWait'](),TriSysApex['UI']['questionYesNoCancel'](sMessage,TriSysApex['Copyright']['ShortProductName']+'\x20Communication\x20Error','Retry',fnRetry,'Raise\x20Support\x20Issue',fnRaiseIssue,'Contact\x20Support',fnContactSupport,{'CloseTopRightButton':!![]})),TriSysAPI['Data']['_RetryingConnectionPopupDisplayed']=!![]);},'BaseAddress':function(){var sAPIurl=TriSysAPI['Constants']['SecureURL'],bDebuggingAPIServerCode=![];if(bDebuggingAPIServerCode)try{var sThisURL=window['location']['href'];if(sThisURL['indexOf']('http://localhost')===0x0)sAPIurl='/';}catch(ex){alert('BaseAddress\x20exception:\x20'+ex['message']);}return sAPIurl;},'Version':function(fnCallback){var payloadObject={};payloadObject['URL']='Start/VersionNumber';if(!fnCallback)payloadObject['Asynchronous']=![];var sVersion=null;return payloadObject['InboundDataFunction']=function(data){sVersion=data;if(fnCallback)fnCallback(sVersion);},payloadObject['ErrorHandlerFunction']=function(request,status,error){alert('TriSysAPI.Data.Version:\x20'+TriSysAPI['Data']['BaseAddress']()+':\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject),sVersion;},'IPAddress':function(bSupressError,fnRapidFail,fnCallback){var payloadObject={};payloadObject['URL']='Start/IPAddress',payloadObject['Asynchronous']=fnCallback?!![]:![];if(fnRapidFail)payloadObject['TimeoutMilliseconds']=0x1388;var sIPAddress=null;return payloadObject['InboundDataFunction']=function(data){sIPAddress=data;if(fnCallback)fnCallback(sIPAddress);},payloadObject['ErrorHandlerFunction']=function(request,status,error){var sError='TriSysAPI.Data.IPAddress:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText'];if(fnRapidFail)fnRapidFail(sError);else{if(TriSysAPI['Operators']['isEmpty'](bSupressError))alert(sError);}},TriSysAPI['Data']['PostToWebAPI'](payloadObject),sIPAddress;},'VerifyDataServicesKey':function(){if(!TriSysSDK['Browser']['SupportsSynchronousAPI']()){var sDataServicesKey=TriSysAPI['Session']['DataServicesKey']();if(!TriSysAPI['Operators']['isEmpty'](sDataServicesKey))return!![];else return![];}var payloadObject={};payloadObject['URL']='Security/VerifyDataServicesKey',payloadObject['Asynchronous']=![];var bVerified=![];return payloadObject['InboundDataFunction']=function(data){if(data)bVerified=data['Success'];},payloadObject['ErrorHandlerFunction']=function(request,status,error){},TriSysAPI['Data']['PostToWebAPI'](payloadObject),bVerified;},'DrawTable':function(sDivTag,sEntityName,entityCollection,columnCollection){if(!columnCollection&&entityCollection){if(entityCollection['length']>0x0)columnCollection=Object['keys'](entityCollection[0x0]);}var sTable='<table\x20width=\x22100%\x22\x20border=\x221\x22>'+'\x20<tr>'+TriSysAPI['Data']['TableHeader'](sEntityName,columnCollection)+'\x20</tr>\x20\x20\x0d\x0a',sRow=null,entityObject=null;switch(sEntityName){case'Counters':entityObject=entityCollection,sRow=TriSysAPI['Data']['TableColumn']('Contact')+TriSysAPI['Data']['TableColumn'](entityObject['Contacts']),sTable=sTable+'<tr>'+sRow+'</tr>\x20\x20\x0d\x0a',sRow=TriSysAPI['Data']['TableColumn']('Company')+TriSysAPI['Data']['TableColumn'](entityObject['Companies']),sTable=sTable+'<tr>'+sRow+'</tr>\x20\x20\x0d\x0a',sRow=TriSysAPI['Data']['TableColumn']('Requirement')+TriSysAPI['Data']['TableColumn'](entityObject['Requirements']),sTable=sTable+'<tr>'+sRow+'</tr>\x20\x20\x0d\x0a',sRow=TriSysAPI['Data']['TableColumn']('Placement')+TriSysAPI['Data']['TableColumn'](entityObject['Placements']),sTable=sTable+'<tr>'+sRow+'</tr>\x20\x20\x0d\x0a',sRow=TriSysAPI['Data']['TableColumn']('Timesheet')+TriSysAPI['Data']['TableColumn'](entityObject['Timesheets']),sTable=sTable+'<tr>'+sRow+'</tr>\x20\x20\x0d\x0a',sRow=TriSysAPI['Data']['TableColumn']('Task')+TriSysAPI['Data']['TableColumn'](entityObject['Tasks']),sTable=sTable+'<tr>'+sRow+'</tr>\x20\x20\x0d\x0a',sRow=TriSysAPI['Data']['TableColumn']('User')+TriSysAPI['Data']['TableColumn'](entityObject['Users']),sTable=sTable+'<tr>'+sRow+'</tr>\x20\x20\x0d\x0a',entityCollection=null;break;}if(entityCollection)for(i=0x0;i<entityCollection['length'];i++){entityObject=entityCollection[i];var sHyperlink=null;sRow=null;switch(sEntityName){case'Contact':sHyperlink=TriSysAPI['Data']['HyperlinkColumn']('Contact.aspx?ContactId=',entityObject['ContactId'],entityObject['ContactId']),sRow=sHyperlink+TriSysAPI['Data']['TableColumn'](entityObject['FullName'])+TriSysAPI['Data']['TableColumn'](entityObject['CompanyName'])+TriSysAPI['Data']['TableColumn'](entityObject['JobTitle']);break;case'User':sHyperlink=TriSysAPI['Data']['HyperlinkColumn']('User.aspx?UserId=',entityObject['UserId'],entityObject['UserId']),sRow=sHyperlink+TriSysAPI['Data']['TableColumn'](entityObject['FullName'])+TriSysAPI['Data']['TableColumn'](entityObject['LoginName']);break;case'FieldDescription':case'DataSet':for(iFD=0x1;iFD<=columnCollection['length'];iFD++){var sColumnName=columnCollection[iFD-0x1],objValues=entityObject['Values'],sValue=null;for(jFD=0x0;jFD<objValues['length'];jFD++){if(objValues[jFD]['ColumnName']==sColumnName){sValue=objValues[jFD]['ColumnValue'];break;}}if(!sRow)sRow='';sRow=sRow+TriSysAPI['Data']['TableColumn'](sValue);}break;}if(sRow)sTable=sTable+'<tr>'+sRow+'</tr>\x20\x20\x0d\x0a';}sTable=sTable+'</table>',$(sDivTag)['html'](sTable);},'DrawTableFooter':function(sDivTag,jsonServerPackage,dataPacket,sPagingComboID,functionCallback){var sPages='';for(i=0x1;i<=jsonServerPackage['TotalPageCount'];i++){if(i!=jsonServerPackage['PageNumber']){var sFunction='javascript:trisysGridPager('+i+');',sHyperlink='<a\x20href=\x22javascript:void(0)\x22\x20onclick='+sFunction+'>'+i+'</a>';sPages=sPages+sHyperlink;}else sPages=sPages+i;sPages=sPages+'\x20&nbsp;\x20';if(i==0x32)break;}var sTableFooter='<table\x20width=\x22100%\x22\x20border=\x221\x22>'+'<tr>'+'\x20\x20\x20<td>'+sPages+'\x20\x20\x20</td>'+'</tr>'+'</table>';sTableFooter=sTableFooter+'<script>'+'function\x20trisysGridPager(iPage)\x20'+'\x20{\x20'+'\x20\x20\x20$(\x27'+sPagingComboID+'\x27).val(iPage);'+'\x20\x20\x20'+functionCallback+';'+'\x20}'+'</script>',$(sDivTag)['append'](sTableFooter);},'TableHeader':function(sEntityName,columnCollection){var sHTML=null;switch(sEntityName){case'Contact':sHTML=TriSysAPI['Data']['TableColumn']('ContactId',!![])+TriSysAPI['Data']['TableColumn']('Full\x20Name',!![])+TriSysAPI['Data']['TableColumn']('Company\x20Name',!![])+TriSysAPI['Data']['TableColumn']('job\x20Title',!![]);break;case'User':sHTML=TriSysAPI['Data']['TableColumn']('UserId',!![])+TriSysAPI['Data']['TableColumn']('Full\x20Name',!![])+TriSysAPI['Data']['TableColumn']('Login\x20Name',!![]);break;case'Counters':sHTML=TriSysAPI['Data']['TableColumn']('Table/Entity',!![])+TriSysAPI['Data']['TableColumn']('Record\x20Count',!![]);break;case'FieldDescription':case'DataSet':for(i=0x1;i<=columnCollection['length'];i++){if(!sHTML)sHTML='';var sColumnName=columnCollection[i-0x1];sHTML=sHTML+TriSysAPI['Data']['TableColumn'](sColumnName,!![]);}break;}return sHTML;},'TableColumn':function(sText,bHeader){if(bHeader)sText='<b>'+sText+'</b>';var sHTML='<td>'+sText+'</td>';return sHTML;},'HyperlinkColumn':function(sPageURL,lRecordId,sDisplayText){var sText='<a\x20href=\x22'+sPageURL+lRecordId+'\x22>'+sDisplayText+'</a>',sHTML=TriSysAPI['Data']['TableColumn'](sText);return sHTML;}},'Session':{'DeveloperSiteKey':function(){var s=TriSysAPI['Session']['Memory']['Get']('DeveloperSiteKey');return s;},'SetDeveloperSiteKey':function(sKey){TriSysAPI['Session']['Memory']['Set']('DeveloperSiteKey',sKey,0x1);},'SetDataServicesKey':function(sKey){TriSysAPI['Session']['Memory']['Set']('DataServicesKey',sKey,0x1);},'DataServicesKey':function(){try{var s=TriSysAPI['Session']['Memory']['Get']('DataServicesKey');return s;}catch(ex){return null;}},'Password':function(){var s=TriSysAPI['Cookies']['getCookie']('Password');return s;},'SetPassword':function(s){TriSysAPI['Cookies']['setCookie']('Password',s,0x1);},'SaveLoginCredentials':function(){var s=TriSysAPI['Cookies']['getCookie']('SaveLoginCredentials'),b=TriSysAPI['Operators']['stringToBoolean'](s,![]);return b;},'SetSaveLoginCredentials':function(b){TriSysAPI['Cookies']['setCookie']('SaveLoginCredentials',b,0x1);},'isConnected':function(){if(TriSysSDK['Browser']['SupportsSynchronousAPI']()){var sIPAddress=TriSysAPI['Data']['IPAddress']();if(!TriSysAPI['Operators']['isEmpty'](sIPAddress)){if(sIPAddress['length']>=0x7)return!![];}}else{var sDataServicesKey=TriSysAPI['Session']['DataServicesKey']();if(!TriSysAPI['Operators']['isEmpty'](sDataServicesKey))return!![];}return![];},'Memory':(function(){var win=null;try{win=window['top']||window;}catch(err){win={};}var store=null;try{store=win['name']?JSON['parse'](win['name']):{};}catch(err){store={};}function Save(){try{win['name']=JSON['stringify'](store);}catch(e){}};if(window['addEventListener'])window['addEventListener']('unload',Save,![]);else{if(window['attachEvent'])window['attachEvent']('onunload',Save);else window['onunload']=Save;}return{'Set':function(name,value){store[name]=value;},'Get':function(name){return store[name]?store[name]:null;},'Clear':function(){store={};},'Dump':function(){return JSON['stringify'](store);}};}())},'Cookies':{'setCookie':function(c_name,value,exdays){try{window['localStorage']['setItem'](c_name,value);return;var exdate=new Date();exdate['setDate'](exdate['getDate']()+exdays);var c_value=escape(value)+(exdays==null?'':';\x20expires='+exdate['toUTCString']());document['cookie']=c_name+'='+c_value;}catch(err){console['log']('setCookie\x20error:\x20'+c_name+',\x20'+err['message']);}},'getCookie':function(c_name){try{var value=window['localStorage']['getItem'](c_name);return value;var c_value=document['cookie'],c_start=c_value['indexOf']('\x20'+c_name+'=');c_start==-0x1&&(c_start=c_value['indexOf'](c_name+'='));if(c_start==-0x1)c_value=null;else{c_start=c_value['indexOf']('=',c_start)+0x1;var c_end=c_value['indexOf'](';',c_start);c_end==-0x1&&(c_end=c_value['length']),c_value=unescape(c_value['substring'](c_start,c_end));}var sDisplay=c_value;if(sDisplay)sDisplay=sDisplay['substring'](0x0,0x32)+'...';return alert('getCookie('+c_name+')\x20=\x20\x0a\x20'+sDisplay),c_value;}catch(err){console['log']('getCookie\x20error:\x20'+err['message']);}},'Clear':function(){try{window['localStorage']['clear']();}catch(e){}},'Delete':function(sCookieName){try{window['localStorage']['removeItem'](sCookieName);}catch(err){}},'All':function(){var pairs=[];for(var i=0x0,len=window['localStorage']['length'];i<len;i++){var key=window['localStorage']['key'](i),value=window['localStorage'][key];pairs['push']({'key':key,'value':value});}return pairs;}},'Persistence':{'Read':function(sObjectName){var sObjectString=TriSysAPI['Cookies']['getCookie'](sObjectName);if(sObjectString)try{return JSON['parse'](sObjectString);}catch(e){}},'Write':function(sObjectName,object){var sObjectString=JSON['stringify'](object);TriSysAPI['Cookies']['setCookie'](sObjectName,sObjectString);}},'Operators':{'isEmpty':function(obj){try{if(obj===''||obj===null||obj==='NULL'||obj==='null'||obj===undefined)return!![];if(typeof obj==='object'){var i=0x0;for(key in obj){i++;}if(i===0x0)return!![];}return![];}catch(err){}return!![];},'stringToBoolean':function(str,bDefault){if(!TriSysAPI['Operators']['isEmpty'](str))try{if(typeof str==='string')switch(str['toLowerCase']()){case'true':case'yes':case'1':return!![];case'false':case'no':case'0':case null:return![];default:return Boolean(str);}else return str;}catch(err){}return bDefault;},'booleanToString':function(b){try{if(b)return'true';else return'false';}catch(ex){return![];}}},'Encryption':{'legal_characters':'!\x22#$%&\x27()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_´abcdefghijklmnopqrstuvwxyz{|}~€_‚£€©','encrypt':function(cookie_value,encrypt_key){try{return TriSysAPI['Encryption']['Base64']['encode'](cookie_value);cookie_value=$['base64']['encode'](cookie_value);var cookie_character,character_location,encrypted_location,encrypted_character,encrypted_string='';for(var counter=0x0;counter<cookie_value['length'];counter++){cookie_character=cookie_value['substring'](counter,counter+0x1),character_location=TriSysAPI['Encryption']['legal_characters']['indexOf'](cookie_character),encrypted_location=character_location^encrypt_key,encrypted_character=TriSysAPI['Encryption']['legal_characters']['substring'](encrypted_location,encrypted_location+0x1),encrypted_string+=encrypted_character;}return encrypted_string;}catch(err){return cookie_value;}},'decrypt':function(encrypted_string,encrypt_key){try{return TriSysAPI['Encryption']['Base64']['decode'](encrypted_string);var cookie_character,character_location,encrypted_location,encrypted_character,cookie_value='';for(var counter=0x0;counter<encrypted_string['length'];counter++){encrypted_character=encrypted_string['substring'](counter,counter+0x1),encrypted_location=TriSysAPI['Encryption']['legal_characters']['indexOf'](encrypted_character),character_location=encrypted_location^encrypt_key,cookie_character=TriSysAPI['Encryption']['legal_characters']['substring'](character_location,character_location+0x1),cookie_value+=cookie_character;}return cookie_value=$['base64']['decode'](cookie_value),cookie_value;}catch(err){return encrypted_string;}},'Base64':{'_keyStr':'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=','encode':function(input){const utf8Bytes=new TextEncoder()['encode'](input);let binaryString='';utf8Bytes['forEach'](byte=>{binaryString+=String['fromCharCode'](byte);});return btoa(binaryString);var output='',chr1,chr2,chr3,enc1,enc2,enc3,enc4,i=0x0;input=TriSysAPI['Encryption']['Base64']['_utf8_encode'](input);while(i<input['length']){chr1=input['charCodeAt'](i++),chr2=input['charCodeAt'](i++),chr3=input['charCodeAt'](i++),enc1=chr1>>0x2,enc2=(chr1&0x3)<<0x4|chr2>>0x4,enc3=(chr2&0xf)<<0x2|chr3>>0x6,enc4=chr3&0x3f;if(isNaN(chr2))enc3=enc4=0x40;else isNaN(chr3)&&(enc4=0x40);output=output+this['_keyStr']['charAt'](enc1)+this['_keyStr']['charAt'](enc2)+this['_keyStr']['charAt'](enc3)+this['_keyStr']['charAt'](enc4);}return output;},'decode':function(input){try{const binaryString=atob(input),bytes=new Uint8Array(binaryString['length']);for(let i=0x0;i<binaryString['length'];i++){bytes[i]=binaryString['charCodeAt'](i);}return new TextDecoder()['decode'](bytes);}catch(e){return console['error']('Base64\x20decode\x20error:',e),'';}var output='',chr1,chr2,chr3,enc1,enc2,enc3,enc4,i=0x0;input=input['replace'](/[^A-Za-z0-9\+\/\=]/g,'');while(i<input['length']){enc1=this['_keyStr']['indexOf'](input['charAt'](i++)),enc2=this['_keyStr']['indexOf'](input['charAt'](i++)),enc3=this['_keyStr']['indexOf'](input['charAt'](i++)),enc4=this['_keyStr']['indexOf'](input['charAt'](i++)),chr1=enc1<<0x2|enc2>>0x4,chr2=(enc2&0xf)<<0x4|enc3>>0x2,chr3=(enc3&0x3)<<0x6|enc4,output=output+String['fromCharCode'](chr1),enc3!=0x40&&(output=output+String['fromCharCode'](chr2)),enc4!=0x40&&(output=output+String['fromCharCode'](chr3));}return output=TriSysAPI['Encryption']['Base64']['_utf8_decode'](output),output;},'_utf8_encode':function(string){string=string['replace'](/\r\n/g,'\x0a');var utftext='';for(var n=0x0;n<string['length'];n++){var c=string['charCodeAt'](n);if(c<0x80)utftext+=String['fromCharCode'](c);else c>0x7f&&c<0x800?(utftext+=String['fromCharCode'](c>>0x6|0xc0),utftext+=String['fromCharCode'](c&0x3f|0x80)):(utftext+=String['fromCharCode'](c>>0xc|0xe0),utftext+=String['fromCharCode'](c>>0x6&0x3f|0x80),utftext+=String['fromCharCode'](c&0x3f|0x80));}return utftext;},'_utf8_decode':function(utftext){var string='',i=0x0,c=c1=c2=0x0;while(i<utftext['length']){c=utftext['charCodeAt'](i);if(c<0x80)string+=String['fromCharCode'](c),i++;else c>0xbf&&c<0xe0?(c2=utftext['charCodeAt'](i+0x1),string+=String['fromCharCode']((c&0x1f)<<0x6|c2&0x3f),i+=0x2):(c2=utftext['charCodeAt'](i+0x1),c3=utftext['charCodeAt'](i+0x2),string+=String['fromCharCode']((c&0xf)<<0xc|(c2&0x3f)<<0x6|c3&0x3f),i+=0x3);}return string;}}},'Connectivity':{'NetworkAvailability':function(){var bNetworkAvailability=!![];try{if(TriSysPhoneGap['Enabled']())bNetworkAvailability=TriSysPhoneGap['isConnectedToComms']();}catch(e){}if(!bNetworkAvailability){if(typeof TriSysApex!=='undefined'){TriSysApex['UI']['HideWait']();var sMessage='You\x20are\x20not\x20connected\x20to\x20the\x20internet.'+'<br\x20/>'+'Please\x20re-connect\x20and\x20then\x20retry\x20this\x20operation.';TriSysApex['UI']['ShowError'](sMessage);}}return bNetworkAvailability;}},'DebugLogging':{'On':![],'Write':function(sCategory,sProcess,sID,sMessage){if(!sCategory||!sProcess||!sID||!sMessage)return;if(!TriSysAPI['DebugLogging']['On'])return;var CLogMessageRequest={'Category':sCategory,'Process':sProcess,'ID':sID,'Message':sMessage},payloadObject={};payloadObject['URL']='DebugLog/LogMessage',payloadObject['OutboundDataPacket']=CLogMessageRequest,payloadObject['InboundDataFunction']=function(CLogMessageResponse){},payloadObject['ErrorHandlerFunction']=function(request,status,error){},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'Constants':{'SecureURL':'https://api.trisys.co.uk/','TriSysCRMSecureURL':'https://api.trisys.co.uk/'}};