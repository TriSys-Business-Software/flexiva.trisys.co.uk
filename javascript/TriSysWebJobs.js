var TriSysWebJobs={'Copyright':{'AllRightsReserved':'TriSys\x20Business\x20Software','LongProductDescription':'Applicant\x20Tracking\x20System\x20for\x20Recruitment\x20Agencies','ShortProductName':'TriSysWebJobs','HomePage':'www.trisys.co.uk'},'Agency':{'CustomerID':null,'CustomerName':null,'Logo':null,'Address':null,'Phone':null,'EMail':null,'WebPage':null,'MissionStatement':null,'AboutUs':null,'WebJobsRequest':function(){return{'CustomerID':TriSysWebJobs['Agency']['CustomerID']};},'CustomerIDMatch':function(sCustomerID){var sAgencyCustomerID=TriSysWebJobs['Agency']['CustomerID'];if(sAgencyCustomerID)sAgencyCustomerID=sAgencyCustomerID['toLowerCase']();if(sCustomerID)sCustomerID=sCustomerID['toLowerCase']();var bMatch=sAgencyCustomerID==sCustomerID;return bMatch;}},'CustomForms':null,'APIKeys':{'Initialise':function(pageConfig,lRecordId){TriSysWebJobs['APIKeys']['ReadCustomerKeysFromWebAPI'](pageConfig,lRecordId,!![],TriSysWebJobs['APIKeys']['CustomerKeysValid'],function(){TriSysApex['UI']['ShowMessage']('Unable\x20to\x20find\x20appropriate\x20keys\x20for\x20'+TriSysWebJobs['Agency']['CustomerID'],'TriSys\x20Web\x20Jobs',function(){var sSecureURL='https://www.trisys.co.uk/contact';if(TriSysWebJobs['Agency']['CustomerID']=='search-consultancy')sSecureURL='https://www.search.co.uk/contact-us/';window['location']['replace'](sSecureURL);});});},'ReadCustomerKeysFromWebAPI':function(pageConfig,lRecordId,bWait,fnCallbackSuccess,fnCallbackFailure){var fnSuccess=function(CCustomerWebJobsKeyResponse){fnCallbackSuccess(pageConfig,lRecordId,CCustomerWebJobsKeyResponse);},partner=TriSysApex['WhiteLabelling']['Partner'](TriSysWebJobs['Agency']['CustomerID']);if(partner){if(partner['WebAPIURL'])TriSysAPI['Constants']['SecureURL']=partner['WebAPIURL'];partner['APIKey']&&(TriSysApex['Constants']['DeveloperSiteKey']=partner['APIKey'],TriSysAPI['Session']['SetDeveloperSiteKey'](TriSysApex['Constants']['DeveloperSiteKey']));}TriSysWebJobs['APIKeys']['ReadCustomerKeysFromWebAPIWithCallback'](TriSysWebJobs['Agency']['CustomerID'],bWait,fnSuccess,fnCallbackFailure);},'IdentifyWhiteLabelFromDomainURL':function(){var sURL=window['location']['href'],sSubDomain=null,sSitePartsDots=sURL['split']('/');if(sSitePartsDots['length']>0x1)sSubDomain=sSitePartsDots[sSitePartsDots['length']-0x1];if(sSubDomain){var partner=TriSysApex['WhiteLabelling']['Partner'](sSubDomain);if(partner){TriSysWebJobs['Agency']['CustomerID']=sSubDomain;if(partner['WebAPIURL'])TriSysAPI['Constants']['SecureURL']=partner['WebAPIURL'];partner['APIKey']&&(TriSysApex['Constants']['DeveloperSiteKey']=partner['APIKey'],TriSysAPI['Session']['SetDeveloperSiteKey'](TriSysApex['Constants']['DeveloperSiteKey']));}}},'ReadCustomerKeysFromWebAPIWithCallback':function(sCustomerID,bWait,fnCallbackSuccess,fnCallbackFailure){var CCustomerWebJobsKeyRequest={'CustomerID':sCustomerID},payloadObject={};payloadObject['URL']='Customer/WebJobsKeys',payloadObject['OutboundDataPacket']=CCustomerWebJobsKeyRequest,payloadObject['InboundDataFunction']=function(CCustomerWebJobsKeyResponse){if(bWait)TriSysApex['UI']['HideWait']();if(CCustomerWebJobsKeyResponse){if(CCustomerWebJobsKeyResponse['Success']){if(CCustomerWebJobsKeyResponse['APIKey']&&CCustomerWebJobsKeyResponse['CRMCredentialKey']){fnCallbackSuccess(CCustomerWebJobsKeyResponse);return;}}else TriSysApex['Logging']['LogMessage'](CCustomerWebJobsKeyResponse['ErrorMessage']);}fnCallbackFailure(sCustomerID);},payloadObject['ErrorHandlerFunction']=function(request,status,error){if(bWait)TriSysApex['UI']['HideWait']();TriSysApex['UI']['errorAlert']('TriSysWebJobs.APIKeys.ReadCustomerKeysFromWebAPIWithCallback:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);};if(bWait)TriSysApex['UI']['ShowWait'](null,'Authenticating...');TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'CustomerKeysValid':function(pageConfig,lRecordId,CCustomerWebJobsKeyResponse){var fnAfterConnectionToAgencyDatabase=function(){$('#webjobs-group-header')['show'](),$('#webjobs-company-name')['html'](TriSysWebJobs['Agency']['CustomerName']),$('#webjobs-company-telno')['html'](TriSysWebJobs['Agency']['Phone']);if(TriSysWebJobs['Agency']['WebPage']){var sWebPageDisplay=TriSysWebJobs['Agency']['WebPage'];sWebPageDisplay=sWebPageDisplay['replace']('http://',''),sWebPageDisplay=sWebPageDisplay['replace']('https://',''),$('#webjobs-company-website-display')['html'](sWebPageDisplay),$('#webjobs-company-website-url')['attr']('href',TriSysWebJobs['Agency']['WebPage']);}$('#navBar-Help-GroupID')['hide'](),$('#navBar-Developer-GroupID')['hide'](),$('#scrollNavBar')['css']('padding-top','0px');var fnOpenForm=function(){pageConfig&&TriSysApex['FormsManager']['OpenForm'](pageConfig['FormName'],lRecordId,!![]);};if(pageConfig){if(pageConfig['FormName']['indexOf']('Client')>=0x0||pageConfig['FormName']['indexOf']('Agency')>=0x0)TriSysWebJobs['Constants']['CandidateMode']=![];if(pageConfig['FormName']['indexOf']('Agency')>=0x0)TriSysWebJobs['Constants']['AgencyUmbrellaMode']=!![];}TriSysApex['CustomFormsAndComponents']['AfterWebJobsAgencyDatabaseConnection'](CCustomerWebJobsKeyResponse,fnOpenForm);},bCacheStandingData=!![];TriSysWebJobs['APIKeys']['CustomerKeysValidStoreResponse'](CCustomerWebJobsKeyResponse,fnAfterConnectionToAgencyDatabase,bCacheStandingData);},'CustomerKeysValidStoreResponse':function(CCustomerWebJobsKeyResponse,fnCallback,bCacheStandingData){TriSysApex['Constants']['DeveloperSiteKey']=CCustomerWebJobsKeyResponse['APIKey'];var sSiteKey=TriSysApex['Constants']['DeveloperSiteKey'];TriSysAPI['Session']['SetDeveloperSiteKey'](sSiteKey);if(CCustomerWebJobsKeyResponse['WebAPIEndPoint'])TriSysAPI['Constants']['SecureURL']=CCustomerWebJobsKeyResponse['WebAPIEndPoint'];TriSysWebJobs['Constants']['AgencyUserLoginCredentialsToCRM']=CCustomerWebJobsKeyResponse['CRMCredentialKey'];var company=CCustomerWebJobsKeyResponse['Company'];TriSysWebJobs['Agency']['CustomerName']=company['CompanyName'],TriSysWebJobs['Agency']['Logo']=company['Logo'],TriSysWebJobs['Agency']['Address']=company['Address'],TriSysWebJobs['Agency']['Phone']=company['Phone'],TriSysWebJobs['Agency']['EMail']=company['EMail'],TriSysWebJobs['Agency']['WebPage']=company['WebPage'],TriSysWebJobs['Agency']['MissionStatement']=company['MissionStatement'],TriSysWebJobs['Agency']['AboutUs']=company['AboutUs'],TriSysWebJobs['CustomForms']=CCustomerWebJobsKeyResponse['CustomForms'],TriSysWebJobs['APIKeys']['ConnectToAgencyDatabaseOnly'](null,function(){if(fnCallback)fnCallback();},CCustomerWebJobsKeyResponse['WebAPIEndPoint'],bCacheStandingData);},'ConnectToAgencyDatabaseOnly':function(sPageName,fnCallback,sWebAPIEndPoint,bCacheStandingData){var TriSysCRMCredentialAccountTypeEnum_AgencyVacanciesOnly=0x3,eAccountType=TriSysCRMCredentialAccountTypeEnum_AgencyVacanciesOnly,dataPacket={'CRMCredentialKey':TriSysWebJobs['Constants']['AgencyUserLoginCredentialsToCRM'],'AccountType':eAccountType,'CompanyName':TriSysWebJobs['Agency']['CustomerID']};TriSysApex['LoginCredentials']['ValidateViaWebService'](dataPacket,![],function(){if(sWebAPIEndPoint)TriSysAPI['Constants']['SecureURL']=sWebAPIEndPoint;if(bCacheStandingData)TriSysWebJobs['APIKeys']['CacheStandingData'](fnCallback);else{if(fnCallback)fnCallback();}});},'CacheStandingData':function(fnCallback){var payloadObject={};payloadObject['URL']='Cache/StandingDataForWebJobs',payloadObject['OutboundDataPacket']=null,payloadObject['InboundDataFunction']=function(CCachedStandingDataWithBOLObjects){if(CCachedStandingDataWithBOLObjects)TriSysApex['Cache']['SetStandingData'](CCachedStandingDataWithBOLObjects),TriSysApex['GoogleAnalytics']['InjectScript'](),fnCallback();else{}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysWebJobs.APIKeys.CacheStandingData:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'ClientOrCandidateLogin':{'Submit':function(sLoginEMail,sPassword,bRememberMe,CSocialNetworkLoginParameters,eAccountType){if(!CSocialNetworkLoginParameters){var sMessage;if(!TriSysApex['LoginCredentials']['validateEmail'](sLoginEMail)){sMessage=TriSysSDK['Resources']['Message']('LoginButtonClick_EMail'),TriSysApex['UI']['ShowMessage'](sMessage,TriSysWebJobs['Constants']['ApplicationName']);return;}if(!sPassword){sMessage=TriSysSDK['Resources']['Message']('LoginButtonClick_Password'),TriSysApex['UI']['ShowMessage'](sMessage,TriSysWebJobs['Constants']['ApplicationName']);return;}}var CSecurityControllerAuthenticateTriSysCRMCredentials={'CRMCredentialKey':TriSysWebJobs['Constants']['AgencyUserLoginCredentialsToCRM'],'AccountType':eAccountType,'AgencyContact_EMail':sLoginEMail,'AgencyContact_Password':sPassword,'SocialNetworkLoginParameters':CSocialNetworkLoginParameters},fnPostLogin=function(){TriSysWebJobs['Security']['CacheLoginCredentialsAsCookies'](sLoginEMail,sPassword,bRememberMe);var sDataServicesKey=TriSysAPI['Session']['DataServicesKey']();TriSysApex['LoginCredentials']['ReadLoggedInUserSettings'](TriSysWebJobs['ClientOrCandidateLogin']['AfterReadingLoggedInUserSettings']);},fnIncorrectLogin=function(){var sLoginFailedMessage=TriSysSDK['Resources']['Message']('LoginButtonClick_Invalid');sLoginFailedMessage=sLoginFailedMessage['replace'](/##EMail##/g,TriSysWebJobs['Agency']['EMail']);var sMessageTitle=TriSysWebJobs['Constants']['ApplicationName']+'\x20Login';TriSysApex['UI']['ShowMessage'](sLoginFailedMessage,sMessageTitle);},bApexLoginCacheing=![],additionalInstructions={'SuppressPopups':![],'IncorrectCredentialsCallback':fnIncorrectLogin};TriSysApex['LoginCredentials']['ValidateViaWebService'](CSecurityControllerAuthenticateTriSysCRMCredentials,bApexLoginCacheing,fnPostLogin,null,additionalInstructions);},'AfterReadingLoggedInUserSettings':function(CDataConnectionKey){TriSysApex['Pages']['Index']['PostLoginVisuals'](!![],CDataConnectionKey);var bClient=CDataConnectionKey['LoggedInAgencyContact']['ContactType']=='Client',bClientCandidate=CDataConnectionKey['LoggedInAgencyContact']['ContactType']=='ClientCandidate',bCandidate=!bClient;if(bClientCandidate){var sURL=window['location']['href'];sURL['indexOf']('/?Client')>0x0&&(bClient=!![],bCandidate=![]);}TriSysWebJobs['Constants']['LoggedInAsCandidate']=bCandidate,TriSysWebJobs['Constants']['LoggedInAsClient']=bClient,TriSysApex['NavigationBar']['PostLoginEvent'](!![],![],bClient,bCandidate),$('#loggedInUserLinks')['hide'](),$('#navBar-Help-GroupID')['hide'](),$('#navBar-Developer-GroupID')['hide'](),TriSysWebJobs['Routing']['PostLogin'](),TriSysWebJobs['ClientOrCandidateLogin']['PostLoginCustomEvent'](bCandidate,bClient);},'PostLoginCustomEvent':function(bCandidate,bClient){try{WebJobsModule['PostLogin'](bCandidate,bClient);}catch(e){}},'LogoffWithPrompt':function(){var fnLogoffCallback=function(){TriSysApex['Pages']['Index']['PostLoginVisuals'](![]),TriSysApex['Forms']['formQueue']['length']=0x0;var bForceClose=!![];return TriSysApex['FormsManager']['CloseAllForms'](bForceClose),TriSysWebJobs['ClientOrCandidateLogin']['LogoffWebService'](),TriSysWebJobs['Security']['CacheLoginCredentialsAsCookies'](null,null,![]),TriSysApex['NavigationBar']['PostLoginEvent'](![],![],![],![]),!![];},sLogoffMessage=TriSysSDK['Resources']['Message']('TriSysApex.LoginCredentials.Logoff.LogoffMessage');TriSysApex['UI']['questionYesNo'](sLogoffMessage,'Logoff\x20'+TriSysWebJobs['Constants']['ApplicationName'],'Yes',fnLogoffCallback,'No');},'LogoffWebService':function(){var sAfterLogoffPage=null;if(TriSysWebJobs['Constants']['LoggedInAsCandidate'])sAfterLogoffPage=TriSysWebJobs['Constants']['CandidateVacancySearchForm'];else TriSysWebJobs['Constants']['LoggedInAsClient']?sAfterLogoffPage=TriSysWebJobs['Constants']['ClientLoginForm']:sAfterLogoffPage=TriSysWebJobs['Constants']['AgencyUmbrellaLoginForm'];if(TriSysWebJobs['Constants']['LoggedInAsCandidate']){var sForm=TriSysWebJobs['Constants']['CandidateVacancySearchForm'],pageConfig=TriSysApex['FormsManager']['getPageConfig'](sForm),bVacancySearch=!![];if(!pageConfig)bVacancySearch=![];else{if(!TriSysAPI['Operators']['isEmpty'](pageConfig['Visible']))bVacancySearch=pageConfig['Visible'];}if(!bVacancySearch)sAfterLogoffPage=TriSysWebJobs['Constants']['CandidateLoginForm'];}var fnClearKeysAndShowLogin=function(){TriSysAPI['Session']['SetDataServicesKey'](null),TriSysWebJobs['Constants']['LoggedInAsCandidate']=![],TriSysWebJobs['Constants']['LoggedInAsClient']=![];var pageConfig=TriSysApex['FormsManager']['getPageConfig'](sAfterLogoffPage);TriSysWebJobs['APIKeys']['Initialise'](pageConfig,0x0);};TriSysApex['UI']['ShowWait'](null,'Logging\x20Off...'),TriSysApex['LoginCredentials']['LogoffWebServiceWithCallback'](fnClearKeysAndShowLogin);},'DrawCustomNavBar':function(){var sFileJSON=TriSysApex['NavigationBar']['NavBarFile'](!![]);if(sFileJSON){$('#scrollNavBar')['empty'](),TriSysApex['NavigationBar']['Draw']('scrollNavBar',!![]);var bLoggedIn=![],bRecruiter=![],bClient=!![],bCandidate=!![];TriSysApex['NavigationBar']['PostLoginEvent'](bLoggedIn,bRecruiter,bClient,bCandidate),$('#loggedInUserLinks')['hide'](),$('#navBar-Help-GroupID')['hide'](),$('#navBar-Developer-GroupID')['hide'](),$('#scrollNavBar')['css']('padding-top','0px');}}},'ClientLogin':{'Submit':function(sLoginEMail,sPassword,bRememberMe,CSocialNetworkLoginParameters){var TriSysCRMCredentialAccountTypeEnum_AgencyClient=0x6;TriSysWebJobs['ClientOrCandidateLogin']['Submit'](sLoginEMail,sPassword,bRememberMe,CSocialNetworkLoginParameters,TriSysCRMCredentialAccountTypeEnum_AgencyClient);}},'CandidateLogin':{'Submit':function(sLoginEMail,sPassword,bRememberMe,CSocialNetworkLoginParameters){var TriSysCRMCredentialAccountTypeEnum_AgencyCandidate=0x5;TriSysWebJobs['ClientOrCandidateLogin']['Submit'](sLoginEMail,sPassword,bRememberMe,CSocialNetworkLoginParameters,TriSysCRMCredentialAccountTypeEnum_AgencyCandidate);},'isLoggedInCheck':function(fnLoggedInCallback,fnNotLoggedInCallback){var payloadObject={};payloadObject['URL']='Contact/ReadLoggedInCandidate',payloadObject['OutboundDataPacket']=null,payloadObject['InboundDataFunction']=function(CReadDuplicateCandidateResponse){if(CReadDuplicateCandidateResponse){if(CReadDuplicateCandidateResponse['Success']){var candidate=CReadDuplicateCandidateResponse['Candidate'];fnLoggedInCallback(candidate);return;}}if(fnNotLoggedInCallback)fnNotLoggedInCallback();},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'PasswordReset':{'Submit':function(sLoginEMail,bCandidate,bClient){var sMessage;if(!TriSysApex['LoginCredentials']['validateEmail'](sLoginEMail)){sMessage=TriSysSDK['Resources']['Message']('LoginButtonClick_EMail'),TriSysApex['UI']['ShowMessage'](sMessage,TriSysWebJobs['Constants']['ApplicationName']);return;}var sURL=window['location']['href'],sSite=TriSysApex['URL']['Parser'](sURL)['getHost'](),sForm=null;if(bCandidate)sForm='CandidateLogin';else bClient?sForm='ClientLogin':sForm='AgencyLogin';sSite=TriSysWebJobs['Constants']['HomePage']+'/?'+sForm+'/0/'+TriSysWebJobs['Agency']['CustomerID'];var CAgencyForgottenPasswordRequest={'EMail':sLoginEMail,'SiteURL':sSite,'WebJobsRequest':TriSysWebJobs['Agency']['WebJobsRequest']()},MessageIDPrefix='TriSysWeb.Pages.ForgottenPassword.RequestButtonClick.',fnOnSuccessfulRequest=function(){var sMessage=TriSysSDK['Resources']['Message'](MessageIDPrefix+'SuccessfulRequest');TriSysApex['UI']['ShowMessage'](sMessage,TriSysWebJobs['Constants']['ApplicationName'],function(){return TriSysApex['FormsManager']['OpenForm'](sForm,0x0,!![]),!![];});},fnOnFailedRequest=function(){TriSysApex['UI']['CloseModalPopup'](),setTimeout(function(){var sMessage=TriSysSDK['Resources']['Message'](MessageIDPrefix+'FailedRequest');TriSysApex['UI']['ShowMessage'](sMessage,TriSysWeb['Constants']['ApplicationName']);},0x64);},sRequestingPasswordMessage=TriSysSDK['Resources']['Message'](MessageIDPrefix+'RequestingPassword');TriSysWeb['Pages']['ForgottenPassword']['SendRequestToAPI'](CAgencyForgottenPasswordRequest,sRequestingPasswordMessage,fnOnSuccessfulRequest,fnOnFailedRequest);}},'CandidateRegistration':{'LoadContactTitleLookup':function(sTitleID,sDefaultTitle,fnCallback){var payloadObject={};payloadObject['URL']='Cache/ContactTitles',payloadObject['OutboundDataPacket']=null,payloadObject['InboundDataFunction']=function(CCachedContactTitles){if(CCachedContactTitles['Success']){var standingData=TriSysApex['Cache']['GetStandingData']();!standingData&&(standingData={},TriSysApex['Cache']['SetStandingData'](standingData));standingData['ContactTitles']=CCachedContactTitles['ContactTitles'];if(TriSysAPI['Operators']['isEmpty'](sDefaultTitle))sDefaultTitle='Mr';TriSysSDK['CShowForm']['contactTitleFieldEditableProperties'](sTitleID,sDefaultTitle);if(fnCallback)fnCallback(sTitleID,sDefaultTitle);}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){console['log']('TriSysWebJobs.CandidateRegistration.LoadContactTitleLookup:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'LoadCountryLookup':function(sCountryID){TriSysSDK['Countries']['CurrentCountryName'](function(sCurrentCountry){TriSysSDK['CShowForm']['countriesCombo'](sCountryID,sCurrentCountry);});},'LoadCityFromGeoLocation':function(sCityID){TriSysSDK['Countries']['CurrentCityName'](function(sCurrentCity){$('#'+sCityID)['val'](sCurrentCity);});},'LoadCVFileRefWidget':function(sCVFileRefDiv,bCVFileRefDeleteButton,bCVFileRefOpenButton){var fieldDescription={'TableName':'ContactConfigFields','TableFieldName':'CVFileRef','FieldTypeId':TriSysSDK['Controls']['FieldTypes']['FileReference']};TriSysSDK['Controls']['FileReference']['Load'](sCVFileRefDiv,fieldDescription,null),setTimeout(function(){TriSysSDK['Controls']['FileReference']['DeleteButtonVisible'](sCVFileRefDiv,bCVFileRefDeleteButton),TriSysSDK['Controls']['FileReference']['OpenButtonVisible'](sCVFileRefDiv,bCVFileRefOpenButton);},0x64);},'LoadContactPhotoWidgets':function(sContactPhotoFileRefDiv,sPhotoEditor){var fnContactPhotoCallback=function(sOperation,divTag,sFilePath){$('#'+sPhotoEditor)['show'](),TriSysSDK['Images']['FieldDescriptionImageCallback'](sOperation,divTag,sFilePath,sPhotoEditor);};TriSysSDK['Controls']['FileReference']['Load'](sContactPhotoFileRefDiv,null,fnContactPhotoCallback);},'SubmitToServer':function(CNewCandidateSignUpRequest,fnPostLoginRedirection){TriSysApex['UI']['ShowWait'](null,'Registering...');var payloadObject={};payloadObject['URL']='Security/RegisterCandidate',payloadObject['OutboundDataPacket']=CNewCandidateSignUpRequest,payloadObject['InboundDataFunction']=function(CNewCandidateSignUpResponse){TriSysApex['UI']['HideWait']();if(CNewCandidateSignUpResponse){if(CNewCandidateSignUpResponse['Success']){var sMessage=TriSysSDK['Resources']['Message']('TriSysWeb.Pages.CandidateRegistration.SubmitToServer');sMessage=sMessage['replace']('##EMail##',CNewCandidateSignUpRequest['EMail']),TriSysApex['UI']['ShowMessage'](sMessage,TriSysWebJobs['Constants']['ApplicationName'],fnPostLoginRedirection);}else TriSysApex['UI']['errorAlert'](CNewCandidateSignUpResponse['ErrorMessage'],TriSysWebJobs['Constants']['ApplicationName']);}else TriSysApex['UI']['ShowMessage']('No\x20response\x20from\x20'+payloadObject['URL'],TriSysWebJobs['Constants']['ApplicationName']);return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('TriSysWebJobs.CandidateRegistration.SubmitToServer:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'ProcessGUIDConfirmation':function(sGUID,fnSuccess,fnFailure){if(sGUID){TriSysApex['UI']['ShowWait'](null,'Confirming\x20Registration...');var sURL=TriSysWebJobs['Constants']['HomePage']+'/?webjobs='+TriSysWebJobs['Agency']['CustomerID'],sContactComments='Registered\x20at\x20'+sURL+'\x20on\x20'+moment()['format']('dddd\x20DD\x20MMMM\x20YYYY'),CConfirmCandidateSignUpRequest={'EMailGUIDKey':sGUID,'Comments':sContactComments,'SiteURL':sURL,'WebJobsRequest':TriSysWebJobs['Agency']['WebJobsRequest']()},payloadObject={};return payloadObject['URL']='Security/RegisterCandidateConfirmation',payloadObject['OutboundDataPacket']=CConfirmCandidateSignUpRequest,payloadObject['InboundDataFunction']=function(CConfirmCandidateSignUpResponse){TriSysApex['UI']['HideWait']();var sError=null;if(CConfirmCandidateSignUpResponse){if(CConfirmCandidateSignUpResponse['Success']){if(CConfirmCandidateSignUpResponse['RequirementId']>0x0)TriSysWebJobs['Vacancies']['RequirementId']=CConfirmCandidateSignUpResponse['RequirementId'];fnSuccess(CConfirmCandidateSignUpResponse['Name'],CConfirmCandidateSignUpResponse['EMail'],CConfirmCandidateSignUpResponse['Password']);return;}else sError=CConfirmCandidateSignUpResponse['ErrorMessage'];}else sError='No\x20response\x20from\x20'+payloadObject['URL'];fnFailure(sError);},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),fnFailure('TriSysWeb.Pages.CandidateRegistration.ProcessGUIDConfirmation:\x20'+request+',\x20'+status+',\x20'+error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject),!![];}return![];}},'ContactUs':{'LoadLoggedInUserDetails':function(fnCallback,bCandidate){var payloadObject={};payloadObject['URL']='Contact/ReadLoggedIn'+(bCandidate?'Candidate':'Client'),payloadObject['OutboundDataPacket']=null,payloadObject['InboundDataFunction']=function(CReadDuplicateCandidateResponse){if(CReadDuplicateCandidateResponse){if(CReadDuplicateCandidateResponse['Success']){if(bCandidate){var candidate=CReadDuplicateCandidateResponse['Candidate'];fnCallback(candidate);}else{var CReadLoggedInClientResponse=CReadDuplicateCandidateResponse,client=CReadLoggedInClientResponse['Client'];fnCallback(client);}}}},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'Security':{'CacheLoginCredentialsAsCookies':function(sLoginEMail,sPassword,bRememberMe){var sLoginCookie=TriSysWebJobs['Security']['CookieName']('EMail'),sPasswordCookie=TriSysWebJobs['Security']['CookieName']('Password');if(bRememberMe){if(sLoginEMail&&sPassword){sLoginEMail=TriSysAPI['Encryption']['encrypt'](sLoginEMail,TriSysWebJobs['Security']['EncryptionKey']),sPassword=TriSysAPI['Encryption']['encrypt'](sPassword,TriSysWebJobs['Security']['EncryptionKey']),TriSysAPI['Cookies']['setCookie'](sLoginCookie,sLoginEMail),TriSysAPI['Cookies']['setCookie'](sPasswordCookie,sPassword);return;}}TriSysAPI['Cookies']['Delete'](sLoginCookie),TriSysAPI['Cookies']['Delete'](sPasswordCookie);},'CachedEMail':function(){var sLoginCookie=TriSysWebJobs['Security']['CookieName']('EMail'),sEMail=TriSysAPI['Cookies']['getCookie'](sLoginCookie);if(sEMail)sEMail=TriSysAPI['Encryption']['decrypt'](sEMail,TriSysWebJobs['Security']['EncryptionKey']);return sEMail;},'CachedPassword':function(){var sPasswordCookie=TriSysWebJobs['Security']['CookieName']('Password'),sPassword=TriSysAPI['Cookies']['getCookie'](sPasswordCookie);if(sPassword)sPassword=TriSysAPI['Encryption']['decrypt'](sPassword,TriSysWebJobs['Security']['EncryptionKey']);return sPassword;},'CookieName':function(sName){var sCookiePrefix=TriSysWebJobs['Security']['CookiePrefixForCustomer']();sName=sCookiePrefix+sName;if(sName)sName=sName['toLowerCase']();return sName;},'CookiePrefixForCustomer':function(){var sCookiePrefix=TriSysWebJobs['Constants']['CookiePrefix']+TriSysWebJobs['Agency']['CustomerID']+'-';return sCookiePrefix;},'CachePostLoginFormName':function(sPostLoginFormName){var sPostLoginFormNameCookie=TriSysWebJobs['Security']['CookieName']('PostLoginFormName');TriSysAPI['Cookies']['setCookie'](sPostLoginFormNameCookie,sPostLoginFormName);},'CachedPostLoginFormName':function(){var sPostLoginFormNameCookie=TriSysWebJobs['Security']['CookieName']('PostLoginFormName'),sPostLoginFormName=TriSysAPI['Cookies']['getCookie'](sPostLoginFormNameCookie);return sPostLoginFormName;},'EncryptionKey':0x0+0x1+0x5-0x2+0x3-0x0*0x1},'Mapping':{'Framework':{'LoadMaps':function(fnCallback){if(TriSysWebJobs['Mapping']['Framework']['MapsLoaded'])fnCallback();else{var sGoogleMapURL='https://maps.googleapis.com/maps/api/js?key='+TriSysWebJobs['Mapping']['Framework']['GoogleAPIKey'],scripts=[sGoogleMapURL];LazyLoad['js'](scripts,function(){TriSysWebJobs['Mapping']['Framework']['MapsLoaded']=!![],fnCallback();});}},'GoogleAPIKey':'AIzaSyCBbBAkZJu8yCMHtXmrPv5_wlspdpMgdyU','MapsLoaded':![]},'PopulateMapCallback':function(dataWithLatitudeLongitudeResult,sMapDivTag,bPlacements,bClient){if(!dataWithLatitudeLongitudeResult)return;var vacancies=dataWithLatitudeLongitudeResult['Vacancies'];if(bPlacements)vacancies=dataWithLatitudeLongitudeResult['Placements'];if(!vacancies)return;if(vacancies['length']===0x0)return;var iWest=0x0,iEast=0x0,iNorth=0x0,iSouth=0x0;for(var i=0x0;i<vacancies['length'];i++){var vacancy=vacancies[i];if(vacancy['Latitude']!==0x0&&vacancy['Longitude']!==0x0){if(iWest===0x0||iWest>vacancy['Latitude'])iWest=vacancy['Latitude'];if(iEast===0x0||iEast<vacancy['Latitude'])iEast=vacancy['Latitude'];if(iNorth===0x0||iNorth>vacancy['Longitude'])iNorth=vacancy['Longitude'];if(iSouth===0x0||iSouth<vacancy['Longitude'])iSouth=vacancy['Longitude'];}}var iLatitude=(iWest+iEast)/0x2,iLongitude=(iNorth+iSouth)/0x2;iLatitude==0x0&&iLongitude==0x0&&(iLatitude=51.3,iLongitude=0.08);var centrePosition=null;try{centrePosition=new google['maps']['LatLng'](iLatitude,iLongitude);}catch(err){TriSysApex['UI']['ShowError'](err,'Google\x20Maps\x20Error');return;}for(var i=0x0;i<vacancies['length'];i++){var vacancy=vacancies[i];if(vacancy['Latitude']!=0x0&&vacancy['Longitude']!=0x0){var bFound=![];for(var k=0x0;k<vacancies['length'];k++){var vacancy2=vacancies[k];if(vacancy['Latitude']==vacancy2['Latitude']&&vacancy['Longitude']==vacancy2['Longitude']){var iLatRandom=Math['random']()/0x64,iLongRandom=Math['random']()/0x64,iMultiplier1=Math['random']()>0.5?0x1:-0x1,iMultiplier2=Math['random']()>0.5?-0x1:0x1;vacancy['Latitude']+=iLatRandom*iMultiplier1,vacancy['Longitude']+=iLongRandom*iMultiplier2;break;}}}}var mapOptions={'center':centrePosition,'zoom':0x7},mapObject=null;try{mapObject=new google['maps']['Map'](document['getElementById'](sMapDivTag),mapOptions);}catch(e){TriSysApex['UI']['ErrorMessage'](e,'Google\x20Maps');}var markerArrayInMemory=[],geocoder=new google['maps']['Geocoder'](),getCountry=function(vacancy){var sCity=vacancy['Location'];geocoder['geocode']({'address':sCity+','+vacancy['Country']},function(results,status){if(status==google['maps']['GeocoderStatus']['OK']){var position=results[0x0]['geometry']['location'];vacancy['Latitude']=position['lat'](),vacancy['Longitude']=position['lng'](),TriSysWebJobs['Mapping']['AddMarkerToMap'](markerArrayInMemory,vacancy,mapObject,bPlacements,bClient);}else console['log']('Geocode\x20was\x20not\x20successful\x20for\x20the\x20following\x20reason:\x20'+status);});};for(var i=0x0;i<vacancies['length'];i++){var vacancy=vacancies[i];vacancy['Latitude']==0x0&&vacancy['Longitude']==0x0&&vacancy['Country']?getCountry(vacancy):TriSysWebJobs['Mapping']['AddMarkerToMap'](markerArrayInMemory,vacancy,mapObject,bPlacements,bClient);}setTimeout(function(){TriSysWebJobs['Mapping']['AddMarkerCallbacks'](markerArrayInMemory,mapObject);},0x7d0);},'AddMarkerCallbacks':function(markerArrayInMemory,mapObject){for(var i=0x0;i<markerArrayInMemory['length'];i++){var arrayItem=markerArrayInMemory[i];google['maps']['event']['addListener'](arrayItem['myMarker'],'click',function(){TriSysWebJobs['Mapping']['MapMarkerClickCallback'](markerArrayInMemory,this,mapObject);});}},'DrillIntoRequirementFunction':'TriSysWebJobs.Vacancies.DrillIntoRequirement(','DrillIntoPlacementFunction':'TriSysWebJobs.Placement.Open(','AddMarkerToMap':function(markerArrayInMemory,vacancy,map,bPlacements,bClient){var markerPosition=new google['maps']['LatLng'](vacancy['Latitude'],vacancy['Longitude']),sTitle=vacancy['Reference']+':\x20'+vacancy['JobTitle'],marker=new google['maps']['Marker']({'position':markerPosition,'map':map,'title':sTitle}),sPinPrefix='https://apex.trisys.co.uk/images/trisys/maps/pin-',sPin='red';switch(vacancy['Type']){case'Permanent':break;case'Contract':sPin='green';break;case'Temp':case'Temporary':sPin='pink';break;}sPin=sPinPrefix+sPin+'.png',marker['setIcon'](sPin),marker['setOpacity'](0.7);var sDrillDownType=bClient?',\x20true':'',sFunctionDrillDown=TriSysWebJobs['Mapping']['DrillIntoRequirementFunction']+vacancy['RequirementId']+sDrillDownType+')',sDivID=vacancy['RequirementId'];bPlacements&&(sFunctionDrillDown=TriSysWebJobs['Mapping']['DrillIntoPlacementFunction']+vacancy['PlacementId']+sDrillDownType+')',sDivID=vacancy['PlacementId']);var sHyperlink='<a\x20onclick=\x22'+sFunctionDrillDown+'\x22'+'>'+vacancy['Reference']+':\x20'+vacancy['JobTitle']+'</a>',jobInfo='<div\x20id=\x22divRequirement-'+sDivID+'\x22\x20style=\x22width:\x20400px;\x20text-align:\x20left;\x22>'+'\x20<h5>'+sHyperlink+'</h5>'+'\x20<h6>'+vacancy['Type']+'\x20</h6>';if(bPlacements)jobInfo+='\x20<p>'+vacancy['Company']+'\x20</p>';jobInfo+='\x20<p>'+vacancy['Location']+'\x20</p>';if(vacancy['Description'])jobInfo+='\x20<p>'+vacancy['Description']+'\x20</p>';jobInfo+='</div>';var jobInfoWindow=new google['maps']['InfoWindow']({'content':jobInfo}),iIndex=markerArrayInMemory['length']+0x1,arrayItem={'myMarker':marker,'myJobInfo':jobInfo,'myJobInfoWindow':jobInfoWindow,'myIndex':iIndex,'myTitle':sTitle,'myVacancy':vacancy};markerArrayInMemory['push'](arrayItem);},'MapMarkerClickCallback':function(markerArrayInMemory,myMarker,mapObject){if(mapObject){var sTitle=myMarker['title'];for(var i=0x0;i<markerArrayInMemory['length'];i++){var arrayItem=markerArrayInMemory[i];if(sTitle==arrayItem['myTitle']){arrayItem['myJobInfoWindow']['open'](mapObject,arrayItem['myMarker']);return;}}}},'PopulateVacanciesMap':function(vacancies,sMapID,sShowInGridMenu,fnShowOnMap){if(!vacancies)return;if(vacancies['length']==0x0)return;var lst=[];for(var i=0x0;i<vacancies['length'];i++)lst['push'](vacancies[i]['RequirementId']);TriSysWebJobs['Mapping']['MappingData']['CVacanciesWithLatitudeLongitudeResult']=null,TriSysWebJobs['Mapping']['MappingData']['MapID']=sMapID;var CVacanciesWithLatitudeLongitudeRequest={'RequirementIdList':lst,'Limit':0x64},payloadObject={};payloadObject['URL']='Vacancy/SearchMapData',payloadObject['OutboundDataPacket']=CVacanciesWithLatitudeLongitudeRequest,payloadObject['InboundDataFunction']=function(CVacanciesWithLatitudeLongitudeResult){if(CVacanciesWithLatitudeLongitudeResult){if(CVacanciesWithLatitudeLongitudeResult['Success']){TriSysWebJobs['Mapping']['MappingData']['CVacanciesWithLatitudeLongitudeResult']=CVacanciesWithLatitudeLongitudeResult;var bShowOnMap=!sShowInGridMenu||$('#'+sShowInGridMenu)['is'](':visible');if(bShowOnMap)TriSysWebJobs['Mapping']['Framework']['LoadMaps'](function(){fnShowOnMap(CVacanciesWithLatitudeLongitudeResult);});}else $('#'+sMapID)['hide']();}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){$('#'+sMapID)['hide']();},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'PopulatePlacementsMap':function(placements,sMapID,sShowInGridMenu,fnShowOnMap){if(!placements)return;if(placements['length']==0x0)return;var lst=[];for(var i=0x0;i<placements['length'];i++)lst['push'](placements[i]['PlacementId']);TriSysWebJobs['Mapping']['MappingData']['CVacanciesWithLatitudeLongitudeResult']=null,TriSysWebJobs['Mapping']['MappingData']['MapID']=sMapID;var CPlacementsWithLatitudeLongitudeRequest={'PlacementIdList':lst,'Limit':0x64},payloadObject={};payloadObject['URL']='Placements/MapData',payloadObject['OutboundDataPacket']=CPlacementsWithLatitudeLongitudeRequest,payloadObject['InboundDataFunction']=function(CPlacementsWithLatitudeLongitudeResponse){if(CPlacementsWithLatitudeLongitudeResponse){if(CPlacementsWithLatitudeLongitudeResponse['Success']){TriSysWebJobs['Mapping']['MappingData']['CVacanciesWithLatitudeLongitudeResult']=CPlacementsWithLatitudeLongitudeResponse;var bShowOnMap=!sShowInGridMenu||$('#'+sShowInGridMenu)['is'](':visible');if(bShowOnMap)TriSysWebJobs['Mapping']['Framework']['LoadMaps'](function(){fnShowOnMap(CPlacementsWithLatitudeLongitudeResponse);});}else $('#'+sMapID)['hide']();}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){$('#'+sMapID)['hide']();},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'MappingData':{'CVacanciesWithLatitudeLongitudeResult':null,'MapID':null,'Draw':function(bPlacements,mappingData,bClient){!mappingData&&(mappingData={'MapID':TriSysWebJobs['Mapping']['MappingData']['MapID'],'Data':TriSysWebJobs['Mapping']['MappingData']['CVacanciesWithLatitudeLongitudeResult']}),$('#'+mappingData['MapID'])['show'](),TriSysWebJobs['Mapping']['Framework']['LoadMaps'](function(){TriSysWebJobs['Mapping']['PopulateMapCallback'](mappingData['Data'],mappingData['MapID'],bPlacements,bClient);});}}},'Vacancies':{'RequirementId':0x0,'DrillIntoRequirement':function(lRequirementId,bClientDrillDown){TriSysWebJobs['Vacancies']['RequirementId']=lRequirementId;var sForm=bClientDrillDown?'ClientVacancy':'CandidateVacancy';TriSysApex['FormsManager']['OpenForm'](sForm,lRequirementId,!![]);},'Columns':[{'field':'RequirementId','title':'ID','type':'number','hidden':!![]},{'field':'Reference','title':'Reference','type':'string'},{'field':'JobTitle','title':'Job\x20Title','type':'string'},{'field':'Location','title':'Location','type':'string'},{'field':'Type','title':'Type','type':'string'},{'field':'StartDate','title':'Start\x20Date','type':'date','format':'{0:dd\x20MMM\x20yyyy}','width':0x82},{'field':'Salary','title':'Salary/Rate','type':'string'}],'PopulateGrid':function(sGridDiv,fnPopulationByFunction,bDateFavourited,bApplicationFields,bClientDrillDown){var sKeyField='RequirementId',columns=TriSysWebJobs['Vacancies']['Columns'];columns=JSON['parse'](JSON['stringify'](columns));var mobileVisibleColumns=[{'field':'Reference','title':'Job\x20Details'}],mobileRowTemplate='<td\x20colspan=\x221\x22><strong>#:\x20Reference\x20#\x20(#:\x20Type\x20#)</strong><br\x20/>#:\x20JobTitle\x20#<br\x20/><i>#:\x20Location\x20#</i><br\x20/>'+'#:\x20Salary\x20#<br\x20/>Start\x20Date:\x20#:\x20kendo.format(\x22{0:dd\x20MMM\x20yyyy}\x22,\x20StartDate)\x20#<hr></td>';if(bDateFavourited)columns['push']({'field':'DateFavourited','title':'Favourited','type':'date','format':'{0:dd\x20MMM\x20yyyy}','width':0x82});bApplicationFields&&(columns['push']({'field':'DateShortlisted','title':'Shortlisted','type':'date','format':'{0:dd\x20MMM\x20yyyy}','width':0x82}),columns['push']({'field':'CurrentStage','title':'Current\x20Stage','type':'string'}),columns['push']({'field':'CurrentStageDate','title':'Stage\x20Date','type':'date','format':'{0:dd\x20MMM\x20yyyy}','width':0x82}));var bMultiRowSelect=!TriSysApex['Device']['isPhone'](),gridLayout={'Div':sGridDiv,'ID':sGridDiv+'grd','Title':'Vacancies','RecordsPerPage':TriSysApex['UserOptions']['RecordsPerPage'](),'PopulationByFunction':fnPopulationByFunction,'Columns':columns,'MobileVisibleColumns':mobileVisibleColumns,'MobileRowTemplate':mobileRowTemplate,'KeyColumnName':sKeyField,'DrillDownFunction':function(rowData){TriSysWebJobs['Vacancies']['DrillIntoRequirement'](rowData['RequirementId'],bClientDrillDown);},'MultiRowSelect':bMultiRowSelect,'Grouping':TriSysApex['UserOptions']['GridGrouping'](),'ColumnFilters':!![],'OpenButtonCaption':'View'};TriSysSDK['Grid']['VirtualMode'](gridLayout);},'SendToFriend':function(sGridID){var lstRequirementId=TriSysWebJobs['Vacancies']['SelectVacancyListFromGrid'](sGridID);if(!lstRequirementId)return;var sReference=null,sJobTitle=null;lstRequirementId['length']==0x1&&(sReference=TriSysSDK['Grid']['GetSelectedSingletonRowFieldValueFromGrid'](sGridID,'Reference'),sJobTitle=TriSysSDK['Grid']['GetSelectedSingletonRowFieldValueFromGrid'](sGridID,'JobTitle')),TriSysWebJobs['Vacancies']['SendMultipleVacanciesToFriend'](lstRequirementId,sReference,sJobTitle);},'SendMultipleVacanciesToFriend':function(lstRequirementId,sReference,sJobTitle){TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['Reference']=sReference,TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['JobTitle']=sJobTitle,TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['RequirementId']=lstRequirementId;var sTitle='Send\x20Vacanc'+(lstRequirementId['length']==0x1?'y':'ies')+'\x20to\x20Friend',sButtonSendText='Send',fnSendJob=function(){return ctrlSendCandidateVacancyToFriend['SendJob']();},fnCancelSend=function(){return!![];},parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=sTitle,parametersObject['Resizable']=![],parametersObject['Maximize']=![],parametersObject['Image']='fa-envelope-o',parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'ctrlSendCandidateVacancyToFriend.html',parametersObject['ButtonLeftText']=sButtonSendText,parametersObject['ButtonLeftFunction']=fnSendJob,parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftWidth']=0x64,parametersObject['ButtonRightWidth']=0x64,parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightFunction']=fnCancelSend,TriSysApex['UI']['PopupMessage'](parametersObject);},'MultipleSelectedVacancies':{'Reference':null,'JobTitle':null,'RequirementId':[]},'AfterAddToFavourite':function(){var sMessage='Added\x20to\x20Favourites.<br\x20/>View\x20all\x20favourite\x20vacancies?';TriSysApex['UI']['questionYesNo'](sMessage,TriSysWebJobs['Constants']['ApplicationName'],'Yes',function(){return TriSysApex['FormsManager']['OpenForm'](TriSysWebJobs['Constants']['CandidateFavouriteVacanciesForm'],0x0,!![]),!![];},'No');},'AddToFavourites':function(sGridID,fnCallback,lRequirementId){var lstRequirementId=[lRequirementId];if(sGridID){var lstRequirementId=TriSysWebJobs['Vacancies']['SelectVacancyListFromGrid'](sGridID);if(!lstRequirementId)return;}for(var i in lstRequirementId){var lRequirementId=lstRequirementId[i];TriSysWebJobs['Vacancies']['AddFavouriteRequirementToCookie'](lRequirementId);}TriSysWebJobs['Vacancies']['AddToRemoveFromFavouritesThroughWebAPI'](lstRequirementId,!![],fnCallback);},'FavouriteCookieName':'CandidateFavouriteVacancies.Vacancies','AddFavouriteRequirementToCookie':function(lRequirementId){var favouriteItem={'RequirementId':lRequirementId,'Favourited':new Date()},favourites=TriSysAPI['Persistence']['Read'](TriSysWebJobs['Security']['CookieName'](TriSysWebJobs['Vacancies']['FavouriteCookieName']));if(Array['isArray'](favourites))favourites['push'](favouriteItem);else favourites=[favouriteItem];TriSysAPI['Persistence']['Write'](TriSysWebJobs['Security']['CookieName'](TriSysWebJobs['Vacancies']['FavouriteCookieName']),favourites);},'RemoveFavouriteRequirementFromCookie':function(lRequirementId){var favourites=TriSysAPI['Persistence']['Read'](TriSysWebJobs['Security']['CookieName'](TriSysWebJobs['Vacancies']['FavouriteCookieName']));if(favourites){var newList=[];for(var i in favourites){var favouriteItem=favourites[i];if(favouriteItem['RequirementId']!=lRequirementId)newList['push'](favouriteItem);}favourites=newList;}else favourites=[];TriSysAPI['Persistence']['Write'](TriSysWebJobs['Security']['CookieName'](TriSysWebJobs['Vacancies']['FavouriteCookieName']),favourites);},'RemoveFromFavourites':function(sGridID,fnCallback){var lstRequirementId=TriSysWebJobs['Vacancies']['SelectVacancyListFromGrid'](sGridID);if(!lstRequirementId)return;for(var i in lstRequirementId){var lRequirementId=lstRequirementId[i];TriSysWebJobs['Vacancies']['RemoveFavouriteRequirementFromCookie'](lRequirementId);}TriSysWebJobs['Vacancies']['AddToRemoveFromFavouritesThroughWebAPI'](lstRequirementId,![],fnCallback);},'SelectVacancyListFromGrid':function(sGridID){var lstRequirementId=TriSysSDK['Grid']['GetSelectedMultipleRowsFromGrid'](sGridID,'RequirementId');if(!lstRequirementId||lstRequirementId['length']==0x0){var sMessage='Please\x20select\x20one\x20or\x20more\x20vacancies.';return TriSysApex['UI']['ShowMessage'](sMessage,TriSysWebJobs['Constants']['ApplicationName']),null;}return lstRequirementId;},'AddToRemoveFromFavouritesThroughWebAPI':function(lstRequirementId,bAdd,fnCallback){var CVacancyAddFavouritesRequest={'RequirementIdList':lstRequirementId},payloadObject={};payloadObject['URL']='Vacancy/'+(bAdd?'AddFavourites':'DeleteFavourites'),payloadObject['OutboundDataPacket']=CVacancyAddFavouritesRequest,payloadObject['InboundDataFunction']=function(CVacancyAddFavouritesResponse){TriSysApex['UI']['HideWait']();if(CVacancyAddFavouritesResponse){if(CVacancyAddFavouritesResponse['Success']){}}if(fnCallback)fnCallback();return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('TriSysWebJobs.Vacancies.AddToRemoveFromFavouritesThroughWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);};var iNumberOfJobs=lstRequirementId['length'],sWaitMessage='Favouriting\x20'+iNumberOfJobs+'\x20Vacancies'+(iNumberOfJobs>0x1?'s':'')+'...';TriSysApex['UI']['ShowWait'](null,sWaitMessage),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'VacancyApplications':{'ApplyFromGrid':function(sGridID){var lstRequirementId=TriSysWebJobs['Vacancies']['SelectVacancyListFromGrid'](sGridID);if(!lstRequirementId)return;var sReference=null,sJobTitle=null;lstRequirementId['length']==0x1&&(sReference=TriSysSDK['Grid']['GetSelectedSingletonRowFieldValueFromGrid'](sGridID,'Reference'),sJobTitle=TriSysSDK['Grid']['GetSelectedSingletonRowFieldValueFromGrid'](sGridID,'JobTitle')),TriSysWebJobs['VacancyApplications']['ApplyToMultipleVacancies'](lstRequirementId,sReference,sJobTitle);},'ApplyToMultipleVacancies':function(lstRequirementId,sReference,sJobTitle){var iCount=lstRequirementId['length'];TriSysWebJobs['Vacancies']['RequirementId']=iCount>0x0?lstRequirementId[0x0]:0x0;var fnWhenLoggedIn=function(){TriSysWebJobs['VacancyApplications']['ApplyToMultipleVacanciesWhenLoggedIn'](lstRequirementId,sReference,sJobTitle);},fnWhenNotLoggedIn=function(){var sMessage='Please\x20login\x20(or\x20register)\x20before\x20applying\x20to\x20vacancies.',loginCallback=function(){return TriSysApex['FormsManager']['OpenForm'](TriSysWebJobs['Constants']['CandidateLoginForm'],0x0,!![]),!![];},registerCallback=function(){return TriSysApex['FormsManager']['OpenForm'](TriSysWebJobs['Constants']['CandidateRegistrationForm'],0x0,!![]),!![];},cancelCallback=function(){return!![];};TriSysApex['UI']['questionYesNoCancel'](sMessage,TriSysWebJobs['Constants']['ApplicationName'],'Login',loginCallback,'Register',registerCallback,'Cancel',cancelCallback);};TriSysWebJobs['CandidateLogin']['isLoggedInCheck'](fnWhenLoggedIn,fnWhenNotLoggedIn);},'ApplyToMultipleVacanciesWhenLoggedIn':function(lstRequirementId,sReference,sJobTitle){TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['Reference']=sReference,TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['JobTitle']=sJobTitle,TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['RequirementId']=lstRequirementId;var sTitle='Apply\x20to\x20Vacanc'+(lstRequirementId['length']==0x1?'y':'ies'),sButtonSendText='Apply',fnApplyToJob=function(){return ctrlApplyToVacancy['Apply']();},fnCancel=function(){return!![];},parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=sTitle,parametersObject['Height']=0x226,parametersObject['Resizable']=![],parametersObject['Maximize']=![],parametersObject['Image']='gi-ok_2',parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'ctrlApplyToVacancy.html',parametersObject['ButtonLeftText']=sButtonSendText,parametersObject['ButtonLeftFunction']=fnApplyToJob,parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftWidth']=0x64,parametersObject['ButtonRightWidth']=0x64,parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightFunction']=fnCancel,TriSysApex['UI']['PopupMessage'](parametersObject);},'WithdrawFromGrid':function(sGridID){var lstRequirementId=TriSysWebJobs['Vacancies']['SelectVacancyListFromGrid'](sGridID);if(!lstRequirementId)return;var sReference=null,sJobTitle=null;lstRequirementId['length']==0x1&&(sReference=TriSysSDK['Grid']['GetSelectedSingletonRowFieldValueFromGrid'](sGridID,'Reference'),sJobTitle=TriSysSDK['Grid']['GetSelectedSingletonRowFieldValueFromGrid'](sGridID,'JobTitle')),TriSysWebJobs['VacancyApplications']['WithdrawFromMultipleVacancies'](lstRequirementId,sReference,sJobTitle);},'WithdrawFromMultipleVacancies':function(lstRequirementId,sReference,sJobTitle){TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['Reference']=sReference,TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['JobTitle']=sJobTitle,TriSysWebJobs['Vacancies']['MultipleSelectedVacancies']['RequirementId']=lstRequirementId;var sTitle='Withdraw\x20Vacancy\x20Application'+(lstRequirementId['length']==0x1?'':'s'),sButtonSendText='Confirm\x20Withdrawal',fnWithdrawFromJob=function(){return ctrlWithdrawVacancyApplication['Withdraw']();},fnCancel=function(){return!![];},parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=sTitle,parametersObject['Height']=0x226,parametersObject['Resizable']=![],parametersObject['Maximize']=![],parametersObject['Image']='gi-remove_2',parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'ctrlWithdrawVacancyApplication.html',parametersObject['ButtonLeftText']=sButtonSendText,parametersObject['ButtonLeftFunction']=fnWithdrawFromJob,parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftWidth']=0x64,parametersObject['ButtonRightWidth']=0x64,parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightFunction']=fnCancel,TriSysApex['UI']['PopupMessage'](parametersObject);}},'Placement':{'PlacementId':0x0,'Open':function(lPlacementId,bClientDrillDown){TriSysWebJobs['Placement']['PlacementId']=lPlacementId;var sForm=bClientDrillDown?'ClientPlacement':'CandidatePlacement';TriSysApex['FormsManager']['OpenForm'](sForm,lPlacementId,!![]);}},'Timesheet':{'TimesheetId':0x0,'Open':function(lTimesheetId,bClient){TriSysWebJobs['Timesheet']['TimesheetId']=lTimesheetId;var sForm=(bClient?'Client':'Candidate')+'Timesheet';TriSysApex['FormsManager']['OpenForm'](sForm,lTimesheetId,!![]);},'PopulateGrid':function(CTimesheetResponse,divTag,bEditable,sSuffix){var intervals=CTimesheetResponse['PeriodIntervals'],rates=CTimesheetResponse['Rates'],hours=CTimesheetResponse['Hours'],iPeriodWidth=0x8c,iHoursWidth=0x6e;(TriSysApex['Device']['isPhone']()||TriSysApex['Device']['isTablet']())&&(iPeriodWidth=0x6e,iHoursWidth=0x5a);var sWidthPeriod='width:'+iPeriodWidth+'px;',sHoursWidth=iHoursWidth+'px',sVerticalAlignStyleTop='vertical-align:\x20top;',verticalAlignStylePeriod={'style':sVerticalAlignStyleTop+sWidthPeriod},verticalAlignStyle={'style':sVerticalAlignStyleTop},DailyTotalStyle={'style':'text-align:right;\x20'+sVerticalAlignStyleTop},fields={'TimeSheetPeriodIntervalId':{'editable':![]},'period':{'editable':![]}},periodColumn={'field':'period','title':'<b>Interval</b>','headerAttributes':verticalAlignStylePeriod,'attributes':verticalAlignStylePeriod,'footerAttributes':verticalAlignStylePeriod};(TriSysApex['Device']['isPhone']()||TriSysApex['Device']['isTablet']())&&(periodColumn['locked']=!![],periodColumn['width']=iPeriodWidth);var columns=[{'field':'TimeSheetPeriodIntervalId','title':'ID','hidden':!![]},periodColumn],aggregates=[],rowTotalTemplate='',sStyle='text-align:right;\x20word-break:\x20break-all;\x20white-space:\x20normal;',rightAlignAttribute={'style':sStyle};for(var iColumn=0x0;iColumn<rates['length'];iColumn++){var rate=rates[iColumn],sColumnHeader='<b>'+rate['Rate']+'</b>'+(rate['Notes']?'<br\x20/><small>'+rate['Notes']+'</small>':''),sColumnName='ID'+rate['PlacementRateId'],sRateDescription=rate['RateDescription'],sRateNotes=rate['Notes'],dynamicField={'type':'number','validation':{'min':0x0,'max':0x12,'step':0.01},'editable':bEditable};fields[sColumnName]=dynamicField;var dynamicColumn={'field':sColumnName,'title':sColumnHeader,'format':'{0:n2}','decimals':0x2,'width':sHoursWidth,'footerTemplate':'<div\x20style=\x22float:\x20right\x22>#=\x20kendo.format(\x22{0:n2}\x22,sum)\x20#\x20</div>','attributes':rightAlignAttribute,'headerAttributes':{'style':sStyle+'\x20vertical-align:top;\x20height:\x2030px;','title':sRateDescription+'\x0d\x0a'+sRateNotes},'editor':function(container,options){var input=$('<input\x20name=\x22'+options['field']+'\x22\x20required=\x22required\x22\x20/>');input['appendTo'](container),input['kendoNumericTextBox']({'min':0x0,'max':0x12,'step':0.25});var tooltipElement=$('<span\x20class=\x22k-invalid-msg\x22\x20data-for=\x22'+options['field']+'\x22></span>');tooltipElement['appendTo'](container);}};columns['push'](dynamicColumn);var aggregate={'field':sColumnName,'aggregate':'sum'};aggregates['push'](aggregate);if(rowTotalTemplate['length']>0x0)rowTotalTemplate+='\x20+\x20';rowTotalTemplate+='data.'+sColumnName;}var rowTotal={'type':'number','editable':![]};fields['Total']=rowTotal;if(!sSuffix)sSuffix='';var dailyTotalColumn={'field':'Total','title':'<b>Daily\x20Total</b>','format':'{0:n2}','decimals':0x2,'width':sHoursWidth,'template':'<b>#=\x20kendo.format(\x22{0:n2}\x22,\x20'+rowTotalTemplate+')\x20#</b>','footerTemplate':'<div\x20style=\x22float:\x20right\x22>#=\x20kendo.format(\x22{0:n2}\x22,\x20TriSysWebJobs.Timesheet.ReCalculateAfterHoursChangeEvent(\x22'+divTag+'\x22,\x20\x22ID\x22'+',\x22'+sSuffix+'\x22)\x20)\x20#\x20</div>','attributes':rightAlignAttribute,'headerAttributes':DailyTotalStyle};columns['push'](dailyTotalColumn);var aggregateTotal={'field':'Total','aggregate':'sum'};aggregates['push'](aggregateTotal);var gridData=[];for(var iDate=0x0;iDate<intervals['length'];iDate++){var interval=intervals[iDate],gridRow={'TimeSheetPeriodIntervalId':interval['TimeSheetPeriodIntervalId'],'period':interval['IntervalPeriod']};for(var iColumn=0x0;iColumn<rates['length'];iColumn++){var rate=rates[iColumn],sColumnHeader=rate['Rate'],sColumnName='ID'+rate['PlacementRateId'],fHoursValue=0x0;for(iHours=0x0;iHours<hours['length'];iHours++){var hour=hours[iHours];if(hour['TimeSheetPeriodIntervalId']==interval['TimeSheetPeriodIntervalId']&&hour['PlacementRateId']==rate['PlacementRateId'])fHoursValue=hour['DailyHours'];}gridRow[sColumnName]=fHoursValue;}gridData['push'](gridRow);}changeSyncEventUID='',changeSyncEventIndex=0x0;var iMaxDaysInMonth=0x23,dataSource=new kendo['data']['DataSource']({'pageSize':iMaxDaysInMonth,'data':gridData,'autoSync':!![],'schema':{'model':{'id':'TimeSheetPeriodIntervalId','fields':fields}},'aggregate':aggregates,'change':function(e){if(e['action']=='sync')try{var currentlyFocusedCell=$('#'+divTag)['data']('kendoGrid')['current']();changeSyncEventUID=currentlyFocusedCell['closest']('tr')['attr']('data-uid'),changeSyncEventIndex=currentlyFocusedCell['closest']('tr')['find']('td')['index'](currentlyFocusedCell);}catch(e){changeSyncEventIndex=-0x1;}}});$('#'+divTag)['kendoGrid']({'dataSource':dataSource,'columns':columns,'editable':!![],'scrollable':![],'navigatable':!![],'dataBound':function(e){if(changeSyncEventIndex>=0x0&&changeSyncEventUID!=''){var cellToSelect=$('#'+divTag+'\x20tbody\x20tr[data-uid='+changeSyncEventUID+']\x20td')[changeSyncEventIndex];cellToSelect&&setTimeout(function(){changeSyncEventIndex+=0x1;var cellToSelect=$('#'+divTag+'\x20tbody\x20tr[data-uid='+changeSyncEventUID+']\x20td')[changeSyncEventIndex];if(cellToSelect){var grid=$('#'+divTag)['data']('kendoGrid');grid['current']($(cellToSelect)),grid['editCell']($(cellToSelect));}},0x64);}},'dataBinding':function(){var rows=this['tbody']['children']();for(var i=0x0;i<rows['length'];i++){kendo['unbind'](rows[i]);}}}),$('.k-grid-content')['css']('overflow-x','auto'),$('.k-grid-content')['css']('height',''),$('.k-grid-footer\x20tr\x20td')['css']('border-top','1px\x20solid\x20lightgray');},'ReCalculateAfterHoursChangeEvent':function(divTag,sCalculateColumnFieldPrefix,sSuffix){var fTotalHoursForColumn=TriSysSDK['Grid']['CalculatedColumnsGrandTotal'](divTag,sCalculateColumnFieldPrefix);return TriSysWebJobs['Timesheet']['AmountsAndSummaryCalculationEngine'](divTag,sSuffix),fTotalHoursForColumn;},'AmountsAndSummaryCalculationEngine':function(divTag,sSuffix){if(!sSuffix)sSuffix='';var timesheetPeriodRatesHours=TriSysWebJobs['Timesheet']['ReadHoursGridData'](divTag);if(!timesheetPeriodRatesHours)return;var rateTotals=[];for(var iPeriodInterval=0x0;iPeriodInterval<timesheetPeriodRatesHours['length'];iPeriodInterval++){var timesheetPeriodIntervalObject=timesheetPeriodRatesHours[iPeriodInterval],lTimeSheetPeriodIntervalId=timesheetPeriodIntervalObject['TimeSheetPeriodIntervalId'],hoursPerRate=timesheetPeriodIntervalObject['HoursPerRate'];for(var iRates=0x0;iRates<hoursPerRate['length'];iRates++){var rate=hoursPerRate[iRates],fHoursPerRate=rate['Hours'],lPlacementRateId=rate['PlacementRateId'],rateTotalItem=null;for(var iRateTotal=0x0;iRateTotal<rateTotals['length'];iRateTotal++){var rateTotal=rateTotals[iRateTotal];if(rateTotal['PlacementRateId']==lPlacementRateId){rateTotalItem=rateTotal;break;}}!rateTotalItem&&(rateTotalItem={'PlacementRateId':lPlacementRateId,'Hours':0x0},rateTotals['push'](rateTotalItem)),rateTotalItem['Hours']+=fHoursPerRate;}}var fSumOfHours=0x0,fSumOfPayAmount=0x0,fSumOfChargeAmount=0x0;for(var iRateTotal=0x0;iRateTotal<rateTotals['length'];iRateTotal++){var dailyTotal=rateTotals[iRateTotal];fSumOfHours+=dailyTotal['Hours'];var sRowName='ID'+dailyTotal['PlacementRateId'],sRateTotalHoursDiv=sRowName+'-TotalHours',sFormattedNumber=TriSysSDK['Numbers']['Format'](dailyTotal['Hours'],0x2);$('#'+sRateTotalHoursDiv+sSuffix)['html'](sFormattedNumber);var sPayRate=$('#'+sRowName+'-PayRate'+sSuffix)['html'](),fPayRate=parseFloat(sPayRate),fPayAmount=dailyTotal['Hours']*fPayRate;sFormattedNumber=TriSysSDK['Numbers']['Format'](fPayAmount,0x2),$('#'+sRowName+'-PayAmount'+sSuffix)['html'](sFormattedNumber),fSumOfPayAmount+=fPayAmount;var sChargeRate=$('#'+sRowName+'-ChargeRate'+sSuffix)['html'](),fChargeRate=parseFloat(sChargeRate),fChargeAmount=dailyTotal['Hours']*fChargeRate;sFormattedNumber=TriSysSDK['Numbers']['Format'](fChargeAmount,0x2),$('#'+sRowName+'-ChargeAmount'+sSuffix)['html'](sFormattedNumber),fSumOfChargeAmount+=fChargeAmount;}var sFormattedNumber=TriSysSDK['Numbers']['Format'](fSumOfHours,0x2);$('#amountsTotalHours'+sSuffix)['html']('<b>'+sFormattedNumber+'</b>'),sFormattedNumber=TriSysSDK['Numbers']['Format'](fSumOfPayAmount,0x2),$('#amountsTotalPay'+sSuffix)['html']('<b>'+sFormattedNumber+'</b>'),$('#summaryTotalNetPay'+sSuffix)['html'](sFormattedNumber),sFormattedNumber=TriSysSDK['Numbers']['Format'](fSumOfChargeAmount,0x2),$('#amountsTotalCharge'+sSuffix)['html']('<b>'+sFormattedNumber+'</b>'),$('#summaryTotalNetCharge'+sSuffix)['html'](sFormattedNumber);var sSummaryPayVATPercentage=$('#summaryPayVATPercentage'+sSuffix)['html'](),fPayVATPercentage=sSummaryPayVATPercentage==''?0x0:parseFloat(sSummaryPayVATPercentage),fChargeVATPercentage=parseFloat($('#summaryChargeVATPercentage'+sSuffix)['html']()),fPayVATAmount=fSumOfPayAmount*(fPayVATPercentage/0x64),fChargeVATAmount=fSumOfChargeAmount*(fChargeVATPercentage/0x64),sPayVATAmount=fPayVATAmount>0x0?TriSysSDK['Numbers']['Format'](fPayVATAmount,0x2):'';$('#summaryPayVATAmount'+sSuffix)['html'](sPayVATAmount),$('#summaryChargeVATAmount'+sSuffix)['html'](TriSysSDK['Numbers']['Format'](fChargeVATAmount,0x2));var fPayGrandTotal=fSumOfPayAmount+fPayVATAmount,fChargeGrandTotal=fSumOfChargeAmount+fChargeVATAmount;$('#summaryPayGrandTotal'+sSuffix)['html']('<b>'+TriSysSDK['Numbers']['Format'](fPayGrandTotal,0x2)+'</b>'),$('#summaryChargeGrandTotal'+sSuffix)['html']('<b>'+TriSysSDK['Numbers']['Format'](fChargeGrandTotal,0x2)+'</b>');},'ReadHoursGridData':function(divTag){var gridData=TriSysSDK['Grid']['ReadGridContents'](divTag),iRowCount=gridData['rows']['length'],iColumnCount=gridData['columns']['length'];if(iRowCount<=0x0||iColumnCount<=0x0)return;var gridHoursByPeriod=[],gridRows=gridData['rows'],gridColumns=gridData['columns'],timesheetPeriodRatesHours=[];for(var iRow=0x0;iRow<gridRows['length'];iRow++){var row=gridRows[iRow],lTimeSheetPeriodIntervalId=row['TimeSheetPeriodIntervalId'],dailyHoursPerRateArray=[];for(var iRateCol=0x2;iRateCol<gridColumns['length']-0x1;iRateCol++){var column=gridColumns[iRateCol],sFieldName=column['field'],fHours=row[sFieldName],sPlacementRateId=sFieldName['substring'](0x2),lPlacementRateId=parseInt(sPlacementRateId),dailyHoursPerRate={'Hours':fHours,'PlacementRateId':lPlacementRateId};dailyHoursPerRateArray['push'](dailyHoursPerRate);}var dailyTimesheet={'TimeSheetPeriodIntervalId':lTimeSheetPeriodIntervalId,'HoursPerRate':dailyHoursPerRateArray};timesheetPeriodRatesHours['push'](dailyTimesheet);}return timesheetPeriodRatesHours;},'PopulateAmountsTable':function(rates,bClientContact,bShowAll,sSuffix){if(!rates)return;if(!sSuffix)sSuffix='';var tableDiv='#amountsTable'+sSuffix,bodyDiv='#tbodyAmounts'+sSuffix;$(tableDiv)['find']('tr:not(:nth-child(1))')['remove']();for(var iColumn=0x0;iColumn<rates['length'];iColumn++){var rate=rates[iColumn],sRate='<b>'+rate['Rate']+'</b>',sRowName='ID'+rate['PlacementRateId'],sRateDescription=rate['RateDescription'],sRateNotes=rate['Notes'],sTotalHoursDiv='<div\x20id=\x22'+sRowName+'-TotalHours'+sSuffix+'\x22></div>',sPayRate='<div\x20id=\x22'+sRowName+'-PayRate'+sSuffix+'\x22></div>',sChargeRate='<div\x20id=\x22'+sRowName+'-ChargeRate'+sSuffix+'\x22></div>',sPayAmountDiv='<div\x20id=\x22'+sRowName+'-PayAmount'+sSuffix+'\x22></div>',sChargeAmountDiv='<div\x20id=\x22'+sRowName+'-ChargeAmount'+sSuffix+'\x22></div>';$(tableDiv)['find'](bodyDiv)['append']('<tr>'+'\x20\x20<th\x20class=\x22text-nowrap\x22>'+sRate+(sRateNotes?':\x20<small\x20style=\x22color:\x20gray;\x20font-weight:\x20normal;\x22>'+sRateNotes+'</small>':'')+'</th>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22>'+sTotalHoursDiv+'</td>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22>'+sPayRate+'</td>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22>'+sChargeRate+'</td>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22>'+sPayAmountDiv+'</td>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22>'+sChargeAmountDiv+'</td>'+'</tr>'),$('#'+sRowName+'-PayRate'+sSuffix)['html'](TriSysSDK['Numbers']['Format'](rate['PayRate'],0x2)),$('#'+sRowName+'-ChargeRate'+sSuffix)['html'](TriSysSDK['Numbers']['Format'](rate['ChargeRate'],0x2));}$(tableDiv)['find'](bodyDiv)['append']('<tr>'+'\x20\x20<th\x20class=\x22text-nowrap\x22>Totals</th>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22><div\x20id=\x22amountsTotalHours'+sSuffix+'\x22></div></td>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22></td>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22></td>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22><div\x20id=\x22amountsTotalPay'+sSuffix+'\x22></div></td>'+'\x20\x20<td\x20class=\x22RatesNumberColumn\x22><div\x20id=\x22amountsTotalCharge'+sSuffix+'\x22></div></td>'+'</tr>'),!bShowAll&&(TriSysSDK['Tables']['ColumnVisibilityByIndex']('amountsTable'+sSuffix,0x1,!bClientContact),TriSysSDK['Tables']['ColumnVisibilityByIndex']('amountsTable'+sSuffix,0x2,bClientContact),TriSysSDK['Tables']['ColumnVisibilityByIndex']('amountsTable'+sSuffix,0x3,!bClientContact),TriSysSDK['Tables']['ColumnVisibilityByIndex']('amountsTable'+sSuffix,0x4,bClientContact));},'PopulateSummaryTable':function(CTimesheetResponse,bClientContact,bShowAll,sSuffix){if(!sSuffix)sSuffix='';var currencyVATList=CTimesheetResponse['CurrencyVATAmounts'];if(currencyVATList){if(currencyVATList['length']>0x0){var CPlacementRateCurrencyVATAmountWebAPI=currencyVATList[0x0],sPayCurrency=CPlacementRateCurrencyVATAmountWebAPI['PayCurrency'],sChargeCurrency=CPlacementRateCurrencyVATAmountWebAPI['ChargeCurrency'],fPayVATRate=CPlacementRateCurrencyVATAmountWebAPI['PayVATRate'],fChargeVATRate=CPlacementRateCurrencyVATAmountWebAPI['ChargeVATRate'];$('#summaryPayCurrency'+sSuffix)['html'](sPayCurrency),$('#summaryChargeCurrency'+sSuffix)['html'](sChargeCurrency);var sPayVATRate=fPayVATRate>0x0?TriSysSDK['Numbers']['Format'](fPayVATRate,0x2):'';$('#summaryPayVATPercentage'+sSuffix)['html'](sPayVATRate),$('#summaryChargeVATPercentage'+sSuffix)['html'](TriSysSDK['Numbers']['Format'](fChargeVATRate,0x2));}}!bShowAll&&(TriSysSDK['Tables']['ColumnVisibilityByIndex']('summaryTable'+sSuffix,0x0,!bClientContact),TriSysSDK['Tables']['ColumnVisibilityByIndex']('summaryTable'+sSuffix,0x1,bClientContact));},'FormButtonVisibility':function(CTimesheetResponse,sSaveButtonID,sRequestAuthorisationButtonID,sAuthoriseTimesheetButtonID){if(CTimesheetResponse['CanEdit']&&sSaveButtonID&&sRequestAuthorisationButtonID){$('#'+sSaveButtonID)['show']();if(CTimesheetResponse['TimesheetId']>0x0)$('#'+sRequestAuthorisationButtonID)['show']();}if(CTimesheetResponse['CanAuthorise']&&sAuthoriseTimesheetButtonID)$('#'+sAuthoriseTimesheetButtonID)['show']();},'SendHoursMatrixToServer':function(lPlacementId,lTimesheetId,sPeriod,timesheetPeriodRatesHours,customFields,fnCallback){var CTimesheetSaveRequest={'TimesheetId':lTimesheetId,'PlacementId':lPlacementId,'Period':sPeriod,'PeriodIntervalHours':timesheetPeriodRatesHours,'WebJobsRequest':TriSysWebJobs['Agency']['WebJobsRequest']()};if(customFields)CTimesheetSaveRequest['Custom']=customFields;TriSysApex['UI']['CloseModalPopup'](),TriSysApex['UI']['ShowWait'](null,'Saving\x20Timesheet...');var payloadObject={};payloadObject['URL']='Timesheet/Write',payloadObject['OutboundDataPacket']=CTimesheetSaveRequest,payloadObject['InboundDataFunction']=function(data){TriSysApex['UI']['HideWait']();var CTimesheetSaveResponse=data;if(CTimesheetSaveResponse){if(CTimesheetSaveResponse['Success']){if(fnCallback)fnCallback(CTimesheetSaveResponse['TimesheetId']);}else TriSysApex['UI']['errorAlert'](CTimesheetSaveResponse['ErrorMessage'],TriSysWeb['Constants']['ApplicationName']);}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('SendHoursMatrixToServer:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'ConfirmedAuthorisationRequest':function(lTimesheetId,fnCallback){var sCandidateURL=window['location']['href'],sClientURL=sCandidateURL['replace']('?Candidate','?Client');TriSysApex['UI']['ShowWait'](null,'Requesting\x20Authorisation...');var CTimesheetRequestAuthorisationRequest={'TimesheetId':lTimesheetId,'ClientURL':sClientURL,'CandidateURL':sCandidateURL,'WebJobsRequest':TriSysWebJobs['Agency']['WebJobsRequest']()},payloadObject={};payloadObject['URL']='Timesheet/RequestAuthorisation',payloadObject['OutboundDataPacket']=CTimesheetRequestAuthorisationRequest,payloadObject['InboundDataFunction']=function(CTimesheetRequestAuthorisationResponse){TriSysApex['UI']['HideWait']();if(CTimesheetRequestAuthorisationResponse){if(CTimesheetRequestAuthorisationResponse['Success'])fnCallback(lTimesheetId);else TriSysApex['UI']['errorAlert'](CTimesheetRequestAuthorisationResponse['ErrorMessage'],TriSysWebJobs['Constants']['ApplicationName']);}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysWebJobs.Timesheet.ConfirmedAuthorisationRequest:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'AuthoriseRequest':function(lTimesheetId,fnCallback){var sClientURL=window['location']['href'],sCandidateURL=sClientURL['replace']('?Client','?Candidate');TriSysApex['UI']['ShowWait'](null,'Authorising...');var CTimesheetAuthoriseRequest={'TimesheetId':lTimesheetId,'ClientURL':sClientURL,'CandidateURL':sCandidateURL,'WebJobsRequest':TriSysWebJobs['Agency']['WebJobsRequest']()},payloadObject={};payloadObject['URL']='Timesheet/Authorise',payloadObject['OutboundDataPacket']=CTimesheetAuthoriseRequest,payloadObject['InboundDataFunction']=function(CTimesheetAuthoriseResponse){TriSysApex['UI']['HideWait']();if(CTimesheetAuthoriseResponse){if(CTimesheetAuthoriseResponse['Success'])fnCallback(lTimesheetId);else TriSysApex['UI']['errorAlert'](CTimesheetAuthoriseResponse['ErrorMessage'],TriSysWebJobs['Constants']['ApplicationName']);}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysWebJobs.Timesheet.AuthoriseRequest:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'ClientDecline':function(timesheetDetails,fnCallback){if(timesheetDetails['TimesheetId']<=0x0)return;var fnReasonGiven=function(sReason){var fnAfterDeclining=function(){if(fnCallback)fnCallback();var sMessage='You\x20have\x20declined\x20to\x20authorise\x20timesheet\x20'+sTimesheetId+'.'+'<br\x20/>'+sCandidate+'\x20will\x20now\x20receive\x20an\x20automated\x20e-mail\x20informing\x20them\x20of\x20this\x20process.';TriSysApex['UI']['ShowMessage'](sMessage,'Decline\x20Timesheet');};return TriSysWebJobs['Timesheet']['DeclineAuthorisationRequest'](timesheetDetails['TimesheetId'],sReason,fnAfterDeclining),!![];},sTitle='Decline\x20Timesheet:\x20'+timesheetDetails['TimesheetId'],options={'Instructions':'On\x20behalf\x20of\x20'+timesheetDetails['CompanyName']+',\x20I,\x20'+timesheetDetails['ClientFullName']+',\x20am\x20declining\x20the\x20request\x20of\x20'+timesheetDetails['Candidate']+'\x20to\x20authorise\x20the\x20timesheet\x20'+timesheetDetails['TimesheetId']+'\x20for\x20the\x20period\x20'+timesheetDetails['Period']+'\x20for\x20the\x20following\x20reason:','Label':'declining\x20this\x20timesheet\x20authorisation\x20request.','ButtonLabel':'Decline'};TriSysApex['ModalDialogue']['BigEdit']['Popup'](sTitle,'gi-pen',fnReasonGiven,options);},'DeclineAuthorisationRequest':function(lTimesheetId,sReason,fnCallback){var sClientURL=window['location']['href'],sCandidateURL=sClientURL['replace']('?Client','?Candidate');TriSysApex['UI']['ShowWait'](null,'Declining...');var CTimesheetDeclineRequest={'TimesheetId':lTimesheetId,'ClientURL':sClientURL,'CandidateURL':sCandidateURL,'Reason':sReason,'WebJobsRequest':TriSysWebJobs['Agency']['WebJobsRequest']()},payloadObject={};payloadObject['URL']='Timesheet/Decline',payloadObject['OutboundDataPacket']=CTimesheetDeclineRequest,payloadObject['InboundDataFunction']=function(CTimesheetDeclineResponse){TriSysApex['UI']['HideWait']();if(CTimesheetDeclineResponse){if(CTimesheetDeclineResponse['Success'])fnCallback(lTimesheetId);else TriSysApex['UI']['errorAlert'](CTimesheetDeclineResponse['ErrorMessage'],TriSysWebJobs['Constants']['ApplicationName']);}return!![];},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['ErrorHandlerRedirector']('TriSysWebJobs.Timesheet.DeclineAuthorisationRequest:\x20',request,status,error);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);}},'Timesheets':{'ClientTimesheetsColumns':[{'field':'TimesheetId','title':'ID','type':'number','width':0x50},{'field':'Reference','title':'Placement','type':'string'},{'field':'CandidateName','title':'Candidate','type':'string'},{'field':'Period','title':'Period','type':'string'},{'field':'InputDate','title':'Input\x20Date','type':'date','format':'{0:dd\x20MMM\x20yyyy}'},{'field':'TotalTimeWorked','title':'Total\x20Time\x20Worked','type':'number','format':'{0:n}'},{'field':'AuthorisationRequested','title':'Auth.\x20Requested','type':'date','format':'{0:dd\x20MMM\x20yyyy}'},{'field':'Authorised','title':'Authorised','type':'string'},{'field':'Paid','title':'Paid','type':'string'}],'MobileRowTemplate':'<td\x20colspan=\x221\x22><strong>#:\x20Reference\x20#\x20</strong>:\x20#:\x20Company\x20#<br\x20/>#:\x20Period\x20#<br\x20/><i>#:\x20kendo.format(\x22{0:dd\x20MMM\x20yyyy}\x22,\x20InputDate)\x20#</i><br\x20/>'+'Time:\x20#:\x20TotalTimeWorked\x20#<br\x20/>Authorised:\x20#:\x20Authorised\x20#<br\x20/>Paid:\x20#:\x20Paid\x20#<hr></td>'},'Frame':{'Configure':function(sCustomerID){var customerSettings=TriSysWebJobs['Frame']['GetCustomerSettings'](sCustomerID);if(!customerSettings)return;if(!customerSettings['WebJobsLogoVisible'])$('#navbar-product-logo-hyperlink')['hide']();else customerSettings['WebJobsLogo']&&$('#product-icon')['attr']('src',customerSettings['WebJobsLogo']);!customerSettings['ApplicationCaptionVisible']&&($('#app-caption-fixed-top')['hide'](),$('#page-container')['css']('padding-top','0px'),$('#page-container')['css']('padding-right','0px'));!customerSettings['NavigationBarVisible']&&($('#trisys-navigation-bar')['hide'](),$('#sidebar')['css']('width','0px'),$('#main-container')['css']('margin-left','0px'));var sTheme='default';if(customerSettings['Theme'])sTheme=customerSettings['Theme'];var sTheme='css/themes/'+sTheme+'.css';TriSysProUI['CurrentThemeName']=sTheme,TriSysProUI['InitialiseTheme'](sTheme),setTimeout(TriSysProUI['kendoUI_Overrides'],0xc8);var sPageStyle='default';if(customerSettings['PageStyleAlternative'])sPageStyle='Alternative';TriSysProUI['InitialisePageStyle'](sPageStyle);if(customerSettings['RemoveFeatures'])for(var i=0x0;i<customerSettings['RemoveFeatures']['length'];i++){var sFeatureToRemove=customerSettings['RemoveFeatures'][i];$('#'+sFeatureToRemove)['remove'](),TriSysWebJobs['Frame']['_RemoveFeatures']['push'](sFeatureToRemove);}if(customerSettings['RecordsPerPage']>0x0)TriSysApex['UserOptions']['DefaultRecordsPerPage']=customerSettings['RecordsPerPage'];if(customerSettings['CandidateContactUsPageHeaderHidden'])TriSysWebJobs['Constants']['CandidateContactUsPageHeaderVisible']=![];if(customerSettings['CandidateVacancySearchPageHeaderHidden'])TriSysWebJobs['Constants']['CandidateVacancySearchPageHeaderVisible']=![];if(customerSettings['TransparentBackground'])TriSysWebJobs['Constants']['TransparentBackground']=!![];TriSysApex['Constants']['ShowWaitTopLeftIcon']='img/hourglass-16x16.png';customerSettings['ApplicationName']&&(TriSysWebJobs['Constants']['ApplicationName']=customerSettings['ApplicationName'],TriSysProUI['DisplayAppNameInStartupAnimation'](customerSettings['ApplicationName']));if(customerSettings['ModalCaptionBackgroundColour'])TriSysWebJobs['Constants']['ModalCaptionBackgroundColour']=customerSettings['ModalCaptionBackgroundColour'];if(customerSettings['ModalCaptionFontColour'])TriSysWebJobs['Constants']['ModalCaptionFontColour']=customerSettings['ModalCaptionFontColour'];if(customerSettings['HorizontalMenuItems']){var ulItemsElement=$('#horizontal-menu-items');for(var i=0x0;i<customerSettings['HorizontalMenuItems']['length'];i++){var sMenuItem=customerSettings['HorizontalMenuItems'][i],menuItemElement=$('#'+sMenuItem)['parent']()['detach']();ulItemsElement['append'](menuItemElement);}$('#horizontal-menu-collapse')['show']();}customerSettings['iFramePage']&&(TriSysWebJobs['Constants']['HomePage']=customerSettings['iFramePage']);if(customerSettings['CSS']){var styles=customerSettings['CSS'];for(var i=0x0;i<styles['length'];i++){var style=styles[i];style['ID']&&(TriSysWebJobs['Frame']['ApplyStyle'](style),TriSysWebJobs['Frame']['_DynamicCSS']['push'](style));}}var fnLoadedDynamicContent=function(sFile){TriSysApex['Toasters']['Info']('Loaded\x20'+sFile+'.\x20Perhaps\x20call\x20a\x20load\x20function?');};if(customerSettings['MainContainerInjection']){var sFile=customerSettings['MainContainerInjection'];TriSysWebJobs['Frame']['InjectDynamicContent']('MainContainerInjection',sFile,function(){fnLoadedDynamicContent(sFile);});}customerSettings['SupressHelpAbout']&&(TriSysWebJobs['Constants']['SupressHelpAbout']=!![],TriSysWebJobs['Constants']['HelpAboutRedirectURL']=customerSettings['HelpAboutRedirectURL']);if(customerSettings['ConfirmedRegistrationPreLoginPage'])TriSysWebJobs['Constants']['ConfirmedRegistrationPreLoginPage']=customerSettings['ConfirmedRegistrationPreLoginPage'];},'InjectDynamicContent':function(sID,sFile,fnCallback){var elemMainContainer=$('#main-container'),newDiv=document['createElement']('div');newDiv['setAttribute']('id',sID),elemMainContainer['prepend'](newDiv),$['ajaxSetup']({'cache':![],'beforeSend':function(xhr){var sSiteKey=TriSysAPI['Session']['DeveloperSiteKey']();xhr['setRequestHeader']('SiteKey',sSiteKey);var sDataServicesKey=TriSysAPI['Session']['DataServicesKey']();if(TriSysAPI['Operators']['isEmpty'](sDataServicesKey))sDataServicesKey=TriSysWebJobs['Agency']['CustomerID'];xhr['setRequestHeader']('DataServicesKey',sDataServicesKey);},'error':function(request,status,error){var sFunction='TriSysWebJobs.Frame.InjectDynamicContent';TriSysApex['UI']['ErrorHandlerRedirector'](sFunction,request,status,error,!![]);}});var fnAfterLoad=function(){var formContentRow=$('#divFormContentRow');formContentRow['detach']()['appendTo']('#divFormContentRow-Placeholder'),formContentRow['unwrap'](),formContentRow['css']('border-radius','20px');};TriSysApex['FormsManager']['loadPageIntoDiv'](sID,sFile,fnAfterLoad);},'ScrollToDiv':function(sDiv){$('html,\x20body')['animate']({'scrollTop':$('#'+sDiv)['offset']()['top']},0x3e8);},'SetTransparencyInFramework':function(){TriSysWebJobs['Constants']['TransparentBackground']&&($('body')['css']('background-color','transparent'),$('#page-container')['css']('background-color','transparent'),$('#divFormContentRow')['css']('background-color','transparent'),$('#page-container,\x20#sidebar,\x20#sidebar-alt')['css']('background-color','transparent'),TriSysWebJobs['Frame']['BlockBackgroundWhite'](),$('.block')['css']('border','1px\x20solid\x20'+TriSysProUI['ThemedAlternativeBackColor']()),$('.block-title')['css']('margin-bottom','15px'),TriSysWebJobs['Frame']['BlockFullTransparent'](),$('.form-horizontal,\x20.form-bordered')['css']('background-color','white'),$('.table-striped>tbody>tr:nth-of-type(odd)')['css']('background-color','transparent'),$('.form-horizontal,\x20.form-bordered')['css']('background-color','transparent'));},'GetCustomerSettings':function(sCustomerID){var sURL=TriSysAPI['Constants']['SecureURL']+TriSysApex['Constants']['ApexRootFolder']+'custom/'+sCustomerID+'/webjobs.json',jsonData=TriSysApex['Forms']['Configuration']['JsonFileData'](sURL);if(jsonData)return jsonData['Settings'];return null;},'BlockFullTransparent':function(){if(TriSysWebJobs['Constants']['TransparentBackground'])$('.block,\x20.full')['css']('background-color','transparent');},'BlockBackgroundWhite':function(){if(TriSysWebJobs['Constants']['TransparentBackground'])$('.block')['css']('background-color','white');},'_RemoveFeatures':[],'_DynamicCSS':[],'ApplyDynamicFeaturesAndStyleAfterFormLoaded':function(){for(var i=0x0;i<TriSysWebJobs['Frame']['_RemoveFeatures']['length'];i++){var sFeatureToHide=TriSysWebJobs['Frame']['_RemoveFeatures'][i];$('#'+sFeatureToHide)['hide']();}for(var i=0x0;i<TriSysWebJobs['Frame']['_DynamicCSS']['length'];i++){var style=TriSysWebJobs['Frame']['_DynamicCSS'][i];TriSysWebJobs['Frame']['ApplyStyle'](style);}},'ApplyStyle':function(style){try{var element=$('#'+style['ID']);if(element){if(style['Style'])element['css'](style['Style']);if(style['Parent']){var parent=element;for(var i=0x0;i<style['Parent']['Level'];i++)parent=parent['parent']();parent['css'](style['Parent']['Style']);}if(style['HTML'])element['html'](style['HTML']);if(style['Text'])element['text'](style['Text']);}}catch(e){}}},'SocialNetwork':{'AllNetworks':['google','windowslive','apple','linkedin'],'CurrentNetworks':['google','windowslive','apple','linkedin'],'ReadAuthenticatedCredentials':function(CReadSocialNetworkAuthenticatedCredentialsRequest,fnCallback){var payloadObject={};payloadObject['URL']='SocialNetwork/ReadAuthenticatedCredentials',payloadObject['OutboundDataPacket']=CReadSocialNetworkAuthenticatedCredentialsRequest,payloadObject['InboundDataFunction']=function(CReadSocialNetworkAuthenticatedCredentialsResponse){if(CReadSocialNetworkAuthenticatedCredentialsResponse){if(CReadSocialNetworkAuthenticatedCredentialsResponse['Success']){fnCallback(CReadSocialNetworkAuthenticatedCredentialsResponse);return;}}},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'OpenSocialLink':function(sTextBoxID){TriSysWebJobs['SocialNetwork']['_TextBoxID']=sTextBoxID;var bTwitter=sTextBoxID['toLowerCase']()['indexOf']('twitter')>=0x0,bLinkedIn=sTextBoxID['toLowerCase']()['indexOf']('linkedin')>=0x0,bFacebook=sTextBoxID['toLowerCase']()['indexOf']('facebook')>=0x0,bYouTube=sTextBoxID['toLowerCase']()['indexOf']('youtube')>=0x0,sURL=$('#'+sTextBoxID)['val'](),fnOpenLink=function(){return TriSysSDK['Browser']['OpenURL'](sURL),!![];};if(bTwitter||bLinkedIn||bFacebook||bYouTube){var fnAssociate=function(){var sNetwork='twitter';if(bLinkedIn)sNetwork='linkedin';if(bFacebook)sNetwork='facebook';if(bYouTube)sNetwork='google';return TriSysWebJobs['SocialNetwork']['CurrentNetworks']=[sNetwork],setTimeout(function(){TriSysWebJobs['SocialNetwork']['OpenSocialLoginModal'](sNetwork);},0x64),!![];},sMessage='Associate\x20a\x20social\x20network\x20with\x20your\x20profile\x20to\x20authorise\x20social\x20login,\x20or\x20open\x20the\x20link\x20to\x20your\x20social\x20network?';TriSysApex['UI']['questionYesNoCancel'](sMessage,TriSysWebJobs['Constants']['ApplicationName'],'Associate',fnAssociate,'Open\x20Link',fnOpenLink,'Cancel');}else fnOpenLink();},'_TextBoxID':null,'UpdateSocialNetworkFieldAfterAssociation':function(sProfileURL){$('#'+TriSysWebJobs['SocialNetwork']['_TextBoxID'])['val'](sProfileURL),TriSysApex['UI']['CloseModalPopup']();},'OpenSocialLoginModal':function(sNetwork){var parametersObject=new TriSysApex['UI']['ShowMessageParameters'](),sTitle='Social\x20Network\x20Login';parametersObject['Title']=sTitle,parametersObject['Image']='fa-'+sNetwork,parametersObject['Maximize']=![],parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'ctrlSocialLogin.html',parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',TriSysApex['UI']['PopupMessage'](parametersObject);},'OpenSkype':function(sTextBoxID){var sSkypeHandle=$('#'+sTextBoxID)['val']();if(sSkypeHandle){var sURL='skype:'+sSkypeHandle+'?chat';TriSysSDK['Browser']['OpenURL'](sURL);}}},'Routing':{'PostLogin':function(){if(TriSysWebJobs['Vacancies']['RequirementId']>0x0){var sVacancyPage=TriSysWebJobs['Constants']['LoggedInAsCandidate']?TriSysWebJobs['Constants']['CandidateVacancyForm']:TriSysWebJobs['Constants']['ClientVacancyForm'];TriSysApex['FormsManager']['OpenForm'](sVacancyPage,TriSysWebJobs['Vacancies']['RequirementId'],!![]);}else{if(TriSysWebJobs['Timesheet']['TimesheetId']>0x0){var sTimesheetPage=TriSysWebJobs['Constants']['LoggedInAsCandidate']?'CandidateTimesheet':'ClientTimesheet';TriSysApex['FormsManager']['OpenForm'](sTimesheetPage,TriSysWebJobs['Timesheet']['TimesheetId'],!![]);}else{if(TriSysApex['Constants']['OriginalURL']){var parts=TriSysApex['Constants']['OriginalURL']['split']('/');if(parts['length']>=0x5){TriSysApex['Constants']['OriginalURL']=null;var sFormName=parts[parts['length']-0x3]['replace']('?',''),sId=parts[parts['length']-0x2];if(TriSysWebJobs['Routing']['ParseURLParameters'](sId,sFormName)){TriSysWebJobs['Routing']['PostLogin']();return;}}}var sAfterLoginPage=TriSysApex['FormsManager']['PostLoginFormName']();TriSysApex['FormsManager']['OpenForm'](sAfterLoginPage,0x0,!![]);}}},'ParseURLParameters':function(sParameters,sFormName){if(sFormName){if($['isNumeric'](sParameters))switch(sFormName['toLowerCase']()){case'candidatevacancy':case'clientvacancy':TriSysWebJobs['Vacancies']['RequirementId']=sParameters;return!![];case'candidatetimesheet':case'clienttimesheet':TriSysWebJobs['Timesheet']['TimesheetId']=sParameters;return!![];case'clientlogin':case'agencylogin':TriSysWebJobs['Constants']['CandidateMode']=![];return!![];}else switch(sFormName['toLowerCase']()){case TriSysWebJobs['Constants']['CandidateRegistrationConfirmationForm']['toLowerCase']():var sGUID=sParameters;TriSysAPI['Session']['Memory']['Set'](TriSysWebJobs['Constants']['CandidateRegistrationConfirmationForm'],sGUID,0x1);return!![];}}return![];},'isWebJobsForm':function(sFormName){if(sFormName)switch(sFormName['toLowerCase']()){case TriSysWebJobs['Constants']['CandidateVacancyForm']['toLowerCase']():case TriSysWebJobs['Constants']['CandidateVacancySearchForm']['toLowerCase']():case TriSysWebJobs['Constants']['CandidateForgottenPasswordForm']['toLowerCase']():case TriSysWebJobs['Constants']['CandidateRegistrationForm']['toLowerCase']():case TriSysWebJobs['Constants']['CandidateLoginForm']['toLowerCase']():case TriSysWebJobs['Constants']['CandidateRegistrationConfirmationForm']['toLowerCase']():case TriSysWebJobs['Constants']['CandidateFavouriteVacanciesForm']['toLowerCase']():case TriSysWebJobs['Constants']['CandidateVacancyApplications']['toLowerCase']():case TriSysWebJobs['Constants']['CandidateEditAccountDetails']['toLowerCase']():case TriSysWebJobs['Constants']['ClientLoginForm']['toLowerCase']():case TriSysWebJobs['Constants']['ClientVacanciesForm']['toLowerCase']():case TriSysWebJobs['Constants']['ClientVacancyForm']['toLowerCase']():case TriSysWebJobs['Constants']['ClientForgottenPasswordForm']['toLowerCase']():case TriSysWebJobs['Constants']['ClientRegistrationForm']['toLowerCase']():case TriSysWebJobs['Constants']['ClientEditAccountDetails']['toLowerCase']():case'candidateplacement':case'clientplacement':case'candidatetimesheet':case'clienttimesheet':case TriSysWebJobs['Constants']['AgencyUmbrellaLoginForm']['toLowerCase']():case TriSysWebJobs['Constants']['AgencyUmbrellaForgottenPasswordForm']['toLowerCase']():return!![];}return![];}},'Constants':{'ApplicationName':'TriSys\x20Web\x20Jobs','AgencyUserLoginCredentialsToCRM':null,'HomePage':'https://apex.trisys.co.uk','CandidateVacancyForm':'CandidateVacancy','CandidateVacancySearchForm':'CandidateVacancySearch','CandidateForgottenPasswordForm':'CandidateForgottenPassword','CandidateRegistrationForm':'CandidateRegister','CandidateLoginForm':'CandidateLogin','CandidateRegistrationConfirmationForm':'CandidateRegistrationConfirmation','CandidateFavouriteVacanciesForm':'CandidateFavouriteVacancies','CandidateVacancyApplications':'CandidateVacancyApplications','CandidateEditAccountDetails':'EditCandidateAccountDetails','ClientLoginForm':'ClientLogin','ClientVacanciesForm':'ClientVacancies','ClientVacancyForm':'ClientVacancy','ClientForgottenPasswordForm':'ClientForgottenPassword','ClientRegistrationForm':'ClientRegister','ClientEditAccountDetails':'ClientEditAccountDetails','AgencyUmbrellaLoginForm':'AgencyLogin','AgencyUmbrellaForgottenPasswordForm':'AgencyForgottenPassword','ConfirmedRegistrationPreLoginPage':null,'CookiePrefix':'TriSysWebJobs-','CandidateApplyToVacancy_Longlist':![],'CandidateApplyToVacancy_Shortlist':!![],'TransparentBackground':![],'CandidateContactUsPageHeaderVisible':!![],'CandidateVacancySearchPageHeaderVisible':!![],'ClientContactUsPageHeaderVisible':!![],'ModalCaptionBackgroundColour':'#fcfafa','ModalCaptionFontColour':'#4a2e2b','LoggedInAsCandidate':![],'LoggedInAsClient':![],'CandidateRegistrationCVMandatory':!![],'CandidateMode':!![],'AgencyUmbrellaMode':![],'SupressHelpAbout':![],'HelpAboutRedirectURL':null}};