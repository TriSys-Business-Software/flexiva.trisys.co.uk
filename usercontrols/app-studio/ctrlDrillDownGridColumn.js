var ctrlDrillDownGridColumn={'_FormName':'ctrlDrillDownGridColumn','_Options':null,'Load':function(options){debugger;ctrlDrillDownGridColumn['_Options']=options,TriSysSDK['CShowForm']['InitialiseFields'](ctrlDrillDownGridColumn['_FormName']);const sPrefix=ctrlDrillDownGridColumn['_FormName']+'-';$('#'+sPrefix+'Instructions')['text'](options['Instructions']),ctrlDrillDownGridColumn['PopulateColumnCombo'](sPrefix+'Name'),ctrlDrillDownGridColumn['PopulateColumnCombo'](sPrefix+'Key');const fnFieldsPopulated=function(){const column=options['Column'];column&&(TriSysSDK['CShowForm']['SetTextInCombo'](sPrefix+'Name',column['ColumnName']),TriSysSDK['CShowForm']['SetCheckBoxValue'](sPrefix+'Hyperlink',column['Hyperlink']),TriSysSDK['CShowForm']['SetTextInCombo'](sPrefix+'Key',column['KeyColumnName']),TriSysSDK['CShowForm']['SetCheckBoxValue'](sPrefix+'ButtonColumn',column['ButtonColumn']),$('#'+sPrefix+'ButtonLabel')['val'](column['ButtonLabel']),TriSysSDK['Controls']['NumericSpinner']['SetValue'](sPrefix+'ButtonWidth',column['ButtonWidth']),TriSysSDK['CShowForm']['SetTextInCombo'](sPrefix+'Form',column['FormName']),TriSysSDK['CShowForm']['SetCheckBoxValue'](sPrefix+'FormModal',column['FormModal']));};ctrlDrillDownGridColumn['PopulateFormCombo'](sPrefix+'Form',fnFieldsPopulated);},'PopulateColumnCombo':function(sControlName){const dataObject=ctrlDrillDownGridColumn['_Options']['DataObject'],lstColumnName=[];dataObject['Grid']['Columns']['forEach'](function(column){lstColumnName['push'](column['Field']);}),TriSysSDK['CShowForm']['populateComboFromListOfString'](sControlName,lstColumnName);},'PopulateFormCombo':function(sControlName,fnCallback){const fnLoadForms=function(lstFile,sServerFormsFolder){const lstFormName=[];lstFile['forEach'](function(file){lstFormName['push'](file['Name']);}),TriSysSDK['CShowForm']['populateComboFromListOfString'](sControlName,lstFormName),fnCallback();};TriSysFlexiva['Forms']['WebAPI']['ReadForms'](fnLoadForms);},'Save':function(){debugger;var bSaved=![];const sPrefix=ctrlDrillDownGridColumn['_FormName']+'-';var sColumnName=TriSysSDK['CShowForm']['GetTextFromCombo'](sPrefix+'Name'),bHyperlink=TriSysSDK['CShowForm']['CheckBoxValue'](sPrefix+'Hyperlink',![]),sKeyColumnName=TriSysSDK['CShowForm']['GetTextFromCombo'](sPrefix+'Key'),bButtonColumn=TriSysSDK['CShowForm']['CheckBoxValue'](sPrefix+'ButtonColumn',![]),sButtonLabel=$('#'+sPrefix+'ButtonLabel')['val'](),iButtonWidth=TriSysSDK['Controls']['NumericSpinner']['GetValue'](sPrefix+'ButtonWidth',0x0),sFormName=TriSysSDK['CShowForm']['GetTextFromCombo'](sPrefix+'Form'),bFormModal=TriSysSDK['CShowForm']['CheckBoxValue'](sPrefix+'FormModal',![]);if(bButtonColumn&&sButtonLabel==='')return{'ErrorMessage':'Button\x20Label\x20must\x20not\x20be\x20blank\x20if\x20a\x20button\x20column\x20is\x20to\x20be\x20added\x20to\x20the\x20grid'};const saveObject={'Column':{'ColumnName':sColumnName,'Hyperlink':bHyperlink,'KeyColumnName':sKeyColumnName,'ButtonColumn':bButtonColumn,'ButtonLabel':sButtonLabel,'ButtonWidth':iButtonWidth,'FormName':sFormName,'FormModal':bFormModal},'Success':!![]};return saveObject;}};