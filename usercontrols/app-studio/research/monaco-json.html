<!DOCTYPE html>
<html>
<head>
<title>Monaco Editor Controls</title>
<style>
#editor-container {
height: 400px;
border: 1px solid #ccc;
margin-bottom: 10px;
}
.controls {
margin-bottom: 10px;
}
</style>
</head>
<body>
<div class="controls">
<button id="setContent">Set Content</button>
<button id="getContent">Get Content</button>
<button id="insertText">Insert Property at Cursor</button>
</div>
<div id="editor-container"></div>
<div id="output"></div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
let editor;
$(document).ready(function ()
{
require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs' } });
require(['vs/editor/editor.main'], function ()
{
// Define custom themes for JSON
monaco.editor.defineTheme('jsonCustomTheme', {
base: 'vs-dark',
inherit: true,
rules: [
{ token: 'string', foreground: '#CE9178' },
{ token: 'number', foreground: '#B5CEA8' },
{ token: 'keyword', foreground: '#569CD6' },
{ token: 'delimiter', foreground: '#CCCCCC' },
{ token: 'comment', foreground: '#00FF00' }
],
colors: {
'editor.background': '#1E1E1E',
'editor.foreground': '#D4D4D4',
'editor.lineHighlightBackground': '#2D2D2D',
'editorCursor.foreground': '#FFFFFF',
'editor.selectionBackground': '#264F78'
}
});
// Configure JSON language features
monaco.languages.json.jsonDefaults.setDiagnosticsOptions({
validate: true,
allowComments: true,
schemas: [{
uri: "http://myserver/schema.json",
fileMatch: ["*"],
schema: {
type: "object",
properties: {
// Add your JSON schema properties here if needed
}
}
}],
enableSchemaRequest: true,
schemaValidation: 'warning'
});
// Create the editor instance
let editor = monaco.editor.create(document.getElementById('editor-container'), {
value: '{\n "example": "Initial JSON content"\n}',
language: 'json',
theme: 'jsonCustomTheme',
automaticLayout: true,
formatOnPaste: true,
formatOnType: true,
minimap: {
enabled: true
},
scrollBeyondLastLine: false,
tabSize: 2,
wordWrap: 'on',
rulers: [80],
bracketPairColorization: {
enabled: true
}
});
// Add JSON formatting command
editor.addCommand(monaco.KeyMod.Alt | monaco.KeyCode.KeyF, function ()
{
editor.getAction('editor.action.formatDocument').run();
});
// Function to validate JSON
function validateJSON(jsonString)
{
try
{
JSON.parse(jsonString);
return { valid: true, error: null };
} catch (e)
{
return { valid: false, error: e.message };
}
}
// Button handlers
// Set entire content with JSON validation
$('#setContent').click(function ()
{
const newJson = {
"example": "New content",
"array": [1, 2, 3],
"nested": {
"property": "value"
}
};
editor.setValue(JSON.stringify(newJson, null, 2));
});
// Get entire content with JSON validation
$('#getContent').click(function ()
{
const content = editor.getValue();
const validation = validateJSON(content);
if (validation.valid)
{
$('#output').html('Valid JSON content: <pre>' + content + '</pre>');
} else
{
$('#output').html('Invalid JSON: <pre>' + validation.error + '</pre>');
}
});
// Insert at cursor position with JSON-aware formatting
$('#insertText').click(function ()
{
const position = editor.getPosition();
const insertText=',\n"newProperty": "inserted value"';
editor.executeEdits('', [{
range: new monaco.Range(
position.lineNumber,
position.column,
position.lineNumber,
position.column
),
text: insertText
}]);
// Format the document after insertion
editor.getAction('editor.action.formatDocument').run();
});
// Add JSON specific features
editor.addAction({
id: 'format-json',
label: 'Format JSON',
keybindings: [
monaco.KeyMod.Alt | monaco.KeyCode.KeyF
],
run: function (ed)
{
try
{
const content = ed.getValue();
const parsed = JSON.parse(content);
ed.setValue(JSON.stringify(parsed, null, 2));
} catch (e)
{
console.error('Invalid JSON:', e);
}
}
});
// Add JSON validation on change
editor.onDidChangeModelContent((e) =>
{
const content = editor.getValue();
const validation = validateJSON(content);
if (!validation.valid)
{
// You could show this in a status bar or tooltip
console.warn('JSON Validation Error:', validation.error);
}
});
// Optional: Add context menu items
editor.addAction({
id: 'compress-json',
label: 'Compress JSON',
contextMenuGroupId: 'json',
run: function (ed)
{
try
{
const content = ed.getValue();
const parsed = JSON.parse(content);
ed.setValue(JSON.stringify(parsed));
} catch (e)
{
console.error('Invalid JSON:', e);
}
}
});
});
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
</body>
</html>