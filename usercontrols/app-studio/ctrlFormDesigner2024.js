var ctrlFormDesigner2024={'Load':function(context){ctrlFormDesigner2024['Settings']['Context']={'FullPath':context['FullPath'],'FormObject':JSON['parse'](context['JSON'])};const formObject=ctrlFormDesigner2024['Settings']['Context']['FormObject'];if(!formObject['DesignTimeOnly'])formObject['DesignTimeOnly']={};ctrlFormDesigner2024['InitialiseForm'](ctrlFormDesigner2024['Settings']['Context']),ctrlFormDesigner2024['LoadFormDesignContext'](ctrlFormDesigner2024['Settings']['Context']);},'LoadFormDesignContext':function(context){ctrlFormDesigner2024['FormProperties']['Populate'](context['FormObject']),ctrlFormDesigner2024['Tabs']['PopulateTabs'](context['FormObject']['Tabs']),ctrlFormDesigner2024['Tabs']['LoadFilter'](),ctrlFormDesigner2024['Persistence']['Initialise'](),ctrlFormDesigner2024['Components']['PopulateToolbox'](),ctrlFormDesigner2024['Fields']['PopulateToolbox'](context['FormObject']);},'InitialiseForm':function(context){const formObject=context['FormObject'];var sName=formObject['Name'];$('#ctrlFormDesigner2024-TabCaption')['html']('Form\x20Designer:\x20'+sName),ctrlFormDesigner2024['SetDimensions'](context),setTimeout(TriSysProUI['kendoUI_Overrides'],0x64),$('div.k-list-container.k-popup[data-role=\x22popup\x22]')['remove'](),$('div.k-animation-container')['remove'](),TriSysApex['ErrorHandling']['Exceptions']['AddFunction']('KendoUI\x20Sortable\x20in\x20ctrlFormDesigner2024',ctrlFormDesigner2024['ExceptionErrorHandler']);const selectedTabBackColour=TriSysProUI['ThemedColour']();var styleSheets=document['styleSheets'];for(var i=0x0;i<styleSheets['length'];i++){try{var cssRules=styleSheets[i]['cssRules'];for(var j=0x0;j<cssRules['length'];j++){if(cssRules[j]['selectorText']==='#'+ctrlFormDesigner2024['Settings']['ToolboxTabsId']+'\x20.sortable-item.toolbox-component-selected'){cssRules[j]['style']['backgroundColor']=selectedTabBackColour;break;}}}catch(e){}}$(window)['resize'](function(){ctrlFormDesigner2024['FormRenderer']['UpdateRendererDimensions']();}),ctrlFormDesigner2024['FormRenderer']['UpdateRendererDimensions']();},'ExceptionErrorHandler':function(errorMsg,url,lineNumber,column,errorObj){var orphans=$('div['+TriSysFlexiva['Settings']['FieldDataTag']+'],\x20div['+TriSysFlexiva['Settings']['ComponentDataTag']+']')['not']('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20*,\x20#'+ctrlFormDesigner2024['Settings']['PreviewCanvasId']+'\x20*,\x20'+'#'+TriSysFlexiva['Settings']['ToolboxComponentsId']+'\x20*,\x20#'+TriSysFlexiva['Settings']['ToolboxFieldsId']+'\x20*\x20');console['log']('Found\x20orphans:',orphans['length']);if(orphans['length']>0x0)return orphans['remove'](),ctrlFormDesigner2024['Components']['PopulateToolbox'](),ctrlFormDesigner2024['Fields']['PopulateToolbox'](ctrlFormDesigner2024['Settings']['Context']['FormObject']),ctrlFormDesigner2024['InjectDragAndDropTags'](ctrlFormDesigner2024['Settings']['EditorCanvasId']),!![];},'SetDimensions':function(context){var iHeight=$(window)['height']()-0x9a,iCanvasHeight=iHeight+0xa;$('.editor-canvas')['css']('max-height',iCanvasHeight+'px')['css']('height',iCanvasHeight+'px'),$('.preview-canvas')['css']('max-height',iCanvasHeight+'px')['css']('height',iCanvasHeight+'px'),TriSysSDK['EntityFormTabs']['AddVerticalScrollBar']($('.toolbox-section'),!![]);var iHeightOfToolbox=iHeight-0xb4;$('.toolbox-section')['css']('height',iHeightOfToolbox+'px'),iHeightOfToolbox-=0x2d,$('#ctrlFormDesigner2024-tabs-list')['css']('height',iHeightOfToolbox+'px'),iHeightOfToolbox=iHeight-0xbc,$('#ctrlFormDesigner2024-form-properties-list')['css']('height',iHeightOfToolbox+'px');},'PreviewMode':function(sDevice){const sEditMenuID='#ctrlFormDesigner2024-edit-menu',sPreviewMenuID='#ctrlFormDesigner2024-preview-menu',sToolsBlock='#ctrlFormDesigner2024-LeftBlock',sConfigureLayoutID='#ctrlFormDesigner2024-configure-layout',sSaveButtonID='#ctrlFormDesigner2024-save-design',fnEnableWidget=function(bEnable,sID){const elem=$(sID),sStyle='disable-element';bEnable?elem['removeClass'](sStyle):elem['addClass'](sStyle);},bEnteringPreviewMode=sDevice?!![]:![];if(!bEnteringPreviewMode)$(sPreviewMenuID)['show'](),$(sEditMenuID)['hide'](),$('#ctrlFormDesigner2024-RotateDevice')['hide'](),fnEnableWidget(!![],sToolsBlock),$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId'])['show'](),$('#'+ctrlFormDesigner2024['Settings']['PreviewCanvasId'])['hide'](),fnEnableWidget(!![],sConfigureLayoutID),ctrlFormDesigner2024['Persistence']['UndoRedoButtonState'](),fnEnableWidget(!![],sSaveButtonID);else{$(sEditMenuID)['show'](),$(sPreviewMenuID)['hide'](),fnEnableWidget(![],sToolsBlock),$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId'])['hide'](),$('#'+ctrlFormDesigner2024['Settings']['PreviewCanvasId'])['show'](),fnEnableWidget(![],sConfigureLayoutID),ctrlFormDesigner2024['Persistence']['UndoButtonEnabled'](![]),ctrlFormDesigner2024['Persistence']['RedoButtonEnabled'](![]),fnEnableWidget(![],sSaveButtonID);const elemPreviewCanvas=document['getElementById'](ctrlFormDesigner2024['Settings']['PreviewCanvasId']),jqueryCanvas=$('#'+ctrlFormDesigner2024['Settings']['PreviewCanvasId']);if(sDevice==='FormTab'){const elemEditorCanvas=document['getElementById'](ctrlFormDesigner2024['Settings']['EditorCanvasId']),sHTML=elemEditorCanvas['innerHTML'];ctrlFormDesigner2024['FormRenderer']['RenderPreview'](sHTML,elemPreviewCanvas);}else sDevice==='FullForm'?ctrlFormDesigner2024['RenderFullFormPreview'](elemPreviewCanvas,jqueryCanvas):ctrlFormDesigner2024['RenderFormInDevicePreview'](sDevice,jqueryCanvas);}},'RenderFullFormPreview':function(elemPreviewCanvas,jqueryCanvas,options){const formObject=ctrlFormDesigner2024['Settings']['Context']['FormObject'],sHTML=TriSysFlexiva['Forms']['Renderer']['FullFormHTML'](formObject);var whatToRender=options?document['getElementById']('ctrlFormDesigner2024-preview-device-rendered-form'):elemPreviewCanvas;ctrlFormDesigner2024['FormRenderer']['RenderPreview'](sHTML,whatToRender);var bSetHeightOfFormBlock=!![];if(options){options['minWidth']&&jqueryCanvas['find']('div[class*=\x22col-md-\x22]')['each'](function(){this['className']=this['className']['replace'](/\bcol-md-\d+\b/,'col-md-'+options['minWidth']);});options['containerClass']&&jqueryCanvas['addClass'](options['containerClass']);if(options['doNotSetFormBlockHeight'])bSetHeightOfFormBlock=![];}if(bSetHeightOfFormBlock){const iHeight=jqueryCanvas['height']()-0xa;var firstBlockFull=jqueryCanvas['find']('.block.full')['first']();firstBlockFull['css']('height',iHeight+'px');}if(formObject['Tabs']['length']===0x1)$('#form-template-master-tab-panel-buttons')['remove']();else for(var i=0x1;i<formObject['Tabs']['length'];i++){const tab=formObject['Tabs'][i];if(tab['Visible']&&tab['Selected'])TriSysSDK['EntityFormTabs']['HighlightTabButton'](tab['ID']);}},'RenderFormInDevicePreview':function(sDeviceType,elemPreviewCanvas){var sImage='https://apex.trisys.co.uk/images/devices/',rendererDimensions=null,options={'doNotSetFormBlockHeight':!![]};ctrlFormDesigner2024['Settings']['CurrentDeviceBeingPreviewed']=sDeviceType;switch(sDeviceType){case'Desktop':sImage+='desktop-computer.png',rendererDimensions={'zoomPercentage':0x4b,'devicePercentages':{'top':0.0643,'left':0.047,'width':0.93,'height':0.735}};break;case'Laptop':sImage+='laptop.png',rendererDimensions={'zoomPercentage':0x5a,'devicePercentages':{'top':0.0843,'left':0.11,'width':0.8,'height':0.79}};break;case'Tablet':sImage+='iPad.png',rendererDimensions={'zoomPercentage':0x5a,'devicePercentages':{'top':0.078,'left':0.07,'width':0.9,'height':0.85},'padding':0x0,'allowRotation':!![]},options['minWidth']=0x6;break;case'Tablet-Landscape':sImage+='iPad-Landscape.png',rendererDimensions={'zoomPercentage':0x5a,'devicePercentages':{'top':0.075,'left':0.09,'width':0.85,'height':0.88},'padding':0x0,'allowRotation':!![]},options['minWidth']=0x6;break;case'Phone':sImage+='iPhone.png',rendererDimensions={'zoomPercentage':0x6e,'devicePercentages':{'top':0.12,'left':0.083,'width':0.88,'height':0.78},'padding':0x0,'allowRotation':!![]},options['minWidth']=0xc;break;case'Phone-Landscape':sImage+='iPhone-Landscape.png',rendererDimensions={'zoomPercentage':0x6e,'devicePercentages':{'top':0.078,'left':0.12,'width':0.79,'height':0.89},'padding':0x0,'allowRotation':!![]},options['minWidth']=0xc;break;}var sHTML=$('#ctrlFormDesigner2024-preview-device-html')['html']();elemPreviewCanvas['html'](sHTML),$('#ctrlFormDesigner2024-preview-device-container')['css']('background-image','url('+sImage+')');const jqueryDeviceContainer=$('#ctrlFormDesigner2024-preview-device-container');rendererDimensions['height']=jqueryDeviceContainer['height']()-0x28;const sDeviceRendererID='ctrlFormDesigner2024-preview-device-renderer';var elemDeviceRenderer=$('#'+sDeviceRendererID);const elemDevicePreviewCanvas=document['getElementById'](sDeviceRendererID);elemDeviceRenderer['css']('padding','');if(rendererDimensions['padding']==0x0)elemDeviceRenderer['css']('padding',rendererDimensions['padding']);const elemFormContainer=$('#ctrlFormDesigner2024-preview-device-rendered-form');elemFormContainer['css']('zoom','');if(rendererDimensions['zoomPercentage']>0x0)elemFormContainer['css']('zoom',rendererDimensions['zoomPercentage']+'%');if(rendererDimensions['allowRotation'])$('#ctrlFormDesigner2024-RotateDevice')['show']();ctrlFormDesigner2024['FormRenderer']['UpdateRendererDimensions'](rendererDimensions),ctrlFormDesigner2024['RenderFullFormPreview'](elemDevicePreviewCanvas,elemDeviceRenderer,options);},'AddNewRow':function(iRowCount){TriSysApex['UI']['ShowMessage']('Add\x20'+iRowCount+'\x20Row(s)');},'UndoLayout':function(what){if(what['Undo'])ctrlFormDesigner2024['Persistence']['Undo']();else ctrlFormDesigner2024['Persistence']['Redo']();},'Maximise':function(what){const MinID='ctrlFormDesigner2024-MinimizeTools',MaxID='ctrlFormDesigner2024-MaximizeTools',sToolsBlock='#ctrlFormDesigner2024-LeftBlock',sDesignBlock='#ctrlFormDesigner2024-RightBlock';what['HideTools']?($('#'+MinID)['hide'](),$('#'+MaxID)['show'](),$(sToolsBlock)['hide'](),$(sDesignBlock)['removeClass']('col-md-10\x20col-lg-10')['addClass']('col-md-12\x20col-lg-12')):($('#'+MinID)['show'](),$('#'+MaxID)['hide'](),$(sToolsBlock)['show'](),$(sDesignBlock)['removeClass']('col-md-12\x20col-lg-12')['addClass']('col-md-10\x20col-lg-10'));},'RotateDevice':function(){const elemContainer=$('#ctrlFormDesigner2024-preview-device-container');elemContainer['css']({'transition':'transform\x201s\x20ease-in-out,\x20opacity\x201s\x20ease-in-out','transform-origin':'top\x20left','transform':'rotate(90deg)\x20translate(0,\x20-100%)','opacity':'0'});var sDeviceType=ctrlFormDesigner2024['Settings']['CurrentDeviceBeingPreviewed'];const sLandscapeSuffix='-Landscape',bLandscapeMode=sDeviceType['endsWith'](sLandscapeSuffix);sDeviceType=bLandscapeMode?sDeviceType['replace'](sLandscapeSuffix,''):sDeviceType+sLandscapeSuffix,setTimeout(function(){elemContainer['css']({'transition':'transform\x201s\x20ease-in-out,\x20opacity\x201s\x20ease-in-out'}),requestAnimationFrame(function(){elemContainer['css']({'transform':'none','opacity':'1'});}),ctrlFormDesigner2024['PreviewMode'](sDeviceType);},0x3e8);},'AddComponent':function(){TriSysApex['Toasters']['Info']('Add\x20component'),ctrlFormDesigner2024['Components']['ShowAccordion'](),ctrlFormDesigner2024['Persistence']['PushChange']({'componentsChange':!![]});},'SaveDesign':function(){var sFileName=TriSysSDK['Controls']['FileManager']['GetFileNameFromPath'](ctrlFormDesigner2024['Settings']['Context']['FullPath']);const formObject=ctrlFormDesigner2024['Settings']['Context']['FormObject'],elemPreviewCanvas=document['getElementById'](ctrlFormDesigner2024['Settings']['PreviewCanvasId']);ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['forEach'](function(tab){if(tab['HTML']&&tab['HTML']['length']>0x0){var sHTML=tab['HTML']['join']('\x0a');ctrlFormDesigner2024['FormRenderer']['RenderPreview'](sHTML,elemPreviewCanvas,{'DoNotRenderComponentsAndFields':!![]}),sHTML=elemPreviewCanvas['innerHTML'],sHTML=sHTML['replace'](/><div/g,'>\x0a<div'),sHTML=sHTML['replace'](/><\/div/g,'>\x0a</div'),sHTML=ctrlFormDesigner2024['Prettifier']['HTML'](sHTML),tab['HTML']=ctrlFormDesigner2024['CleanHTMLArray'](sHTML['split']('\x0a'));}}),formObject['Name']=sFileName['replace']('.json','');if(!formObject['AuthorDetails'])formObject['AuthorDetails']={};formObject['AuthorDetails']['LastUpdated']=moment()['format'](ctrlFormDesigner2024['Settings']['DateFormat']);var userCredentials=TriSysApex['LoginCredentials']['UserCredentials']();if(userCredentials){const contactCRM=userCredentials['LoggedInUser']['CRMContact'];formObject['AuthorDetails']['UpdatingUser']=contactCRM['FullName'];}const sJSON=JSON['stringify'](formObject);ctrlFormDesigner2024['WriteSavedDesignToWebAPI'](ctrlFormDesigner2024['Settings']['Context']['FullPath'],formObject['Name'],sJSON),TriSysApex['Toasters']['Success']('Form\x20design\x20'+sFileName+'\x20saved.');},'CleanHTMLArray':function(arr){return arr['filter'](function(str){return str['trim']()['length']>0x0;});},'WriteSavedDesignToWebAPI':function(sFullPath,sFileName,sJSON){var fileRequest={'FileName':sFullPath,'Base64Text':TriSysAPI['Encryption']['Base64']['encode'](sJSON)},payloadObject={};payloadObject['URL']='DeveloperStudio/WriteFile',payloadObject['OutboundDataPacket']=fileRequest,payloadObject['InboundDataFunction']=function(fileResponse){TriSysApex['UI']['HideWait']();if(fileResponse){if(fileResponse['Success']){const sURL=fileResponse['URL'];TriSysApex['Toasters']['Success']('Form\x20design\x20'+sFileName+'\x20saved.');}else TriSysApex['UI']['ShowMessage'](fileResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['ErrorHandlerRedirector']('ctrlFormDesigner2024.WriteSavedDesignToWebAPI:\x20',request,status,error);},TriSysApex['UI']['ShowWait'](null,'Saving\x20Form\x20Design...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'InjectDropZonesAfterLoadingHTML':function(){const rootElement=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']);var iRow=0x0;rootElement['find']('.row')['each'](function(){iRow+=0x1;var iColumn=0x0;const rowElement=$(this);rowElement['find']('div['+TriSysFlexiva['Settings']['PanelDataTag']+']')['each'](function(){iColumn+=0x1;const panelElement=$(this),sID=panelElement['attr']('id'),sComponentsAndFieldsHTML=panelElement['html'](),sDivID='div-drop-zone-'+iRow+'-'+iColumn,sHTML='<div\x20class=\x22inner-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22div-drop-zone\x22\x20id=\x22'+sDivID+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+ctrlFormDesigner2024['TabLayout']['DropToolsHereHeaderHTML'](ctrlFormDesigner2024['Settings']['CalculatedBelow'],sID)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+sComponentsAndFieldsHTML+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';panelElement['html'](sHTML);const lstComponentsAndFields=panelElement['find']('div['+TriSysFlexiva['Settings']['ComponentDataTag']+'],\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20div['+TriSysFlexiva['Settings']['FieldDataTag']+']');lstComponentsAndFields['each'](function(){const sObjectID=$(this)['attr']('id');ctrlFormDesigner2024['InjectDesignTimeTable'](sObjectID);});});});},'InjectDesignTimeTable':function(sID){$('#'+sID+'\x20table.design-time-only')['remove'](),$('#'+sID)['addClass']('sortable-item');const objectData=TriSysFlexiva['Forms']['Renderer']['ReadFieldOrComponentData'](sID);if(objectData){var sHTML='',sCaption='';if(objectData['component'])sCaption=objectData['component']['LabelVisible']&&objectData['component']['LabelText']?objectData['component']['LabelText']:objectData['component']['Name'],sHTML=ctrlFormDesigner2024['Components']['DesignTimeObjectTable'](sCaption,objectData['component']['Icon'],objectData['component']['Description'],ctrlFormDesigner2024['Settings']['ComponentColour']);else objectData['field']&&(sCaption=objectData['field']['LabelVisible']&&objectData['field']['LabelText']?objectData['field']['LabelText']:objectData['field']['Name'],sHTML=ctrlFormDesigner2024['Components']['DesignTimeObjectTable'](sCaption,objectData['field']['Icon'],objectData['field']['Description'],ctrlFormDesigner2024['Settings']['FieldColour']));$('#'+sID)['append'](sHTML);}},'ExtractDropZonesBeforeSavingHTML':function(sHTML){const elemPreviewCanvas=document['getElementById'](ctrlFormDesigner2024['Settings']['PreviewCanvasId']);return ctrlFormDesigner2024['FormRenderer']['RenderPreview'](sHTML,elemPreviewCanvas,{'DoNotRenderComponentsAndFields':!![]}),sHTML=elemPreviewCanvas['innerHTML'],sHTML;},'InjectDragAndDropTags':function(sID){var sConnectWith='',sDivDropZones='#'+TriSysFlexiva['Settings']['ToolboxComponentsId']+',\x20#'+TriSysFlexiva['Settings']['ToolboxFieldsId'],sAllZones=sDivDropZones,dropZoneIds=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20.div-drop-zone')['map'](function(){return $(this)['attr']('id');})['get']();console['log'](dropZoneIds);const iNumberOfZones=dropZoneIds['length'];var dropZonesToDestroy=JSON['parse'](JSON['stringify'](dropZoneIds));dropZonesToDestroy['push'](TriSysFlexiva['Settings']['ToolboxComponentsId']),dropZonesToDestroy['push'](TriSysFlexiva['Settings']['ToolboxFieldsId']),dropZonesToDestroy['forEach'](function(dropZoneId){const sDivDropZone='#'+dropZoneId;var sortable=$(sDivDropZone)['data']('kendoSortable');sortable&&sortable['destroy']();}),dropZoneIds['forEach'](function(dropZoneId){const sDivDropZone='#'+dropZoneId;if(sConnectWith['length']>0x0)sConnectWith+=',\x20';sConnectWith+=sDivDropZone,sDivDropZones+=',\x20'+sDivDropZone,sAllZones+=',\x20'+sDivDropZone;});const sPlaceholder='<div\x20class=\x22placeholder\x22\x20id=\x22placeholder\x22><i\x20class=\x22gi\x20gi-eyedropper\x22></i>\x20&nbsp;\x20Drop\x20Here!</div>',fnPlaceholder=function(element){var sColour=TriSysProUI['ThemedColour']();return $(sPlaceholder)['addClass']('placeholder')['css']({'border':'1px\x20dashed\x20'+sColour,'color':sColour,'background-color':'white'});;},fnHint=function(element){const sOpacity='0.80';return element['clone']()['addClass']('sortable-hint')['css']('opacity',sOpacity);},sortableOptions={'filter':'.sortable-item','connectWith':sConnectWith,'placeholder':function(element){return fnPlaceholder(element);},'hint':function(element){return fnHint(element);},'change':function(e){try{var draggedItem=e['item'],newIndex=e['newIndex'],dropZone=e['target'];ctrlFormDesigner2024['ToolboxItemDropped'](draggedItem),ctrlFormDesigner2024['Persistence']['PushChange']();}catch(e){$('.k-drag-clone')['remove'](),$('.k-item.k-drag-clue')['remove'](),$('.k-drag-status')['remove']();var orphans=$('div['+TriSysFlexiva['Settings']['FieldDataTag']+'],\x20div['+TriSysFlexiva['Settings']['ComponentDataTag']+']')['not']('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20*,\x20#'+ctrlFormDesigner2024['Settings']['PreviewCanvasId']+'\x20*,\x20'+'#'+TriSysFlexiva['Settings']['ToolboxComponentsId']+'\x20*,\x20#'+TriSysFlexiva['Settings']['ToolboxFieldsId']+'\x20*\x20');console['log']('Found\x20orphans:',orphans['length']),orphans['remove']();}},'start':function(e){try{}catch(error){console['error']('Sort\x20start\x20error:',error),$('.k-drag-clone,\x20.k-drag-clue,\x20.k-drag-status')['remove']();}},'end':function(e){try{}catch(error){console['error']('Sort\x20end\x20error:',error),$('.k-drag-clone,\x20.k-drag-clue,\x20.k-drag-status')['remove']();}},'dragend':function(e){$('.k-drag-clone,\x20.k-drag-clue,\x20.k-drag-status')['remove']();}};$('#'+TriSysFlexiva['Settings']['ToolboxComponentsId'])['kendoSortable'](sortableOptions),$('#'+TriSysFlexiva['Settings']['ToolboxFieldsId'])['kendoSortable'](sortableOptions),dropZoneIds['forEach'](function(dropZoneId){$('#'+dropZoneId)['kendoSortable']({'filter':'.sortable-item','connectWith':sAllZones,'placeholder':function(element){return fnPlaceholder(element);},'hint':function(element){return fnHint(element);},'change':function(e){try{if(e['action']=='receive'){const $draggedItem=$(e['item']),sParentID=$draggedItem['parent']()['attr']('id'),bDropZone=sParentID['startsWith']('div-drop-zone-');bDropZone&&ctrlFormDesigner2024['Persistence']['PushChange']();}}catch(e){}}});});const backgroundColor=TriSysProUI['GroupBackColour'](),sBorder='1px\x20dashed\x20'+TriSysProUI['NavBarInverseColour'](),elemZone=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20.div-drop-zone');elemZone['css']('border-color',TriSysProUI['NavBarInverseColour']()),elemZone['css']('background-color',backgroundColor);return;},'ToolboxItemDropped':function(toolboxItem){const sID=toolboxItem['attr']('id'),sGUID=TriSysSDK['Miscellaneous']['GUID'](),objectData=TriSysFlexiva['Forms']['Renderer']['ReadFieldOrComponentData'](sID);var sCallbackEditor=null;if(objectData['field'])objectData['field']['ID']=sGUID,TriSysFlexiva['Forms']['Renderer']['Properties']['WriteToDOM'](sID,TriSysFlexiva['Settings']['FieldDataTag'],objectData['field']),sCallbackEditor=ctrlFormDesigner2024['Fields']['ToolboxItemEditorFunctionCall'](sGUID);else objectData['component']&&(objectData['component']['ID']=sGUID,TriSysFlexiva['Forms']['Renderer']['Properties']['WriteToDOM'](sID,TriSysFlexiva['Settings']['ComponentDataTag'],objectData['component']),sCallbackEditor=ctrlFormDesigner2024['Components']['ToolboxItemEditorFunctionCall'](sGUID));toolboxItem['attr']('id',sGUID),toolboxItem['attr']('onclick',sCallbackEditor);},'getPlaceholder':function(sTag){var sSubTag=sTag,sColspan='';!sTag&&(sTag='tr',sSubTag='td',sColspan='\x20colspan=\x222\x22');var lColour=$('.themed-color')['css']('color');return'<'+sTag+'\x20class=\x22sortable-placeholder\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<'+sSubTag+sColspan+'\x20style=\x27height:\x2040px;\x20background-color:\x20\x22\x20+\x20lColour\x20+\x20\x22;\x27></'+sSubTag+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</'+sTag+'>';},'AddDropZoneTags':function(options){var elem=options['ID']['startsWith']('#')||options['ID']['startsWith']('.')?$(options['ID']):$('#'+options['ID']);options['child']&&(elem=elem['find'](options['child'])),elem['addClass']('drop-zone');},'RemoveDropZoneTags':function(options){var elem=$('#'+options['ID']);if(options['child'])elem=elem['find'](options['child']);elem['removeClass']('drop-zone');},'OpenAccordion':function(sName){$('#ctrlFormDesigner2024-Tools-group-panel\x20.panel-collapse')['removeClass']('collapse\x20in')['addClass']('collapse')['attr']('aria-expanded','false')['css']('height','0px'),$('#ctrlFormDesigner2024-'+sName)['addClass']('collapse\x20in')['attr']('aria-expanded','true')['removeAttr']('style');},'FormProperties':{'Populate':function(formObject){const sPrefix='#ctrlFormDesigner2024-form-property-';$(sPrefix+'name')['text'](formObject['Name']),$(sPrefix+'type')['text'](formObject['Form']['Type']);const sIcon='<i\x20class=\x22'+formObject['Form']['Icon']+'\x20themed-color-spring\x22></i>';$(sPrefix+'caption')['html'](sIcon+'\x20'+formObject['Form']['Caption']),$(sPrefix+'description')['text'](formObject['Form']['Description']);if(formObject['AuthorDetails']&&formObject['AuthorDetails']['LastUpdated']&&formObject['AuthorDetails']['UpdatingUser']){const sAuthor=formObject['AuthorDetails']['UpdatingUser']+'<br>'+formObject['AuthorDetails']['LastUpdated'];$(sPrefix+'last-author')['html'](sAuthor);}},'ShowAccordion':function(){ctrlFormDesigner2024['OpenAccordion']('properties');},'EditFormProperties':function(){const fnOpenFormProperties=function(options){ctrlFormDesigns['EditFormPropertiesModal'](options);},fnProceedToEditFormProperties=function(){setTimeout(function(){TriSysApex['FormsManager']['CloseForm']('FormDesigner2024'),TriSysApex['FormsManager']['OpenForm']('AppStudioHome'),fnOpenFormProperties();},0xa);};var bChanges=ctrlFormDesigner2024['Persistence']['ChangesMade']();if(bChanges){const sMessage='You\x20have\x20edited\x20this\x20form\x20design.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Save\x20changes\x20before\x20editing\x20form\x20properties\x20(Yes),\x20or\x20edit\x20anyway\x20(No),\x20or\x20Cancel?';TriSysApex['UI']['questionYesNoCancel'](sMessage,'Edit\x20Form\x20Properties','Yes,\x20Save\x20Changes',function(){return ctrlFormDesigner2024['SaveDesign'](),fnProceedToEditFormProperties(),!![];},'No,\x20Lose\x20Changes',function(){return fnProceedToEditFormProperties(),!![];},'Cancel',function(){return!![];});}else fnProceedToEditFormProperties();}},'Tabs':{'PopulateTabs':function(lstTab){if(!lstTab||lstTab['length']==0x0)return;var sTriSysHTMLStart='<div\x20id=\x22'+ctrlFormDesigner2024['Settings']['ToolboxTabsId']+'\x22\x20class=\x22toolbox-zone\x22>',sTriSysEndHTML='</div>',sHTML=sTriSysHTMLStart,iIndex=0x0;lstTab['forEach'](function(tab){sHTML+=ctrlFormDesigner2024['Tabs']['GetToolboxItemHTML'](tab),iIndex+=0x1,tab['Index']=iIndex;}),sHTML+=sTriSysEndHTML;var elemItemList=$('#ctrlFormDesigner2024-tab-list-items');elemItemList['html'](sHTML);const selectedTab=lstTab['find'](tab=>tab['SelectedInDesigner']);if(selectedTab)ctrlFormDesigner2024['Tabs']['Select'](selectedTab['ID'],!![]);},'ShowAccordion':function(){ctrlFormDesigner2024['OpenAccordion']('tabs');},'ToolboxItemSelectFunctionCall':function(sTabID){return'ctrlFormDesigner2024.Tabs.Select(\x27'+sTabID+'\x27)';},'Select':function(sTabID,bCalledFromCode){$('#'+ctrlFormDesigner2024['Settings']['ToolboxTabsId']+'\x20.sortable-item.toolbox-component-selected')['removeClass']('toolbox-component-selected')['addClass']('toolbox-component'),$('#'+ctrlFormDesigner2024['Settings']['ToolboxPrefix']+sTabID)['removeClass']('toolbox-component')['addClass']('toolbox-component-selected'),ctrlFormDesigner2024['Tabs']['SelectTab'](sTabID,bCalledFromCode);},'GetToolboxItemHTML':function(tab){var sCaption=tab['Caption'],sTooltip=tab['Description']?tab['Description']:tab['ID'],sID=ctrlFormDesigner2024['Settings']['ToolboxPrefix']+tab['ID'];const sCallbackEditor='\x20onclick=\x22'+ctrlFormDesigner2024['Tabs']['ToolboxItemSelectFunctionCall'](tab['ID'])+'\x22';var sTabJSON=JSON['stringify'](tab),sDataTag='\x20'+ctrlFormDesigner2024['Settings']['TabDataTag']+'=\x22'+TriSysAPI['Encryption']['Base64']['encode'](sTabJSON)+'\x22\x20',sIcon=tab['Icon']?tab['Icon']:'gi\x20gi-more',sTabHTML='<div\x20class=\x22sortable-item\x20toolbox-tab\x22\x20id=\x22'+sID+'\x22'+sDataTag+sCallbackEditor+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+ctrlFormDesigner2024['Components']['DesignTimeObjectTable'](sCaption,sIcon,sTooltip,'themed-color')+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';return sTabHTML;},'LoadFilter':function(){var txtFilter=$('#'+'ctrlFormDesigner2024-Tabs-search');txtFilter['off']()['keyup'](function(e){e['keyCode']!=0xd&&(sFilter=txtFilter['val'](),ctrlFormDesigner2024['Components']['Filter'](sFilter,ctrlFormDesigner2024['Settings']['ToolboxTabsId']));});},'SelectedTab':function(){const elemSelectedTab=$('#'+ctrlFormDesigner2024['Settings']['ToolboxTabsId']+'\x20.sortable-item.toolbox-component-selected')['first']();if(elemSelectedTab['length']==0x1){const sTabID=elemSelectedTab['attr']('id')['replace'](ctrlFormDesigner2024['Settings']['ToolboxPrefix'],'');var tab=ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['find'](tab=>tab['ID']===sTabID);return tab;}},'SelectedTabIndex':function(){const elemSelectedTab=$('#'+ctrlFormDesigner2024['Settings']['ToolboxTabsId']+'\x20.sortable-item.toolbox-component-selected')['first']();if(elemSelectedTab['length']==0x1){const sTabID=elemSelectedTab['attr']('id')['replace'](ctrlFormDesigner2024['Settings']['ToolboxPrefix'],'');for(var i=0x0;i<ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['length'];i++){var tab=ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs'][i];if(tab['ID']===sTabID)return i;}}return-0x1;},'SelectTab':function(tabID,bCalledFromCode){var tab=ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['find'](tab=>tab['ID']===tabID),sHTML='';if(tab&&tab['HTML']&&tab['HTML']['length']>0x0)sHTML=tab['HTML']['join']('\x0a');var elemEditorCanvas=document['getElementById'](ctrlFormDesigner2024['Settings']['EditorCanvasId']);if(elemEditorCanvas){if(sHTML==''){const sPreHTML='<div\x20class=\x22block\x20full\x20form-control-borderless\x20flexiva-form\x22>',sPostHTML='<div>';sHTML=sPreHTML+sHTML+sPostHTML;}elemEditorCanvas['innerHTML']=sHTML,ctrlFormDesigner2024['InjectDropZonesAfterLoadingHTML'](),ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),setTimeout(function(){ctrlFormDesigner2024['InjectDragAndDropTags'](ctrlFormDesigner2024['Settings']['EditorCanvasId']),!bCalledFromCode&&ctrlFormDesigner2024['Persistence']['PushChange'](bCalledFromCode?null:{'tabID':tabID});},0xa);}},'UpdateFormTabHTML':function(sHTML){const tab=ctrlFormDesigner2024['Tabs']['SelectedTab']();if(!sHTML)sHTML='';sHTML=ctrlFormDesigner2024['ExtractDropZonesBeforeSavingHTML'](sHTML),tab['HTML']=ctrlFormDesigner2024['CleanHTMLArray'](sHTML['split']('\x0a'));},'SelectThisTabOnlyInDesignerList':function(sTabID){ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['forEach'](function(tab){tab['SelectedInDesigner']=tab['ID']===sTabID;});},'ToolbarClick':function(what){const tab=ctrlFormDesigner2024['Tabs']['SelectedTab'](),iTabIndex=ctrlFormDesigner2024['Tabs']['SelectedTabIndex']();if(tab&&iTabIndex>=0x0){if(what['Add'])ctrlFormDesigner2024['Tabs']['EditFormTab']();else{if(what['Edit'])ctrlFormDesigner2024['Tabs']['EditFormTab'](tab);else{if(what['MoveUp']){if(iTabIndex>0x1){const tabToMove=ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['splice'](iTabIndex,0x1);ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['splice'](iTabIndex-0x1,0x0,tabToMove[0x0]),ctrlFormDesigner2024['Tabs']['SelectThisTabOnlyInDesignerList'](tab['ID']),ctrlFormDesigner2024['Tabs']['PopulateTabs'](ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']),ctrlFormDesigner2024['Persistence']['PushChange']({'tabID':tab['ID']});}}else{if(what['MoveDown']){if(iTabIndex>0x0&&iTabIndex<ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['length']-0x1){const tabToMove=ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['splice'](iTabIndex,0x1);ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['splice'](iTabIndex+0x1,0x0,tabToMove[0x0]),ctrlFormDesigner2024['Tabs']['SelectThisTabOnlyInDesignerList'](tab['ID']),ctrlFormDesigner2024['Tabs']['PopulateTabs'](ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']),ctrlFormDesigner2024['Persistence']['PushChange']({'tabID':tab['ID']});}}else{if(what['Delete']&&iTabIndex>0x0){const sMessage='Are\x20you\x20sure\x20you\x20want\x20to\x20delete\x20the\x20tab\x20\x27'+tab['Caption']+'\x27?';TriSysApex['UI']['questionYesNo'](sMessage,'Delete\x20Form\x20Tab','Yes',function(){const tabToDelete=ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['splice'](iTabIndex,0x1),firstTabID=ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs'][0x0]['ID'];return ctrlFormDesigner2024['Tabs']['SelectThisTabOnlyInDesignerList'](firstTabID),ctrlFormDesigner2024['Tabs']['PopulateTabs'](ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']),ctrlFormDesigner2024['Persistence']['PushChange']({'tabID':firstTabID}),!![];},'No');}}}}}}},'EditFormTab':function(tab){var sWhat=tab?'Edit':'Add',sName=tab?tab['ID']:'New';const sImage='gi\x20gi-more';var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=sWhat+'\x20Form\x20Tab:\x20'+sName,parametersObject['Image']=sImage,parametersObject['Maximize']=!![],parametersObject['CloseTopRightButton']=!![],parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'app-studio/ctrlFormTab.html',parametersObject['ButtonCentreText']='Apply',parametersObject['ButtonCentreVisible']=!![],parametersObject['ButtonCentreFunction']=function(){return ctrlFormDesigner2024['Tabs']['Apply'](tab);},parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightVisible']=!![],parametersObject['OnLoadCallback']=function(){tab=ctrlFormDesigner2024['Tabs']['LoadEditor'](tab);},TriSysApex['UI']['PopupMessage'](parametersObject);},'LoadEditor':function(tab){const sPrefix='ctrlFormTab-';if(!tab){var bSelected=!![];ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['forEach'](function(existingTab){if(existingTab['Selected'])bSelected=![];}),tab={'ID':TriSysSDK['Miscellaneous']['GUID'](),'Caption':'','Description':'New\x20form\x20tab\x20created\x20'+moment()['format'](ctrlFormDesigner2024['Settings']['DateFormat']),'Icon':'gi\x20gi-more','Visible':!![],'Enabled':!![],'Selected':bSelected};}return TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']({'rootElementId':sPrefix+'Root'}),$('#'+sPrefix+'ID')['text'](tab['ID']),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Caption',tab['Caption'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Description',tab['Description'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Icon',tab['Icon'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Icon']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Selected',tab['Selected'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Visible',tab['Visible'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Enabled',tab['Enabled'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']}),tab;},'Apply':function(tab){const sPrefix='ctrlFormTab-';tab['Caption']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Caption',TriSysSDK['Controls']['FieldTypes']['Text']),tab['Description']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Description',TriSysSDK['Controls']['FieldTypes']['Text']),tab['Icon']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Icon',TriSysSDK['Controls']['FieldTypes']['Icon']),tab['Selected']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Selected',TriSysSDK['Controls']['FieldTypes']['YesNo']),tab['Visible']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Visible',TriSysSDK['Controls']['FieldTypes']['YesNo']),tab['Enabled']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Enabled',TriSysSDK['Controls']['FieldTypes']['YesNo']);if(!tab['Caption'])return TriSysApex['UI']['ShowMessage']('Tab\x20caption\x20cannot\x20be\x20empty,\x20although\x20it\x20can\x20be\x20hidden.'),![];tab['Selected']&&ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['forEach'](function(existingTab){if(tab['ID']!==existingTab['ID'])existingTab['Selected']=![];});var foundTab=ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['find'](tabToFind=>tabToFind['ID']===tab['ID']);return!foundTab?ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']['push'](tab):foundTab=tab,ctrlFormDesigner2024['Tabs']['SelectThisTabOnlyInDesignerList'](tab['ID']),ctrlFormDesigner2024['Tabs']['PopulateTabs'](ctrlFormDesigner2024['Settings']['Context']['FormObject']['Tabs']),ctrlFormDesigner2024['Persistence']['PushChange']({'tabID':tab['ID']}),!![];}},'Components':{'PopulateToolbox':function(){const lstTool=TriSysFlexiva['Forms']['Renderer']['Components']['Tools']();lstTool['sort'](function(a,b){return a['Name']['localeCompare'](b['Name']);});var sTriSysHTMLStart='<div\x20id=\x22'+TriSysFlexiva['Settings']['ToolboxComponentsId']+'\x22\x20class=\x22toolbox-zone\x22>',sTriSysEndHTML='</div>',sHTML=sTriSysHTMLStart;lstTool['forEach'](function(component){sHTML+=ctrlFormDesigner2024['Components']['GetToolboxItemHTML'](component);}),sHTML+=sTriSysEndHTML;var elemItemList=$('#ctrlFormDesigner2024-component-list-items');elemItemList['html'](sHTML),ctrlFormDesigner2024['Components']['LoadFilter']();},'ShowAccordion':function(){ctrlFormDesigner2024['OpenAccordion']('components');},'ToolboxItemEditorFunctionCall':function(sComponentID){return'ctrlFormDesigner2024.Components.Editor(this)';},'GetToolboxItemHTML':function(component){var sCaption=component['Name'],sTooltip=component['Description'],sID=ctrlFormDesigner2024['Settings']['ToolboxPrefix']+component['ID'];const sCallbackEditor='\x20onclick=\x22'+ctrlFormDesigner2024['Components']['ToolboxItemEditorFunctionCall'](sID)+'\x22';var sComponentJSON=JSON['stringify'](component),sDataTag='\x20'+TriSysFlexiva['Settings']['ComponentDataTag']+'=\x22'+TriSysAPI['Encryption']['Base64']['encode'](sComponentJSON)+'\x22\x20',sComponentHTML='<div\x20class=\x22sortable-item\x20toolbox-component\x22\x20id=\x22'+sID+'\x22'+sDataTag+sCallbackEditor+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+ctrlFormDesigner2024['Components']['DesignTimeObjectTable'](sCaption,component['Icon'],sTooltip,ctrlFormDesigner2024['Settings']['ComponentColour'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';return sComponentHTML;},'DesignTimeObjectTable':function(sCaption,sIcon,sTooltip,sColour){const sHTML='<table\x20class=\x22design-time-only\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20title=\x22'+sTooltip+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22toolbox-item-icon\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22'+sIcon+'\x20'+sColour+'\x20toolbox-icon-only\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22text-truncate\x22>\x0a\x09\x09\x09\x09\x09\x09\x09\x09\x09'+sCaption+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</table>';return sHTML;},'Editor':function(thisObject,bField){var elem=$(thisObject);const sComponentOrFieldID=elem['attr']('id'),data=TriSysFlexiva['Forms']['Renderer']['ReadFieldOrComponentData'](sComponentOrFieldID);var sWhat=bField?'Field':'Component',sImage='fa\x20fa-wrench';if(data){const dataObject=bField?data['field']:data['component'];sImage=dataObject['Icon'];const sName=dataObject['Name'];var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=sWhat+'\x20Properties:\x20'+sName,parametersObject['Image']=sImage,parametersObject['Maximize']=!![],parametersObject['Width']=0x424,parametersObject['CloseTopRightButton']=!![],parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'app-studio/ctrlFieldComponentProperties.html',parametersObject['ButtonCentreText']='Apply',parametersObject['ButtonCentreVisible']=!![],parametersObject['ButtonCentreFunction']=function(){return ctrlFormDesigner2024['Components']['Properties']['Apply'](sComponentOrFieldID,bField);},parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightVisible']=!![],parametersObject['OnLoadCallback']=function(){ctrlFormDesigner2024['Components']['Properties']['Load'](dataObject,bField,sComponentOrFieldID);},TriSysApex['UI']['PopupMessage'](parametersObject);}},'LoadFilter':function(){var txtFilter=$('#'+'ctrlFormDesigner2024-Components-search');txtFilter['off']()['keyup'](function(e){e['keyCode']!=0xd&&(sFilter=txtFilter['val'](),ctrlFormDesigner2024['Components']['Filter'](sFilter,TriSysFlexiva['Settings']['ToolboxComponentsId']));});},'Filter':function(sFilter,sToolboxId){if(sFilter)sFilter=sFilter['toLowerCase']();var iShown=0x0,table=document['getElementById'](sToolboxId);$('#'+sToolboxId+'\x20div')['each'](function(){var bRowContainsText=$(this)['find']('td')['filter'](function(){return $(this)['text']()['toLowerCase']()['includes'](sFilter);})['length']>0x0;bRowContainsText?$(this)['show']():$(this)['hide']();});},'RemoveOverlaidControlButton':function(trElementId){var trElement=$('#'+trElementId);$(trElement)['find']('.overlay-mask,\x20.overlay-button')['remove'](),$(trElement)['find']('td:nth-child(2)')['hide'](),$(trElement)['find']('.toolbox-icon-only')['show'](),$(trElement)['addClass']('toolbox-component');},'OverlayWithControlButton':function(trElementId,options){if(!options)options={'component':!![]};var trElement=$('#'+trElementId),sLightThemedColour=TriSysProUI['ThemedColour'](0.05),$overlay=$('<div\x20class=\x22overlay-mask\x22></div>')['css']({'position':'absolute','top':0x0,'left':0x0,'width':'100%','height':'100%','backgroundColor':'rgba(211,\x20211,\x20211,\x200.05)','pointerEvents':'none'}),iWidth=$(trElement)['find']('td:first')['width'](),sID=$(trElement)['attr']('id');$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId'])['find']('div[id=\x22'+sID+'-overlay\x22]')['each'](function(){$(this)['remove']();}),$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId'])['find']('button[id=\x22'+sID+'-button\x22]')['each'](function(){$(this)['remove']();});const sObjectType=options['Field']?'Field':'Component';var sWhat=sID['replace'](ctrlFormDesigner2024['Settings']['ToolboxPrefix'],'')['replace']('_','.');const sButtonHTML='<button\x20class=\x22btn\x20btn-xs\x20btn-primary\x20overlay-button\x22\x20style=\x22width:'+iWidth+'px;\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20title=\x22Configure\x20'+sObjectType+':\x20'+sWhat+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fa\x20fa-cogs\x22></i>\x20&nbsp;\x20Configure\x20&nbsp;\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>';var $button=$(sButtonHTML)['css']({'position':'absolute','top':'6px','left':'6px','zIndex':0x2,'opacity':0.5,'pointerEvents':'auto'});$(trElement)['find']('.overlay-mask,\x20.overlay-button')['remove'](),$(trElement)['css']('position','relative')['append']($overlay)['append']($button),$overlay['attr']('id',sID+'-overlay'),$button['attr']('id',sID+'-button'),$(trElement)['find']('td:nth-child(2)')['show'](),$(trElement)['find']('.toolbox-icon-only')['hide']();const sClass='toolbox-'+options['field']?'field':'component';$(trElement)['removeClass'](sClass),$button['off']('click')['on']('click',function(){var sParentRowId=$(this)['closest']('tr')['attr']('id');TriSysApex['UI']['ShowMessage'](sObjectType+'\x20button\x20clicked.\x20'+'<br>Parent\x20ID:\x20'+sParentRowId+'<br>'+sObjectType+':\x20'+sWhat);});},'Properties':{'Load':function(dataObject,bField,sComponentOrFieldID){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'];$('#'+sPrefix+'ID')['text'](sComponentOrFieldID),TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']({'rootElementId':sPrefix+'Root'}),ctrlFormDesigner2024['Components']['Properties']['EventHandlers'](),ctrlFormDesigner2024['Components']['Properties']['ReadAndPopulate'](dataObject,bField,sComponentOrFieldID);if(dataObject['Developer']&&dataObject['Developer']['FullPath'])$('#'+sPrefix+'FullPath')['text'](dataObject?dataObject['Developer']['FullPath']:'');ctrlFormDesigner2024['Components']['Properties']['InitialiseTabs'](!![]);if(bField){$('#'+sPrefix+'tab-control-specific')['hide']();const sFieldDataSourceInstructions='You\x20can\x20add\x20a\x20single\x20\x27Read\x27\x20data\x20source\x20request\x20to\x20pull\x20data\x20from\x20a\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ReST\x20API\x20to\x20populate\x20a\x20lookup\x20combo\x20for\x20this\x20field\x20on\x20the\x20form.';$('#ctrlFieldComponentProperties-DataSource-Table-Instructions')['text'](sFieldDataSourceInstructions),$('#ctrlFormProperties-DataSource-FieldMapping-Table')['show']();}if(dataObject&&dataObject['DataSources']){var iStart=0x2;for(var i=iStart;i<=dataObject['DataSources']['length'];i++){ctrlFormDesigner2024['Components']['Properties']['AddDataSource'](!![]);}TriSysFlexiva['DataSources']['GUI']['DisplayDataSources']({'DataSources':dataObject['DataSources'],'Prefix':ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'DataSource-','SpanSuffixCounter':!![],'OnCompletion':function(){if(bField){const sPrefix='ctrlFormProperties-DataSource-FieldMapping-';if(dataObject['MappedDataField'])TriSysSDK['CShowForm']['SetTextInCombo'](sPrefix+'Data',dataObject['MappedDataField']);if(dataObject['MappedDisplayField'])TriSysSDK['CShowForm']['SetTextInCombo'](sPrefix+'Display',dataObject['MappedDisplayField']);TriSysSDK['CShowForm']['SetCheckBoxValue'](sPrefix+'SortByDisplay',dataObject['SortByMappedDisplayField']);}else ctrlFormDesigner2024['Components']['Properties']['InjectComponentSpecificTemplate'](dataObject,bField,sPrefix);}});}const settings=ctrlFormDesigner2024['Components']['Properties']['Settings'];settings['DataObject']=dataObject,settings['ComponentOrFieldID']=sComponentOrFieldID,settings['Field']=bField;},'InjectComponentSpecificTemplate':function(dataObject,bField,sPrefix){const sTabPrefix=sPrefix+'tab-control-specific';$('#'+sTabPrefix+'-hyperlink')['attr']('title','Configure\x20'+dataObject['Description']),$('#'+sTabPrefix+'-image')['addClass'](dataObject['Icon']),$('#'+sTabPrefix+'-span')['text'](dataObject['Name']);const sTemplate='ctrlFieldComponentProperties-component-'+dataObject['Type']+'-template',sTemplateHTML=$('#'+sTemplate)['html'](),sRootElementID=sPrefix+'tab-pane-control-specific';$('#'+sRootElementID)['html'](sTemplateHTML),TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']({'rootElementId':sRootElementID}),ctrlFormDesigner2024['Components']['Properties']['SelectMasterRequestInCombo'](dataObject);switch(dataObject['Type']){case'SearchCriteria':ctrlFormDesigner2024['Components']['SearchCriteria']['PopulateFields'](dataObject),ctrlFormDesigner2024['Components']['SearchCriteria']['FieldChangeCallbacks'](dataObject);break;case'Grid':ctrlFormDesigner2024['Components']['Grid']['InitialiseTabs'](dataObject),ctrlFormDesigner2024['Components']['Grid']['ColumnChangeCallbacks'](dataObject);break;}},'ChosenDataSourceRequests':function(){const lst=[],dataSources=ctrlFormDesigner2024['Components']['Properties']['ReadChosenDataSourceRequests']();return dataSources&&dataSources['forEach'](function(request){const sDisplayDescription=request['DisplayDescription']['replace'](/&nbsp;/g,'\x20');lst['push']({'text':sDisplayDescription,'value':request['RequestId']});}),lst;},'SelectMasterRequestInCombo':function(dataObject){if(dataObject&&dataObject['DataSources']){if(dataObject['MasterRequest']&&dataObject['MasterRequest']['RequestId']){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sID=sPrefix+'component-SearchCriteria-MasterRequest';TriSysSDK['CShowForm']['writeFieldValueToWidget'](sID,dataObject['MasterRequest']['RequestId'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']});}}},'SelectedChosenDataSourceRequest':function(sRequestId,sText,sFieldID){if(sRequestId){const dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'],fnReAssignFields=function(){if(!dataObject['MasterRequest'])dataObject['MasterRequest']={};dataObject['MasterRequest']['RequestId']=sRequestId,TriSysApex['UI']['ShowWait'](null,'Querying\x20ReST\x20API...'),TriSysFlexiva['DataSources']['WebAPI']['Read'](function(sJSON){if(sJSON){const treeViewObjectArray=JSON['parse'](sJSON),dataSourceRequest=TriSysFlexiva['DataSources']['Management']['GetDataSource'](treeViewObjectArray,sRequestId);dataSourceRequest&&(dataSourceRequest['request']&&dataSourceRequest['request']['Fields']&&(dataObject['Fields']=dataSourceRequest['request']['Fields'],ctrlFormDesigner2024['Components']['SearchCriteria']['PopulateFields'](dataObject))),TriSysApex['UI']['HideWait']();}});};if(dataObject&&dataObject['Fields']&&dataObject['Fields']['length']>0x0){const sMessage='Are\x20you\x20sure\x20you\x20want\x20to\x20re-assign\x20the\x20fields\x20for\x20this\x20data\x20source\x20request?\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Warning\x20#1:\x20All\x20memory\x20of\x20your\x20specific\x20field\x20properties\x20will\x20be\x20lost\x20if\x20you\x20choose\x20Yes.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Warning\x20#2:\x20Your\x20existing\x20fields\x20will\x20probably\x20not\x20match\x20the\x20new\x20master\x20request\x20if\x20you\x20choose\x20No.';TriSysApex['UI']['questionYesNo'](sMessage,'Re-Assign\x20Fields','Yes',function(){return fnReAssignFields(),!![];},'No');}else fnReAssignFields();}},'RequestIDbyComponentTypeFromDataObject':function(dataObject){var sObjectID=dataObject['Type']+'-';switch(dataObject['Type']){case'SearchCriteria':sObjectID+='MasterRequest';break;case'Grid':sObjectID+='Request';break;}return sObjectID;},'RefreshMasterRequestsAndFieldLists':function(sComponentType,thisButton,bPreserveFields){const dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'],sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sID=sPrefix+'component-'+ctrlFormDesigner2024['Components']['Properties']['RequestIDbyComponentTypeFromDataObject'](dataObject);var selectedRequestId=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sID,TriSysSDK['Controls']['FieldTypes']['SkillCombo']),bMultipleDataSources=![];switch(dataObject['Type']){case'SearchCriteria':bMultipleDataSources=!![];break;case'Grid':ctrlFormDesigner2024['Components']['Grid']['ReadColumnsFromDataSource'](dataObject);break;}if(!bMultipleDataSources)return;TriSysSDK['CShowForm']['writeFieldValueToWidget'](sID,'',{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']});const lstRequest=ctrlFormDesigner2024['Components']['Properties']['ChosenDataSourceRequests']();if(lstRequest&&lstRequest['length']>0x0){TriSysSDK['CShowForm']['RePopulateDataSourceInCombo'](sID,lstRequest);if(selectedRequestId)TriSysSDK['CShowForm']['writeFieldValueToWidget'](sID,selectedRequestId,{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']});else selectedRequestId=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sID,TriSysSDK['Controls']['FieldTypes']['SkillCombo']);selectedRequestId&&!bPreserveFields&&ctrlFormDesigner2024['Components']['Properties']['SelectedChosenDataSourceRequest'](selectedRequestId);}},'InitialiseTabs':function(bLoading){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'];bLoading&&(TriSysSDK['EntityFormTabs']['AddClickEventHandlers'](sPrefix+'tabs',!![]),TriSysSDK['EntityFormTabs']['HighlightTabButton'](sPrefix+'tab-details'));var iMaxHeight=0x0;const elemSelector=$('#'+sPrefix+'Root\x20.tab-content\x20.tab-pane');elemSelector['each'](function(){const iHeight=$(this)['outerHeight']();if(iHeight>iMaxHeight)iMaxHeight=iHeight;}),elemSelector['each'](function(){$(this)['css']('min-height',iMaxHeight+'px');});},'TabButtonCallback':function(sTabID){ctrlFormDesigner2024['Components']['Properties']['InitialiseTabs'](![]);const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'];switch(sTabID){case sPrefix+'tab-pane-details':break;case sPrefix+'tab-pane-data-source':break;case sPrefix+'tab-pane-control-specific':ctrlFormDesigner2024['Components']['SearchCriteria']['adjustListBoxHeight']();break;case sPrefix+'tab-pane-developer':break;}},'EventHandlers':function(){},'ReadAndPopulate':function(dataObject,bField,sComponentOrFieldID){var sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'];const fd=bField&&dataObject['FieldDescription']?dataObject['FieldDescription']:null;var sFieldDescriptionHTML='';fd&&(sFieldDescriptionHTML='<dl\x20class=\x22dl-horizontal\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<dt>Table\x20Name</dt>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<dd>'+fd['TableName']+'</dd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<dt>Field\x20Name</dt>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<dd>'+fd['TableFieldName']+'</dd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<dt>Type</dt>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<dd>'+fd['FieldTypeName']+'</dd>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</dl>');$('#'+sPrefix+'FieldDescription')['html'](sFieldDescriptionHTML),$('#'+sPrefix+'Type')['text'](dataObject['Type']);var sLabelText=dataObject['LabelText'];if(fd&&!sLabelText)sLabelText=fd['FieldLabel']?fd['FieldLabel']:fd['TableFieldName'];else{if(!sLabelText)sLabelText=dataObject['Name'];}TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'LabelText',sLabelText,{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'LabelPosition',dataObject['LabelPosition'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'LabelVisible',dataObject['LabelVisible'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'ReadOnly',dataObject['ReadOnly'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']});const object=dataObject[dataObject['Type']];ctrlFormDesigner2024['Components']['Properties']['WriteObjectTypeProperties'](dataObject['Type'],object),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'CustomVariable',dataObject['CustomVariable'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),sPrefix+='Styles-',TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'AltTitle',dataObject['AltTitle']?dataObject['AltTitle']:'',{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Title',dataObject['Title']?dataObject['Title']:'',{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'BorderRadius',dataObject['BorderRadius']?dataObject['BorderRadius']:0x0,{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Integer']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'BorderWidth',dataObject['BorderWidth']?dataObject['BorderWidth']:0x0,{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Integer']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'MaxHeight',dataObject['MaxHeight']?dataObject['MaxHeight']:0x0,{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Integer']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'MinHeight',dataObject['MinHeight']?dataObject['MinHeight']:0x0,{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Integer']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'MaxWidth',dataObject['MaxWidth']?dataObject['MaxWidth']:0x0,{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Integer']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'MinWidth',dataObject['MinWidth']?dataObject['MinWidth']:0x0,{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Integer']});},'LabelPositionList':function(){var lst=[{'text':ctrlFormDesigner2024['Components']['Properties']['Constants']['LabelPositionLeft'],'value':ctrlFormDesigner2024['Components']['Properties']['Constants']['LabelPositionLeft']},{'text':ctrlFormDesigner2024['Components']['Properties']['Constants']['LabelPositionTop'],'value':ctrlFormDesigner2024['Components']['Properties']['Constants']['LabelPositionTop']}];return lst;},'AddDataSource':function(bSupressPopupDataSourceSelectionModal){const TABLE_ID='ctrlFieldComponentProperties-DataSource-Table',settings=ctrlFormDesigner2024['Components']['Properties']['Settings'],dataObject=settings['DataObject'];let maxRowNum=0x0;$('[id^=\x22'+TABLE_ID+'-Row-\x22]')['each'](function(){let rowNum=parseInt($(this)['attr']('id')['split']('-')['pop']());maxRowNum=Math['max'](maxRowNum,rowNum);});if(!bSupressPopupDataSourceSelectionModal){const settings=ctrlFormDesigner2024['Components']['Properties']['Settings'];if(settings['DataObject']['Type']=='Grid'&&dataObject['DataSources']&&dataObject['DataSources']['length']>=0x1){TriSysApex['UI']['ShowMessage']('You\x20can\x20only\x20assign\x20one\x20ReST\x20API\x20data\x20source\x20to\x20a\x20grid.');return;}}if(settings['Field']&&dataObject&&dataObject['DataSources']&&dataObject['DataSources']['length']>=0x1){TriSysApex['UI']['ShowMessage']('You\x20can\x20only\x20assign\x20one\x20\x27Read\x27\x20ReST\x20API\x20data\x20source\x20to\x20a\x20field.');return;}let newRow=$('#'+TABLE_ID+'-Row-1')['clone'](),newRowNum=maxRowNum+0x1;newRow['attr']('id',TABLE_ID+'-Row-'+newRowNum),newRow['find']('#ctrlFieldComponentProperties-DataSource-Read-1')['attr']('id','ctrlFieldComponentProperties-DataSource-Read-'+newRowNum)['empty']();const elemSpan=newRow['find']('#ctrlFieldComponentProperties-DataSource-Read-'+newRowNum);elemSpan['attr']('data-source-request',''),$('.'+TABLE_ID+'\x20>\x20tbody')['append'](newRow);if(!bSupressPopupDataSourceSelectionModal){const elemButton=$('#'+TABLE_ID+'-Row-'+newRowNum+'\x20button:first');ctrlFormDesigner2024['Components']['Properties']['EditDataSource']('Read',elemButton);}},'EditDataSource':function(sType,buttonElement){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'DataSource-',sRowPrefix=sPrefix+'Table-Row-',row=buttonElement['closest']('tr[id^=\x22'+sRowPrefix+'\x22]'),sReadPrefix=sPrefix+'Read-',elemSpan=row['find']('span[id^=\x22'+sReadPrefix+'\x22]'),sBase64=elemSpan['attr']('data-source-request');var request=null;if(sBase64){const sJSON=TriSysAPI['Encryption']['Base64']['decode'](sBase64);request=JSON['parse'](sJSON);}const fnSelected=function(sType,request){ctrlFormDesigner2024['Components']['Properties']['SelectedDataSourceRequest'](sType,request,elemSpan);};TriSysFlexiva['DataSources']['GUI']['Select'](sType,request,fnSelected);},'UpdateDataSourceRequests':function(sComponentType){const dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'];dataObject['DataSources']=ctrlFormDesigner2024['Components']['Properties']['ReadChosenDataSourceRequests'](),ctrlFormDesigner2024['Components']['Properties']['RefreshMasterRequestsAndFieldLists'](sComponentType,null,!![]);},'RemoveDataSource':function(sType,buttonElement){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'DataSource-';var dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'];dataObject&&dataObject['DataSources']&&(TriSysFlexiva['DataSources']['GUI']['RemoveRequest'](sType,sPrefix,dataObject['DataSources']),dataObject['Grid']&&dataObject['Grid']['Columns']&&(dataObject['Grid']['Columns']=[],dataObject['Grid']['DrillDown']=[],ctrlFormDesigner2024['Components']['Grid']['PopulateColumns'](dataObject),ctrlFormDesigner2024['Components']['Grid']['ShowColumnProperties']({'Field':'','Caption':'','Values':''})));const sRowPrefix=sPrefix+'Table-Row-',row=buttonElement['closest']('tr[id^=\x22'+sRowPrefix+'\x22]');row['length']&&row['attr']('id')!==sRowPrefix+'1'?(row['remove'](),ctrlFormDesigner2024['Components']['Properties']['UpdateDataSourceRequests'](sType)):row['hide']();},'SelectedDataSourceRequest':function(sType,request,elemSpan){if(!elemSpan||elemSpan['length']===0x0)return;const fnDisplayDataSources=function(lstDataSources){const dataSourceRequest=TriSysFlexiva['DataSources']['Management']['GetDataSource'](lstDataSources,request['RequestId']);if(dataSourceRequest){const options={'Prefix':ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'DataSource-','SpanSuffixCounter':!![]},iCounter=parseInt(elemSpan['attr']('id')['split']('-')['pop']());TriSysFlexiva['DataSources']['GUI']['DisplayDataSource'](lstDataSources,request['RequestId'],sType,iCounter,options),ctrlFormDesigner2024['Components']['Properties']['UpdateDataSourceRequests'](sType);}};TriSysFlexiva['DataSources']['Management']['ReadAll'](fnDisplayDataSources);},'ReadChosenDataSourceRequests':function(sType){const dataSources=[],lstDataSources=[],sTablePrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'DataSource-Table';return $('.'+sTablePrefix+'\x20span[data-source-request]')['each'](function(){lstDataSources['push']($(this)['attr']('data-source-request'));}),lstDataSources['forEach'](function(sBase64){if(sBase64){const sJSON=TriSysAPI['Encryption']['Base64']['decode'](sBase64),request=JSON['parse'](sJSON),dataSource={'RequestId':request['RequestId'],'DisplayDescription':request['DisplayDescription'],'Type':'Read'};dataSources['push'](dataSource);}}),dataSources;},'Apply':function(sComponentOrFieldID,bField){const dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'];bField=ctrlFormDesigner2024['Components']['Properties']['Settings']['Field'];var sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'];dataObject['LabelText']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'LabelText',TriSysSDK['Controls']['FieldTypes']['Text']),dataObject['LabelPosition']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'LabelPosition',TriSysSDK['Controls']['FieldTypes']['SkillCombo']),dataObject['LabelVisible']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'LabelVisible',TriSysSDK['Controls']['FieldTypes']['YesNo']),dataObject['ReadOnly']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'ReadOnly',TriSysSDK['Controls']['FieldTypes']['YesNo']);const object=ctrlFormDesigner2024['Components']['Properties']['ReadObjectTypeProperties'](dataObject['Type'],dataObject);dataObject[dataObject['Type']]=object,dataObject['CustomVariable']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'CustomVariable',TriSysSDK['Controls']['FieldTypes']['SkillCombo']),sPrefix+='Styles-',dataObject['AltTitle']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'AltTitle',TriSysSDK['Controls']['FieldTypes']['Text']),dataObject['Title']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Title',TriSysSDK['Controls']['FieldTypes']['Text']),dataObject['BorderRadius']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'BorderRadius',TriSysSDK['Controls']['FieldTypes']['Integer']),dataObject['BorderWidth']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'BorderWidth',TriSysSDK['Controls']['FieldTypes']['Integer']),dataObject['MaxHeight']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'MaxHeight',TriSysSDK['Controls']['FieldTypes']['Integer']),dataObject['MinHeight']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'MinHeight',TriSysSDK['Controls']['FieldTypes']['Integer']),dataObject['MaxWidth']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'MaxWidth',TriSysSDK['Controls']['FieldTypes']['Integer']),dataObject['MinWidth']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'MinWidth',TriSysSDK['Controls']['FieldTypes']['Integer']);bField&&(sPrefix='ctrlFormProperties-DataSource-FieldMapping-',dataObject['MappedDataField']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Data',TriSysSDK['Controls']['FieldTypes']['SkillCombo']),dataObject['MappedDisplayField']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Display',TriSysSDK['Controls']['FieldTypes']['SkillCombo']),dataObject['SortByMappedDisplayField']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'SortByDisplay',TriSysSDK['Controls']['FieldTypes']['YesNo']));if(bField)TriSysFlexiva['Forms']['Renderer']['Properties']['WriteToDOM'](sComponentOrFieldID,TriSysFlexiva['Settings']['FieldDataTag'],dataObject);else{const fnRemoveFieldObjectString=function(object,bEnsureFieldObjectExists){if(object['FieldObjectString']){if(bEnsureFieldObjectExists&&!object['FieldObject'])object['FieldObject']=JSON['parse'](object['FieldObjectString']);delete object['FieldObjectString'];if(!bEnsureFieldObjectExists&&object['FieldObject'])delete object['FieldObject'];}object['FieldObject']&&ctrlFormDesigner2024['Components']['Properties']['removeSpecifiedPropertyInPlace'](object['FieldObject'],'FieldObjectString');};if(dataObject['Fields'])dataObject['Fields']['forEach'](function(field){fnRemoveFieldObjectString(field,!![]);if(field['Lookup']&&field['Lookup']['RequestData']){if(!field['Lookup']['RequestDataObject'])field['Lookup']['RequestDataObject']=JSON['parse'](field['Lookup']['RequestData']);delete field['Lookup']['RequestData'];}});else dataObject['Grid']&&dataObject['Grid']['Columns']&&dataObject['Grid']['Columns']['forEach'](function(column){fnRemoveFieldObjectString(column,![]);});TriSysFlexiva['Forms']['Renderer']['Properties']['WriteToDOM'](sComponentOrFieldID,TriSysFlexiva['Settings']['ComponentDataTag'],dataObject);}return ctrlFormDesigner2024['InjectDesignTimeTable'](sComponentOrFieldID),ctrlFormDesigner2024['Persistence']['PushChange'](),!![];},'removeSpecifiedPropertyInPlace':function(obj,sFieldName){if(obj===null||typeof obj!=='object')return obj;if(Array['isArray'](obj))return obj['forEach'](item=>ctrlFormDesigner2024['Components']['Properties']['removeSpecifiedPropertyInPlace'](item,sFieldName)),obj;for(const key in obj){obj['hasOwnProperty'](key)&&(key===sFieldName?delete obj[key]:ctrlFormDesigner2024['Components']['Properties']['removeSpecifiedPropertyInPlace'](obj[key],sFieldName));}return obj;},'ReadObjectTypeProperties':function(sType,dataObject){var object={};const sPrefix='ctrlFieldComponentProperties-component-'+sType+'-';switch(sType){case'SearchCriteria':object['TriggerPopulationAfterLoad']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Events-TriggerPopulationAfterLoad',TriSysSDK['Controls']['FieldTypes']['YesNo']);break;case'Grid':if(dataObject){if(dataObject['Grid'])object=dataObject['Grid'];}object['PopulationTrigger']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'PopulationTrigger',TriSysSDK['Controls']['FieldTypes']['SkillCombo']),object['TriggeringComponent']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'TriggeringComponent',TriSysSDK['Controls']['FieldTypes']['SkillCombo']);break;}return object;},'WriteObjectTypeProperties':function(sType,object){if(!object)return;const fnSetComboValue=function(sFieldID,sValue,fnCallbackWhenSet){let attempts=0x0;const maxAttempts=0x32,timer=setInterval(function(){var data=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sFieldID,TriSysSDK['Controls']['FieldTypes']['SkillCombo']);if(data){TriSysSDK['CShowForm']['SetValueInCombo'](sFieldID,sValue),clearInterval(timer);if(fnCallbackWhenSet)fnCallbackWhenSet();return;}attempts++,attempts>=maxAttempts&&clearInterval(timer);},0x64);},sPrefix='ctrlFieldComponentProperties-component-'+sType+'-';switch(sType){case'Grid':const sFieldID=sPrefix+'PopulationTrigger';fnSetComboValue(sFieldID,object['PopulationTrigger'],function(){ctrlFormDesigner2024['Components']['Properties']['SelectedChosenGridPopulationTrigger'](object['PopulationTrigger'],object['PopulationTrigger'],sFieldID);}),fnSetComboValue(sPrefix+'TriggeringComponent',object['TriggeringComponent']);break;}},'ChosenGridPopulationTrigger':function(){const constants=TriSysFlexiva['Settings']['Constants'],lst=[{'text':constants['GridPopulationTrigger_Component'],'value':constants['GridPopulationTrigger_Component']},{'text':constants['GridPopulationTrigger_FormLoad'],'value':constants['GridPopulationTrigger_FormLoad']},{'text':constants['GridPopulationTrigger_None'],'value':constants['GridPopulationTrigger_None']},{'text':constants['GridPopulationTrigger_RecordLoad'],'value':constants['GridPopulationTrigger_RecordLoad']}];return lst;},'ComponentTriggerSelection':function(){const lst=[],lstComponent=ctrlFormDesigner2024['Components']['Properties']['ReadDesignTimeComponentList']();return lstComponent&&lstComponent['forEach'](function(domObject){const bThisComponent=domObject['id']==ctrlFormDesigner2024['Components']['Properties']['Settings']['ComponentOrFieldID'];!bThisComponent&&domObject['component']&&lst['push']({'text':domObject['component']['Name']+':\x20'+domObject['component']['LabelText'],'value':domObject['component']['ID']});}),lst;},'SelectedChosenGridPopulationTrigger':function(sValue,sText,sFieldID){TriSysApex['Toasters']['Info']('Selected\x20Grid\x20Population\x20Trigger:\x20'+sText);const constants=ctrlFormDesigner2024['Components']['Properties']['Constants'],sRowID=constants['FieldPrefix']+'component-Grid-Table-ComponentTriggerSelection-Row',bLoadComponents=sValue==TriSysFlexiva['Settings']['Constants']['GridPopulationTrigger_Component'],elemRow=$('#'+sRowID);bLoadComponents?elemRow['show']():elemRow['hide']();if(bLoadComponents){}},'ReadDesignTimeComponentList':function(){return TriSysFlexiva['Forms']['Renderer']['ReadDOMComponentList'](ctrlFormDesigner2024['Settings']['EditorCanvasId']);},'Constants':{'LabelPositionLeft':'Left','LabelPositionTop':'Top','FieldPrefix':'ctrlFieldComponentProperties-'},'Settings':{'DataObject':null,'ComponentOrFieldID':null,'Field':![]}},'SearchCriteria':{'PopulateFields':function(dataObject){var lstField=[];if(dataObject&&dataObject['Fields'])lstField=dataObject['Fields'];lstField['forEach'](function(field){field['FieldObjectString']=JSON['stringify'](field);});const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sListBoxID=sPrefix+'component-SearchCriteria-Fields';var listBox=$('#'+sListBoxID)['data']('kendoListBox');listBox?(listBox['dataSource']['data'](lstField),lstField['length']>0x0&&listBox['select'](listBox['items']()['first']())):$('#'+sListBoxID)['kendoListBox']({'dataTextField':'Field','dataValueField':'FieldObjectString','dataSource':lstField,'change':ctrlFormDesigner2024['Components']['SearchCriteria']['SelectedMasterFieldInListBox'],'dataBound':function(){var listBox=this;setTimeout(function(){listBox['dataSource']['data']()['length']>0x0&&(listBox['select'](listBox['items']()['first']()),listBox['trigger']('change')),ctrlFormDesigner2024['Components']['SearchCriteria']['adjustListBoxHeight']();},0x0);}}),$('#'+sPrefix+'component-SearchCriteria-tabstrip-left')['kendoTabStrip']({'tabPosition':'left','animation':{'open':{'effects':'fadeIn'}}}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'component-SearchCriteria-Events-TriggerPopulationAfterLoad',dataObject['SearchCriteria']['TriggerPopulationAfterLoad'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']});},'SelectedMasterFieldInListBox':function(e,currentSelectedItem){var field=currentSelectedItem;if(e&&!currentSelectedItem){var selectedIndices=this['select']();if(selectedIndices['length']>0x0)var field=this['dataItem'](selectedIndices[0x0]);}if(field){console['log']('Selected\x20field:',field['Field']),console['log']('Selected\x20field\x20object:',field);const sJSON=field['FieldObjectString'],fieldObject=JSON['parse'](sJSON);ctrlFormDesigner2024['Components']['SearchCriteria']['ShowFieldProperties'](fieldObject);}},'ReadSelectedFieldInListBox':function(){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sListBoxID=sPrefix+'component-SearchCriteria-Fields';var listBox=$('#'+sListBoxID)['data']('kendoListBox');if(listBox){var selectedIndices=listBox['select']();if(selectedIndices['length']>0x0){var selectedItem=listBox['dataItem'](selectedIndices[0x0]);if(selectedItem){console['log']('ReadSelectedFieldInListBox:\x20field\x20object:',selectedItem);const sJSON=selectedItem['FieldObjectString'],fieldObject=JSON['parse'](sJSON);return fieldObject;}}}return null;},'ReadAllFieldsInListBox':function(){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sListBoxID=sPrefix+'component-SearchCriteria-Fields';var listBox=$('#'+sListBoxID)['data']('kendoListBox');if(!listBox)return[];var items=listBox['dataSource']['data']();const lstField=[];return items&&items['forEach'](function(item){if(item['FieldObjectString']){const sJSON=item['FieldObjectString'],field=JSON['parse'](sJSON);lstField['push'](field);}}),lstField;},'CustomFieldsListBoxManagement':function(sComponentType,sOperation){const fnBeforeCallback=function(selectedItem){return!![];},fnAfterCallback=function(selectedItem,bDeleted){const lstFields=ctrlFormDesigner2024['Components']['SearchCriteria']['ReadAllFieldsInListBox'](),dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'];dataObject['Fields']=lstFields;const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sListBoxID=sPrefix+'component-SearchCriteria-Fields';var listBox=$('#'+sListBoxID)['data']('kendoListBox');if(listBox){var selectedIndices=listBox['select']();if(selectedIndices['length']>0x0){var currentSelectedItem=listBox['dataItem'](selectedIndices[0x0]);currentSelectedItem&&ctrlFormDesigner2024['Components']['SearchCriteria']['SelectedMasterFieldInListBox'](null,currentSelectedItem);}}};ctrlFormDesigner2024['Components']['SearchCriteria']['CustomFieldsListBoxManager'](sOperation,fnBeforeCallback,fnAfterCallback);},'CustomFieldsListBoxManager':function(sOperation,beforeCallback,afterCallback){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sListBoxID=sPrefix+'component-SearchCriteria-Fields';var listBox=$('#'+sListBoxID)['data']('kendoListBox');if(!listBox)return;var selectedIndices=listBox['select']();if(selectedIndices['length']===0x0)return;var selectedItem=listBox['dataItem'](selectedIndices[0x0]),dataSource=listBox['dataSource'],items=dataSource['data'](),currentIndex=items['indexOf'](selectedItem),bDeleted=![];if(beforeCallback&&beforeCallback(selectedItem)===![])return;switch(sOperation){case'MoveUp':currentIndex>0x0&&(dataSource['remove'](selectedItem),dataSource['insert'](currentIndex-0x1,selectedItem),setTimeout(()=>{var newIndex=dataSource['data']()['indexOf'](selectedItem);listBox['select'](newIndex),listBox['items']()['eq'](newIndex)['addClass']('k-selected');},0x0));break;case'MoveDown':currentIndex<items['length']-0x1&&(dataSource['remove'](selectedItem),dataSource['insert'](currentIndex+0x1,selectedItem),setTimeout(()=>{var newIndex=dataSource['data']()['indexOf'](selectedItem);listBox['select'](newIndex),listBox['items']()['eq'](newIndex)['addClass']('k-selected');},0x0));break;case'Delete':var selectAfterDelete=null;if(currentIndex<items['length']-0x1)selectAfterDelete=items[currentIndex+0x1];else currentIndex>0x0&&(selectAfterDelete=items[currentIndex-0x1]);dataSource['remove'](selectedItem),bDeleted=!![];if(selectAfterDelete){var newIndex=dataSource['data']()['indexOf'](selectAfterDelete);newIndex!==-0x1&&setTimeout(()=>{listBox['select'](newIndex),listBox['items']()['eq'](newIndex)['addClass']('k-selected');},0x0);}break;}afterCallback&&setTimeout(()=>afterCallback(selectedItem,bDeleted),0xa);},'Lookup':function(){const dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'],field=ctrlFormDesigner2024['Components']['SearchCriteria']['ReadSelectedFieldInListBox']();if(field){if(field['Lookup']){field['Lookup']=null,ctrlFormDesigner2024['Components']['SearchCriteria']['LookupSelected']();return;}}const sErrorMessage='Please\x20add\x20a\x20suitable\x20data\x20source\x20request\x20in\x20the\x20Data\x20Sources\x20tab,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20which\x20has\x20a\x20configured\x20list\x20of\x20fields\x20which\x20can\x20be\x20show\x20in\x20a\x20drop-down\x20list.';var lst=ctrlFormDesigner2024['Components']['Properties']['ChosenDataSourceRequests']();if(!lst||lst['length']<=0x1){TriSysApex['UI']['ShowMessage'](sErrorMessage,'Assign\x20Lookup\x20Warning',null,null,{'PostImage':'images/help/component-properties-data-sources.png','PostImageTitle':'Add\x20a\x20data\x20source\x20in\x20the\x20Data\x20Sources\x20tab','PostImageWidth':0x320});return;}const sMasterRequestId=TriSysSDK['CShowForm']['GetValueFromCombo']('ctrlFieldComponentProperties-component-SearchCriteria-MasterRequest');for(var i=lst['length']-0x1;i>=0x0;i--){const item=lst[i],bThisIsMaster=item['value']===sMasterRequestId;if(bThisIsMaster)lst['splice'](i,0x1);}const fnDisplayDataSources=function(lstDataSources){const lstRequest=[];lst['forEach'](function(item){const sRequestId=item['value'],dataSourceRequest=TriSysFlexiva['DataSources']['Management']['GetDataSource'](lstDataSources,sRequestId);if(dataSourceRequest){const bHasFields=dataSourceRequest['request']&&dataSourceRequest['request']['Fields']&&dataSourceRequest['request']['Fields']['length']>0x0;bHasFields&&lstRequest['push']({'DataSourcePath':dataSourceRequest['DisplayDescription']['replace'](/&nbsp;/g,''),'RequestId':sRequestId,'Fields':dataSourceRequest['request']['Fields']});}});if(lstRequest['length']==0x0){TriSysApex['UI']['ShowMessage'](sErrorMessage);return;}ctrlFormDesigner2024['Components']['SearchCriteria']['ShowLookupModal'](lstRequest);};TriSysFlexiva['DataSources']['Management']['ReadAll'](fnDisplayDataSources);},'ShowLookupModal':function(lstRequest){const lstRequestField=[];lstRequest['forEach'](function(request){const sPrefix=request['DataSourcePath']+'\x20>\x20',sRequestId=request['RequestId'];request['Fields']['forEach'](function(field){const sText=sPrefix+field['Field'],value={'RequestId':sRequestId,'Field':field},requestData={'text':sText,'value':JSON['stringify'](value)};lstRequestField['push'](requestData);});});const sMessage='Select\x20Data\x20Source\x20Request\x20Lookup\x20Field',options={'Instructions':'Select\x20one\x20of\x20the\x20data\x20source\x20request\x20fields\x20to\x20use\x20as\x20a\x20lookup.','ComboLabel':'Field','ComboDataSource':lstRequestField,'SaveButtonText':'Select'};TriSysApex['ModalDialogue']['Combo']['Popup'](sMessage,'fa-database',ctrlFormDesigner2024['Components']['SearchCriteria']['LookupSelected'],options);},'LookupSelected':function(sRequestFieldPath,requestDataObject){if(typeof requestDataObject==='string')requestDataObject=JSON['parse'](requestDataObject);const sPrefix='ctrlFieldComponentProperties-component-SearchCriteria-Field-Properties-';$('#'+sPrefix+'Lookup')['html']((sRequestFieldPath?sRequestFieldPath:'')+'<br>'+(requestDataObject?requestDataObject['Field']['Field']+':\x20'+(requestDataObject['Field']['Type']?requestDataObject['Field']['Type']:'')+(requestDataObject['Field']['Key']?'<br>Key\x20Field':''):''));const field=ctrlFormDesigner2024['Components']['SearchCriteria']['ReadSelectedFieldInListBox']();if(field){sRequestFieldPath?field['Lookup']={'RequestFieldPath':sRequestFieldPath,'RequestDataObject':requestDataObject}:field['Lookup']=null;ctrlFormDesigner2024['Components']['SearchCriteria']['WriteFieldObjectJSONStringToListBoxAndDataObject'](field);const bAssignButtonVisible=sRequestFieldPath?![]:!![];ctrlFormDesigner2024['Components']['SearchCriteria']['ConfigureLookupButton'](bAssignButtonVisible),$('#'+sPrefix+'DataField-Table')['show'](),$('#'+sPrefix+'DisplayField-Table')['show']();if(field['Lookup']&&requestDataObject){const requestData=requestDataObject,sRequestId=requestData['RequestId'];TriSysFlexiva['DataSources']['Management']['ReadRequestObject'](sRequestId,function(dataSourceRequest){if(dataSourceRequest['request']&&dataSourceRequest['request']['Fields']){const bDataFieldsSet=field['DataField']&&field['DisplayField'],lstFieldName=[];dataSourceRequest['request']['Fields']['forEach'](function(lookupRequestField){lstFieldName['push'](lookupRequestField['Field']);if(!field['DataField'])field['DataField']=lookupRequestField['Field'];if(!field['DisplayField'])field['DisplayField']=lookupRequestField['Field'];});const lstField=TriSysSDK['CShowForm']['generateDataSourceFromListOfString'](lstFieldName),fnPopulateFieldCombo=function(sFieldName,comboData,sSelectedValue){if(comboData['length']>0x0){TriSysSDK['CShowForm']['populateComboFromDataSource'](sFieldName,comboData,0x0);if(sSelectedValue)TriSysSDK['CShowForm']['SetTextInCombo'](sFieldName,sSelectedValue);}},sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'component-SearchCriteria-Field-Properties-';fnPopulateFieldCombo(sPrefix+'DataField',lstField,field['DataField']),fnPopulateFieldCombo(sPrefix+'DisplayField',lstField,field['DisplayField']);if(!bDataFieldsSet)ctrlFormDesigner2024['Components']['SearchCriteria']['WriteFieldObjectJSONStringToListBoxAndDataObject'](field);}});}}return!![];},'ShowFieldProperties':function(field){const sPrefix='ctrlFieldComponentProperties-component-SearchCriteria-Field-Properties-';TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Name',field['Field'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Type',field['Type'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Format',field['Format'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Caption',field['Caption'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Visible',field['Visible'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']});const lookup=field['Lookup']?field['Lookup']:{'RequestFieldPath':null,'RequestData':null};ctrlFormDesigner2024['Components']['SearchCriteria']['LookupSelected'](lookup['RequestFieldPath'],lookup['RequestDataObject']);const cmbDataField=$('#'+sPrefix+'DataField-Table');field['Lookup']?cmbDataField['show']():cmbDataField['hide']();const cmbDisplayField=$('#'+sPrefix+'DisplayField-Table');field['Lookup']?cmbDisplayField['show']():cmbDisplayField['hide'](),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'DataField',field['DataField'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'DisplayField',field['DisplayField'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'AssignValueToCustomVariable',field['AssignValueToCustomVariable'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'SortAlphabetically',field['SortAlphabetically'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']}),$('#'+sPrefix+'SampleValues')['text'](field['Values']);},'adjustListBoxHeight':function(){var tabPane=$('#ctrlFieldComponentProperties-component-SearchCriteria-Field-Properties-Block'),tabPaneHeight=tabPane['height'](),listBoxWrapper=$('#ctrlFieldComponentProperties-component-SearchCriteria-Fields')['closest']('.k-listbox');if(listBoxWrapper['length']){listBoxWrapper['height'](tabPaneHeight);var listScroller=listBoxWrapper['find']('.k-list-scroller');listScroller['length']&&listBoxWrapper['css']('height',tabPaneHeight+0x14+'px');}},'FieldChangeCallbacks':function(dataObject){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'component-SearchCriteria-Field-Properties-',lstField=[{'ID':sPrefix+'Format','UpdateField':'Format','Combo':!![]},{'ID':sPrefix+'Caption','UpdateField':'Caption','textField':!![]},{'ID':sPrefix+'Visible','UpdateField':'Visible','Boolean':!![]},{'ID':sPrefix+'DataField','UpdateField':'DataField','Combo':!![]},{'ID':sPrefix+'DisplayField','UpdateField':'DisplayField','Combo':!![]},{'ID':sPrefix+'AssignValueToCustomVariable','UpdateField':'AssignValueToCustomVariable','Combo':!![]},{'ID':sPrefix+'SortAlphabetically','UpdateField':'SortAlphabetically','Boolean':!![]}];lstField['forEach'](function(field){var fnChange=function(sValue,sUpdateField){const field=ctrlFormDesigner2024['Components']['SearchCriteria']['ReadSelectedFieldInListBox']();field&&(field[sUpdateField]=sValue,ctrlFormDesigner2024['Components']['SearchCriteria']['WriteFieldObjectJSONStringToListBoxAndDataObject'](field,dataObject));};if(field['Combo']){var dropDownList=$('#'+field['ID'])['data']('kendoDropDownList');dropDownList['bind']('change',function(e){var selectedValue=this['value']();fnChange(selectedValue,field['UpdateField']);});}else{const elem=$('#'+field['ID']);var fnValueChangedEventHandler=function(e){var sValue=$(this)['val']();if(field['Boolean']){var bChecked=TriSysSDK['CShowForm']['GetCheckBoxValue'](field['ID']);sValue=bChecked;}fnChange(sValue,field['UpdateField']);};elem['on']('input',fnValueChangedEventHandler),elem['on']('change',fnValueChangedEventHandler);}});},'WriteFieldObjectJSONStringToListBoxAndDataObject':function(field,dataObject){if(!dataObject)dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'];if(dataObject&&dataObject['Fields']){if(!Array['isArray'](dataObject['Fields']))return;const iIndex=dataObject['Fields']['findIndex'](function(f){return f['Field']===field['Field'];});iIndex>=0x0&&(dataObject['Fields'][iIndex]=field);}const sJSON=JSON['stringify'](field),sFieldID=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'component-SearchCriteria-Fields',listBox=$('#'+sFieldID)['data']('kendoListBox'),selectedIndices=listBox['select']();if(selectedIndices['length']>0x0){const selectedItem=listBox['dataItem'](selectedIndices[0x0]);selectedItem['FieldObjectString']=sJSON;}},'ConfigureLookupButton':function(bAssign){var $button=$('#'+ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'component-SearchCriteria-Field-Properties-Lookup-Button'),$icon=$button['find']('i');const sMessage='a\x20data\x20source\x20request\x20field\x20configured\x20in\x20the\x20Data\x20Sources\x20tab';!bAssign?($icon['removeClass']('fa-search')['addClass']('fa-remove'),$button['contents']()['filter'](function(){return this['nodeType']===0x3&&this['textContent']['trim']()==='Assign';})['replaceWith']('&nbsp;Remove'),$button['attr']('title','Remove\x20the\x20lookup\x20to\x20'+sMessage)):($icon['removeClass']('fa-remove')['addClass']('fa-search'),$button['contents']()['filter'](function(){return this['nodeType']===0x3&&this['textContent']['trim']()==='Remove';})['replaceWith']('&nbsp;Assign'),$button['attr']('title','Lookup\x20'+sMessage));}},'Grid':{'InitialiseTabs':function(dataObject){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'];$('#'+sPrefix+'component-Grid-tabstrip-left')['kendoTabStrip']({'tabPosition':'left','animation':{'open':{'effects':'fadeIn'}},'activate':function(e){ctrlFormDesigner2024['Components']['Grid']['adjustListBoxHeight']();}});const sGridDataSources='You\x20can\x20add\x20a\x20single\x20data\x20source\x20request\x20to\x20read\x20from\x20a\x20ReST\x20API\x20to\x20populate\x20this\x20grid.';$('#ctrlFieldComponentProperties-tab-pane-data-source\x20>\x20div\x20>\x20table\x20>\x20tbody\x20>\x20tr:nth-child(1)\x20>\x20td:nth-child(2)\x20>\x20dl\x20>\x20dd')['text'](sGridDataSources),dataObject&&dataObject['Grid']&&dataObject['Grid']['Columns']&&ctrlFormDesigner2024['Components']['Grid']['PopulateColumns'](dataObject),$('#'+sPrefix+'component-Grid-Column-Properties-SampleValues')['each'](function(){$(this)['attr']('title',$(this)['text']());}),dataObject&&dataObject['Grid']&&dataObject['Grid']['DrillDown']&&dataObject['Grid']['DrillDown']['forEach'](function(column){ctrlFormDesigner2024['Components']['Grid']['AddDrillDownColumn'](!![],column);});},'PopulateColumns':function(dataObject){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'];var lstColumn=[];if(dataObject&&dataObject['Grid']&&dataObject['Grid']['Columns'])lstColumn=dataObject['Grid']['Columns'];if(lstColumn['length']==0x0){}lstColumn['forEach'](function(column){if(column['Width']===undefined)column['Width']=0x0;column['FieldObjectString']=JSON['stringify'](column);});const sListBoxID=sPrefix+'component-Grid-Columns';var listBox=$('#'+sListBoxID)['data']('kendoListBox');listBox?(listBox['dataSource']['data'](lstColumn),lstColumn['length']>0x0&&listBox['select'](listBox['items']()['first']())):$('#'+sListBoxID)['kendoListBox']({'dataTextField':'Field','dataValueField':'FieldObjectString','dataSource':lstColumn,'change':ctrlFormDesigner2024['Components']['Grid']['SelectedColumnInListBox'],'dataBound':function(){var listBox=this;setTimeout(function(){listBox['dataSource']['data']()['length']>0x0&&(listBox['select'](listBox['items']()['first']()),listBox['trigger']('change'));},0x0);}});},'ReadColumnsFromDataSource':function(dataObject){const dataSources=dataObject['DataSources'];if(!dataSources||dataSources['length']==0x0)return;const dataSource=dataSources[0x0],sRequestId=dataSource['RequestId'];TriSysFlexiva['DataSources']['Management']['ReadRequestObject'](sRequestId,function(dataSourceRequest){const bHasFields=dataSourceRequest['request']&&dataSourceRequest['request']['Fields']&&dataSourceRequest['request']['Fields']['length']>0x0;if(bHasFields){if(!dataObject['Grid'])dataObject['Grid']={};dataObject['Grid']['Columns']=dataSourceRequest['request']['Fields'],ctrlFormDesigner2024['Components']['Grid']['PopulateColumns'](dataObject);}});},'SelectedColumnInListBox':function(e,currentSelectedItem){var column=currentSelectedItem;if(e&&!currentSelectedItem){var selectedIndices=this['select']();selectedIndices['length']>0x0&&(column=this['dataItem'](selectedIndices[0x0]));}if(column){console['log']('Selected\x20column:',column['Field']),console['log']('Selected\x20column\x20object:',column);const sJSON=column['FieldObjectString'];if(sJSON){const columnObject=JSON['parse'](sJSON);ctrlFormDesigner2024['Components']['Grid']['ShowColumnProperties'](columnObject);}}},'ShowColumnProperties':function(column){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'component-Grid-Column-Properties-';TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Name',column['Field'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Type',column['Type'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'ImageSize',column['ImageSize'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Format',column['Format'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Caption',column['Caption'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Visible',column['Visible'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Width',column['Width'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Integer']}),$('#'+sPrefix+'SampleValues')['text'](column['Values']);},'adjustListBoxHeight':function(){var tabPane=$('#ctrlFieldComponentProperties-component-Grid-Column-Properties-Block'),tabPaneHeight=tabPane['height'](),listBoxWrapper=$('#ctrlFieldComponentProperties-component-Grid-Columns')['closest']('.k-listbox');if(listBoxWrapper['length']){listBoxWrapper['height'](tabPaneHeight);var listScroller=listBoxWrapper['find']('.k-list-scroller');listScroller['length']&&(listBoxWrapper['css']('height',tabPaneHeight+0x14+'px'),listBoxWrapper['css']('width','180px'));}},'ColumnChangeCallbacks':function(dataObject){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'component-Grid-Column-Properties-',lstColumn=[{'ID':sPrefix+'ImageSize','UpdateField':'ImageSize','Combo':!![]},{'ID':sPrefix+'Format','UpdateField':'Format','Combo':!![]},{'ID':sPrefix+'Caption','UpdateField':'Caption','textField':!![]},{'ID':sPrefix+'Visible','UpdateField':'Visible','Boolean':!![]},{'ID':sPrefix+'Width','UpdateField':'Width','Numeric':!![]}];lstColumn['forEach'](function(column){var fnChange=function(sValue,sUpdateColumn){const column=ctrlFormDesigner2024['Components']['Grid']['ReadSelectedColumnInListBox']();column&&(column[sUpdateColumn]=sValue,ctrlFormDesigner2024['Components']['Grid']['WriteColumnObjectJSONStringToListBoxAndDataObject'](column,dataObject));};if(column['Combo']){var dropDownList=$('#'+column['ID'])['data']('kendoDropDownList');dropDownList['bind']('change',function(e){var selectedValue=this['value']();fnChange(selectedValue,column['UpdateField']);});}else{const elem=$('#'+column['ID']);var fnValueChangedEventHandler=function(e){var sValue=$(this)['val']();if(column['Boolean']){var bChecked=TriSysSDK['CShowForm']['GetCheckBoxValue'](column['ID']);sValue=bChecked;}fnChange(sValue,column['UpdateField']);};elem['on']('input',fnValueChangedEventHandler),elem['on']('change',fnValueChangedEventHandler);}});},'ReadSelectedColumnInListBox':function(){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sListBoxID=sPrefix+'component-Grid-Columns';var listBox=$('#'+sListBoxID)['data']('kendoListBox');if(listBox){var selectedIndices=listBox['select']();if(selectedIndices['length']>0x0){var selectedItem=listBox['dataItem'](selectedIndices[0x0]);if(selectedItem){console['log']('ReadSelectedColumnInListBox:\x20column\x20object:',selectedItem);const sJSON=selectedItem['FieldObjectString'];return JSON['parse'](sJSON);}}}return null;},'WriteColumnObjectJSONStringToListBoxAndDataObject':function(column,dataObject){if(!dataObject)dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'];if(dataObject&&dataObject['Grid']&&dataObject['Grid']['Columns']){if(!Array['isArray'](dataObject['Grid']['Columns']))return;const iIndex=dataObject['Grid']['Columns']['findIndex'](function(f){return f['Field']===column['Field'];});iIndex>=0x0&&(dataObject['Grid']['Columns'][iIndex]=column);}const sJSON=JSON['stringify'](column),sFieldID=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix']+'component-Grid-Columns',listBox=$('#'+sFieldID)['data']('kendoListBox'),selectedIndices=listBox['select']();if(selectedIndices['length']>0x0){const selectedItem=listBox['dataItem'](selectedIndices[0x0]);selectedItem['FieldObjectString']=sJSON,selectedItem['FieldObject']=column;}},'ReadAllColumnsInListBox':function(){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sListBoxID=sPrefix+'component-Grid-Columns';var listBox=$('#'+sListBoxID)['data']('kendoListBox');if(!listBox)return[];var items=listBox['dataSource']['data']();const lstColumn=[];return items&&items['forEach'](function(item){if(item['FieldObjectString']){const sJSON=item['FieldObjectString'],column=JSON['parse'](sJSON);lstColumn['push'](column),item['FieldObject']=column;}if(item['FieldObject']){const column=item['FieldObject'];lstColumn['push'](column);}}),lstColumn;},'CustomColumnsListBoxManagement':function(sComponentType,sOperation){const fnBeforeCallback=function(selectedItem){return!![];},fnAfterCallback=function(selectedItem,bDeleted){const lstColumns=ctrlFormDesigner2024['Components']['Grid']['ReadAllColumnsInListBox'](),dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'];dataObject['Grid']['Columns']=lstColumns;const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sListBoxID=sPrefix+'component-Grid-Columns';var listBox=$('#'+sListBoxID)['data']('kendoListBox');if(listBox){var selectedIndices=listBox['select']();if(selectedIndices['length']>0x0){var currentSelectedItem=listBox['dataItem'](selectedIndices[0x0]);currentSelectedItem&&ctrlFormDesigner2024['Components']['Grid']['SelectedColumnInListBox'](null,currentSelectedItem);}}};ctrlFormDesigner2024['Components']['Grid']['CustomColumnsListBoxManager'](sOperation,fnBeforeCallback,fnAfterCallback);},'CustomColumnsListBoxManager':function(sOperation,beforeCallback,afterCallback){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sListBoxID=sPrefix+'component-Grid-Columns';var listBox=$('#'+sListBoxID)['data']('kendoListBox');if(!listBox)return;var selectedIndices=listBox['select']();if(selectedIndices['length']===0x0)return;var selectedItem=listBox['dataItem'](selectedIndices[0x0]),dataSource=listBox['dataSource'],items=dataSource['data'](),currentIndex=items['indexOf'](selectedItem),bDeleted=![];if(beforeCallback&&beforeCallback(selectedItem)===![])return;switch(sOperation){case'MoveUp':currentIndex>0x0&&(dataSource['remove'](selectedItem),dataSource['insert'](currentIndex-0x1,selectedItem),setTimeout(()=>{var newIndex=dataSource['data']()['indexOf'](selectedItem);listBox['select'](newIndex),listBox['items']()['eq'](newIndex)['addClass']('k-selected');},0x0));break;case'MoveDown':currentIndex<items['length']-0x1&&(dataSource['remove'](selectedItem),dataSource['insert'](currentIndex+0x1,selectedItem),setTimeout(()=>{var newIndex=dataSource['data']()['indexOf'](selectedItem);listBox['select'](newIndex),listBox['items']()['eq'](newIndex)['addClass']('k-selected');},0x0));break;case'Delete':var selectAfterDelete=null;if(currentIndex<items['length']-0x1)selectAfterDelete=items[currentIndex+0x1];else currentIndex>0x0&&(selectAfterDelete=items[currentIndex-0x1]);dataSource['remove'](selectedItem),bDeleted=!![];if(selectAfterDelete){var newIndex=dataSource['data']()['indexOf'](selectAfterDelete);newIndex!==-0x1&&setTimeout(()=>{listBox['select'](newIndex),listBox['items']()['eq'](newIndex)['addClass']('k-selected');},0x0);}break;}afterCallback&&setTimeout(()=>afterCallback(selectedItem,bDeleted),0xa);},'AddDrillDownColumn':function(bSupressPopupColumnSelectionModal,column){const TABLE_ID='ctrlFieldComponentProperties-component-Grid-DrillDown-Columns-Table',sRowPrefix=TABLE_ID+'-Row-';let maxRowNum=0x0;$('[id^=\x22'+sRowPrefix+'\x22]')['each'](function(){let rowNum=parseInt($(this)['attr']('id')['split']('-')['pop']());maxRowNum=Math['max'](maxRowNum,rowNum);});let newRow=$('#'+sRowPrefix+'1')['clone'](),newRowNum=maxRowNum+0x1;newRow['attr']('id',''+sRowPrefix+newRowNum);const sColumnPrefix='ctrlFieldComponentProperties-component-Grid-DrillDown-Column-';newRow['find']('#'+sColumnPrefix+'1')['attr']('id',''+sColumnPrefix+newRowNum)['text']('Selecting\x20drill\x20down\x20column...');var sBase64='';const elemSpan=newRow['find']('#'+sColumnPrefix+newRowNum);column&&(sBase64=TriSysAPI['Encryption']['Base64']['encode'](JSON['stringify'](column)),elemSpan['html'](ctrlFormDesigner2024['Components']['Grid']['DisplayTextForDrillDownColumn'](column)));elemSpan['attr']('data-column',sBase64),$('.'+TABLE_ID+'\x20>\x20tbody')['append'](newRow);if(!bSupressPopupColumnSelectionModal){const elemButton=$('#'+sRowPrefix+newRowNum+'\x20button:first');ctrlFormDesigner2024['Components']['Grid']['SelectDrillDownColumn'](elemButton);}},'SelectDrillDownColumn':function(buttonElement){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sRowPrefix=sPrefix+'component-Grid-DrillDown-Columns-Table-Row-',row=buttonElement['closest']('tr[id^=\x22'+sRowPrefix+'\x22]'),sReadPrefix=sPrefix+'component-Grid-DrillDown-Column-',elemSpan=row['find']('span[id^=\x22'+sReadPrefix+'\x22]'),sBase64=elemSpan['attr']('data-column');var column=null;if(sBase64){const sJSON=TriSysAPI['Encryption']['Base64']['decode'](sBase64);column=JSON['parse'](sJSON);}const fnSelected=function(columnDrillDownData){const savedColumn=columnDrillDownData['Column'],sBase64=TriSysAPI['Encryption']['Base64']['encode'](JSON['stringify'](savedColumn));elemSpan['attr']('data-column',sBase64),elemSpan['html'](ctrlFormDesigner2024['Components']['Grid']['DisplayTextForDrillDownColumn'](columnDrillDownData));};ctrlFormDesigner2024['Components']['Grid']['PopupDrillDownColumnSelectionModal'](column,elemSpan,fnSelected);},'PopupDrillDownColumnSelectionModal':function(column,elemSpan,fnCallback){var dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'];const modalOptions={'Title':'Select\x20Grid\x20Drill\x20Down\x20Column','Image':'gi-table','Instructions':'Select\x20the\x20column\x20to\x20use\x20as\x20the\x20drill\x20down,\x20and\x20which\x20column\x20is\x20the\x20key,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20and\x20whether\x20it\x20is\x20hyperlinked,\x20or\x20uses\x20a\x20button,\x20and\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20which\x20form\x20is\x20to\x20be\x20opened\x20when\x20clicked.','DataObject':dataObject,'Column':column,'CallbackFunction':fnCallback};var fnLoadControlHTML=function(){var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']=modalOptions['Title'],parametersObject['Image']=modalOptions['Image'],parametersObject['Maximize']=![],parametersObject['CloseTopRightButton']=!![],parametersObject['ContentURL']=TriSysApex['CustomFormsAndComponents']['UserControlPath']('app-studio/ctrlDrillDownGridColumn.html'),parametersObject['OnLoadCallback']=function(){ctrlDrillDownGridColumn['Load'](modalOptions);};var sSaveText='Save';parametersObject['ButtonLeftVisible']=!![],parametersObject['ButtonLeftText']=sSaveText,parametersObject['ButtonLeftFunction']=function(){const saveObject=ctrlDrillDownGridColumn['Save'](),bSaved=saveObject['Success'];if(bSaved){const savedColumn=saveObject['Column'],sBase64=TriSysAPI['Encryption']['Base64']['encode'](JSON['stringify'](savedColumn));elemSpan['attr']('data-column',sBase64),elemSpan['html'](ctrlFormDesigner2024['Components']['Grid']['DisplayTextForDrillDownColumn'](savedColumn));if(!dataObject['Grid'])dataObject['Grid']={'DrillDown':[]};if(!dataObject['Grid']['DrillDown'])dataObject['Grid']['DrillDown']=[];var bFound=![];dataObject['Grid']['DrillDown']['forEach'](function(column,index){column['ColumnName']===savedColumn['ColumnName']&&(dataObject['Grid']['DrillDown'][index]=savedColumn,bFound=!![]);}),!bFound&&dataObject['Grid']['DrillDown']['push'](savedColumn);}else TriSysApex['UI']['ShowMessage'](saveObject['ErrorMessage']);return bSaved;},parametersObject['ButtonRightVisible']=!![],parametersObject['ButtonRightText']='Cancel',TriSysApex['UI']['PopupMessage'](parametersObject);};TriSysApex['WhiteLabelling']['LoadJavascriptFile']('usercontrols/app-studio/ctrlDrillDownGridColumn.js',null,fnLoadControlHTML);},'DisplayTextForDrillDownColumn':function(column){if(column){const sText='Column\x20<strong>'+column['ColumnName']+'</strong>\x20is\x20'+(column['Hyperlink']?'':'not\x20')+'hyperlinked\x20to\x20'+(column['FormModal']?'':'non-')+'modal\x20'+'\x20form\x20<strong>\x20'+column['FormName']+'</strong>\x20by\x20key\x20column\x20<strong>'+column['KeyColumnName']+'</strong>'+(column['ButtonColumn']?'\x20using\x20a\x20column\x20button\x20labelled\x20<strong>'+column['ButtonLabel']+'</strong>':'')+'.';return sText;}},'RemoveDrillDownColumn':function(buttonElement){const sPrefix=ctrlFormDesigner2024['Components']['Properties']['Constants']['FieldPrefix'],sRowPrefix=sPrefix+'component-Grid-DrillDown-Columns-Table-Row-';var dataObject=ctrlFormDesigner2024['Components']['Properties']['Settings']['DataObject'];if(dataObject&&dataObject['Grid']&&dataObject['Grid']['DrillDown']){const row=buttonElement['closest']('tr[id^=\x22'+sRowPrefix+'\x22]'),sReadPrefix=sPrefix+'component-Grid-DrillDown-Column-',elemSpan=row['find']('span[id^=\x22'+sReadPrefix+'\x22]'),sBase64=elemSpan['attr']('data-column');if(sBase64){const sJSON=TriSysAPI['Encryption']['Base64']['decode'](sBase64);column=JSON['parse'](sJSON);const iIndex=dataObject['Grid']['DrillDown']['findIndex'](function(f){return f['ColumnName']===column['ColumnName'];});iIndex>=0x0&&dataObject['Grid']['DrillDown']['splice'](iIndex,0x1);}}const row=buttonElement['closest']('tr[id^=\x22'+sRowPrefix+'\x22]');row['length']&&row['attr']('id')!==sRowPrefix+'1'&&row['remove']();}}},'Fields':{'PopulateToolbox':function(formObject){var bShowFields=![];if(formObject&&formObject['Form']&&formObject['Form']['Type']==TriSysFlexiva['Settings']['Constants']['FormType_DataEntry']){if(formObject['DataSources']&&formObject['DataSources']['length']>0x0){var sRequestId=null;formObject['DataSources']['forEach'](function(dataSource){if(dataSource['Type']=='Read'){sRequestId=dataSource['RequestId'];return;}}),sRequestId&&TriSysFlexiva['DataSources']['Management']['ReadRequestObject'](sRequestId,function(dataSourceRequest){dataSourceRequest['request']&&dataSourceRequest['request']['Fields']&&(bShowFields=!![],ctrlFormDesigner2024['Fields']['ShowInToolbox'](bShowFields,dataSourceRequest['request']['Fields']));});}}else formObject['DataSources']&&formObject['DataSources']['length']>0x0&&TriSysApex['UI']['ShowMessage']('The\x20form\x20type\x20\x27'+formObject['Form']['Type']+'\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20is\x20not\x20set\x20to\x20\x27\x27'+TriSysFlexiva['Settings']['Constants']['FormType_DataEntry']+'\x27,\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20but\x20you\x20have\x20assigned\x20at\x20least\x20one\x20data\x20source,\x20so\x20the\x20fields\x20toolbox\x20will\x20not\x20be\x20shown.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20If\x20you\x20want\x20to\x20add\x20fields\x20to\x20the\x20form,\x20please\x20set\x20the\x20form\x20type\x20to\x20\x27'+TriSysFlexiva['Settings']['Constants']['FormType_DataEntry']+'\x27');ctrlFormDesigner2024['Fields']['ShowInToolbox'](bShowFields);},'ShowInToolbox':function(bShowFields,lstField){const fieldPanel=$('#ctrlFormDesigner2024-Tools-Fields-Panel');bShowFields?fieldPanel['show']():fieldPanel['hide']();if(!bShowFields||!lstField)return;var lstDOMFields=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20.sortable-item.toolbox-field');lstDOMFields['each'](function(){var sID=$(this)['attr']('id');const domField=TriSysFlexiva['Forms']['Renderer']['Properties']['ReadFromDOM'](sID,TriSysFlexiva['Settings']['FieldDataTag']);domField&&(lstField=lstField['filter'](function(field){return!(field['Name']==domField['Name']);}));});const lstToolboxField=[];lstField['forEach'](function(field){var toolboxField={'ID':field['Field'],'Name':field['Field'],'Type':field['Type'],'Parameters':'','Icon':ctrlFormDesigner2024['Fields']['IconForFieldType'](field['Type']),'LabelVisible':!![],'LabelText':field['Caption']?field['Caption']:field['Field']};lstToolboxField['push'](toolboxField);}),lstToolboxField['sort'](function(a,b){return a['Name']['localeCompare'](b['Name']);});var sTriSysHTMLStart='<div\x20id=\x22'+TriSysFlexiva['Settings']['ToolboxFieldsId']+'\x22\x20class=\x22toolbox-zone\x22>',sTriSysEndHTML='</div>',sHTML=sTriSysHTMLStart;lstToolboxField['forEach'](function(field){sHTML+=ctrlFormDesigner2024['Fields']['GetToolboxItemHTML'](field);}),sHTML+=sTriSysEndHTML;var elemItemList=$('#ctrlFormDesigner2024-field-list-items');elemItemList['html'](sHTML),ctrlFormDesigner2024['Fields']['LoadFieldFilter'](),ctrlFormDesigner2024['InjectDragAndDropTags'](ctrlFormDesigner2024['Settings']['EditorCanvasId']);},'IconForFieldType':function(sFieldType){var sIcon='fa\x20fa-wrench';return sIcon;return sIcon;},'ShowAccordion':function(){ctrlFormDesigner2024['OpenAccordion']('fields');},'ToolboxItemEditorFunctionCall':function(sFieldId){return'ctrlFormDesigner2024.Fields.Editor(this)';},'GetToolboxItemHTML':function(designField){var captionParts=designField['ID'],sCaption=designField['Name'],sTooltip=designField['Description']?designField['Description']:sCaption,sID=ctrlFormDesigner2024['Settings']['ToolboxPrefix']+designField['ID'];const sCallbackEditor='\x20onclick=\x22'+ctrlFormDesigner2024['Fields']['ToolboxItemEditorFunctionCall'](sID)+'\x22';var sFieldJSON=JSON['stringify'](designField),sDataTag='\x20'+TriSysFlexiva['Settings']['FieldDataTag']+'=\x22'+TriSysAPI['Encryption']['Base64']['encode'](sFieldJSON)+'\x22\x20',sFieldHTML='<div\x20class=\x22sortable-item\x20toolbox-field\x22\x20id=\x22'+sID+'\x22'+sDataTag+sCallbackEditor+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+ctrlFormDesigner2024['Components']['DesignTimeObjectTable'](sCaption,designField['Icon'],sTooltip,ctrlFormDesigner2024['Settings']['FieldColour'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';return sFieldHTML;},'Editor':function(thisObject){ctrlFormDesigner2024['Components']['Editor'](thisObject,!![]);},'OverlayFieldWithControlButton':function(trElementId){ctrlFormDesigner2024['Components']['OverlayWithControlButton'](trElementId,{'field':!![]});},'RemoveOverlaidFieldControlButton':function(trElementId){var trElement=$('#'+trElementId);$(trElement)['find']('.overlay-mask,\x20.overlay-button')['remove'](),$(trElement)['find']('td:nth-child(2)')['hide'](),$(trElement)['find']('.toolbox-icon-only')['show'](),$(trElement)['addClass']('toolbox-field');},'LoadFieldFilter':function(){var txtFilter=$('#'+'ctrlFormDesigner2024-Fields-search');txtFilter['off']()['keyup'](function(e){e['keyCode']!=0xd&&(sFilter=txtFilter['val'](),ctrlFormDesigner2024['Components']['Filter'](sFilter,TriSysFlexiva['Settings']['ToolboxFieldsId']));});}},'TabLayout':{'Context':{'Rows':[{'Columns':[0x7,0x5],'Columns':[0x3,0x4,0x5]}]},'ConfigureLayout':function(){const context=ctrlFormDesigner2024['TabLayout']['CountRowsAndColumns']();ctrlFormDesigner2024['TabLayout']['Context']=context;var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']='Form\x20Tab\x20Layout',parametersObject['Image']='gi-adjust_alt',parametersObject['Maximize']=!![],parametersObject['Width']=0x424,parametersObject['CloseTopRightButton']=!![],parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'app-studio/ctrlFormTabLayout.html',parametersObject['ButtonCentreText']='Apply',parametersObject['ButtonCentreVisible']=!![],parametersObject['ButtonCentreFunction']=ctrlFormDesigner2024['TabLayout']['ApplyFormTabLayout'],parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightVisible']=!![],parametersObject['OnLoadCallback']=function(){ctrlFormDesigner2024['TabLayout']['Load']();},TriSysApex['UI']['PopupMessage'](parametersObject);},'CountRowsAndColumns':function(){const rows=[];$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20.block.full\x20>\x20.row')['each'](function(){var row={'Columns':[]};row['ID']=$(this)['attr']('id'),$(this)['find']('[class*=\x22col-\x22]')['each'](function(){let width=0x0;const classes=$(this)['attr']('class')['split']('\x20');classes['forEach'](className=>{const match=className['match'](/col-(xs|sm|md|lg)-(\d+)/);match&&(width=parseInt(match[0x2],0xa));}),row['Columns']['push'](width);}),rows['push'](row);});var result={'Rows':rows};return result;},'ApplyRowAndColumnLayout':function(layout){var blockElement=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20.block.full');const $container=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20.block.full.form-control-borderless'),lstDeletedRowID=[];$container['find']('.row')['each'](function(index){const iRow=index+0x1,$row=$(this),sRowID=$row['attr']('id');var bFound=![];layout['Rows']['forEach'](function(survivingRow){if(survivingRow['ID']===sRowID)bFound=!![];});if(!bFound)lstDeletedRowID['push'](sRowID);});const fnRemoveTableRows=function(lstRowID){const $container=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20.block.full.form-control-borderless');lstRowID['forEach'](id=>{$('#'+id)['remove']();});const lstRowToBeDetached=[];$container['find']('.row')['each'](function(index){const elemRow=$(this),item={'id':elemRow['attr']('id'),'row':elemRow['detach']()};lstRowToBeDetached['push'](item);}),lstRowToBeDetached['forEach'](function(item,index){const newRowNum=index+0x1;var $row=item['row'];$row['find']('[id^=\x22div-drop-zone-\x22]')['each'](function(){const $dropZone=$(this),oldId=$dropZone['attr']('id'),colNum=oldId['split']('-')['pop'](),newId='div-drop-zone-'+newRowNum+'-'+colNum;$dropZone['attr']('id',newId);}),$container['append']($row);});};if(lstDeletedRowID['length']>0x0)fnRemoveTableRows(lstDeletedRowID);const fnReorderTableRows=function(lstRowID){const lstRowToBeDetached=[];lstRowID['forEach'](id=>{const elemRow=$('#'+id),item={'id':id,'row':elemRow['detach']()};lstRowToBeDetached['push'](item);}),lstRowID['forEach']((id,newRowIndex)=>{var item=lstRowToBeDetached['find'](item=>item['id']===id);const newRowNum=newRowIndex+0x1,$row=item['row'];$row['find']('[id^=\x22div-drop-zone-\x22]')['each'](function(){const $dropZone=$(this),oldId=$dropZone['attr']('id'),colNum=oldId['split']('-')['pop'](),newId='div-drop-zone-'+newRowNum+'-'+colNum;$dropZone['attr']('id',newId);}),$container['append']($row);});};fnReorderTableRows(layout['Rows']['map'](row=>row['ID'])),blockElement['find']('.row')['each'](function(rowIndex,rowElement){if(layout['Rows'][rowIndex]){var columnSizes=layout['Rows'][rowIndex]['Columns'],existingColumns=$(rowElement)['children']('div[class*=\x22col-\x22]');columnSizes['forEach'](function(columnSize,colIndex){if(existingColumns[colIndex])$(existingColumns[colIndex])['removeClass'](function(index,className){return(className['match'](/(^|\s)col-\S+/g)||[])['join']('\x20');})['addClass']('col-md-'+columnSize);else{const columnObject=ctrlFormDesigner2024['TabLayout']['NewColumnHTMLAndGUID']();var newColumn=$(columnObject['HTML'])['addClass']('col-md-'+columnSize);const iRow=rowIndex+0x1,iCol=colIndex+0x1,sDivID='div-drop-zone-'+iRow+'-'+iCol;newColumn['html']('<div\x20class=\x22inner-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22div-drop-zone\x22\x20id=\x22'+sDivID+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+ctrlFormDesigner2024['TabLayout']['DropToolsHereHeaderHTML'](ctrlFormDesigner2024['Settings']['CalculatedBelow'],columnObject['GUID'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>'),$(rowElement)['append'](newColumn);}});if(existingColumns['length']>columnSizes['length'])for(var i=columnSizes['length'];i<existingColumns['length'];i++){$(existingColumns[i])['remove']();}}else $(rowElement)['remove']();});for(var i=blockElement['find']('.row')['length'];i<layout['Rows']['length'];i++){const sGUID=layout['Rows'][i]['ID'];var newRow=$('<div\x20class=\x22row\x22\x20id=\x22'+sGUID+'\x22></div>'),iColumnCount=0x0;layout['Rows'][i]['Columns']['forEach'](function(columnSize){const columnObject=ctrlFormDesigner2024['TabLayout']['NewColumnHTMLAndGUID']();var newColumn=$(columnObject['HTML'])['addClass']('col-md-'+columnSize);iColumnCount+=0x1;const sDivID='div-drop-zone-'+(i+0x1)+'-'+iColumnCount;newColumn['html']('<div\x20class=\x22inner-wrapper\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22div-drop-zone\x22\x20id=\x22'+sDivID+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+ctrlFormDesigner2024['TabLayout']['DropToolsHereHeaderHTML'](ctrlFormDesigner2024['Settings']['CalculatedBelow'],columnObject['GUID'])+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>'),newRow['append'](newColumn);}),blockElement['append'](newRow);}ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),ctrlFormDesigner2024['TabLayout']['ForceTheme']();},'ApplyDropToolsHereCommentaryForAllRowsAndColumns':function(){let lstRows=[];$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20div.row')['each'](function(rowIndex){let rowData={'Row':rowIndex+0x1,'Columns':[]};$(this)['find']('div['+TriSysFlexiva['Settings']['PanelDataTag']+']')['each'](function(colIndex){let colClass=$(this)['attr']('class')['match'](/col-md-(\d+)/),width=colClass?parseInt(colClass[0x1]):0x0,columnData={'ID':$(this)['attr']('id')||'','Column':colIndex+0x1,'Width':width};rowData['Columns']['push'](columnData);}),lstRows['push'](rowData);}),lstRows['forEach'](function(rowData){rowData['Columns']['forEach'](function(columnData){const $column=$('#'+columnData['ID']);$column['find']('.drop-tools-here')['each'](function(){const panelObject=TriSysFlexiva['Forms']['Renderer']['Properties']['ReadFromDOM'](columnData['ID'],TriSysFlexiva['Settings']['PanelDataTag']),sCommentary='Row:\x20'+rowData['Row']+',\x20Column:\x20'+columnData['Column']+',\x20Width:\x20'+columnData['Width'];$(this)['replaceWith'](ctrlFormDesigner2024['TabLayout']['DropToolsHereHeaderHTML'](sCommentary,columnData['ID']));});});});},'NewColumnHTMLAndGUID':function(){const sGUID=TriSysSDK['Miscellaneous']['GUID'](),panelObject={'id':sGUID,'showTitle':!![],'titleText':ctrlFormDesigner2024['Settings']['YourPanelTitle'],'icon':'gi\x20gi-warning_sign','border':!![],'type':TriSysFlexiva['Settings']['Constants']['PanelType_Form'],'stripedRows':!![],'columnCount':0x1,'rowsPerColumn':0x1,'labelWidth':0x96},sBase64=TriSysAPI['Encryption']['Base64']['encode'](JSON['stringify'](panelObject)),sDiv='<div\x20id=\x22'+sGUID+'\x22\x20'+TriSysFlexiva['Settings']['PanelDataTag']+'=\x22'+sBase64+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';return{'GUID':sGUID,'HTML':sDiv};},'ForceTheme':function(){TriSysProUI['kendoUI_Overrides']();},'DropToolsHereHeaderHTML':function(sCommentary,sGUID){var sHTML=null,sIcon='gi\x20gi-eyedropper';const panelObject=TriSysFlexiva['Forms']['Renderer']['Properties']['ReadFromDOM'](sGUID,TriSysFlexiva['Settings']['PanelDataTag']);if(panelObject)panelObject['showTitle']&&panelObject['titleText']!=ctrlFormDesigner2024['Settings']['YourPanelTitle']&&(sCommentary=panelObject['titleText'],sIcon=panelObject['icon']);else{}if(!sHTML){const sButtonMenuHTML=$('#ctrlFormDesigner2024-DropToolsHereHeaderHTML-menu')['html']();sHTML='<div\x20class=\x22drop-tools-here\x20themed-color\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22'+sIcon+'\x22></i>\x20&nbsp;\x20'+ctrlFormDesigner2024['Settings']['DropToolsHere']+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20('+sCommentary+')\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+sButtonMenuHTML+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>';}return sHTML;},'ReadFormTabLayout':function(){var iRowCount=TriSysSDK['Controls']['NumericSpinner']['GetValue'](ctrlFormDesigner2024['Settings']['RowCountSpinnerID']),rows=[];for(var iRow=0x1;iRow<=iRowCount;iRow++){var iColumnCount=TriSysSDK['Controls']['NumericSpinner']['GetValue']('formTabLayout-row-'+iRow+'-column-counter'),columns=[];for(var iColumn=0x1;iColumn<=iColumnCount;iColumn++){const sID='form-tab-layout-table-row-'+iRow+'-column-width-'+iColumn,iColumnWidth=TriSysSDK['CShowForm']['GetValueFromCombo'](sID);columns['push'](parseInt(iColumnWidth));}const sRowID='form-tab-layout-table-row-'+iRow;var sRowGUID=$('#'+sRowID)['attr']('design-row-guid');if(!sRowGUID){const sGUID=TriSysSDK['Miscellaneous']['GUID']();sRowGUID=sGUID;}rows['push']({'Columns':columns,'ID':sRowGUID});}var bValid=!![];rows['forEach'](function(row,iRowIndex){if(row['Columns']){var iTotal=row['Columns']['reduce']((a,b)=>a+b,0x0);iTotal!=0xc&&(bValid=![],TriSysApex['Toasters']['Error']('Row\x20'+(iRowIndex+0x1)+'\x20column\x20widths\x20total\x20'+iTotal+'\x20but\x20must\x20total\x2012.'));}});if(bValid)return rows;else return null;},'ApplyFormTabLayout':function(){var rows=ctrlFormDesigner2024['TabLayout']['ReadFormTabLayout']();$('div.k-list-container.k-popup[data-role=\x22popup\x22]')['remove']();if(rows)return ctrlFormDesigner2024['TabLayout']['Context']={'Rows':rows},ctrlFormDesigner2024['TabLayout']['ApplyRowAndColumnLayout'](ctrlFormDesigner2024['TabLayout']['Context']),ctrlFormDesigner2024['InjectDragAndDropTags'](ctrlFormDesigner2024['Settings']['EditorCanvasId']),ctrlFormDesigner2024['Persistence']['PushChange'](),!![];},'Load':function(){var context=ctrlFormDesigner2024['TabLayout']['Context'],rows=context['Rows'],sRowsSpinner=ctrlFormDesigner2024['Settings']['RowCountSpinnerID'];TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']({'rootElementId':'ctrlFormTabLayout-Root'}),TriSysApex['FieldEvents']['AddNumberChangeFieldOfInterest'](sRowsSpinner,ctrlFormDesigner2024['TabLayout']['ChangeRowCount']),TriSysApex['FieldEvents']['AddNumberChangeFieldOfInterest']('formTabLayout-row-1-column-counter',ctrlFormDesigner2024['TabLayout']['ChangeColumnCount']);const defaultConfig=[{'Columns':[0x7,0x5]}];try{(!rows||rows['length']==0x0)&&(rows=defaultConfig);}catch(e){rows=defaultConfig;}TriSysSDK['Controls']['NumericSpinner']['SetValue'](sRowsSpinner,rows['length']),ctrlFormDesigner2024['TabLayout']['ChangeRowCount'](sRowsSpinner,rows['length']),rows['forEach'](function(row,i){var iRow=i+0x1;const columns=row['Columns'];var iColumnCount=columns['length'];const sRowGUID=row['ID'],sRowID='form-tab-layout-table-row-'+iRow;$('#'+sRowID)['attr']('design-row-guid',sRowGUID);const sColumnCountID='formTabLayout-row-'+iRow+'-column-counter';TriSysSDK['Controls']['NumericSpinner']['SetValue'](sColumnCountID,iColumnCount),ctrlFormDesigner2024['TabLayout']['ChangeColumnCount'](sColumnCountID,iColumnCount);for(var iColumn=0x1;iColumn<=iColumnCount;iColumn++){const sID='form-tab-layout-table-row-'+iRow+'-column-width-'+iColumn,iWidth=columns[iColumn-0x1];TriSysSDK['CShowForm']['SetValueInCombo'](sID,iWidth);const tableRowElement=$('#'+sID)['closest']('td'),fColumnWidthPercentage=iWidth/0xc*0x64;tableRowElement['css']('width',fColumnWidthPercentage+'%');}});},'ChangeRowCount':function(sFieldID,fValue){const iRowCount=parseInt(fValue),sRowPrefix='form-tab-layout-table-row-',sRow1JQueryID='#'+sRowPrefix+'1',row1Element=$(sRow1JQueryID),tableBodyElement=$('#ctrlFormTabLayout-table-tbody');for(var iRow=0x2;iRow<=iRowCount;iRow++){var sRowID=sRowPrefix+iRow,elemRow=$('#'+sRowID);if(elemRow['length']==0x1)elemRow['show']();else{var clonedRow=row1Element['clone'](!![],!![]);const sGUID=TriSysSDK['Miscellaneous']['GUID']();clonedRow['attr']('design-row-guid',sGUID),clonedRow['appendTo'](tableBodyElement);var lastAddedRow=tableBodyElement['children']('tr')['last']();lastAddedRow['attr']('id',sRowPrefix+iRow);const rowSpanElement=lastAddedRow['find']('span[id^=\x22'+ctrlFormDesigner2024['Settings']['FormTabLayoutPrefix']+'\x22]');rowSpanElement['attr']('id',ctrlFormDesigner2024['Settings']['FormTabLayoutPrefix']+iRow),rowSpanElement['html']('<strong>Row\x20'+iRow+'</strong>');const sColumnCounterID='#form-tab-layout-table-row-1-column-counter-td',columnCounterElement=lastAddedRow['find'](sColumnCounterID),sNewColumnCounterID='form-tab-layout-table-row-'+iRow+'-column-counter-td';columnCounterElement['attr']('id',sNewColumnCounterID),columnCounterElement['empty'](),columnCounterElement['html']('<trisys-field\x20id=\x22formTabLayout-row-'+iRow+'-column-counter\x22\x20type=\x22numeric\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20minimum=\x221\x22\x20maximum=\x2212\x22\x20increment=\x221\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20integer=\x22true\x22\x20value=\x221\x22\x20style=\x22height:\x2028px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</trisys-field>'),TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']({'rootElementId':sNewColumnCounterID}),TriSysApex['FieldEvents']['AddNumberChangeFieldOfInterest']('formTabLayout-row-'+iRow+'-column-counter',ctrlFormDesigner2024['TabLayout']['ChangeColumnCount']);const sRowContainingColumnWidthComboID='form-tab-layout-table-row-1-columns-combos-tr',rowContainingColumnWidthComboElement=lastAddedRow['find']('#'+sRowContainingColumnWidthComboID);rowContainingColumnWidthComboElement['empty']();const sNewRowContainingColumnWidthComboID='form-tab-layout-table-row-'+iRow+'-columns-combos-tr';rowContainingColumnWidthComboElement['attr']('id',sNewRowContainingColumnWidthComboID);var sHTMLColumnWidthCombos='';for(var iColumn=0x1;iColumn<=0xc;iColumn++){const sStyleHTML=iColumn>0x1?'\x20style=\x22display:\x20none;\x22':'';sHTMLColumnWidthCombos+='<td'+sStyleHTML+'>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<trisys-field\x20id=\x22form-tab-layout-table-row-'+iRow+'-column-width-'+iColumn+'\x22\x20type=\x22combo\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22ctrlFormDesigner2024.TabLayout.RowColumnWidthChange\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20lookups=\x221,2,3,4,5,6,7,8,9,10,11,12\x22\x20value=\x2212\x22\x20style=\x22height:\x2028px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</trisys-field>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>';}rowContainingColumnWidthComboElement['html'](sHTMLColumnWidthCombos),TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']({'rootElementId':sNewRowContainingColumnWidthComboID});}}const iMaxRows=0x20;for(var iRow=iRowCount+0x1;iRow<=iMaxRows;iRow++){const sRowID=sRowPrefix+iRow;$('#'+sRowID)['hide']();}},'RowColumnWidthChange':function(iColumnWidth,sText,sFieldID){console['log']('RowColumnWidthChange\x20'+sFieldID+':\x20column\x20width='+iColumnWidth);const parts=sFieldID['split']('-'),iRowNumber=parseInt(parts[0x5]),iColumnNumber=parseInt(parts[0x8]);console['log']('Row\x20number:\x20'+iRowNumber+',\x20Column\x20number:\x20'+iColumnNumber);const iColumnCount=TriSysSDK['Controls']['NumericSpinner']['GetValue']('formTabLayout-row-'+iRowNumber+'-column-counter'),fColumnWidthPercentage=0x64/ iColumnCount,fThisColumnWidthPercentage=iColumnWidth/0xc*0x64,rowElement=$('#form-tab-layout-table-row-'+iRowNumber+'-column-width-'+iColumnNumber)['closest']('td');rowElement['css']('width',fThisColumnWidthPercentage+'%');const combosRowElement=$('#form-tab-layout-table-row-'+iRowNumber+'-columns-combos-tr');var iColumnWidthTotal=0x0;for(var iColumn=0x1;iColumn<=0xc;iColumn++){const sID='form-tab-layout-table-row-'+iRowNumber+'-column-width-'+iColumn,bVisible=$('#'+sID)['closest']('td')['is'](':visible');if(bVisible){const iColumnWidth=TriSysSDK['CShowForm']['GetValueFromCombo'](sID);iColumnWidthTotal+=parseInt(iColumnWidth);}}const parentRowElement=$('#form-tab-layout-table-row-'+iRowNumber);if(iColumnWidthTotal!=0xc)TriSysApex['Toasters']['Error']('The\x20total\x20of\x20all\x20column\x20widths\x20in\x20a\x20row\x20must\x20be\x2012.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<br>Your\x20total\x20for\x20row\x20'+iRowNumber+'\x20is\x20'+iColumnWidthTotal+'<br>Please\x20adjust\x20the\x20other\x20columns\x20to\x20compensate.'),parentRowElement['addClass']('column-width-tr-error');else parentRowElement['removeClass']('column-width-tr-error');},'ChangeColumnCount':function(sFieldID,iNumberOfColumns){console['log']('ChangeColumnCount:\x20'+sFieldID+'\x20=\x20'+iNumberOfColumns);const iRowNumber=parseInt(sFieldID['replace']('formTabLayout-row-','')['replace']('-column-counter',''));console['log']('Row\x20number:\x20'+iRowNumber);const parentRowElement=$('#form-tab-layout-table-row-'+iRowNumber);parentRowElement['removeClass']('column-width-tr-error');const fColumnWidthPercentage=0x64/ iNumberOfColumns,iColumnWidth=Math['floor'](0xc/ iNumberOfColumns);for(var iColumn=0x1;iColumn<=0xc;iColumn++){const sColumnWidthID='form-tab-layout-table-row-'+iRowNumber+'-column-width-'+iColumn,columnWidthElement=$('#'+sColumnWidthID);var iColWidth=iColumnWidth;switch(iNumberOfColumns){case 0x5:if(iColumn<=0x2)iColWidth=0x3;break;case 0x7:if(iColumn<=0x3)iColWidth=iColumn<=0x2?0x3:0x2;break;case 0x8:if(iColumn<=0x3)iColWidth=iColumn<=0x1?0x3:0x2;break;case 0x9:if(iColumn<=0x3)iColWidth=0x2;break;case 0xa:if(iColumn<=0x2)iColWidth=0x2;break;case 0xb:if(iColumn<=0x1)iColWidth=0x2;break;}TriSysSDK['CShowForm']['SetValueInCombo'](sColumnWidthID,iColWidth);const tableRowElement=columnWidthElement['closest']('td');if(iColumn<=iNumberOfColumns)tableRowElement['css']('width',fColumnWidthPercentage+'%'),tableRowElement['show']();else tableRowElement['hide']();}},'GetRowNumberFromMenuClick':function(event){const $menuItem=$(event['target'])['closest']('li\x20>\x20a'),$dropdownButton=$menuItem['closest']('.dropdown-menu')['prev']('.dropdown-toggle'),$span=$dropdownButton['find']('span[id^=\x22'+ctrlFormDesigner2024['Settings']['FormTabLayoutPrefix']+'\x22]'),rowId=$span['attr']('id'),iRowNumber=rowId['split']('-')['pop']();return iRowNumber;},'MoveRowUp':function(event){const iRow=ctrlFormDesigner2024['TabLayout']['GetRowNumberFromMenuClick'](event);var rows=ctrlFormDesigner2024['TabLayout']['ReadFormTabLayout']();if(iRow>0x1&&rows){const currentIndex=iRow-0x1;[rows[currentIndex],rows[currentIndex-0x1]]=[rows[currentIndex-0x1],rows[currentIndex]];var context=ctrlFormDesigner2024['TabLayout']['Context'];context['Rows']=rows,ctrlFormDesigner2024['TabLayout']['Load'](),ctrlFormDesigner2024['Persistence']['PushChange']();}},'MoveRowDown':function(event){const iRow=ctrlFormDesigner2024['TabLayout']['GetRowNumberFromMenuClick'](event);var rows=ctrlFormDesigner2024['TabLayout']['ReadFormTabLayout']();if(rows&&iRow<rows['length']){const currentIndex=iRow-0x1;[rows[currentIndex],rows[currentIndex+0x1]]=[rows[currentIndex+0x1],rows[currentIndex]];var context=ctrlFormDesigner2024['TabLayout']['Context'];context['Rows']=rows,ctrlFormDesigner2024['TabLayout']['Load'](),ctrlFormDesigner2024['Persistence']['PushChange']();}},'DeleteRow':function(event){const iRow=ctrlFormDesigner2024['TabLayout']['GetRowNumberFromMenuClick'](event);var rows=ctrlFormDesigner2024['TabLayout']['ReadFormTabLayout']();if(rows&&rows['length']>0x1){const sMessage='Delete\x20Row:\x20'+iRow+'?'+'<br><br><b>Warning:</b>\x20All\x20panels,\x20components\x20and\x20fields\x20will\x20also\x20be\x20removed.';TriSysApex['UI']['questionYesNo'](sMessage,'Delete\x20Row','Yes',function(){rows['splice'](iRow-0x1,0x1);var context=ctrlFormDesigner2024['TabLayout']['Context'];return context['Rows']=rows,ctrlFormDesigner2024['TabLayout']['Load'](),ctrlFormDesigner2024['Persistence']['PushChange'](),!![];},'No');}}},'Panel':{'ConfigureProperties':function(thisObject){var elemColumn=$(thisObject)['closest']('['+TriSysFlexiva['Settings']['PanelDataTag']+']'),sPanelId=elemColumn['attr']('id'),fnGetColumnInfo=function(elem){let $dropTools=elem['find']('.drop-tools-here'),text=$dropTools['clone']()['children']()['remove']()['end']()['text']()['trim'](),match=text['match'](/\(([^)]+)\)/);return match&&text['includes']('(Row:')?match[0x1]:text;};const sCommentary=fnGetColumnInfo(elemColumn);var parametersObject=new TriSysApex['UI']['ShowMessageParameters']();parametersObject['Title']='Panel\x20Properties:\x20'+sCommentary,parametersObject['Image']='fa-object-group',parametersObject['Maximize']=!![],parametersObject['CloseTopRightButton']=!![],parametersObject['ContentURL']=TriSysApex['Constants']['UserControlFolder']+'app-studio/ctrlPanelProperties.html',parametersObject['ButtonCentreText']='Apply',parametersObject['ButtonCentreVisible']=!![],parametersObject['ButtonCentreFunction']=ctrlFormDesigner2024['Panel']['Apply'],parametersObject['ButtonRightText']='Cancel',parametersObject['ButtonRightVisible']=!![],parametersObject['OnLoadCallback']=function(){ctrlFormDesigner2024['Panel']['Load'](sCommentary,sPanelId);},TriSysApex['UI']['PopupMessage'](parametersObject);},'Load':function(sCommentary,sGUID){$('#ctrlPanelProperties-Commentary')['html'](sCommentary),$('#ctrlPanelProperties-ID')['html'](sGUID),TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']({'rootElementId':'ctrlPanelProperties-Root'}),ctrlFormDesigner2024['Panel']['EventHandlers'](),ctrlFormDesigner2024['Panel']['ReadAndPopulate'](sGUID),setTimeout(TriSysProUI['kendoUI_Overrides'],0x64);},'ReadAndPopulate':function(sGUID){const panelObject=TriSysFlexiva['Forms']['Renderer']['Properties']['ReadFromDOM'](sGUID,TriSysFlexiva['Settings']['PanelDataTag']),sPrefix='ctrlPanelProperties-';TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'TitleText',panelObject['titleText'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Text']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'TitleIcon',panelObject['icon'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Icon']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Type',panelObject['type'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),panelObject['showTitle']&&$('#'+sPrefix+'ShowTitle')['trigger']('click'),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'Border',panelObject['border'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'StripedRows',panelObject['stripedRows'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['YesNo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'ColumnCount',panelObject['columnCount'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['SkillCombo']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'RowsPerColumn',panelObject['rowsPerColumn'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Integer']}),TriSysSDK['CShowForm']['writeFieldValueToWidget'](sPrefix+'LabelWidth',panelObject['labelWidth'],{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Integer']}),TriSysSDK['Controls']['ColourPicker']['SetColour'](sPrefix+'TitleBackgroundColour',panelObject['titleBackgroundColour']),TriSysSDK['Controls']['ColourPicker']['SetColour'](sPrefix+'TitleForegroundColour',panelObject['titleForegroundColour']),$('#'+sPrefix+'TitleColours-td')['css']('background-color',panelObject['titleBackgroundColour'])['css']('color',panelObject['titleForegroundColour']);},'ChangeColour':function(colour,sID,bCleared){switch(sID){case'ctrlPanelProperties-TitleBackgroundColour':$('#ctrlPanelProperties-TitleColours-td')['css']('background-color',bCleared?'':colour);break;case'ctrlPanelProperties-TitleForegroundColour':$('#ctrlPanelProperties-TitleColours-td')['css']('color',bCleared?'':colour);break;}},'EventHandlers':function(){$('#ctrlPanelProperties-ShowTitle')['on']('input',function(){var bChecked=TriSysSDK['CShowForm']['GetCheckBoxValue'](this['id']),lst=['ctrlPanelProperties-TitleIcon-tr','ctrlPanelProperties-TitleText-tr','ctrlPanelProperties-TitleColours-tr'];lst['forEach'](function(sID){const tr=$('#'+sID);bChecked?tr['show']():tr['hide']();});});var fnDeleteConfig=function(){if(!ctrlAppStudioConfigurator['CurrentConfigurator'])ctrlAppStudioConfigurator['CurrentConfigurator']={};var fnExisting=ctrlAppStudioConfigurator['CurrentConfigurator']['iconDeletedFunction'];if(fnExisting)ctrlFormDesigner2024['Panel']['ParkedIconDeletedFunction']=fnExisting;ctrlAppStudioConfigurator['CurrentConfigurator']['iconDeletedFunction']='ctrlFormDesigner2024.Panel.DeleteIcon';};if(typeof ctrlAppStudioConfigurator==TriSysApex['Constants']['Undefined']){const fnLoadedMissingScript=function(){fnDeleteConfig();};TriSysApex['WhiteLabelling']['LoadJavascriptFile'](TriSysApex['Constants']['UserControlFolder']+'app-studio/ctrlAppStudioConfigurator.js',null,fnLoadedMissingScript);}else fnDeleteConfig();},'ColumnList':function(){var lst=[{'text':'1','value':'1'},{'text':'2','value':'2'},{'text':'3','value':'3'},{'text':'4','value':'4'},{'text':'6','value':'6'},{'text':'12','value':'12'}];return lst;},'SelectedType':function(){},'DeleteIcon':function(sFieldID){TriSysSDK['CShowForm']['writeFieldValueToWidget'](sFieldID,null,{'FieldTypeId':TriSysSDK['Controls']['FieldTypes']['Icon']});},'Apply':function(){const panelObject=ctrlFormDesigner2024['Panel']['ReadConfiguration']();if(panelObject){TriSysFlexiva['Forms']['Renderer']['Properties']['WriteToDOM'](panelObject['id'],TriSysFlexiva['Settings']['PanelDataTag'],panelObject);var dropToolsHereElement=$('#'+panelObject['id'])['find']('.drop-tools-here')['first']();return dropToolsHereElement['length']==0x1&&dropToolsHereElement['replaceWith'](ctrlFormDesigner2024['TabLayout']['DropToolsHereHeaderHTML'](panelObject['titleText'],panelObject['id'])),ctrlFormDesigner2024['Persistence']['PushChange'](),!![];}},'ReadConfiguration':function(){const panelObject={},sPrefix='ctrlPanelProperties-';panelObject['id']=$('#'+sPrefix+'ID')['text'](),panelObject['titleText']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'TitleText',TriSysSDK['Controls']['FieldTypes']['Text']),panelObject['icon']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'TitleIcon',TriSysSDK['Controls']['FieldTypes']['Icon']),panelObject['type']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Type',TriSysSDK['Controls']['FieldTypes']['SkillCombo']),panelObject['showTitle']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'ShowTitle',TriSysSDK['Controls']['FieldTypes']['YesNo']),panelObject['border']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'Border',TriSysSDK['Controls']['FieldTypes']['YesNo']),panelObject['stripedRows']=TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'StripedRows',TriSysSDK['Controls']['FieldTypes']['YesNo']),panelObject['columnCount']=parseInt(TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'ColumnCount',TriSysSDK['Controls']['FieldTypes']['SkillCombo'])),panelObject['rowsPerColumn']=parseInt(TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'RowsPerColumn',TriSysSDK['Controls']['FieldTypes']['Integer'])),panelObject['labelWidth']=parseInt(TriSysSDK['CShowForm']['readFieldValueFromWidget'](sPrefix+'LabelWidth',TriSysSDK['Controls']['FieldTypes']['Integer'])),panelObject['titleBackgroundColour']=TriSysSDK['Controls']['ColourPicker']['GetColour'](sPrefix+'TitleBackgroundColour'),panelObject['titleForegroundColour']=TriSysSDK['Controls']['ColourPicker']['GetColour'](sPrefix+'TitleForegroundColour');var lstError=[];if(panelObject['type']==TriSysFlexiva['Settings']['Constants']['PanelType_Block']&&panelObject['labelWidth']>0xc)lstError['push']('Label\x20width\x20must\x20be\x20between\x201\x20and\x2012\x20when\x20specifying\x20column\x20widths\x20in\x20block\x20panels.');if(lstError['length']>0x0)TriSysApex['UI']['ShowMessage'](lstError['join']('<br>'));else return panelObject;},'MenuOperations':{'MoveRowUp':function(thisObject){const iRow=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowNumberFromMenuClick']($(thisObject));if(iRow>0x1){const sSelectedRowID=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowIDFromMenuClick']($(thisObject)),$row=$('#'+sSelectedRowID),$prevRow=$row['prev']('div.row');$prevRow['length']&&($prevRow['before']($row),ctrlFormDesigner2024['Panel']['MenuOperations']['UpdateRowNumbers']($row['add']($prevRow)),ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),ctrlFormDesigner2024['Persistence']['PushChange']());}},'MoveRowDown':function(thisObject){const iRow=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowNumberFromMenuClick']($(thisObject)),iTotalRows=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20div.row')['length'];if(iRow<iTotalRows){const sSelectedRowID=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowIDFromMenuClick']($(thisObject)),$row=$('#'+sSelectedRowID),$nextRow=$row['next']('div.row');$nextRow['length']&&($nextRow['after']($row),ctrlFormDesigner2024['Panel']['MenuOperations']['UpdateRowNumbers']($row['add']($nextRow)),ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),ctrlFormDesigner2024['Persistence']['PushChange']());}},'DeleteRow':function(thisObject){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick']($(thisObject));if(rowCol){const sSelectedRowID=rowCol['RowID'],$row=$('#'+sSelectedRowID);$row['remove']();const $remainingRows=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20div.row');$remainingRows['each'](function(index){const currentRowNum=index+0x1;$(this)['find']('div.div-drop-zone')['each'](function(){const $dropZone=$(this),currentId=$dropZone['attr']('id'),match=currentId['match'](/div-drop-zone-\d+-(\d+)/);if(match){const columnNum=match[0x1],newId='div-drop-zone-'+currentRowNum+'-'+columnNum;$dropZone['attr']('id',newId);}});}),ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),ctrlFormDesigner2024['Persistence']['PushChange']();}},'MoveColumnLeft':function(thisObject){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick']($(thisObject));if(rowCol&&rowCol['Column']>0x1){const $column=$('#'+rowCol['ColumnID']),$prevColumn=$column['prev']('[flexiva-data-panel]');$prevColumn['length']&&($prevColumn['before']($column),ctrlFormDesigner2024['Panel']['MenuOperations']['UpdateColumnNumbers']($column['closest']('.row')),ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),ctrlFormDesigner2024['Persistence']['PushChange']());}},'MoveColumnRight':function(thisObject){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick']($(thisObject));if(rowCol){const $column=$('#'+rowCol['ColumnID']),$nextColumn=$column['next']('[flexiva-data-panel]');$nextColumn['length']&&($nextColumn['after']($column),ctrlFormDesigner2024['Panel']['MenuOperations']['UpdateColumnNumbers']($column['closest']('.row')),ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),ctrlFormDesigner2024['Persistence']['PushChange']());}},'MoveColumnUp':function(thisObject){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick']($(thisObject));if(rowCol&&rowCol['Row']>0x1){const sSelectedColumnID=rowCol['ColumnID'],$column=$('#'+sSelectedColumnID),$currentRow=$column['closest']('.row'),$prevRow=$currentRow['prev']('.row');if($prevRow['length']){const currentColumnWidth=ctrlFormDesigner2024['Panel']['MenuOperations']['GetColumnWidth']($column);$column['detach']();const $remainingColumns=$currentRow['find']('[flexiva-data-panel]');$remainingColumns['length']?ctrlFormDesigner2024['Panel']['MenuOperations']['RedistributeWidth']($remainingColumns):$currentRow['remove']();if(rowCol['Column']===0x1)$prevRow['prepend']($column);else{const $targetSibling=$prevRow['children']('[flexiva-data-panel]')['eq'](rowCol['Column']-0x1);$targetSibling['length']?$targetSibling['before']($column):$prevRow['append']($column);}const $allPrevRowColumns=$prevRow['find']('[flexiva-data-panel]');ctrlFormDesigner2024['Panel']['MenuOperations']['RedistributeWidth']($allPrevRowColumns),$currentRow['parent']()['length']&&ctrlFormDesigner2024['Panel']['MenuOperations']['UpdateDropZoneIds']($currentRow),ctrlFormDesigner2024['Panel']['MenuOperations']['UpdateDropZoneIds']($prevRow),ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),ctrlFormDesigner2024['Persistence']['PushChange']();}}},'MoveColumnDown':function(thisObject){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick']($(thisObject)),iTotalRows=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId']+'\x20div.row')['length'];if(rowCol){const sSelectedColumnID=rowCol['ColumnID'],$column=$('#'+sSelectedColumnID),$currentRow=$column['closest']('.row'),$nextRow=$currentRow['next']('.row');if($nextRow['length']){const currentColumnWidth=ctrlFormDesigner2024['Panel']['MenuOperations']['GetColumnWidth']($column);$column['detach']();const $remainingColumns=$currentRow['find']('[flexiva-data-panel]');$remainingColumns['length']?ctrlFormDesigner2024['Panel']['MenuOperations']['RedistributeWidth']($remainingColumns):$currentRow['remove']();if(rowCol['Column']===0x1)$nextRow['prepend']($column);else{const $targetSibling=$nextRow['children']('[flexiva-data-panel]')['eq'](rowCol['Column']-0x1);$targetSibling['length']?$targetSibling['before']($column):$nextRow['append']($column);}const $allNextRowColumns=$nextRow['find']('[flexiva-data-panel]');ctrlFormDesigner2024['Panel']['MenuOperations']['RedistributeWidth']($allNextRowColumns),$currentRow['parent']()['length']&&ctrlFormDesigner2024['Panel']['MenuOperations']['UpdateDropZoneIds']($currentRow),ctrlFormDesigner2024['Panel']['MenuOperations']['UpdateDropZoneIds']($nextRow),ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),ctrlFormDesigner2024['Persistence']['PushChange']();}}},'DeleteColumn':function(thisObject){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick']($(thisObject));if(rowCol){const sSelectedColumnID=rowCol['ColumnID'],$column=$('#'+sSelectedColumnID),$currentRow=$column['closest']('.row'),columnIndex=$column['index']('[flexiva-data-panel]');$column['remove']();const $remainingColumns=$currentRow['find']('[flexiva-data-panel]');$remainingColumns['length']&&ctrlFormDesigner2024['Panel']['MenuOperations']['RedistributeWidth']($remainingColumns),$remainingColumns['each'](function(index){const $dropZone=$(this)['find']('div.div-drop-zone');if($dropZone['length']){const currentId=$dropZone['attr']('id'),match=currentId['match'](/div-drop-zone-(\d+)-\d+/);if(match){const rowNum=match[0x1],newId='div-drop-zone-'+rowNum+'-'+(index+0x1);$dropZone['attr']('id',newId);}}}),ctrlFormDesigner2024['TabLayout']['ApplyDropToolsHereCommentaryForAllRowsAndColumns'](),ctrlFormDesigner2024['Persistence']['PushChange']();}},'GetRowAndColumnNumbersFromMenuClick':function(clickedElement){const dropZoneElement=$(clickedElement)['closest']('.div-drop-zone'),dropZoneId=dropZoneElement['attr']('id');if(dropZoneId&&dropZoneId['startsWith']('div-drop-zone-')){const elemColumn=$(clickedElement)['closest']('['+TriSysFlexiva['Settings']['PanelDataTag']+']'),sColumnID=elemColumn['attr']('id'),matches=dropZoneId['match'](/div-drop-zone-(\d+)-(\d+)/);if(matches){const sRowID=dropZoneElement['closest']('div.row')['attr']('id');return{'RowID':sRowID,'ColumnID':sColumnID,'Row':parseInt(matches[0x1]),'Column':parseInt(matches[0x2])};}}return null;},'GetRowNumberFromMenuClick':function(clickedElement){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick'](clickedElement);if(rowCol)return rowCol['Row'];},'GetRowIDFromMenuClick':function(clickedElement){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick'](clickedElement);if(rowCol)return rowCol['RowID'];},'GetColumnNumberFromMenuClick':function(clickedElement){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick'](clickedElement);if(rowCol)return rowCol['Column'];},'GetColumnIDFromMenuClick':function(clickedElement){const rowCol=ctrlFormDesigner2024['Panel']['MenuOperations']['GetRowAndColumnNumbersFromMenuClick'](clickedElement);if(rowCol)return rowCol['ColumnID'];},'UpdateRowNumbers':function($rows){const $allRows=$rows['first']()['parent']()['find']('div.row');$allRows['each'](function(index){const currentRowNum=index+0x1;$(this)['find']('div.div-drop-zone')['each'](function(){const $dropZone=$(this),currentId=$dropZone['attr']('id'),match=currentId['match'](/div-drop-zone-\d+-(\d+)/);if(match){const columnNum=match[0x1],newId='div-drop-zone-'+currentRowNum+'-'+columnNum;$dropZone['attr']('id',newId);}});});},'UpdateColumnNumbers':function($row){$row['find']('[flexiva-data-panel]')['each'](function(columnIndex){const currentColumnNum=columnIndex+0x1,$dropZone=$(this)['find']('div.div-drop-zone'),currentId=$dropZone['attr']('id'),match=currentId['match'](/div-drop-zone-(\d+)-\d+/);if(match){const rowNum=match[0x1],newId='div-drop-zone-'+rowNum+'-'+currentColumnNum;$dropZone['attr']('id',newId);}});},'UpdateDropZoneIds':function($row){const rowIndex=$row['index']()+0x1;$row['find']('[flexiva-data-panel]')['each'](function(columnIndex){const $dropZone=$(this)['find']('div.div-drop-zone');if($dropZone['length']){const newId='div-drop-zone-'+rowIndex+'-'+(columnIndex+0x1);$dropZone['attr']('id',newId);}});},'GetColumnWidth':function($column){const match=$column['attr']('class')['match'](/col-md-(\d+)/);return match?parseInt(match[0x1]):0x0;},'SetColumnWidth':function($column,width){$column['removeClass'](function(index,className){return(className['match'](/(^|\s)col-md-\S+/g)||[])['join']('\x20');})['addClass']('col-md-'+width);},'RedistributeWidth':function($columns){if(!$columns['length'])return;let totalCurrentWidth=0x0;$columns['each'](function(){totalCurrentWidth+=ctrlFormDesigner2024['Panel']['MenuOperations']['GetColumnWidth']($(this));});if($columns['length']===0x1){ctrlFormDesigner2024['Panel']['MenuOperations']['SetColumnWidth']($columns,0xc);return;}const scaleFactor=0xc/totalCurrentWidth;let remainingWidth=0xc;$columns['each'](function(index){if(index===$columns['length']-0x1)ctrlFormDesigner2024['Panel']['MenuOperations']['SetColumnWidth']($(this),remainingWidth);else{const currentWidth=ctrlFormDesigner2024['Panel']['MenuOperations']['GetColumnWidth']($(this)),newWidth=Math['floor'](currentWidth*scaleFactor);ctrlFormDesigner2024['Panel']['MenuOperations']['SetColumnWidth']($(this),newWidth),remainingWidth-=newWidth;}});},'AdjustWidthsForNewColumn':function($row,newColumnWidth){const $columns=$row['find']('[flexiva-data-panel]');if($columns['length']===0x2){const remainingWidth=0xc-newColumnWidth;ctrlFormDesigner2024['Panel']['MenuOperations']['SetColumnWidth']($columns['not'](':last'),remainingWidth);return;}let totalExistingWidth=0x0;$columns['not'](':last')['each'](function(){totalExistingWidth+=ctrlFormDesigner2024['Panel']['MenuOperations']['GetColumnWidth']($(this));});const scaleFactor=(0xc-newColumnWidth)/totalExistingWidth;let remainingWidth=0xc-newColumnWidth;$columns['not'](':last')['each'](function(index){const $col=$(this);if(index===$columns['not'](':last')['length']-0x1)ctrlFormDesigner2024['Panel']['MenuOperations']['SetColumnWidth']($col,remainingWidth);else{const currentWidth=ctrlFormDesigner2024['Panel']['MenuOperations']['GetColumnWidth']($col),newWidth=Math['floor'](currentWidth*scaleFactor);ctrlFormDesigner2024['Panel']['MenuOperations']['SetColumnWidth']($col,newWidth),remainingWidth-=newWidth;}});}}},'Persistence':{'_DOM_History':[],'_DOM_History_Index':-0x1,'ChangesMade':function(){const bChangesMade=ctrlFormDesigner2024['Persistence']['_DOM_History_Index']>=0x0&&ctrlFormDesigner2024['Persistence']['_DOM_History']['length']>0x1;return bChangesMade;},'Initialise':function(){const formObject=JSON['parse'](JSON['stringify'](ctrlFormDesigner2024['Settings']['Context']['FormObject']));ctrlFormDesigner2024['Persistence']['_DOM_History']['push'](formObject),ctrlFormDesigner2024['Persistence']['_DOM_History_Index']=ctrlFormDesigner2024['Persistence']['_DOM_History']['length']-0x1;},'GetSnapshotOfHTML':function(){var sHTML=$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId'])['html']();const elemPreviewCanvas=document['getElementById'](ctrlFormDesigner2024['Settings']['PreviewCanvasId']);return ctrlFormDesigner2024['FormRenderer']['RenderPreview'](sHTML,elemPreviewCanvas,{'DoNotRenderComponentsAndFields':!![]}),sHTML=elemPreviewCanvas['innerHTML'],sHTML;},'PushChange':function(options){var sTabID=null,bFormPropertiesChange=![],bComponentsChange;options&&(sTabID=options['tabID'],bFormPropertiesChange=options['formPropertiesChange']?options['formPropertiesChange']:![],bComponentsChange=options['componentsChange']?options['componentsChange']:![]);const sHTML=ctrlFormDesigner2024['Persistence']['GetSnapshotOfHTML']();ctrlFormDesigner2024['Tabs']['UpdateFormTabHTML'](sHTML);if(ctrlFormDesigner2024['Persistence']['_DOM_History_Index']<0x0)ctrlFormDesigner2024['Persistence']['_DOM_History_Index']=0x0;for(var i=ctrlFormDesigner2024['Persistence']['_DOM_History']['length']-0x1;i>ctrlFormDesigner2024['Persistence']['_DOM_History_Index'];i--){ctrlFormDesigner2024['Persistence']['_DOM_History']['splice'](i,0x1);}const formObject=JSON['parse'](JSON['stringify'](ctrlFormDesigner2024['Settings']['Context']['FormObject']));if(ctrlFormDesigner2024['Persistence']['_DOM_History']['length']>0x0){const i=ctrlFormDesigner2024['Persistence']['_DOM_History']['length']-0x1,lastformObject=ctrlFormDesigner2024['Persistence']['_DOM_History'][i];var bSameObject=JSON['stringify'](formObject)==JSON['stringify'](lastformObject);if(bSameObject)return;}if(sTabID){const lstFormTab=formObject['Tabs'];lstFormTab['forEach'](function(tab){tab['SelectedInDesigner']=tab['ID']==sTabID;});}if(bFormPropertiesChange)formObject['DesignTimeOnly']['FormPropertiesChangedSinceLastEdit']=!![];else{if(bComponentsChange)formObject['DesignTimeOnly']['ComponentsChangedSinceLastEdit']=!![];else formObject['DesignTimeOnly']['TabsChangedSinceLastEdit']=!![];}ctrlFormDesigner2024['Persistence']['_DOM_History']['push'](formObject),ctrlFormDesigner2024['Persistence']['_DOM_History_Index']=ctrlFormDesigner2024['Persistence']['_DOM_History']['length']-0x1,ctrlFormDesigner2024['Persistence']['UndoRedoButtonState']();},'PopChange':function(){if(ctrlFormDesigner2024['Persistence']['_DOM_History']['length']>=0x1){if(ctrlFormDesigner2024['Persistence']['_DOM_History_Index']>0x0){ctrlFormDesigner2024['Persistence']['_DOM_History_Index']-=0x1;const i=ctrlFormDesigner2024['Persistence']['_DOM_History_Index'],formObject=ctrlFormDesigner2024['Persistence']['_DOM_History'][i];return formObject;}}},'UndoButtonEnabled':function(bEnable){var button=$('#ctrlFormDesigner2024-undo-layout');bEnable?button['removeClass']('disabled'):button['addClass']('disabled');},'RedoButtonEnabled':function(bEnable){var button=$('#ctrlFormDesigner2024-redo-layout');bEnable?button['removeClass']('disabled'):button['addClass']('disabled');},'RestoreFieldConfigurationHoverButtonAfterUndoOrRedo':function(){$('#'+ctrlFormDesigner2024['Settings']['EditorCanvasId'])['find']('tr[id^=\x22trisys-toolbox-\x22]')['each'](function(){const bOverlayButton=$(this)['find']('button.overlay-button')['length']>0x0;if(!bOverlayButton){const jqueryFieldItem=$(this),sID=jqueryFieldItem['attr']('id');var sBase64=null,bField=![],bComponent=![];if(jqueryFieldItem['attr'](TriSysFlexiva['Settings']['FieldDataTag']))ctrlFormDesigner2024['Fields']['OverlayFieldWithControlButton'](sID),sBase64=jqueryFieldItem['attr'](TriSysFlexiva['Settings']['FieldDataTag']),bField=!![];else jqueryFieldItem['attr'](TriSysFlexiva['Settings']['ComponentDataTag'])&&(ctrlFormDesigner2024['Components']['OverlayWithControlButton'](sID,{'component':!![]}),sBase64=jqueryFieldItem['attr'](TriSysFlexiva['Settings']['ComponentDataTag']),bComponent=!![]);const sTriSysFieldOrComponentHTML=sBase64?atob(sBase64):'';var secondTd=jqueryFieldItem['find']('td')['eq'](0x1);secondTd['empty'](),secondTd['html'](sTriSysFieldOrComponentHTML),TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']({'rootElementId':sID});}});},'Undo':function(){var formObject=ctrlFormDesigner2024['Persistence']['PopChange']();if(formObject){formObject=JSON['parse'](JSON['stringify'](formObject)),ctrlFormDesigner2024['Settings']['Context']['FormObject']=formObject,ctrlFormDesigner2024['FormProperties']['Populate'](formObject),ctrlFormDesigner2024['Tabs']['PopulateTabs'](formObject['Tabs']);if(formObject['DesignTimeOnly']['TabsChangedSinceLastEdit'])ctrlFormDesigner2024['Tabs']['ShowAccordion']();else{if(formObject['DesignTimeOnly']['FormPropertiesChangedSinceLastEdit'])ctrlFormDesigner2024['FormProperties']['ShowAccordion']();else{if(formObject['DesignTimeOnly']['ComponentsChangedSinceLastEdit'])ctrlFormDesigner2024['Components']['ShowAccordion']();}}}ctrlFormDesigner2024['Persistence']['UndoRedoButtonState']();},'Redo':function(){if(ctrlFormDesigner2024['Persistence']['_DOM_History_Index']<ctrlFormDesigner2024['Persistence']['_DOM_History']['length']-0x1){ctrlFormDesigner2024['Persistence']['_DOM_History_Index']+=0x1;const i=ctrlFormDesigner2024['Persistence']['_DOM_History_Index'];var formObject=ctrlFormDesigner2024['Persistence']['_DOM_History'][i];formObject=JSON['parse'](JSON['stringify'](formObject)),ctrlFormDesigner2024['Settings']['Context']['FormObject']=formObject,ctrlFormDesigner2024['FormProperties']['Populate'](formObject);if(formObject['Tabs']){ctrlFormDesigner2024['Tabs']['PopulateTabs'](formObject['Tabs']);if(formObject['DesignTimeOnly']['TabsChangedSinceLastEdit'])ctrlFormDesigner2024['Tabs']['ShowAccordion']();else{if(formObject['DesignTimeOnly']['FormPropertiesChangedSinceLastEdit'])ctrlFormDesigner2024['FormProperties']['ShowAccordion']();else{if(formObject['DesignTimeOnly']['ComponentsChangedSinceLastEdit'])ctrlFormDesigner2024['Components']['ShowAccordion']();}}}}ctrlFormDesigner2024['Persistence']['UndoRedoButtonState']();},'UndoRedoButtonState':function(){var bEnabled=ctrlFormDesigner2024['Persistence']['_DOM_History_Index']>0x0;ctrlFormDesigner2024['Persistence']['UndoButtonEnabled'](bEnabled),bEnabled=ctrlFormDesigner2024['Persistence']['_DOM_History_Index']<ctrlFormDesigner2024['Persistence']['_DOM_History']['length']-0x1,ctrlFormDesigner2024['Persistence']['RedoButtonEnabled'](bEnabled);}},'FormRenderer':{'RenderPreview':function(sHTML,elemPreviewCanvas,options){var bInjectWaitSpinner=!![];if(options&&options['DoNotRenderComponentsAndFields'])bInjectWaitSpinner=![];bInjectWaitSpinner?TriSysSDK['WaitSpinner']['Load'](elemPreviewCanvas['id'],0x12c):elemPreviewCanvas['innerHTML']=sHTML;const sPrefix='#'+ctrlFormDesigner2024['Settings']['PreviewCanvasId'];$(sPrefix+'\x20.inner-wrapper')['contents']()['unwrap'](),$(sPrefix+'\x20.drop-tools-here')['remove'](),$(sPrefix+'\x20.div-drop-zone')['contents']()['unwrap'](),$(sPrefix+'\x20.design-time-only')['remove'](),$(sPrefix)['find']('.toolbox-component,\x20.toolbox-field')['each'](function(){const element=$(this),sID=element['attr']('id'),sGUID=TriSysSDK['Miscellaneous']['GUID']();element['attr']('id',sGUID);}),options&&options['DoNotRenderComponentsAndFields']?$(sPrefix+'\x20div.sortable-item')['removeClass']('sortable-item'):TriSysFlexiva['Forms']['Renderer']['ReadAllFieldLookups'](sHTML,function(){elemPreviewCanvas['innerHTML']=sHTML;const lstPanel=$('#'+ctrlFormDesigner2024['Settings']['PreviewCanvasId']+'\x20div['+TriSysFlexiva['Settings']['PanelDataTag']+']')['toArray']();lstPanel['forEach'](function(panel){const panelElement=$(panel),sID=panelElement['attr']('id'),panelObject=TriSysFlexiva['Forms']['Renderer']['Properties']['ReadFromDOM'](sID,TriSysFlexiva['Settings']['PanelDataTag']);TriSysFlexiva['Forms']['Renderer']['DrawPanel'](sID,panelElement,panelObject);}),TriSysSDK['CShowForm']['HTMLFieldsCodeInjection']({'rootElementId':ctrlFormDesigner2024['Settings']['PreviewCanvasId']}),setTimeout(TriSysProUI['kendoUI_Overrides'],0x64);});},'UpdateRendererDimensions':function(rendererDimensions){if(rendererDimensions)ctrlFormDesigner2024['FormRenderer']['UpdateRendererDimensions']['staticRendererDimensions']=rendererDimensions;else rendererDimensions=ctrlFormDesigner2024['FormRenderer']['UpdateRendererDimensions']['staticRendererDimensions'];if(!rendererDimensions)return;const $container=$('#ctrlFormDesigner2024-preview-device-container'),$renderer=$('#ctrlFormDesigner2024-preview-device-renderer');var sBackgroundImage=$container['css']('background-image');if(!sBackgroundImage||sBackgroundImage=='none')return;sBackgroundImage=sBackgroundImage['replace'](/url\(['"]?(.*?)['"]?\)/i,'$1');const containerWidth=$container['width'](),containerHeight=$container['height'](),tempImg=new Image();tempImg['src']=sBackgroundImage,tempImg['onload']=function(){let displayWidth,displayHeight;const imageRatio=tempImg['width']/tempImg['height'],containerRatio=containerWidth/containerHeight;containerRatio>imageRatio?(displayHeight=containerHeight,displayWidth=containerHeight*imageRatio):(displayWidth=containerWidth,displayHeight=containerWidth/ imageRatio);const iTopStart=0x28,iLeftStart=0x10,width=displayWidth*rendererDimensions['devicePercentages']['width'],height=displayHeight*rendererDimensions['devicePercentages']['height'],top=iTopStart+displayHeight*rendererDimensions['devicePercentages']['top'],left=iLeftStart+displayWidth*rendererDimensions['devicePercentages']['left'];$renderer['css']({'width':width+'px','height':height+'px','top':top+'px','left':left+'px'});};}},'Prettifier':{'HTML':function(sHTML){let tab='\x20\x20\x20\x20',result='',indent='';return sHTML['split'](/>\s*</)['forEach'](element=>{element['match'](/^\/\w/)&&(indent=indent['substring'](tab['length'])),result+=indent+'<'+element+'>\x0a',element['match'](/^<?\w[^>]*[^\/]$/)&&!element['startsWith']('input')&&(indent+=tab);}),result['substring'](0x1,result['length']-0x2);}},'Settings':{'EditorCanvasId':'ctrlFormDesigner2024-EditorCanvas','PreviewCanvasId':'ctrlFormDesigner2024-PreviewCanvas','ToolboxTabsId':'ctrlFormDesigner2024-ToolboxTabs','ToolboxPrefix':'flexiva-toolbox-','RowCountSpinnerID':'formTabLayout-Rows','TabDataTag':'flexiva-data-tab','DropToolsHere':'Drop\x20tools\x20here','YourPanelTitle':'Your\x20Panel\x20Title','FormTabLayoutPrefix':'form-tab-layout-table-row-number-','EntityName':'Timesheet','Context':null,'DateFormat':'dddd\x20DD\x20MMMM\x20YYYY\x20HH:mm:ss','RunTimeIDsuffix':'-flexiva-run-time','CalculatedBelow':'Calculated\x20below..','ComponentColour':'text-info','FieldColour':'text-warning','CurrentDeviceBeingPreviewed':null,'nowt':null}};