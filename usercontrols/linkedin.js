'use strict';$(function(){$('#trisys-iframe')['load'](function(){setTimeout(sendData,0x3e8);});});function sendData(){console['log']('sendData\x20event');var receiver=document['getElementById']('trisys-iframe')['contentWindow'],data=scrapeLinkedIn();if(data){try{receiver['postMessage'](data,'https://apex.trisys.co.uk');}catch(e){}return;var ourMessageObject={'Message':data},sJSON=JSON['stringify'](ourMessageObject),sUserName='TriSysApex.SignalR.Message.OpusLaborisRecruitment.josie.musto',sMessageID='TriSysExtension-LinkedInDataReceived';localStorage['setItem'](sMessageID,sJSON);}}function scrapeLinkedIn(){var message={'Type':'LinkedInToTriSys','URL':location['href'],'HTML':'<html>'+$('html')['html']()+'</html>','FullName':getFullName(),'JobTitle':getJobTitle(),'Company':getCompany(),'Industry':$('dd.industry')['text'](),'Location':$('#location\x20a[name=location]')['text'](),'PreviousCompanies':getListTexts($('#overview-summary-past\x20li\x20a')),'Education':getListTexts($('#overview-summary-education\x20li')),'Connections':getLinkedInConnections(),'Photo':getPhoto(),'EMail':getListTexts($('#relationship-emails\x20li\x20a')),'Phone':getListTexts($('#phone-view\x20li')),'Address':getAddress(),'Twitter':$('#twitter\x20li:first')['text'](),'WebSites':getLinkedInWebsites(),'ProfileURL':$('a.view-public-profile')['attr']('href'),'MemberID':getMemberId()};return console['log'](message),message;}function getFullName(){var sFullName=$('span.full-name')['text']();if(!sFullName)sFullName=$('#identity\x20a.name')['text']();if(!sFullName)sFullName=$('h1.pv-top-card-section__name')['text']();return sFullName;}function getPhoto(){var sPhoto=$('div.profile-picture\x20img')['attr']('src');if(!sPhoto)sPhoto=$('a.photo\x20>\x20img')['attr']('src');if(!sPhoto)sPhoto=$('.pv-top-card-section__image')['attr']('src');return sPhoto;}function getJobTitle(){var sJobTitle=$('p.title')['text']();if(!sJobTitle)sJobTitle=$('#identity\x20a.headline')['text']();if(!sJobTitle)sJobTitle=$('h2.pv-top-card-section__headline')['text']();return sJobTitle;}function getCompany(){var sCompany=getListTexts($('#overview-summary-current\x20li\x20a'));if(!sCompany)sCompany=$('h3.pv-top-card-section__company')['text']();return sCompany;}function getAddress(){var sAddress=getListTexts($('#address\x20li'));if(!sAddress)sAddress=$('h3.pv-top-card-section__location')['text']();return sAddress;}function getMemberId(){var scriptText=$('script:contains(memberId):first')['text']();if(scriptText){var match=/memberId\s*:\s*"?(\d+)"?/['exec'](scriptText);match&&(scriptText=match[0x1]);}if(!scriptText)scriptText='';return console['log']('getMemberId:\x20'+scriptText),scriptText;}function getListTexts($list){var texts='';return $list['each'](function(){texts+=$(this)['text']()+',';}),texts?texts['slice'](0x0,-0x1):texts;}function getLinkedInConnections(){var connections=$('div.member-connections\x20>\x20strong:first')['text'](),parts=connections['split']('+');return parts['length']===0x2&&parts[0x1]?parts[0x1]:connections;}function getLinkedInWebsites(){var $website=$('#website\x20li:first\x20a');if($website['length']){var urlEncoded=$website['attr']('href'),url=/url=(.+)&/['exec'](urlEncoded)[0x1];return decodeURIComponent(url);}return'';}