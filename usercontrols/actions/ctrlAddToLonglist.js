var ctrlAddToLonglist={'GridMenuID':'ctrlAddToLonglist-GridMenu','GridID':'ctrlAddToLonglist-DataGrid','KeyFieldId':'Requirement_RequirementId','Load':function(){TriSysSDK['FormMenus']['DrawGridMenu'](ctrlAddToLonglist['GridMenuID'],ctrlAddToLonglist['GridID']),ctrlAddToLonglist['LoadRequirementGrid']();},'Data':{'ListOf_Entity_Requirements':[]},'AddGridRecord':function(){TriSysApex['Pages']['RequirementForm']['OpenFindDialogue'](function(lRecordId){TriSysActions['EntityListManagement']['AddRecordIdToEntityList'](lRecordId,ctrlAddToLonglist['Data']['ListOf_Entity_Requirements']),ctrlAddToLonglist['LoadRequirementGrid']();});},'DeleteGridRecord':function(){var recordIds=TriSysSDK['Grid']['GetSelectedMultipleRowsFromGrid'](ctrlAddToLonglist['GridID'],ctrlAddToLonglist['KeyFieldId']);recordIds&&(TriSysActions['EntityListManagement']['RemoveRecordIdsFromEntityList'](recordIds,ctrlAddToLonglist['Data']['ListOf_Entity_Requirements']),ctrlAddToLonglist['LoadRequirementGrid']());},'LoadRequirementGrid':function(){var sEntityName='Requirement',criteria={'EntityName':sEntityName,'RecordList':ctrlAddToLonglist['Data']['ListOf_Entity_Requirements']},sJson=JSON['stringify'](criteria),columns=TriSysWeb['Pages']['Requirements']['Columns'];columns=TriSysSDK['Grid']['HideColumns'](columns,['Requirement_RequirementEntityType','RequirementContact_FullName','Location','Salary','Requirement_RequirementStatus','Requirement_UserName']);var fnPopulationByFunction={'API':'Requirements/List','Parameters':function(request){request['SearchTreeEnabled']=!![],request['SearchTreeJson']=sJson;},'DataTableFunction':function(response){return response['List'];}};ctrlAddToLonglist['LoadEntityGrid'](fnPopulationByFunction,columns);},'LoadEntityGrid':function(fnPopulationByFunction,columns){TriSysSDK['Grid']['RemoveCheckBoxRowSelectorAndCommandDrillDownColumns'](columns),TriSysSDK['Grid']['VirtualMode']({'Div':ctrlAddToLonglist['GridID'],'ID':ctrlAddToLonglist['GridID'],'Title':'','RecordsPerPage':TriSysApex['UserOptions']['RecordsPerPage'](),'PopulationByFunction':fnPopulationByFunction,'Columns':columns,'DrillDownFunction':null,'MultiRowSelect':!![],'ColumnFilters':!![],'Grouping':![]});},'Finish':function(){var selectedRows=TriSysSDK['Grid']['GetCheckedRows'](ctrlAddToLonglist['GridID']);if(!selectedRows||selectedRows['length']<=0x0){TriSysApex['UI']['ShowMessage']('Please\x20add\x20requirements\x20to\x20which\x20you\x20wish\x20to\x20add\x20this\x20contact\x20as\x20a\x20longlisted\x20candidate.');return;}var lstRequirementID=[];selectedRows['forEach'](function(selectedRow){var lRequirementId=selectedRow['Requirement_RequirementId'];lstRequirementID['push'](lRequirementId);});var lstContactID=TriSysActions['Data']['RecordIdentifierList'];ctrlAddToLonglist['SendContactsToMultipleRequirementLonglists'](lstContactID,lstRequirementID);},'SendContactsToMultipleRequirementLonglists':function(lstContactID,lstRequirementID){var LonglistCandidatesToRequirementsRequest={'RequirementIdList':lstRequirementID,'ContactIdList':lstContactID},payloadObject={};payloadObject['URL']='Vacancy/LonglistCandidatesToRequirements',payloadObject['OutboundDataPacket']=LonglistCandidatesToRequirementsRequest,payloadObject['InboundDataFunction']=function(LonglistCandidatesToRequirementsResponse){TriSysApex['UI']['HideWait']();if(LonglistCandidatesToRequirementsResponse){if(LonglistCandidatesToRequirementsResponse['Success']){TriSysActions['Invocation']['PostInvocationCompletion']();try{if(ctrlRequirementForm)ctrlRequirementForm['ReloadCandidateGrids']();}catch(e){}try{var sGrid='contactForm-RequirementsGrid';TriSysApex['Forms']['EntityForm']['unPopulateFormGrids']('Contact',sGrid),TriSysApex['Pages']['ContactForm']['LoadRequirementsGrid'](sGrid,null);}catch(e){}}else TriSysApex['UI']['ShowMessage'](LonglistCandidatesToRequirementsResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlAddToLonglist.SendContactsToMultipleRequirementLonglists:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Longlisting...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};$(document)['ready'](function(){ctrlAddToLonglist['Load']();});