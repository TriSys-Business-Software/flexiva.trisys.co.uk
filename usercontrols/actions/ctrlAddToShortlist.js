var ctrlAddToShortlist={'GridMenuID':'ctrlAddToShortlist-GridMenu','GridID':'ctrlAddToShortlist-DataGrid','KeyFieldId':'Requirement_RequirementId','Load':function(){TriSysSDK['FormMenus']['DrawGridMenu'](ctrlAddToShortlist['GridMenuID'],ctrlAddToShortlist['GridID']),ctrlAddToShortlist['LoadRequirementGrid']();},'Data':{'ListOf_Entity_Requirements':[]},'AddGridRecord':function(){TriSysApex['Pages']['RequirementForm']['OpenFindDialogue'](function(lRecordId){TriSysActions['EntityListManagement']['AddRecordIdToEntityList'](lRecordId,ctrlAddToShortlist['Data']['ListOf_Entity_Requirements']),ctrlAddToShortlist['LoadRequirementGrid']();});},'DeleteGridRecord':function(){var recordIds=TriSysSDK['Grid']['GetSelectedMultipleRowsFromGrid'](ctrlAddToShortlist['GridID'],ctrlAddToShortlist['KeyFieldId']);recordIds&&(TriSysActions['EntityListManagement']['RemoveRecordIdsFromEntityList'](recordIds,ctrlAddToShortlist['Data']['ListOf_Entity_Requirements']),ctrlAddToShortlist['LoadRequirementGrid']());},'LoadRequirementGrid':function(){var sEntityName='Requirement',criteria={'EntityName':sEntityName,'RecordList':ctrlAddToShortlist['Data']['ListOf_Entity_Requirements']},sJson=JSON['stringify'](criteria),columns=TriSysWeb['Pages']['Requirements']['Columns'];columns=TriSysSDK['Grid']['HideColumns'](columns,['Requirement_RequirementEntityType','RequirementContact_FullName','Location','Salary','Requirement_RequirementStatus','Requirement_UserName']);var fnPopulationByFunction={'API':'Requirements/List','Parameters':function(request){request['SearchTreeEnabled']=!![],request['SearchTreeJson']=sJson;},'DataTableFunction':function(response){return response['List'];}};ctrlAddToShortlist['LoadEntityGrid'](fnPopulationByFunction,columns);},'LoadEntityGrid':function(fnPopulationByFunction,columns){TriSysSDK['Grid']['RemoveCheckBoxRowSelectorAndCommandDrillDownColumns'](columns),TriSysSDK['Grid']['VirtualMode']({'Div':ctrlAddToShortlist['GridID'],'ID':ctrlAddToShortlist['GridID'],'Title':'','RecordsPerPage':TriSysApex['UserOptions']['RecordsPerPage'](),'PopulationByFunction':fnPopulationByFunction,'Columns':columns,'DrillDownFunction':null,'MultiRowSelect':!![],'ColumnFilters':!![],'Grouping':![]});},'Finish':function(){var selectedRows=TriSysSDK['Grid']['GetCheckedRows'](ctrlAddToShortlist['GridID']);if(!selectedRows||selectedRows['length']<=0x0){TriSysApex['UI']['ShowMessage']('Please\x20add\x20requirements\x20to\x20which\x20you\x20wish\x20to\x20add\x20this\x20contact\x20as\x20a\x20shortlisted\x20candidate.');return;}var lstRequirementID=[];selectedRows['forEach'](function(selectedRow){var lRequirementId=selectedRow['Requirement_RequirementId'];lstRequirementID['push'](lRequirementId);});var lstContactID=TriSysActions['Data']['RecordIdentifierList'];ctrlAddToShortlist['SendContactsToMultipleRequirementShortlists'](lstContactID,lstRequirementID);},'SendContactsToMultipleRequirementShortlists':function(lstContactID,lstRequirementID){var ShortlistCandidatesToRequirementsRequest={'RequirementIdList':lstRequirementID,'ContactIdList':lstContactID},payloadObject={};payloadObject['URL']='Vacancy/ShortlistCandidatesToRequirements',payloadObject['OutboundDataPacket']=ShortlistCandidatesToRequirementsRequest,payloadObject['InboundDataFunction']=function(ShortlistCandidatesToRequirementsResponse){TriSysApex['UI']['HideWait']();if(ShortlistCandidatesToRequirementsResponse){if(ShortlistCandidatesToRequirementsResponse['Success']){TriSysActions['Invocation']['PostInvocationCompletion']();try{if(ctrlRequirementForm)ctrlRequirementForm['ReloadCandidateGrids']();}catch(e){}try{var sGrid='contactForm-RequirementsGrid';TriSysApex['Forms']['EntityForm']['unPopulateFormGrids']('Contact',sGrid),TriSysApex['Pages']['ContactForm']['LoadRequirementsGrid'](sGrid,null);}catch(e){}}else TriSysApex['UI']['ShowMessage'](ShortlistCandidatesToRequirementsResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlAddToShortlist.SendContactsToMultipleRequirementShortlists:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Shortlisting...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};$(document)['ready'](function(){ctrlAddToShortlist['Load']();});