var ctrlInterested={'ClientTemplatesID':'ctrlInterested-ClientTemplate','CandidateTemplatesID':'ctrlInterested-CandidateTemplate','EditClientTemplateButtonID':'ctrlInterested-EditClientTemplate','EditCandidateTemplateButtonID':'ctrlInterested-EditCandidateTemplate','ClientSubjectID':'ctrlInterested-ClientSubject','CandidateSubjectID':'ctrlInterested-CandidateSubject','NoteHistoryID':'ctrlInterested-NoteHistory','FollowUpID':'ctrlInterested-FollowUp','Load':function(){if(TriSysActions['Invocation']['SingletonContactListCheck']('Interested','candidate'))return;var sInterested='Interested',sInterestedFolder=sInterested+'/';TriSysActions['MailMerge']['PopulateTemplates'](sInterested+'\x20Client',TriSysActions['MailMerge']['MasterTemplateFolder']+sInterestedFolder+TriSysActions['MailMerge']['ClientTemplatesFolder'],ctrlInterested['ClientTemplatesID'],'Client\x20Interested',ctrlInterested['EditClientTemplateButtonID']),TriSysActions['MailMerge']['PopulateTemplates'](sInterested+'\x20Candidate',TriSysActions['MailMerge']['MasterTemplateFolder']+sInterestedFolder+TriSysActions['MailMerge']['CandidateTemplatesFolder'],ctrlInterested['CandidateTemplatesID'],'Candidate\x20Interested',ctrlInterested['EditCandidateTemplateButtonID']),TriSysActions['NoteHistory']['Load'](ctrlInterested['NoteHistoryID']);var dtTheMorn=TriSysActions['FollowUp']['FollowUpDateTomorrow'](),dtFollowUp=new Date(moment(dtTheMorn)['add'](0x1,'days')),defaults={'CreateFollowUp':!![],'StartDateTime':dtFollowUp};TriSysActions['FollowUp']['Load'](ctrlInterested['FollowUpID'],defaults),TriSysActions['Persistence']['Read'](ctrlInterested['ReadPersistedSettingsCallback']);},'Finish':function(){var mySettings=ctrlInterested['GetSettings']();if(!mySettings)return;var NoteHistoryData=ctrlNoteHistory['Validation']();if(!NoteHistoryData)return;var FollowUpData=ctrlFollowUp['Validation']();if(!FollowUpData)return;ctrlInterested['SendActionDataToWebAPI'](mySettings['ClientTemplate'],mySettings['CandidateTemplate'],mySettings['ClientSubject'],mySettings['CandidateSubject'],NoteHistoryData,FollowUpData);},'SendActionDataToWebAPI':function(sClientTemplate,sCandidateTemplate,sClientSubject,sCandidateSubject,NoteHistoryData,FollowUpData){var CInterestedActionRequest={'ClientTemplate':sClientTemplate,'CandidateTemplate':sCandidateTemplate,'ClientSubject':sClientSubject,'CandidateSubject':sCandidateSubject,'ActionData':new TriSysActions['Invocation']['ActionData'](),'NoteHistory':NoteHistoryData,'FollowUp':FollowUpData},payloadObject={};payloadObject['URL']='Action/Interested',payloadObject['OutboundDataPacket']=CInterestedActionRequest,payloadObject['InboundDataFunction']=function(CInterestedActionResponse){TriSysApex['UI']['HideWait']();if(CInterestedActionResponse){if(CInterestedActionResponse['Success']){TriSysActions['Invocation']['PostInvocationCompletion']();if(CInterestedActionResponse['URL'])for(var i=0x0;i<CInterestedActionResponse['URL']['length'];i++){var sURL=CInterestedActionResponse['URL'][i];TriSysApex['ModalDialogue']['DocumentViewer']['DownloadAndOpen']('e-mail',sURL);}return;}else TriSysApex['UI']['ShowMessage'](CInterestedActionResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlInterested.SendActionDataToWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Saving\x20Interest...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'Configure':function(){var mySettings=ctrlInterested['GetSettings']();if(!mySettings)return;TriSysActions['Persistence']['Write'](mySettings);},'GetSettings':function(){var sError=null,sClientTemplate=TriSysActions['MailMerge']['GetTemplateFromCombo'](ctrlInterested['ClientTemplatesID']),sCandidateTemplate=TriSysActions['MailMerge']['GetTemplateFromCombo'](ctrlInterested['CandidateTemplatesID']),sClientSubject=$('#'+ctrlInterested['ClientSubjectID'])['val'](),sCandidateSubject=$('#'+ctrlInterested['CandidateSubjectID'])['val']();if(sError)return TriSysApex['UI']['ShowMessage'](sError),null;var mySettings={'ClientTemplate':sClientTemplate,'CandidateTemplate':sCandidateTemplate,'ClientSubject':sClientSubject,'CandidateSubject':sCandidateSubject,'NoteHistory':ctrlNoteHistory['Validation'](),'FollowUp':ctrlFollowUp['Validation']()};return mySettings;},'ReadPersistedSettingsCallback':function(mySettings){TriSysSDK['CShowForm']['SetTextInCombo'](ctrlInterested['ClientTemplatesID'],mySettings['ClientTemplate']),TriSysSDK['CShowForm']['SetTextInCombo'](ctrlInterested['CandidateTemplatesID'],mySettings['CandidateTemplate']),$('#'+ctrlInterested['ClientSubjectID'])['val'](mySettings['ClientSubject']),$('#'+ctrlInterested['CandidateSubjectID'])['val'](mySettings['CandidateSubject']),TriSysActions['PersistedSettingsSafeguard']['WaitUntilTaskControlsAreLoaded'](!![],!![],function(){ctrlNoteHistory['Reload'](mySettings['NoteHistory']),ctrlFollowUp['Reload'](mySettings['FollowUp']);});}};$(document)['ready'](function(){ctrlInterested['Load']();});