var ctrlUnAuthoriseTimesheet={'Load':function(){var sPlacement=$('#Timesheet_PlacementId')['val'](),sCandidate=$('#Timesheet_Candidate')['val'](),sPeriod=TriSysSDK['CShowForm']['GetTextFromCombo']('Timesheet_Period');$('#ctrlUnAuthoriseTimesheet-Placement')['html'](sPlacement),$('#ctrlUnAuthoriseTimesheet-Candidate')['html'](sCandidate),$('#ctrlUnAuthoriseTimesheet-Period')['html'](sPeriod);var bAuthorised=TriSysSDK['CShowForm']['GetCheckBoxValue']('TimesheetConfigFields_PaymentAuthorised');if(!bAuthorised){TriSysApex['UI']['CloseModalPopup']();var fnNotAuthorised=function(){TriSysApex['UI']['ShowMessage']('Timesheet\x20has\x20not\x20been\x20authorised.');};setTimeout(fnNotAuthorised,0x64);return;}},'Finish':function(){var bConfirmNotExportedToPayroll=TriSysSDK['CShowForm']['GetCheckBoxValue']('ctrlUnAuthoriseTimesheet-ConfirmNotExportedToPayroll');if(!bConfirmNotExportedToPayroll)return TriSysApex['UI']['ShowMessage']('You\x20must\x20confirm\x20in\x20order\x20to\x20proceed.'),![];var fnOpenTimesheetAgain=function(){TriSysApex['FormsManager']['OpenForm']('Timesheet',TriSysApex['Pages']['TimesheetForm']['TimesheetId']);},CTimesheetUnAuthoriseActionRequest={'TimesheetId':TriSysApex['Pages']['TimesheetForm']['TimesheetId']};ctrlUnAuthoriseTimesheet['SendRequestToWebAPI'](CTimesheetUnAuthoriseActionRequest,fnOpenTimesheetAgain);},'SendRequestToWebAPI':function(CTimesheetUnAuthoriseActionRequest,fnCallback){var payloadObject={};payloadObject['URL']='Action/TimesheetUnAuthorise',payloadObject['OutboundDataPacket']=CTimesheetUnAuthoriseActionRequest,payloadObject['InboundDataFunction']=function(CTimesheetUnAuthoriseActionResponse){TriSysApex['UI']['HideWait']();if(CTimesheetUnAuthoriseActionResponse){if(CTimesheetUnAuthoriseActionResponse['Success']){setTimeout(fnCallback,0x64),TriSysActions['Invocation']['PostInvocationCompletion']();return;}else TriSysApex['UI']['ShowMessage'](CTimesheetUnAuthoriseActionResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlUnAuthoriseTimesheet.SendRequestToWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Un-Authorising...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};$(document)['ready'](function(){ctrlUnAuthoriseTimesheet['Load']();});