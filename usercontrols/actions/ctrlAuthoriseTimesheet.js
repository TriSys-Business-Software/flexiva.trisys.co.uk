var ctrlAuthoriseTimesheet={'Load':function(){var sPlacement=$('#Timesheet_PlacementId')['val'](),sCandidate=$('#Timesheet_Candidate')['val'](),sPeriod=TriSysSDK['CShowForm']['GetTextFromCombo']('Timesheet_Period');$('#ctrlAuthoriseTimesheet-Placement')['html'](sPlacement),$('#ctrlAuthoriseTimesheet-Candidate')['html'](sCandidate),$('#ctrlAuthoriseTimesheet-Period')['html'](sPeriod);var bAuthorised=TriSysSDK['CShowForm']['GetCheckBoxValue']('TimesheetConfigFields_PaymentAuthorised');if(bAuthorised){TriSysApex['UI']['CloseModalPopup']();var fnAuthorised=function(){TriSysApex['UI']['ShowMessage']('Timesheet\x20has\x20already\x20been\x20authorised.');};setTimeout(fnAuthorised,0x64);return;}},'Finish':function(){var bConfirmExportToPayroll=TriSysSDK['CShowForm']['GetCheckBoxValue']('ctrlAuthoriseTimesheet-ConfirmExportToPayroll');if(!bConfirmExportToPayroll)return TriSysApex['UI']['ShowMessage']('You\x20must\x20confirm\x20in\x20order\x20to\x20proceed.'),![];var fnOpenTimesheetAgain=function(){TriSysApex['FormsManager']['OpenForm']('Timesheet',TriSysApex['Pages']['TimesheetForm']['TimesheetId']);},CTimesheetAuthoriseActionRequest={'TimesheetId':TriSysApex['Pages']['TimesheetForm']['TimesheetId']};ctrlAuthoriseTimesheet['SendRequestToWebAPI'](CTimesheetAuthoriseActionRequest,fnOpenTimesheetAgain);},'SendRequestToWebAPI':function(CTimesheetAuthoriseActionRequest,fnCallback){var payloadObject={};payloadObject['URL']='Action/TimesheetAuthorise',payloadObject['OutboundDataPacket']=CTimesheetAuthoriseActionRequest,payloadObject['InboundDataFunction']=function(CTimesheetAuthoriseActionResponse){TriSysApex['UI']['HideWait']();if(CTimesheetAuthoriseActionResponse){if(CTimesheetAuthoriseActionResponse['Success']){setTimeout(fnCallback,0x64),TriSysActions['Invocation']['PostInvocationCompletion']();return;}else TriSysApex['UI']['ShowMessage'](CTimesheetAuthoriseActionResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['HideWait'](),TriSysApex['UI']['errorAlert']('ctrlAuthoriseTimesheet.SendRequestToWebAPI:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysApex['UI']['ShowWait'](null,'Authorising...'),TriSysAPI['Data']['PostToWebAPI'](payloadObject);}};$(document)['ready'](function(){ctrlAuthoriseTimesheet['Load']();});