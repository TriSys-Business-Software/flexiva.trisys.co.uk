var ctrlRSSFeed={'TileName':'RssFeed','LoadedInTile':function(sTileID,persistedSettings){var sPrefix=sTileID+'-';try{var sMenuID='BBC-News-UK',sURL='';sMenuID=ctrlDashboard['Persistence']['GetSettingValue'](persistedSettings,ctrlRSSFeed['TileName'],sMenuID);var tile=ctrlDashboard['GetTileByNameFromJSONFile'](ctrlRSSFeed['TileName']);if(tile)for(var i=0x0;i<tile['MenuItems']['length'];i++){var menuItem=tile['MenuItems'][i];if(menuItem['ID']==sMenuID){var sLogo=menuItem['Settings']['Image'];$('#'+sPrefix+'rss-image')['attr']('src',sLogo),sURL=menuItem['Settings']['URL'];break;}}var tdWidth=$('#'+sPrefix+'td-rss-ticker')['width']();$('.rss-ticker-marquee')['width'](tdWidth),ctrlRSSFeed['Load'](sTileID,sPrefix,null,sMenuID,sURL);}catch(e){}},'Load':function(sTileID,sPrefix,persistedSettings,sMenuID,sURL){var iMilliseconds=0x4e20,parameters={'duration':iMilliseconds,'gap':0x64,'delayBeforeStart':0x0,'direction':'left'},sMarquee=sPrefix+'rss-ticker-marquee',fnSecondAndBeyond=function(){$(this)['marquee'](parameters);},fnFirstInitialisation=function(){$('#'+sMarquee)['bind']('beforeStarting',function(){})['bind']('finished',function(){})['marquee'](parameters);},fnDataFeed=function(){try{ctrlRSSFeed['GetRSSData'](sTileID,fnFirstInitialisation,sMarquee,sMenuID,sURL);}catch(e){}};fnDataFeed(),setInterval(fnDataFeed,0xea60);},'GetRSSData':function(sTileID,fnCallback,sDiv,sMenuID,sURL){var iNumberOfEntries=0x14;$['ajax']({'url':'https://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num='+iNumberOfEntries+'&callback=?&q='+encodeURIComponent(sURL),'dataType':'json','success':function(data){if(!data)return;if(!data['responseData'])return;var rssData={'data':[]},feed=data['responseData']['feed'];if(!feed)return;var sCaption=feed['title']+'.\x20Last\x20read:\x20'+moment()['format']('HH:mm\x20dddd\x20DD\x20MMMM\x20YYYY');ctrlDashboard['SetCaptionModal']['SetTileCaption'](sTileID,sCaption);var rssData={'data':[]};for(i=0x0;i<feed['entries']['length'];i++){var entry=feed['entries'][i],sTitle=entry['title'],sLink=entry['link'],bAdd=sTitle&&sLink;if(bAdd){var rssFeed={'Position':i+0x1,'Title':sTitle,'Link':sLink};rssData['data']['push'](rssFeed);}if(rssData['data']['length']>=0x14)break;}ctrlRSSFeed['PopulateRSSTicker'](rssData,fnCallback,sDiv);}});},'PopulateRSSTicker':function(rssData,fnCallback,sDiv){try{var sTemplate=TriSysApex['Constants']['UserControlFolder']+'dashboard/templates/rss-feed.ejs'+TriSysApex['FormsManager']['pageURLTimestampArgumentsToForceNoCache'](),result=new EJS({'url':sTemplate})['render'](rssData);document['getElementById'](sDiv)['innerHTML']=result,fnCallback();}catch(e){var sError=e;}},'ConfigureMenuButtonClick':function(sID,sTileID){var sPrefix=sTileID+'-',persistedSetting={'Setting':ctrlRSSFeed['TileName'],'Value':sID};if(persistedSetting){ctrlDashboard['Persistence']['SaveTileSetting'](sTileID,persistedSetting);var persistedSettings=[persistedSetting];ctrlRSSFeed['LoadedInTile'](sTileID,persistedSettings);}}};