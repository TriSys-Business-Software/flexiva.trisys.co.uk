var ctrlFinishers={'LoadedInTile':function(sTileID,persistedSettings){var sPrefix=sTileID+'-',fnCompleted=TriSysPhoneGap['PhoneFriendlyDashboardTile'](sPrefix,'ctrlFinishers');try{ctrlFinishers['Load'](sPrefix,persistedSettings,sTileID,fnCompleted);}catch(e){}},'Load':function(sPrefix,persistedSettings,sTileID,fnCompleted){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials'](),lUserId=userCredentials['LoggedInUser']['UserId'],now=moment()['format']('YYYY-MM-DD'),CFinishersRequest={'DateTime':now},payloadObject={};payloadObject['URL']='Placements/Finishers',payloadObject['OutboundDataPacket']=CFinishersRequest,payloadObject['InboundDataFunction']=function(CFinishersResponse){fnCompleted(!![]);if(CFinishersResponse){if(CFinishersResponse['Success']){var sCaption=CFinishersResponse['Placements']['length']+'\x20Finisher'+(CFinishersResponse['Placements']['length']==0x1?'':'s');ctrlDashboard['SetCaptionModal']['SetTileCaption'](sTileID,sCaption),ctrlFinishers['RenderPlacements'](CFinishersResponse['Placements']),fnCompleted(![],CFinishersResponse['Placements']['length']>0x0);return;}else TriSysApex['Logging']['LogMessage'](CFinishersResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['Logging']['LogMessage']('ctrlFinishers.Load:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'RenderPlacements':function(placements){var placementData=[];for(var i=0x0;i<placements['length'];i++){var placement=placements[i],dtStartDate=moment(placement['StartDate'])['format']('DD\x20MMM\x20YYYY'),dtEndDate='';if(placement['EndDate'])dtEndDate=moment(placement['EndDate'])['format']('DD\x20MMM\x20YYYY');var placementObject={'PlacementId':placement['PlacementId'],'Reference':placement['Reference'],'JobTitle':placement['JobTitle'],'Type':placement['Type'],'StartDate':dtStartDate,'EndDate':dtEndDate,'StartAndEndDates':dtStartDate+(placement['EndDate']?'\x20to\x20'+dtEndDate:''),'CandidateId':placement['CandidateContactId'],'Candidate':placement['CandidateName'],'Company':placement['CompanyName'],'Contact':placement['ClientName'],'Status':placement['Status']};placementData['push'](placementObject);}var directives={'hyperlink':{'onclick':function(params){var sHyperlink='TriSysApex.FormsManager.OpenForm(\x27Placement\x27,\x20'+this['PlacementId']+')',sField=params['element']['firstChild']['className'];switch(sField){case'Candidate':sHyperlink='TriSysApex.FormsManager.OpenForm(\x27Contact\x27,\x20'+this['CandidateId']+')';break;}return sHyperlink;}}};$('.finishers')['render'](placementData,directives);}};