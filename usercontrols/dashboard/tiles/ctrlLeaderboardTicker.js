var ctrlLeaderboardTicker={'LoadedInTile':function(sTileID,persistedSettings){var sPrefix=sTileID+'-';if(TriSysPhoneGap['ifPhoneHideDashboardTile'](sTileID))return;try{ctrlLeaderboardTicker['Load'](sPrefix,persistedSettings);}catch(e){}},'Load':function(sPrefix,persistedSettings){var iMilliseconds=0x2328,parameters={'duration':iMilliseconds,'gap':0x64,'delayBeforeStart':0x0,'direction':'left'},sMarquee=sPrefix+'leaderboard-ticker-marquee',fnSecondAndBeyond=function(){$(this)['marquee'](parameters);},fnFirstInitialisation=function(){$('#'+sMarquee)['bind']('beforeStarting',function(){})['bind']('finished',function(){})['marquee'](parameters);},bAllTime=ctrlDashboard['Persistence']['GetSettingValue'](persistedSettings,'AllTime',![]);ctrlLeaderboardTicker['GetLeaderboardData'](fnFirstInitialisation,sMarquee,bAllTime);},'GetLeaderboardData':function(fnCallback,sDiv,bAllTime){var fnPopulationByFunction={'API':'DashboardMetric/LeaderboardTicker','Parameters':function(request){request['AllTime']=bAllTime;},'DataTableFunction':function(response){return response['List'];}},fnProcessDataTable=function(dataTable){if(TriSysApex['Constants']['ShowDummyDashboardData'])dataTable=ctrlLeaderboardTicker['DummyDataTable']();var leaderboardArray={'LeaderboardData':[]},dt=dataTable;for(var i=0x0;i<dt['length'];i++){var dr=dt[i],fTotalProfit=dr['TotalProfit'],iUserId=dr['UserId'],sUserName=dr['UserName'],sFormattedCurrency=TriSysSDK['Controls']['CurrencyAmount']['DefaultCurrencySymbol']()+TriSysSDK['Numbers']['Format'](fTotalProfit,0x0),sUserPhoto=TriSysApex['Cache']['UsersManager']['Photo'](iUserId),leader={'Position':i+0x1,'AmountWithCurrency':sFormattedCurrency,'UserName':sUserName,'UserPhoto':sUserPhoto};leaderboardArray['LeaderboardData']['push'](leader);}try{var sTemplate=TriSysApex['Constants']['UserControlFolder']+'dashboard/templates/leaderboard-ticker.ejs'+TriSysApex['FormsManager']['pageURLTimestampArgumentsToForceNoCache'](),result=new EJS({'url':sTemplate})['render'](leaderboardArray);document['getElementById'](sDiv)['innerHTML']=result,fnCallback();}catch(e){var sError=e;}};TriSysSDK['Database']['GetDataSetFromFunction'](fnPopulationByFunction,fnProcessDataTable);},'ConfigureMenuButtonClick':function(sID,sTileID){var sPrefix=sTileID+'-',persistedSetting=null,AllTime='AllTime';if(sID['indexOf'](AllTime)==0x0)persistedSetting={'Setting':'AllTime','Value':!![]};persistedSetting&&(ctrlDashboard['Persistence']['SaveTileSetting'](sTileID,persistedSetting),ctrlLeaderboardTicker['Load'](sPrefix,[persistedSetting]));},'DummyDataTable':function(){var dt=[];return $['each'](TriSysApex['Cache']['Users'](),function(index,user){if(user['Photo']){var fAmount=TriSysSDK['Miscellaneous']['RandomNumber'](0x0,0x61a8),dr={'UserId':user['UserId'],'UserName':user['FullName'],'TotalProfit':fAmount};dt['push'](dr);}}),dt['sort'](function(a,b){return b['TotalProfit']-a['TotalProfit'];}),dt;}};