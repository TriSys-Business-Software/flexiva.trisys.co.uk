var ctrlActiveRequirements={'Setting_AllUsers':'AllUsers','LoadedInTile':function(sTileID,persistedSettings){var sPrefix=sTileID+'-',sSpinnerID=sPrefix+'wait-spinner';TriSysSDK['WaitSpinner']['Load'](sSpinnerID,0xc8);var fnHideSpinner=function(){$('#'+sSpinnerID)['hide']();};TriSysPhoneGap['PhoneFriendlyDashboardTile'](sPrefix,'ctrlActiveRequirements');try{ctrlActiveRequirements['Load'](sPrefix,persistedSettings,sTileID,fnHideSpinner);}catch(e){}},'Load':function(sPrefix,persistedSettings,sTileID,fnCompleted){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials'](),lUserId=userCredentials['LoggedInUser']['UserId'],bAllUsers=ctrlDashboard['Persistence']['GetSettingValue'](persistedSettings,ctrlActiveRequirements['Setting_AllUsers'],![]),now=moment()['format']('YYYY-MM-DD'),CLiveRequirementsRequest={'DateTime':now,'AllUsers':bAllUsers},payloadObject={};payloadObject['URL']='Vacancies/LiveRequirementsMetrics',payloadObject['OutboundDataPacket']=CLiveRequirementsRequest,payloadObject['InboundDataFunction']=function(CLiveRequirementsResponse){fnCompleted(!![]);if(CLiveRequirementsResponse){if(CLiveRequirementsResponse['Success']){var sCaption=CLiveRequirementsResponse['Requirements']['length']+'\x20Live/Active\x20Requirement'+(CLiveRequirementsResponse['Requirements']['length']==0x1?'':'s');ctrlDashboard['SetCaptionModal']['SetTileCaption'](sTileID,sCaption),ctrlActiveRequirements['RenderVacancies'](CLiveRequirementsResponse['Requirements']),fnCompleted(![],CLiveRequirementsResponse['Requirements']['length']>0x0);return;}else TriSysApex['Logging']['LogMessage'](CLiveRequirementsResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){console['log']('ctrlActiveRequirements.Load\x20:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'RenderVacancies':function(vacancies){var vacancyData=[];for(var i=0x0;i<vacancies['length'];i++){var vacancy=vacancies[i],dtStartDate=moment(vacancy['EarliestStartDate'])['format']('DD\x20MMM\x20YYYY'),dtInitiatedDate=moment(vacancy['Initiated'])['format']('DD\x20MMM\x20YYYY'),dtExpectedEndDate='';if(vacancy['ExpectedEndDate'])dtExpectedEndDate=moment(vacancy['ExpectedEndDate'])['format']('DD\x20MMM\x20YYYY');var vacancyObject={'RequirementId':vacancy['RequirementId'],'Reference':vacancy['Reference'],'JobTitle':vacancy['JobTitle'],'Type':vacancy['Type'],'StartDate':dtStartDate,'InitiatedDate':dtInitiatedDate+'\x20('+vacancy['SinceInitiatedComment']+'\x20ago)','StartAndExpectedEndDates':dtStartDate+(vacancy['ExpectedEndDate']?'\x20to\x20'+dtExpectedEndDate:''),'Salary':vacancy['Salary'],'Company':vacancy['CompanyName'],'Contact':vacancy['ClientName'],'Status':vacancy['Status'],'ShortlistedCount':vacancy['Shortlisted'],'CalledCount':vacancy['Called'],'CVSendCount':vacancy['CVsSent'],'InterviewCount':vacancy['Interviews'],'OfferCount':vacancy['Offers'],'RejectCount':vacancy['Rejected'],'PlacedCount':vacancy['Placed']};vacancyData['push'](vacancyObject);}var fnShortlistedCount=function(){var sHTML='';if(this['ShortlistedCount']>0x0||this['CalledCount']>0x0||this['CVSendCount']>0x0||this['InterviewCount']>0x0||this['OfferCount']>0x0||this['RejectCount']>0x0||this['PlacedCount']>0x0)sHTML='<span\x20class=\x22badge\x20progress-bar-danger\x22\x20style=\x22margin-top:\x203px;\x22\x20title=\x22Shortlisted\x22>'+this['ShortlistedCount']+'</span>';return sHTML;},fnCalledCount=function(){var sHTML='';if(this['CalledCount']>0x0||this['CVSendCount']>0x0||this['InterviewCount']>0x0||this['OfferCount']>0x0||this['RejectCount']>0x0||this['PlacedCount']>0x0)sHTML='<span\x20class=\x22badge\x20progress-bar-warning\x22\x20style=\x22margin-top:\x203px;\x22\x20title=\x22Called\x22>'+this['CalledCount']+'</span>';return sHTML;},fnCVSendCount=function(){var sHTML='';if(this['CVSendCount']>0x0||this['InterviewCount']>0x0||this['OfferCount']>0x0||this['RejectCount']>0x0||this['PlacedCount']>0x0)sHTML='<span\x20class=\x22badge\x20progress-bar-info\x22\x20style=\x22margin-top:\x203px;\x22\x20title=\x22CV\x27s\x20Sent\x22>'+this['CVSendCount']+'</span>';return sHTML;},fnInterviewCount=function(){var sHTML='';if(this['InterviewCount']>0x0||this['OfferCount']>0x0||this['RejectCount']>0x0||this['PlacedCount']>0x0)sHTML='<span\x20class=\x22badge\x22\x20style=\x22background-color:\x20pink;\x20\x20color:\x20black;\x20margin-top:\x203px;\x22\x20title=\x22Interviews\x22\x20>'+this['InterviewCount']+'</span>';return sHTML;},fnOfferCount=function(){var sHTML='';if(this['OfferCount']>0x0||this['RejectCount']>0x0||this['PlacedCount']>0x0)sHTML='<span\x20class=\x22badge\x22\x20style=\x22background-color:\x20saddlebrown;\x20margin-top:\x203px;\x22\x20title=\x22Offers\x22>'+this['OfferCount']+'</span>';return sHTML;},fnRejectedCount=function(){var sHTML='';if(this['RejectCount']>0x0||this['PlacedCount']>0x0)sHTML='<span\x20class=\x22badge\x22\x20style=\x22background-color:\x20purple;\x20margin-top:\x203px;\x22\x20title=\x22Rejected\x22\x20>'+this['RejectCount']+'</span>';return sHTML;},fnPlacedCount=function(){var sHTML='';if(this['PlacedCount']>0x0)sHTML='<span\x20class=\x22badge\x22\x20style=\x22background-color:\x20darkolivegreen;\x20margin-top:\x203px;\x22\x20title=\x22Placed\x22\x20>'+this['PlacedCount']+'</span>';return sHTML;},directives={'hyperlink':{'onclick':function(params){return'TriSysApex.FormsManager.OpenForm(\x27Requirement\x27,\x20'+this['RequirementId']+')';}},'ShortlistedCount':{'html':fnShortlistedCount},'CalledCount':{'html':fnCalledCount},'CVSendCount':{'html':fnCVSendCount},'InterviewCount':{'html':fnInterviewCount},'OfferCount':{'html':fnOfferCount},'RejectCount':{'html':fnRejectedCount},'PlacedCount':{'html':fnPlacedCount}};$('.live-vacancies')['render'](vacancyData,directives);},'ConfigureMenuButtonClick':function(sID,sTileID){var persistedSetting=null;if(sID['indexOf']('MyVacanciesOnly')==0x0)persistedSetting={'Setting':ctrlActiveRequirements['Setting_AllUsers'],'Value':![]};if(sID['indexOf']('EveryonesVacancies')==0x0)persistedSetting={'Setting':ctrlActiveRequirements['Setting_AllUsers'],'Value':!![]};if(persistedSetting){ctrlDashboard['Persistence']['SaveTileSetting'](sTileID,persistedSetting);var persistedSettings=[persistedSetting];ctrlActiveRequirements['LoadedInTile'](sTileID,persistedSettings);}}};