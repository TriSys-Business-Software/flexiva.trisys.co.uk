var ctrlUpcomingInterviews={'Setting_AllUsers':'AllUsers','LoadedInTile':function(sTileID,persistedSettings){var sPrefix=sTileID+'-',fnCompleted=TriSysPhoneGap['PhoneFriendlyDashboardTile'](sPrefix,'ctrlUpcomingInterviews');try{ctrlUpcomingInterviews['Load'](sPrefix,persistedSettings,sTileID,fnCompleted);}catch(e){}},'Load':function(sPrefix,persistedSettings,sTileID,fnCompleted){var userCredentials=TriSysApex['LoginCredentials']['UserCredentials'](),lUserId=userCredentials['LoggedInUser']['UserId'],bAllUsers=ctrlDashboard['Persistence']['GetSettingValue'](persistedSettings,ctrlUpcomingInterviews['Setting_AllUsers'],![]),now=moment()['format']('YYYY-MM-DD'),CInterviewsRequest={'DateTime':now,'DaysInFuture':0x7,'AllUsers':bAllUsers},payloadObject={};payloadObject['URL']='Task/Interviews',payloadObject['OutboundDataPacket']=CInterviewsRequest,payloadObject['InboundDataFunction']=function(CInterviewsResponse){fnCompleted(!![]);if(CInterviewsResponse){if(CInterviewsResponse['Success']){var sCaption=CInterviewsResponse['Interviews']['length']+'\x20Upcoming\x20Interview'+(CInterviewsResponse['Interviews']['length']==0x1?'':'s');ctrlDashboard['SetCaptionModal']['SetTileCaption'](sTileID,sCaption),ctrlUpcomingInterviews['RenderInterviews'](CInterviewsResponse['Interviews']),fnCompleted(![],CInterviewsResponse['Interviews']['length']>0x0);return;}else TriSysApex['Logging']['LogMessage'](CInterviewsResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){console['log']('ctrlUpcomingInterviews.Load\x20:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'RenderInterviews':function(interviews){var interviewData=[];for(var i=0x0;i<interviews['length'];i++){var interview=interviews[i],dtInterviewDate=moment(interview['StartDate'])['format']('HH:mm')+'\x20@\x20'+moment(interview['StartDate'])['format']('dddd\x20DD\x20MMMM\x20YYYY'),sMapURL='',interviewObject={'RequirementId':interview['RequirementId'],'Reference':interview['Reference'],'JobTitle':interview['JobTitle'],'DateTime':dtInterviewDate,'Company':interview['CompanyName'],'Contact':interview['ContactName'],'Candidate':interview['CandidateName'],'CandidateId':interview['CandidateId'],'Stage':interview['Stage'],'Location':interview['Location'],'PostCode':interview['PostCode']};interviewData['push'](interviewObject);}var directives={'hyperlink':{'onclick':function(params){var sHyperlink='TriSysApex.FormsManager.OpenForm(\x27Requirement\x27,\x20'+this['RequirementId']+')',sField=params['element']['firstChild']['className'];switch(sField){case'Candidate':sHyperlink='TriSysApex.FormsManager.OpenForm(\x27Contact\x27,\x20'+this['CandidateId']+')';break;case'Location':var sPostCode=this['PostCode'];if(!sPostCode)sPostCode=this['Location'];sHyperlink='TriSysPhoneGap.OpenMap(\x27'+sPostCode+'\x27)';break;}return sHyperlink;}}};$('.interviews')['render'](interviewData,directives);},'ConfigureMenuButtonClick':function(sID,sTileID){var persistedSetting=null;if(sID['indexOf']('MyInterviewsOnly')==0x0)persistedSetting={'Setting':ctrlUpcomingInterviews['Setting_AllUsers'],'Value':![]};if(sID['indexOf']('EveryonesInterviews')==0x0)persistedSetting={'Setting':ctrlUpcomingInterviews['Setting_AllUsers'],'Value':!![]};if(persistedSetting){ctrlDashboard['Persistence']['SaveTileSetting'](sTileID,persistedSetting);var persistedSettings=[persistedSetting];ctrlUpcomingInterviews['LoadedInTile'](sTileID,persistedSettings);}}};