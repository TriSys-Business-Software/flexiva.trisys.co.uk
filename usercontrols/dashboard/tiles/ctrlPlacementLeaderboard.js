var ctrlPlacementLeaderboard={'LoadedInTile':function(sTileID,persistedSettings){var sPrefix=sTileID+'-';try{ctrlPlacementLeaderboard['Load'](sPrefix,persistedSettings);}catch(e){}},'Load':function(sPrefix,persistedSettings){var sDiv=sPrefix+'placement-leaderboard-ejs',bPermanent=ctrlDashboard['Persistence']['GetSettingValue'](persistedSettings,'Permanent',![]),bAllTime=ctrlDashboard['Persistence']['GetSettingValue'](persistedSettings,'AllTime',![]),fnPopulationByFunction={'API':'DashboardMetric/PlacementLeaderboard','Parameters':function(request){request['Permanent']=bPermanent,request['AllTime']=bAllTime;},'DataTableFunction':function(response){return response['List'];}},fnProcessDataTable=function(dt){dt&&ctrlPlacementLeaderboard['DisplayDataInTable'](dt,!bPermanent,sDiv);};TriSysSDK['Database']['GetDataSetFromFunction'](fnPopulationByFunction,fnProcessDataTable);},'DisplayDataInTable':function(dt,bContractTemp,sDiv){var iTop=0xa;if(dt){var leaderboardArray={'LeaderboardData':[]};for(var i=0x0;i<dt['length'];i++){if(i>=iTop)break;var dr=dt[i],fAmountInPounds=dr['AmountInPounds'],iUserId=dr['UserId'],sUserName=dr['UserName'],sFormattedCurrency=TriSysSDK['Controls']['CurrencyAmount']['DefaultCurrencySymbol']()+TriSysSDK['Numbers']['Format'](fAmountInPounds,0x0),sUserPhoto=TriSysApex['Cache']['UsersManager']['Photo'](iUserId),leader={'Position':i+0x1,'AmountWithCurrency':sFormattedCurrency,'UserName':sUserName,'UserPhoto':sUserPhoto};leaderboardArray['LeaderboardData']['push'](leader);}try{var sTemplate=TriSysApex['Constants']['UserControlFolder']+'dashboard/templates/placement-leaderboard.ejs'+TriSysApex['FormsManager']['pageURLTimestampArgumentsToForceNoCache'](),result=new EJS({'url':sTemplate})['render'](leaderboardArray);bContractTemp&&(result=result['replace'](/PERMANENT/g,'CONTRACT')),document['getElementById'](sDiv)['innerHTML']=result;}catch(e){var sError=e;}}},'ConfigureMenuButtonClick':function(sID,sTileID){var sPrefix=sTileID+'-',persistedSettingPermanent={'Setting':'Permanent','Value':![]};ctrlDashboard['Persistence']['SaveTileSetting'](sTileID,persistedSettingPermanent);var persistedSetting=null,Permanent='Permanent';if(sID['indexOf'](Permanent)==0x0)persistedSetting={'Setting':'Permanent','Value':!![]};var ContractTemp='ContractTemp';if(sID['indexOf'](ContractTemp)==0x0)persistedSetting={'Setting':'Permanent','Value':![]};var AllTime='AllTime';if(sID['indexOf'](AllTime)==0x0)persistedSetting={'Setting':'AllTime','Value':!![]};persistedSetting&&(ctrlDashboard['Persistence']['SaveTileSetting'](sTileID,persistedSetting),ctrlPlacementLeaderboard['Load'](sPrefix,[persistedSetting]));},'DummyDataTable':function(){var dt=[];return $['each'](TriSysApex['Cache']['Users'](),function(index,user){if(user['Photo']){var fAmount=TriSysSDK['Miscellaneous']['RandomNumber'](0x3e8,0x61a8),dr={'UserId':user['UserId'],'UserName':user['FullName'],'AmountInPounds':fAmount};dt['push'](dr);}}),dt['sort'](function(a,b){return b['AmountInPounds']-a['AmountInPounds'];}),dt;}};