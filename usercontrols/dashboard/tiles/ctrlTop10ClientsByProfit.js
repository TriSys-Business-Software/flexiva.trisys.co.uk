var ctrlTop10ClientsByProfit={'LoadedInTile':function(sTileID,persistedSettings){var sPrefix=sTileID+'-';try{ctrlTop10ClientsByProfit['Load'](sPrefix,persistedSettings);}catch(e){}},'Load':function(sPrefix,persistedSettings){var payloadObject={};payloadObject['URL']='DashboardMetric/Top10ClientsByProfit',payloadObject['OutboundDataPacket']=null,payloadObject['InboundDataFunction']=function(data){var CDashboardMetricsTop10ClientsByProfitResponse=data;if(CDashboardMetricsTop10ClientsByProfitResponse){if(CDashboardMetricsTop10ClientsByProfitResponse['Success'])ctrlTop10ClientsByProfit['DisplayMetrics'](CDashboardMetricsTop10ClientsByProfitResponse['Clients'],sPrefix);else TriSysApex['Logging']['LogMessage'](CDashboardMetricsTop10ClientsByProfitResponse['ErrorMessage']);}},payloadObject['ErrorHandlerFunction']=function(request,status,error){TriSysApex['UI']['errorAlert']('ctrlTop10ClientsByProfit.Load:\x20'+status+':\x20'+error+'.\x20responseText:\x20'+request['responseText']);},TriSysAPI['Data']['PostToWebAPI'](payloadObject);},'DisplayMetrics':function(lstCDashboardMetricClientsByProfit,sPrefix){if(!lstCDashboardMetricClientsByProfit)return;ctrlTop10ClientsByProfit['DrawTable'](lstCDashboardMetricClientsByProfit,sPrefix),ctrlTop10ClientsByProfit['DrawChart'](lstCDashboardMetricClientsByProfit,sPrefix);},'DrawTable':function(lstCDashboardMetricClientsByProfit,sPrefix){var sDiv=sPrefix+'top-10-clients-by-profit-ejs',EJSArray={'Top10ClientData':[]};for(var i=0x0;i<lstCDashboardMetricClientsByProfit['length'];i++){var client=lstCDashboardMetricClientsByProfit[i];client['Position']=i+0x1,client['AmountWithCurrency']=TriSysSDK['Controls']['CurrencyAmount']['DefaultCurrencySymbol']()+TriSysSDK['Numbers']['Format'](client['TotalProfit'],0x0),client['LastPlacementDate']=moment(client['LastStartDate'])['format']('DD\x20MMM\x20YYYY'),EJSArray['Top10ClientData']['push'](client);}try{var sTemplate=TriSysApex['Constants']['UserControlFolder']+'dashboard/templates/top-10-clients-by-profit.ejs'+TriSysApex['FormsManager']['pageURLTimestampArgumentsToForceNoCache'](),result=new EJS({'url':sTemplate})['render'](EJSArray);document['getElementById'](sDiv)['innerHTML']=result;}catch(e){var sError=e;}},'DrawChart':function(lstCDashboardMetricClientsByProfit,sPrefix){var sChart=sPrefix+'top-10-clients-by-profit-chart',profitData=[],numPlacementsData=[],categories=[],iMaxPlacements=0x0;for(var iCompany=0x0;iCompany<lstCDashboardMetricClientsByProfit['length'];iCompany++){var client=lstCDashboardMetricClientsByProfit[iCompany];profitData['push'](client['TotalProfit']),numPlacementsData['push'](client['NumberOfPlacements']),categories['push'](client['CompanyName']);if(client['NumberOfPlacements']>iMaxPlacements)iMaxPlacements=client['NumberOfPlacements'];}var labelParameters={'PreSymbol':TriSysSDK['Controls']['CurrencyAmount']['DefaultCurrencySymbol'](),'PostSymbol':null,'DecimalPlaces':0x0,'Skip':0x1};$('#'+sChart)['kendoChart']({'chartArea':{'height':0x1c2},'legend':{'position':'top','labels':{'font':TriSysSDK['KendoUICharts']['Font']}},'series':[{'type':'column','name':'Profit\x20To\x20Date','data':profitData},{'type':'line','name':'Number\x20of\x20Placements','data':numPlacementsData,'axis':'Number\x20of\x20Placements'}],'seriesColors':[TriSysProUI['BackColour'](),TriSysProUI['NavBarInverseColour']()],'valueAxes':[{'labels':TriSysSDK['KendoUICharts']['ValueAxes']['Labels'](labelParameters),'line':{'visible':![]}},{'name':'Number\x20of\x20Placements','title':{'text':'Number\x20of\x20Placements','font':'10px'},'labels':{'format':'{0}'},'line':{'visible':![]},'min':0x0,'max':iMaxPlacements+0xa}],'categoryAxis':{'categories':categories,'line':{'visible':![]},'labels':{'padding':{'top':0x0},'rotation':-0x5a,'font':TriSysSDK['KendoUICharts']['Font']},'axisCrossingValues':[0x0,0xa]},'tooltip':{'visible':!![],'template':'#=\x20category\x20#:\x20#=\x20series.name\x20#:\x20'+'#=\x20TriSysSDK.Numbers.Format(value,\x200)\x20#'}});}};